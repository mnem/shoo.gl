var Zepto=function(){function e(e){return null==e?String(e):j[X.call(e)]||"object"}function t(t){return"function"==e(t)}function i(e){return null!=e&&e==e.window}function r(e){return null!=e&&e.nodeType==e.DOCUMENT_NODE}function n(t){return"object"==e(t)}function o(e){return n(e)&&!i(e)&&Object.getPrototypeOf(e)==Object.prototype}function s(e){return e instanceof Array}function a(e){return"number"==typeof e.length}function l(e){return H.call(e,function(e){return null!=e})}function h(e){return e.length>0?R.fn.concat.apply([],e):e}function c(e){return e.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function u(e){return e in B?B[e]:B[e]=new RegExp("(^|\\s)"+e+"(\\s|$)")}function d(e,t){return"number"!=typeof t||L[c(e)]?t:t+"px"}function f(e){var t,i;return M[e]||(t=D.createElement(e),D.body.appendChild(t),i=getComputedStyle(t,"").getPropertyValue("display"),t.parentNode.removeChild(t),"none"==i&&(i="block"),M[e]=i),M[e]}function m(e){return"children"in e?S.call(e.children):R.map(e.childNodes,function(e){return 1==e.nodeType?e:void 0})}function p(e,t,i){for(A in t)i&&(o(t[A])||s(t[A]))?(o(t[A])&&!o(e[A])&&(e[A]={}),s(t[A])&&!s(e[A])&&(e[A]=[]),p(e[A],t[A],i)):t[A]!==w&&(e[A]=t[A])}function g(e,t){return null==t?R(e):R(e).filter(t)}function E(e,i,r,n){return t(i)?i.call(e,r,n):i}function v(e,t,i){null==i?e.removeAttribute(t):e.setAttribute(t,i)}function y(e,t){var i=e.className,r=i&&i.baseVal!==w;return t===w?r?i.baseVal:i:(r?i.baseVal=t:e.className=t,void 0)}function x(e){var t;try{return e?"true"==e||("false"==e?!1:"null"==e?null:/^0/.test(e)||isNaN(t=Number(e))?/^[\[\{]/.test(e)?R.parseJSON(e):e:t):e}catch(i){return e}}function T(e,t){t(e);for(var i in e.childNodes)T(e.childNodes[i],t)}var w,A,R,_,C,b,F=[],S=F.slice,H=F.filter,D=window.document,M={},B={},L={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},k=/^\s*<(\w+|!)[^>]*>/,q=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,P=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,$=/^(?:body|html)$/i,O=/([A-Z])/g,I=["val","css","html","text","data","width","height","offset"],z=["after","prepend","before","append"],N=D.createElement("table"),V=D.createElement("tr"),U={tr:D.createElement("tbody"),tbody:N,thead:N,tfoot:N,td:V,th:V,"*":D.createElement("div")},W=/complete|loaded|interactive/,G=/^[\w-]*$/,j={},X=j.toString,Y={},K=D.createElement("div"),Z={tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"};return Y.matches=function(e,t){if(!t||!e||1!==e.nodeType)return!1;var i=e.webkitMatchesSelector||e.mozMatchesSelector||e.oMatchesSelector||e.matchesSelector;if(i)return i.call(e,t);var r,n=e.parentNode,o=!n;return o&&(n=K).appendChild(e),r=~Y.qsa(n,t).indexOf(e),o&&K.removeChild(e),r},C=function(e){return e.replace(/-+(.)?/g,function(e,t){return t?t.toUpperCase():""})},b=function(e){return H.call(e,function(t,i){return e.indexOf(t)==i})},Y.fragment=function(e,t,i){var r,n,s;return q.test(e)&&(r=R(D.createElement(RegExp.$1))),r||(e.replace&&(e=e.replace(P,"<$1></$2>")),t===w&&(t=k.test(e)&&RegExp.$1),t in U||(t="*"),s=U[t],s.innerHTML=""+e,r=R.each(S.call(s.childNodes),function(){s.removeChild(this)})),o(i)&&(n=R(r),R.each(i,function(e,t){I.indexOf(e)>-1?n[e](t):n.attr(e,t)})),r},Y.Z=function(e,t){return e=e||[],e.__proto__=R.fn,e.selector=t||"",e},Y.isZ=function(e){return e instanceof Y.Z},Y.init=function(e,i){var r;if(!e)return Y.Z();if("string"==typeof e)if(e=e.trim(),"<"==e[0]&&k.test(e))r=Y.fragment(e,RegExp.$1,i),e=null;else{if(i!==w)return R(i).find(e);r=Y.qsa(D,e)}else{if(t(e))return R(D).ready(e);if(Y.isZ(e))return e;if(s(e))r=l(e);else if(n(e))r=[e],e=null;else if(k.test(e))r=Y.fragment(e.trim(),RegExp.$1,i),e=null;else{if(i!==w)return R(i).find(e);r=Y.qsa(D,e)}}return Y.Z(r,e)},R=function(e,t){return Y.init(e,t)},R.extend=function(e){var t,i=S.call(arguments,1);return"boolean"==typeof e&&(t=e,e=i.shift()),i.forEach(function(i){p(e,i,t)}),e},Y.qsa=function(e,t){var i,n="#"==t[0],o=!n&&"."==t[0],s=n||o?t.slice(1):t,a=G.test(s);return r(e)&&a&&n?(i=e.getElementById(s))?[i]:[]:1!==e.nodeType&&9!==e.nodeType?[]:S.call(a&&!n?o?e.getElementsByClassName(s):e.getElementsByTagName(t):e.querySelectorAll(t))},R.contains=function(e,t){return e!==t&&e.contains(t)},R.type=e,R.isFunction=t,R.isWindow=i,R.isArray=s,R.isPlainObject=o,R.isEmptyObject=function(e){var t;for(t in e)return!1;return!0},R.inArray=function(e,t,i){return F.indexOf.call(t,e,i)},R.camelCase=C,R.trim=function(e){return null==e?"":String.prototype.trim.call(e)},R.uuid=0,R.support={},R.expr={},R.map=function(e,t){var i,r,n,o=[];if(a(e))for(r=0;r<e.length;r++)i=t(e[r],r),null!=i&&o.push(i);else for(n in e)i=t(e[n],n),null!=i&&o.push(i);return h(o)},R.each=function(e,t){var i,r;if(a(e)){for(i=0;i<e.length;i++)if(t.call(e[i],i,e[i])===!1)return e}else for(r in e)if(t.call(e[r],r,e[r])===!1)return e;return e},R.grep=function(e,t){return H.call(e,t)},window.JSON&&(R.parseJSON=JSON.parse),R.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){j["[object "+t+"]"]=t.toLowerCase()}),R.fn={forEach:F.forEach,reduce:F.reduce,push:F.push,sort:F.sort,indexOf:F.indexOf,concat:F.concat,map:function(e){return R(R.map(this,function(t,i){return e.call(t,i,t)}))},slice:function(){return R(S.apply(this,arguments))},ready:function(e){return W.test(D.readyState)&&D.body?e(R):D.addEventListener("DOMContentLoaded",function(){e(R)},!1),this},get:function(e){return e===w?S.call(this):this[e>=0?e:e+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(e){return F.every.call(this,function(t,i){return e.call(t,i,t)!==!1}),this},filter:function(e){return t(e)?this.not(this.not(e)):R(H.call(this,function(t){return Y.matches(t,e)}))},add:function(e,t){return R(b(this.concat(R(e,t))))},is:function(e){return this.length>0&&Y.matches(this[0],e)},not:function(e){var i=[];if(t(e)&&e.call!==w)this.each(function(t){e.call(this,t)||i.push(this)});else{var r="string"==typeof e?this.filter(e):a(e)&&t(e.item)?S.call(e):R(e);this.forEach(function(e){r.indexOf(e)<0&&i.push(e)})}return R(i)},has:function(e){return this.filter(function(){return n(e)?R.contains(this,e):R(this).find(e).size()})},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},first:function(){var e=this[0];return e&&!n(e)?e:R(e)},last:function(){var e=this[this.length-1];return e&&!n(e)?e:R(e)},find:function(e){var t,i=this;return t="object"==typeof e?R(e).filter(function(){var e=this;return F.some.call(i,function(t){return R.contains(t,e)})}):1==this.length?R(Y.qsa(this[0],e)):this.map(function(){return Y.qsa(this,e)})},closest:function(e,t){var i=this[0],n=!1;for("object"==typeof e&&(n=R(e));i&&!(n?n.indexOf(i)>=0:Y.matches(i,e));)i=i!==t&&!r(i)&&i.parentNode;return R(i)},parents:function(e){for(var t=[],i=this;i.length>0;)i=R.map(i,function(e){return(e=e.parentNode)&&!r(e)&&t.indexOf(e)<0?(t.push(e),e):void 0});return g(t,e)},parent:function(e){return g(b(this.pluck("parentNode")),e)},children:function(e){return g(this.map(function(){return m(this)}),e)},contents:function(){return this.map(function(){return S.call(this.childNodes)})},siblings:function(e){return g(this.map(function(e,t){return H.call(m(t.parentNode),function(e){return e!==t})}),e)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(e){return R.map(this,function(t){return t[e]})},show:function(){return this.each(function(){"none"==this.style.display&&(this.style.display=""),"none"==getComputedStyle(this,"").getPropertyValue("display")&&(this.style.display=f(this.nodeName))})},replaceWith:function(e){return this.before(e).remove()},wrap:function(e){var i=t(e);if(this[0]&&!i)var r=R(e).get(0),n=r.parentNode||this.length>1;return this.each(function(t){R(this).wrapAll(i?e.call(this,t):n?r.cloneNode(!0):r)})},wrapAll:function(e){if(this[0]){R(this[0]).before(e=R(e));for(var t;(t=e.children()).length;)e=t.first();R(e).append(this)}return this},wrapInner:function(e){var i=t(e);return this.each(function(t){var r=R(this),n=r.contents(),o=i?e.call(this,t):e;n.length?n.wrapAll(o):r.append(o)})},unwrap:function(){return this.parent().each(function(){R(this).replaceWith(R(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(e){return this.each(function(){var t=R(this);(e===w?"none"==t.css("display"):e)?t.show():t.hide()})},prev:function(e){return R(this.pluck("previousElementSibling")).filter(e||"*")},next:function(e){return R(this.pluck("nextElementSibling")).filter(e||"*")},html:function(e){return 0===arguments.length?this.length>0?this[0].innerHTML:null:this.each(function(t){var i=this.innerHTML;R(this).empty().append(E(this,e,t,i))})},text:function(e){return 0===arguments.length?this.length>0?this[0].textContent:null:this.each(function(){this.textContent=e===w?"":""+e})},attr:function(e,t){var i;return"string"==typeof e&&t===w?0==this.length||1!==this[0].nodeType?w:"value"==e&&"INPUT"==this[0].nodeName?this.val():!(i=this[0].getAttribute(e))&&e in this[0]?this[0][e]:i:this.each(function(i){if(1===this.nodeType)if(n(e))for(A in e)v(this,A,e[A]);else v(this,e,E(this,t,i,this.getAttribute(e)))})},removeAttr:function(e){return this.each(function(){1===this.nodeType&&v(this,e)})},prop:function(e,t){return e=Z[e]||e,t===w?this[0]&&this[0][e]:this.each(function(i){this[e]=E(this,t,i,this[e])})},data:function(e,t){var i=this.attr("data-"+e.replace(O,"-$1").toLowerCase(),t);return null!==i?x(i):w},val:function(e){return 0===arguments.length?this[0]&&(this[0].multiple?R(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value):this.each(function(t){this.value=E(this,e,t,this.value)})},offset:function(e){if(e)return this.each(function(t){var i=R(this),r=E(this,e,t,i.offset()),n=i.offsetParent().offset(),o={top:r.top-n.top,left:r.left-n.left};"static"==i.css("position")&&(o.position="relative"),i.css(o)});if(0==this.length)return null;var t=this[0].getBoundingClientRect();return{left:t.left+window.pageXOffset,top:t.top+window.pageYOffset,width:Math.round(t.width),height:Math.round(t.height)}},css:function(t,i){if(arguments.length<2){var r=this[0],n=getComputedStyle(r,"");if(!r)return;if("string"==typeof t)return r.style[C(t)]||n.getPropertyValue(t);if(s(t)){var o={};return R.each(s(t)?t:[t],function(e,t){o[t]=r.style[C(t)]||n.getPropertyValue(t)}),o}}var a="";if("string"==e(t))i||0===i?a=c(t)+":"+d(t,i):this.each(function(){this.style.removeProperty(c(t))});else for(A in t)t[A]||0===t[A]?a+=c(A)+":"+d(A,t[A])+";":this.each(function(){this.style.removeProperty(c(A))});return this.each(function(){this.style.cssText+=";"+a})},index:function(e){return e?this.indexOf(R(e)[0]):this.parent().children().indexOf(this[0])},hasClass:function(e){return e?F.some.call(this,function(e){return this.test(y(e))},u(e)):!1},addClass:function(e){return e?this.each(function(t){_=[];var i=y(this),r=E(this,e,t,i);r.split(/\s+/g).forEach(function(e){R(this).hasClass(e)||_.push(e)},this),_.length&&y(this,i+(i?" ":"")+_.join(" "))}):this},removeClass:function(e){return this.each(function(t){return e===w?y(this,""):(_=y(this),E(this,e,t,_).split(/\s+/g).forEach(function(e){_=_.replace(u(e)," ")}),y(this,_.trim()),void 0)})},toggleClass:function(e,t){return e?this.each(function(i){var r=R(this),n=E(this,e,i,y(this));n.split(/\s+/g).forEach(function(e){(t===w?!r.hasClass(e):t)?r.addClass(e):r.removeClass(e)})}):this},scrollTop:function(e){if(this.length){var t="scrollTop"in this[0];return e===w?t?this[0].scrollTop:this[0].pageYOffset:this.each(t?function(){this.scrollTop=e}:function(){this.scrollTo(this.scrollX,e)})}},scrollLeft:function(e){if(this.length){var t="scrollLeft"in this[0];return e===w?t?this[0].scrollLeft:this[0].pageXOffset:this.each(t?function(){this.scrollLeft=e}:function(){this.scrollTo(e,this.scrollY)})}},position:function(){if(this.length){var e=this[0],t=this.offsetParent(),i=this.offset(),r=$.test(t[0].nodeName)?{top:0,left:0}:t.offset();return i.top-=parseFloat(R(e).css("margin-top"))||0,i.left-=parseFloat(R(e).css("margin-left"))||0,r.top+=parseFloat(R(t[0]).css("border-top-width"))||0,r.left+=parseFloat(R(t[0]).css("border-left-width"))||0,{top:i.top-r.top,left:i.left-r.left}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||D.body;e&&!$.test(e.nodeName)&&"static"==R(e).css("position");)e=e.offsetParent;return e})}},R.fn.detach=R.fn.remove,["width","height"].forEach(function(e){var t=e.replace(/./,function(e){return e[0].toUpperCase()});R.fn[e]=function(n){var o,s=this[0];return n===w?i(s)?s["inner"+t]:r(s)?s.documentElement["scroll"+t]:(o=this.offset())&&o[e]:this.each(function(t){s=R(this),s.css(e,E(this,n,t,s[e]()))})}}),z.forEach(function(t,i){var r=i%2;R.fn[t]=function(){var t,n,o=R.map(arguments,function(i){return t=e(i),"object"==t||"array"==t||null==i?i:Y.fragment(i)}),s=this.length>1;return o.length<1?this:this.each(function(e,t){n=r?t:t.parentNode,t=0==i?t.nextSibling:1==i?t.firstChild:2==i?t:null,o.forEach(function(e){if(s)e=e.cloneNode(!0);else if(!n)return R(e).remove();T(n.insertBefore(e,t),function(e){null!=e.nodeName&&"SCRIPT"===e.nodeName.toUpperCase()&&(!e.type||"text/javascript"===e.type)&&!e.src&&window.eval.call(window,e.innerHTML)})})})},R.fn[r?t+"To":"insert"+(i?"Before":"After")]=function(e){return R(e)[t](this),this}}),Y.Z.prototype=R.fn,Y.uniq=b,Y.deserializeValue=x,R.zepto=Y,R}();window.Zepto=Zepto,void 0===window.$&&(window.$=Zepto),function(e){function t(e){return e._zid||(e._zid=d++)}function i(e,i,o,s){if(i=r(i),i.ns)var a=n(i.ns);return(g[t(e)]||[]).filter(function(e){return!(!e||i.e&&e.e!=i.e||i.ns&&!a.test(e.ns)||o&&t(e.fn)!==t(o)||s&&e.sel!=s)})}function r(e){var t=(""+e).split(".");return{e:t[0],ns:t.slice(1).sort().join(" ")}}function n(e){return new RegExp("(?:^| )"+e.replace(" "," .* ?")+"(?: |$)")}function o(e,t){return e.del&&!v&&e.e in y||!!t}function s(e){return x[e]||v&&y[e]||e}function a(i,n,a,l,c,d,f){var m=t(i),p=g[m]||(g[m]=[]);n.split(/\s/).forEach(function(t){if("ready"==t)return e(document).ready(a);var n=r(t);n.fn=a,n.sel=c,n.e in x&&(a=function(t){var i=t.relatedTarget;return!i||i!==this&&!e.contains(this,i)?n.fn.apply(this,arguments):void 0}),n.del=d;var m=d||a;n.proxy=function(e){if(e=h(e),!e.isImmediatePropagationStopped()){e.data=l;var t=m.apply(i,e._args==u?[e]:[e].concat(e._args));return t===!1&&(e.preventDefault(),e.stopPropagation()),t}},n.i=p.length,p.push(n),"addEventListener"in i&&i.addEventListener(s(n.e),n.proxy,o(n,f))})}function l(e,r,n,a,l){var h=t(e);(r||"").split(/\s/).forEach(function(t){i(e,t,n,a).forEach(function(t){delete g[h][t.i],"removeEventListener"in e&&e.removeEventListener(s(t.e),t.proxy,o(t,l))})})}function h(t,i){return(i||!t.isDefaultPrevented)&&(i||(i=t),e.each(R,function(e,r){var n=i[e];t[e]=function(){return this[r]=T,n&&n.apply(i,arguments)},t[r]=w}),(i.defaultPrevented!==u?i.defaultPrevented:"returnValue"in i?i.returnValue===!1:i.getPreventDefault&&i.getPreventDefault())&&(t.isDefaultPrevented=T)),t}function c(e){var t,i={originalEvent:e};for(t in e)!A.test(t)&&e[t]!==u&&(i[t]=e[t]);return h(i,e)}var u,d=(e.zepto.qsa,1),f=Array.prototype.slice,m=e.isFunction,p=function(e){return"string"==typeof e},g={},E={},v="onfocusin"in window,y={focus:"focusin",blur:"focusout"},x={mouseenter:"mouseover",mouseleave:"mouseout"};E.click=E.mousedown=E.mouseup=E.mousemove="MouseEvents",e.event={add:a,remove:l},e.proxy=function(i,r){if(m(i)){var n=function(){return i.apply(r,arguments)};return n._zid=t(i),n}if(p(r))return e.proxy(i[r],i);throw new TypeError("expected function")},e.fn.bind=function(e,t,i){return this.on(e,t,i)},e.fn.unbind=function(e,t){return this.off(e,t)},e.fn.one=function(e,t,i,r){return this.on(e,t,i,r,1)};var T=function(){return!0},w=function(){return!1},A=/^([A-Z]|returnValue$|layer[XY]$)/,R={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};e.fn.delegate=function(e,t,i){return this.on(t,e,i)},e.fn.undelegate=function(e,t,i){return this.off(t,e,i)},e.fn.live=function(t,i){return e(document.body).delegate(this.selector,t,i),this},e.fn.die=function(t,i){return e(document.body).undelegate(this.selector,t,i),this},e.fn.on=function(t,i,r,n,o){var s,h,d=this;return t&&!p(t)?(e.each(t,function(e,t){d.on(e,i,r,t,o)}),d):(!p(i)&&!m(n)&&n!==!1&&(n=r,r=i,i=u),(m(r)||r===!1)&&(n=r,r=u),n===!1&&(n=w),d.each(function(u,d){o&&(s=function(e){return l(d,e.type,n),n.apply(this,arguments)}),i&&(h=function(t){var r,o=e(t.target).closest(i,d).get(0);return o&&o!==d?(r=e.extend(c(t),{currentTarget:o,liveFired:d}),(s||n).apply(o,[r].concat(f.call(arguments,1)))):void 0}),a(d,t,n,r,i,h||s)}))},e.fn.off=function(t,i,r){var n=this;return t&&!p(t)?(e.each(t,function(e,t){n.off(e,i,t)}),n):(!p(i)&&!m(r)&&r!==!1&&(r=i,i=u),r===!1&&(r=w),n.each(function(){l(this,t,r,i)}))},e.fn.trigger=function(t,i){return t=p(t)||e.isPlainObject(t)?e.Event(t):h(t),t._args=i,this.each(function(){"dispatchEvent"in this?this.dispatchEvent(t):e(this).triggerHandler(t,i)})},e.fn.triggerHandler=function(t,r){var n,o;return this.each(function(s,a){n=c(p(t)?e.Event(t):t),n._args=r,n.target=a,e.each(i(a,t.type||t),function(e,t){return o=t.proxy(n),n.isImmediatePropagationStopped()?!1:void 0})}),o},"focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(t){e.fn[t]=function(e){return e?this.bind(t,e):this.trigger(t)}}),["focus","blur"].forEach(function(t){e.fn[t]=function(e){return e?this.bind(t,e):this.each(function(){try{this[t]()}catch(e){}}),this}}),e.Event=function(e,t){p(e)||(t=e,e=t.type);var i=document.createEvent(E[e]||"Events"),r=!0;if(t)for(var n in t)"bubbles"==n?r=!!t[n]:i[n]=t[n];return i.initEvent(e,r,!0),h(i)}}(Zepto),function(e){function t(t,i,r){var n=e.Event(i);return e(t).trigger(n,r),!n.isDefaultPrevented()}function i(e,i,r,n){return e.global?t(i||v,r,n):void 0}function r(t){t.global&&0===e.active++&&i(t,null,"ajaxStart")}function n(t){t.global&&!--e.active&&i(t,null,"ajaxStop")}function o(e,t){var r=t.context;return t.beforeSend.call(r,e,t)===!1||i(t,r,"ajaxBeforeSend",[e,t])===!1?!1:(i(t,r,"ajaxSend",[e,t]),void 0)}function s(e,t,r,n){var o=r.context,s="success";r.success.call(o,e,s,t),n&&n.resolveWith(o,[e,s,t]),i(r,o,"ajaxSuccess",[t,r,e]),l(s,t,r)}function a(e,t,r,n,o){var s=n.context;n.error.call(s,r,t,e),o&&o.rejectWith(s,[r,t,e]),i(n,s,"ajaxError",[r,n,e||t]),l(t,r,n)}function l(e,t,r){var o=r.context;r.complete.call(o,t,e),i(r,o,"ajaxComplete",[t,r]),n(r)}function h(){}function c(e){return e&&(e=e.split(";",2)[0]),e&&(e==A?"html":e==w?"json":x.test(e)?"script":T.test(e)&&"xml")||"text"}function u(e,t){return""==t?e:(e+"&"+t).replace(/[&?]{1,2}/,"?")}function d(t){t.processData&&t.data&&"string"!=e.type(t.data)&&(t.data=e.param(t.data,t.traditional)),t.data&&(!t.type||"GET"==t.type.toUpperCase())&&(t.url=u(t.url,t.data),t.data=void 0)}function f(t,i,r,n){var o=!e.isFunction(i);return{url:t,data:o?i:void 0,success:o?e.isFunction(r)?r:void 0:i,dataType:o?n||r:r}}function m(t,i,r,n){var o,s=e.isArray(i),a=e.isPlainObject(i);e.each(i,function(i,l){o=e.type(l),n&&(i=r?n:n+"["+(a||"object"==o||"array"==o?i:"")+"]"),!n&&s?t.add(l.name,l.value):"array"==o||!r&&"object"==o?m(t,l,r,i):t.add(i,l)})}var p,g,E=0,v=window.document,y=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,x=/^(?:text|application)\/javascript/i,T=/^(?:text|application)\/xml/i,w="application/json",A="text/html",R=/^\s*$/;e.active=0,e.ajaxJSONP=function(t,i){if("type"in t){var r,n,l=t.jsonpCallback,h=(e.isFunction(l)?l():l)||"jsonp"+ ++E,c=v.createElement("script"),u=window[h],d=function(t){e(c).triggerHandler("error",t||"abort")},f={abort:d};return i&&i.promise(f),e(c).on("load error",function(o,l){clearTimeout(n),e(c).off().remove(),"error"!=o.type&&r?s(r[0],f,t,i):a(null,l||"error",f,t,i),window[h]=u,r&&e.isFunction(u)&&u(r[0]),u=r=void 0}),o(f,t)===!1?(d("abort"),f):(window[h]=function(){r=arguments},c.src=t.url.replace(/=\?/,"="+h),v.head.appendChild(c),t.timeout>0&&(n=setTimeout(function(){d("timeout")},t.timeout)),f)}return e.ajax(t)},e.ajaxSettings={type:"GET",beforeSend:h,success:h,error:h,complete:h,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:w,xml:"application/xml, text/xml",html:A,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0},e.ajax=function(t){var i=e.extend({},t||{}),n=e.Deferred&&e.Deferred();for(p in e.ajaxSettings)void 0===i[p]&&(i[p]=e.ajaxSettings[p]);r(i),i.crossDomain||(i.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(i.url)&&RegExp.$2!=window.location.host),i.url||(i.url=window.location.toString()),d(i),i.cache===!1&&(i.url=u(i.url,"_="+Date.now()));var l=i.dataType,f=/=\?/.test(i.url);if("jsonp"==l||f)return f||(i.url=u(i.url,i.jsonp?i.jsonp+"=?":i.jsonp===!1?"":"callback=?")),e.ajaxJSONP(i,n);var m,E=i.accepts[l],v={},y=function(e,t){v[e.toLowerCase()]=[e,t]},x=/^([\w-]+:)\/\//.test(i.url)?RegExp.$1:window.location.protocol,T=i.xhr(),w=T.setRequestHeader;if(n&&n.promise(T),i.crossDomain||y("X-Requested-With","XMLHttpRequest"),y("Accept",E||"*/*"),(E=i.mimeType||E)&&(E.indexOf(",")>-1&&(E=E.split(",",2)[0]),T.overrideMimeType&&T.overrideMimeType(E)),(i.contentType||i.contentType!==!1&&i.data&&"GET"!=i.type.toUpperCase())&&y("Content-Type",i.contentType||"application/x-www-form-urlencoded"),i.headers)for(g in i.headers)y(g,i.headers[g]);if(T.setRequestHeader=y,T.onreadystatechange=function(){if(4==T.readyState){T.onreadystatechange=h,clearTimeout(m);var t,r=!1;if(T.status>=200&&T.status<300||304==T.status||0==T.status&&"file:"==x){l=l||c(i.mimeType||T.getResponseHeader("content-type")),t=T.responseText;try{"script"==l?(1,eval)(t):"xml"==l?t=T.responseXML:"json"==l&&(t=R.test(t)?null:e.parseJSON(t))}catch(o){r=o}r?a(r,"parsererror",T,i,n):s(t,T,i,n)}else a(T.statusText||null,T.status?"error":"abort",T,i,n)}},o(T,i)===!1)return T.abort(),a(null,"abort",T,i,n),T;if(i.xhrFields)for(g in i.xhrFields)T[g]=i.xhrFields[g];var A="async"in i?i.async:!0;T.open(i.type,i.url,A,i.username,i.password);for(g in v)w.apply(T,v[g]);return i.timeout>0&&(m=setTimeout(function(){T.onreadystatechange=h,T.abort(),a(null,"timeout",T,i,n)},i.timeout)),T.send(i.data?i.data:null),T},e.get=function(){return e.ajax(f.apply(null,arguments))},e.post=function(){var t=f.apply(null,arguments);return t.type="POST",e.ajax(t)},e.getJSON=function(){var t=f.apply(null,arguments);return t.dataType="json",e.ajax(t)},e.fn.load=function(t,i,r){if(!this.length)return this;var n,o=this,s=t.split(/\s/),a=f(t,i,r),l=a.success;return s.length>1&&(a.url=s[0],n=s[1]),a.success=function(t){o.html(n?e("<div>").html(t.replace(y,"")).find(n):t),l&&l.apply(o,arguments)},e.ajax(a),this};var _=encodeURIComponent;e.param=function(e,t){var i=[];return i.add=function(e,t){this.push(_(e)+"="+_(t))},m(i,e,t),i.join("&").replace(/%20/g,"+")}}(Zepto),function(e){e.fn.serializeArray=function(){var t,i=[];return e([].slice.call(this.get(0).elements)).each(function(){t=e(this);var r=t.attr("type");"fieldset"!=this.nodeName.toLowerCase()&&!this.disabled&&"submit"!=r&&"reset"!=r&&"button"!=r&&("radio"!=r&&"checkbox"!=r||this.checked)&&i.push({name:t.attr("name"),value:t.val()})}),i},e.fn.serialize=function(){var e=[];return this.serializeArray().forEach(function(t){e.push(encodeURIComponent(t.name)+"="+encodeURIComponent(t.value))}),e.join("&")},e.fn.submit=function(t){if(t)this.bind("submit",t);else if(this.length){var i=e.Event("submit");this.eq(0).trigger(i),i.isDefaultPrevented()||this.get(0).submit()}return this}}(Zepto),function(e){"__proto__"in{}||e.extend(e.zepto,{Z:function(t,i){return t=t||[],e.extend(t,e.fn),t.selector=i||"",t.__Z=!0,t},isZ:function(t){return"array"===e.type(t)&&"__Z"in t}});try{getComputedStyle(void 0)}catch(t){var i=getComputedStyle;window.getComputedStyle=function(e){try{return i(e)}catch(t){return null}}}}(Zepto),function(){function e(e){var t=function(e,t){return n("",e,t)},o=i;e&&(i[e]||(i[e]={}),o=i[e]),o.define&&o.define.packaged||(r.original=o.define,o.define=r,o.define.packaged=!0),o.require&&o.require.packaged||(n.original=o.require,o.require=t,o.require.packaged=!0)}var t="",i=function(){return this}();if(t||"undefined"==typeof requirejs){var r=function(e,t,i){return"string"!=typeof e?(r.original?r.original.apply(window,arguments):(console.error("dropping module because define wasn't a string."),console.trace()),void 0):(2==arguments.length&&(i=t),r.modules||(r.modules={},r.payloads={}),r.payloads[e]=i,r.modules[e]=null,void 0)},n=function(e,t,i){if("[object Array]"===Object.prototype.toString.call(t)){for(var r=[],o=0,a=t.length;a>o;++o){var l=s(e,t[o]);if(!l&&n.original)return n.original.apply(window,arguments);r.push(l)}i&&i.apply(null,r)}else{if("string"==typeof t){var h=s(e,t);return!h&&n.original?n.original.apply(window,arguments):(i&&i(),h)}if(n.original)return n.original.apply(window,arguments)}},o=function(e,t){if(-1!==t.indexOf("!")){var i=t.split("!");return o(e,i[0])+"!"+o(e,i[1])}if("."==t.charAt(0)){var r=e.split("/").slice(0,-1).join("/");for(t=r+"/"+t;-1!==t.indexOf(".")&&n!=t;){var n=t;t=t.replace(/\/\.\//,"/").replace(/[^\/]+\/\.\.\//,"")}}return t},s=function(e,t){t=o(e,t);var i=r.modules[t];if(!i){if(i=r.payloads[t],"function"==typeof i){var s={},a={id:t,uri:"",exports:s,packaged:!0},l=function(e,i){return n(t,e,i)},h=i(l,s,a);s=h||a.exports,r.modules[t]=s,delete r.payloads[t]}i=r.modules[t]=s||i}return i};e(t)}}(),define("ace/ace",["require","exports","module","ace/lib/fixoldbrowsers","ace/lib/dom","ace/lib/event","ace/editor","ace/edit_session","ace/undomanager","ace/virtual_renderer","ace/multi_select","ace/worker/worker_client","ace/keyboard/hash_handler","ace/placeholder","ace/mode/folding/fold_mode","ace/theme/textmate","ace/ext/error_marker","ace/config"],function(e,t){e("./lib/fixoldbrowsers");var i=e("./lib/dom"),r=e("./lib/event"),n=e("./editor").Editor,o=e("./edit_session").EditSession,s=e("./undomanager").UndoManager,a=e("./virtual_renderer").VirtualRenderer,l=e("./multi_select").MultiSelect;e("./worker/worker_client"),e("./keyboard/hash_handler"),e("./placeholder"),e("./mode/folding/fold_mode"),e("./theme/textmate"),e("./ext/error_marker"),t.config=e("./config"),t.require=e,t.edit=function(e){if("string"==typeof e){var o=e,e=document.getElementById(o);if(!e)throw new Error("ace.edit can't find div #"+o)}if(e.env&&e.env.editor instanceof n)return e.env.editor;var s=t.createEditSession(i.getInnerText(e));e.innerHTML="";var h=new n(new a(e));new l(h),h.setSession(s);var c={document:s,editor:h,onResize:h.resize.bind(h,null)};return r.addListener(window,"resize",c.onResize),h.on("destroy",function(){r.removeListener(window,"resize",c.onResize)}),e.env=h.env=c,h},t.createEditSession=function(e,t){var i=new o(e,t);return i.setUndoManager(new s),i},t.EditSession=o,t.UndoManager=s}),define("ace/lib/fixoldbrowsers",["require","exports","module","ace/lib/regexp","ace/lib/es5-shim"],function(e){e("./regexp"),e("./es5-shim")}),define("ace/lib/regexp",["require","exports","module"],function(){function e(e){return(e.global?"g":"")+(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.extended?"x":"")+(e.sticky?"y":"")}function t(e,t,i){if(Array.prototype.indexOf)return e.indexOf(t,i);for(var r=i||0;r<e.length;r++)if(e[r]===t)return r;return-1}var i={exec:RegExp.prototype.exec,test:RegExp.prototype.test,match:String.prototype.match,replace:String.prototype.replace,split:String.prototype.split},r=void 0===i.exec.call(/()??/,"")[1],n=function(){var e=/^/g;return i.test.call(e,""),!e.lastIndex}();n&&r||(RegExp.prototype.exec=function(o){var s,a,l=i.exec.apply(this,arguments);if("string"==typeof o&&l){if(!r&&l.length>1&&t(l,"")>-1&&(a=RegExp(this.source,i.replace.call(e(this),"g","")),i.replace.call(o.slice(l.index),a,function(){for(var e=1;e<arguments.length-2;e++)void 0===arguments[e]&&(l[e]=void 0)})),this._xregexp&&this._xregexp.captureNames)for(var h=1;h<l.length;h++)s=this._xregexp.captureNames[h-1],s&&(l[s]=l[h]);!n&&this.global&&!l[0].length&&this.lastIndex>l.index&&this.lastIndex--}return l},n||(RegExp.prototype.test=function(e){var t=i.exec.call(this,e);return t&&this.global&&!t[0].length&&this.lastIndex>t.index&&this.lastIndex--,!!t}))}),define("ace/lib/es5-shim",["require","exports","module"],function(){function e(){}function t(e){try{return Object.defineProperty(e,"sentinel",{}),"sentinel"in e}catch(t){}}function i(e){return e=+e,e!==e?e=0:0!==e&&e!==1/0&&e!==-1/0&&(e=(e>0||-1)*Math.floor(Math.abs(e))),e}Function.prototype.bind||(Function.prototype.bind=function(t){var i=this;if("function"!=typeof i)throw new TypeError("Function.prototype.bind called on incompatible "+i);var r=u.call(arguments,1),n=function(){if(this instanceof n){var e=i.apply(this,r.concat(u.call(arguments)));return Object(e)===e?e:this}return i.apply(t,r.concat(u.call(arguments)))};return i.prototype&&(e.prototype=i.prototype,n.prototype=new e,e.prototype=null),n});var r,n,o,s,a,l=Function.prototype.call,h=Array.prototype,c=Object.prototype,u=h.slice,d=l.bind(c.toString),f=l.bind(c.hasOwnProperty);if((a=f(c,"__defineGetter__"))&&(r=l.bind(c.__defineGetter__),n=l.bind(c.__defineSetter__),o=l.bind(c.__lookupGetter__),s=l.bind(c.__lookupSetter__)),2!=[1,2].splice(0).length)if(function(){function e(e){var t=new Array(e+2);return t[0]=t[1]=0,t}var t,i=[];return i.splice.apply(i,e(20)),i.splice.apply(i,e(26)),t=i.length,i.splice(5,0,"XXX"),t+1==i.length,t+1==i.length?!0:void 0}()){var m=Array.prototype.splice;Array.prototype.splice=function(e,t){return arguments.length?m.apply(this,[void 0===e?0:e,void 0===t?this.length-e:t].concat(u.call(arguments,2))):[]}}else Array.prototype.splice=function(e,t){var i=this.length;e>0?e>i&&(e=i):void 0==e?e=0:0>e&&(e=Math.max(i+e,0)),i>e+t||(t=i-e);var r=this.slice(e,e+t),n=u.call(arguments,2),o=n.length;if(e===i)o&&this.push.apply(this,n);else{var s=Math.min(t,i-e),a=e+s,l=a+o-s,h=i-a,c=i-s;if(a>l)for(var d=0;h>d;++d)this[l+d]=this[a+d];else if(l>a)for(d=h;d--;)this[l+d]=this[a+d];if(o&&e===c)this.length=c,this.push.apply(this,n);else for(this.length=c+o,d=0;o>d;++d)this[e+d]=n[d]}return r};Array.isArray||(Array.isArray=function(e){return"[object Array]"==d(e)});var p=Object("a"),g="a"!=p[0]||!(0 in p);if(Array.prototype.forEach||(Array.prototype.forEach=function(e){var t=B(this),i=g&&"[object String]"==d(this)?this.split(""):t,r=arguments[1],n=-1,o=i.length>>>0;if("[object Function]"!=d(e))throw new TypeError;for(;++n<o;)n in i&&e.call(r,i[n],n,t)}),Array.prototype.map||(Array.prototype.map=function(e){var t=B(this),i=g&&"[object String]"==d(this)?this.split(""):t,r=i.length>>>0,n=Array(r),o=arguments[1];if("[object Function]"!=d(e))throw new TypeError(e+" is not a function");for(var s=0;r>s;s++)s in i&&(n[s]=e.call(o,i[s],s,t));return n}),Array.prototype.filter||(Array.prototype.filter=function(e){var t,i=B(this),r=g&&"[object String]"==d(this)?this.split(""):i,n=r.length>>>0,o=[],s=arguments[1];if("[object Function]"!=d(e))throw new TypeError(e+" is not a function");for(var a=0;n>a;a++)a in r&&(t=r[a],e.call(s,t,a,i)&&o.push(t));return o}),Array.prototype.every||(Array.prototype.every=function(e){var t=B(this),i=g&&"[object String]"==d(this)?this.split(""):t,r=i.length>>>0,n=arguments[1];if("[object Function]"!=d(e))throw new TypeError(e+" is not a function");for(var o=0;r>o;o++)if(o in i&&!e.call(n,i[o],o,t))return!1;return!0}),Array.prototype.some||(Array.prototype.some=function(e){var t=B(this),i=g&&"[object String]"==d(this)?this.split(""):t,r=i.length>>>0,n=arguments[1];if("[object Function]"!=d(e))throw new TypeError(e+" is not a function");for(var o=0;r>o;o++)if(o in i&&e.call(n,i[o],o,t))return!0;return!1}),Array.prototype.reduce||(Array.prototype.reduce=function(e){var t=B(this),i=g&&"[object String]"==d(this)?this.split(""):t,r=i.length>>>0;if("[object Function]"!=d(e))throw new TypeError(e+" is not a function");if(!r&&1==arguments.length)throw new TypeError("reduce of empty array with no initial value");var n,o=0;if(arguments.length>=2)n=arguments[1];else for(;;){if(o in i){n=i[o++];break}if(++o>=r)throw new TypeError("reduce of empty array with no initial value")
}for(;r>o;o++)o in i&&(n=e.call(void 0,n,i[o],o,t));return n}),Array.prototype.reduceRight||(Array.prototype.reduceRight=function(e){var t=B(this),i=g&&"[object String]"==d(this)?this.split(""):t,r=i.length>>>0;if("[object Function]"!=d(e))throw new TypeError(e+" is not a function");if(!r&&1==arguments.length)throw new TypeError("reduceRight of empty array with no initial value");var n,o=r-1;if(arguments.length>=2)n=arguments[1];else for(;;){if(o in i){n=i[o--];break}if(--o<0)throw new TypeError("reduceRight of empty array with no initial value")}do o in this&&(n=e.call(void 0,n,i[o],o,t));while(o--);return n}),Array.prototype.indexOf&&-1==[0,1].indexOf(1,2)||(Array.prototype.indexOf=function(e){var t=g&&"[object String]"==d(this)?this.split(""):B(this),r=t.length>>>0;if(!r)return-1;var n=0;for(arguments.length>1&&(n=i(arguments[1])),n=n>=0?n:Math.max(0,r+n);r>n;n++)if(n in t&&t[n]===e)return n;return-1}),Array.prototype.lastIndexOf&&-1==[0,1].lastIndexOf(0,-3)||(Array.prototype.lastIndexOf=function(e){var t=g&&"[object String]"==d(this)?this.split(""):B(this),r=t.length>>>0;if(!r)return-1;var n=r-1;for(arguments.length>1&&(n=Math.min(n,i(arguments[1]))),n=n>=0?n:r-Math.abs(n);n>=0;n--)if(n in t&&e===t[n])return n;return-1}),Object.getPrototypeOf||(Object.getPrototypeOf=function(e){return e.__proto__||(e.constructor?e.constructor.prototype:c)}),!Object.getOwnPropertyDescriptor){var E="Object.getOwnPropertyDescriptor called on a non-object: ";Object.getOwnPropertyDescriptor=function(e,t){if("object"!=typeof e&&"function"!=typeof e||null===e)throw new TypeError(E+e);if(f(e,t)){var i,r,n;if(i={enumerable:!0,configurable:!0},a){var l=e.__proto__;e.__proto__=c;var r=o(e,t),n=s(e,t);if(e.__proto__=l,r||n)return r&&(i.get=r),n&&(i.set=n),i}return i.value=e[t],i}}}if(Object.getOwnPropertyNames||(Object.getOwnPropertyNames=function(e){return Object.keys(e)}),!Object.create){var v;v=null===Object.prototype.__proto__?function(){return{__proto__:null}}:function(){var e={};for(var t in e)e[t]=null;return e.constructor=e.hasOwnProperty=e.propertyIsEnumerable=e.isPrototypeOf=e.toLocaleString=e.toString=e.valueOf=e.__proto__=null,e},Object.create=function(e,t){var i;if(null===e)i=v();else{if("object"!=typeof e)throw new TypeError("typeof prototype["+typeof e+"] != 'object'");var r=function(){};r.prototype=e,i=new r,i.__proto__=e}return void 0!==t&&Object.defineProperties(i,t),i}}if(Object.defineProperty){var y=t({}),x="undefined"==typeof document||t(document.createElement("div"));if(!y||!x)var T=Object.defineProperty}if(!Object.defineProperty||T){var w="Property description must be an object: ",A="Object.defineProperty called on non-object: ",R="getters & setters can not be defined on this javascript engine";Object.defineProperty=function(e,t,i){if("object"!=typeof e&&"function"!=typeof e||null===e)throw new TypeError(A+e);if("object"!=typeof i&&"function"!=typeof i||null===i)throw new TypeError(w+i);if(T)try{return T.call(Object,e,t,i)}catch(l){}if(f(i,"value"))if(a&&(o(e,t)||s(e,t))){var h=e.__proto__;e.__proto__=c,delete e[t],e[t]=i.value,e.__proto__=h}else e[t]=i.value;else{if(!a)throw new TypeError(R);f(i,"get")&&r(e,t,i.get),f(i,"set")&&n(e,t,i.set)}return e}}Object.defineProperties||(Object.defineProperties=function(e,t){for(var i in t)f(t,i)&&Object.defineProperty(e,i,t[i]);return e}),Object.seal||(Object.seal=function(e){return e}),Object.freeze||(Object.freeze=function(e){return e});try{Object.freeze(function(){})}catch(_){Object.freeze=function(e){return function(t){return"function"==typeof t?t:e(t)}}(Object.freeze)}if(Object.preventExtensions||(Object.preventExtensions=function(e){return e}),Object.isSealed||(Object.isSealed=function(){return!1}),Object.isFrozen||(Object.isFrozen=function(){return!1}),Object.isExtensible||(Object.isExtensible=function(e){if(Object(e)===e)throw new TypeError;for(var t="";f(e,t);)t+="?";e[t]=!0;var i=f(e,t);return delete e[t],i}),!Object.keys){var C=!0,b=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],F=b.length;for(var S in{toString:null})C=!1;Object.keys=function L(e){if("object"!=typeof e&&"function"!=typeof e||null===e)throw new TypeError("Object.keys called on a non-object");var L=[];for(var t in e)f(e,t)&&L.push(t);if(C)for(var i=0,r=F;r>i;i++){var n=b[i];f(e,n)&&L.push(n)}return L}}Date.now||(Date.now=function(){return(new Date).getTime()});var H="	\n\f\r   ᠎             　\u2028\u2029";if(!String.prototype.trim||H.trim()){H="["+H+"]";var D=new RegExp("^"+H+H+"*"),M=new RegExp(H+H+"*$");String.prototype.trim=function(){return String(this).replace(D,"").replace(M,"")}}var B=function(e){if(null==e)throw new TypeError("can't convert "+e+" to object");return Object(e)}}),define("ace/lib/dom",["require","exports","module"],function(e,t){if("undefined"!=typeof document){var i="http://www.w3.org/1999/xhtml";t.getDocumentHead=function(e){return e||(e=document),e.head||e.getElementsByTagName("head")[0]||e.documentElement},t.createElement=function(e,t){return document.createElementNS?document.createElementNS(t||i,e):document.createElement(e)},t.hasCssClass=function(e,t){var i=e.className.split(/\s+/g);return-1!==i.indexOf(t)},t.addCssClass=function(e,i){t.hasCssClass(e,i)||(e.className+=" "+i)},t.removeCssClass=function(e,t){for(var i=e.className.split(/\s+/g);;){var r=i.indexOf(t);if(-1==r)break;i.splice(r,1)}e.className=i.join(" ")},t.toggleCssClass=function(e,t){for(var i=e.className.split(/\s+/g),r=!0;;){var n=i.indexOf(t);if(-1==n)break;r=!1,i.splice(n,1)}return r&&i.push(t),e.className=i.join(" "),r},t.setCssClass=function(e,i,r){r?t.addCssClass(e,i):t.removeCssClass(e,i)},t.hasCssString=function(e,t){var i,r=0;if(t=t||document,t.createStyleSheet&&(i=t.styleSheets)){for(;r<i.length;)if(i[r++].owningElement.id===e)return!0}else if(i=t.getElementsByTagName("style"))for(;r<i.length;)if(i[r++].id===e)return!0;return!1},t.importCssString=function(e,r,n){if(n=n||document,r&&t.hasCssString(r,n))return null;var o;n.createStyleSheet?(o=n.createStyleSheet(),o.cssText=e,r&&(o.owningElement.id=r)):(o=n.createElementNS?n.createElementNS(i,"style"):n.createElement("style"),o.appendChild(n.createTextNode(e)),r&&(o.id=r),t.getDocumentHead(n).appendChild(o))},t.importCssStylsheet=function(e,i){if(i.createStyleSheet)i.createStyleSheet(e);else{var r=t.createElement("link");r.rel="stylesheet",r.href=e,t.getDocumentHead(i).appendChild(r)}},t.getInnerWidth=function(e){return parseInt(t.computedStyle(e,"paddingLeft"),10)+parseInt(t.computedStyle(e,"paddingRight"),10)+e.clientWidth},t.getInnerHeight=function(e){return parseInt(t.computedStyle(e,"paddingTop"),10)+parseInt(t.computedStyle(e,"paddingBottom"),10)+e.clientHeight},void 0!==window.pageYOffset?(t.getPageScrollTop=function(){return window.pageYOffset},t.getPageScrollLeft=function(){return window.pageXOffset}):(t.getPageScrollTop=function(){return document.body.scrollTop},t.getPageScrollLeft=function(){return document.body.scrollLeft}),t.computedStyle=window.getComputedStyle?function(e,t){return t?(window.getComputedStyle(e,"")||{})[t]||"":window.getComputedStyle(e,"")||{}}:function(e,t){return t?e.currentStyle[t]:e.currentStyle},t.scrollbarWidth=function(e){var i=t.createElement("ace_inner");i.style.width="100%",i.style.minWidth="0px",i.style.height="200px",i.style.display="block";var r=t.createElement("ace_outer"),n=r.style;n.position="absolute",n.left="-10000px",n.overflow="hidden",n.width="200px",n.minWidth="0px",n.height="150px",n.display="block",r.appendChild(i);var o=e.documentElement;o.appendChild(r);var s=i.offsetWidth;n.overflow="scroll";var a=i.offsetWidth;return s==a&&(a=r.clientWidth),o.removeChild(r),s-a},t.setInnerHtml=function(e,t){var i=e.cloneNode(!1);return i.innerHTML=t,e.parentNode.replaceChild(i,e),i},"textContent"in document.documentElement?(t.setInnerText=function(e,t){e.textContent=t},t.getInnerText=function(e){return e.textContent}):(t.setInnerText=function(e,t){e.innerText=t},t.getInnerText=function(e){return e.innerText}),t.getParentWindow=function(e){return e.defaultView||e.parentWindow}}}),define("ace/lib/event",["require","exports","module","ace/lib/keys","ace/lib/useragent","ace/lib/dom"],function(e,t){function i(e,t,i){var a=0;if(a=!n.isOpera||"KeyboardEvent"in window||!n.isMac?0|(t.ctrlKey?1:0)|(t.altKey?2:0)|(t.shiftKey?4:0)|(t.metaKey?8:0):0|(t.metaKey?1:0)|(t.altKey?2:0)|(t.shiftKey?4:0)|(t.ctrlKey?8:0),!n.isMac&&o){if((o[91]||o[92])&&(a|=8),o.altGr){if(3==(3&a))return;o.altGr=0}if(18===i||17===i){var l=t.location||t.keyLocation;if(17===i&&1===l)s=t.timeStamp;else if(18===i&&3===a&&2===l){var h=-s;s=t.timeStamp,h+=s,3>h&&(o.altGr=!0)}}}if(i in r.MODIFIER_KEYS){switch(r.MODIFIER_KEYS[i]){case"Alt":a=2;break;case"Shift":a=4;break;case"Ctrl":a=1;break;default:a=8}i=0}return 8&a&&(91===i||93===i)&&(i=0),a||13!==i||!t.location&&3!==t.keyLocation||(e(t,a,-i),!t.defaultPrevented)?a||i in r.FUNCTION_KEYS||i in r.PRINTABLE_KEYS?e(t,a,i):!1:void 0}{var r=e("./keys"),n=e("./useragent");e("./dom")}t.addListener=function(e,t,i){if(e.addEventListener)return e.addEventListener(t,i,!1);if(e.attachEvent){var r=function(){i.call(e,window.event)};i._wrapper=r,e.attachEvent("on"+t,r)}},t.removeListener=function(e,t,i){return e.removeEventListener?e.removeEventListener(t,i,!1):(e.detachEvent&&e.detachEvent("on"+t,i._wrapper||i),void 0)},t.stopEvent=function(e){return t.stopPropagation(e),t.preventDefault(e),!1},t.stopPropagation=function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},t.preventDefault=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},t.getButton=function(e){return"dblclick"==e.type?0:"contextmenu"==e.type||e.ctrlKey&&n.isMac?2:e.preventDefault?e.button:{1:0,2:2,4:1}[e.button]},t.capture=function(e,i,r){function n(e){i&&i(e),r&&r(e),t.removeListener(document,"mousemove",i,!0),t.removeListener(document,"mouseup",n,!0),t.removeListener(document,"dragstart",n,!0)}return t.addListener(document,"mousemove",i,!0),t.addListener(document,"mouseup",n,!0),t.addListener(document,"dragstart",n,!0),n},t.addMouseWheelListener=function(e,i){"onmousewheel"in e?t.addListener(e,"mousewheel",function(e){var t=8;void 0!==e.wheelDeltaX?(e.wheelX=-e.wheelDeltaX/t,e.wheelY=-e.wheelDeltaY/t):(e.wheelX=0,e.wheelY=-e.wheelDelta/t),i(e)}):"onwheel"in e?t.addListener(e,"wheel",function(e){var t=.35;switch(e.deltaMode){case e.DOM_DELTA_PIXEL:e.wheelX=e.deltaX*t||0,e.wheelY=e.deltaY*t||0;break;case e.DOM_DELTA_LINE:case e.DOM_DELTA_PAGE:e.wheelX=5*(e.deltaX||0),e.wheelY=5*(e.deltaY||0)}i(e)}):t.addListener(e,"DOMMouseScroll",function(e){e.axis&&e.axis==e.HORIZONTAL_AXIS?(e.wheelX=5*(e.detail||0),e.wheelY=0):(e.wheelX=0,e.wheelY=5*(e.detail||0)),i(e)})},t.addMultiMouseDownListener=function(e,i,r,o){var s,a,l,h=0,c={2:"dblclick",3:"tripleclick",4:"quadclick"};t.addListener(e,"mousedown",function(e){if(0!=t.getButton(e)?h=0:e.detail>1?(h++,h>4&&(h=1)):h=1,n.isIE){var i=Math.abs(e.clientX-s)>5||Math.abs(e.clientY-a)>5;i&&(h=1),1==h&&(s=e.clientX,a=e.clientY)}if(r[o]("mousedown",e),h>4)h=0;else if(h>1)return r[o](c[h],e)}),n.isOldIE&&t.addListener(e,"dblclick",function(e){h=2,l&&clearTimeout(l),l=setTimeout(function(){l=null},i[h-1]||600),r[o]("mousedown",e),r[o](c[h],e)})};var o=null,s=0;if(t.addCommandKeyListener=function(e,r){var s=t.addListener;if(n.isOldGecko||n.isOpera&&!("KeyboardEvent"in window)){var a=null;s(e,"keydown",function(e){a=e.keyCode}),s(e,"keypress",function(e){return i(r,e,a)})}else{var l=null;s(e,"keydown",function(e){o[e.keyCode]=!0;var t=i(r,e,e.keyCode);return l=e.defaultPrevented,t}),s(e,"keypress",function(e){l&&(e.ctrlKey||e.altKey||e.shiftKey||e.metaKey)&&(t.stopEvent(e),l=null)}),s(e,"keyup",function(e){o[e.keyCode]=null}),o||(o=Object.create(null),s(window,"focus",function(){o=Object.create(null)}))}},window.postMessage&&!n.isOldIE){var a=1;t.nextTick=function(e,i){i=i||window;var r="zero-timeout-message-"+a;t.addListener(i,"message",function n(o){o.data==r&&(t.stopPropagation(o),t.removeListener(i,"message",n),e())}),i.postMessage(r,"*")}}t.nextFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame,t.nextFrame=t.nextFrame?t.nextFrame.bind(window):function(e){setTimeout(e,17)}}),define("ace/lib/keys",["require","exports","module","ace/lib/oop"],function(e,t){var i=e("./oop"),r=function(){var e={MODIFIER_KEYS:{16:"Shift",17:"Ctrl",18:"Alt",224:"Meta"},KEY_MODS:{ctrl:1,alt:2,option:2,shift:4,meta:8,command:8,cmd:8},FUNCTION_KEYS:{8:"Backspace",9:"Tab",13:"Return",19:"Pause",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"Print",45:"Insert",46:"Delete",96:"Numpad0",97:"Numpad1",98:"Numpad2",99:"Numpad3",100:"Numpad4",101:"Numpad5",102:"Numpad6",103:"Numpad7",104:"Numpad8",105:"Numpad9","-13":"NumpadEnter",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"Numlock",145:"Scrolllock"},PRINTABLE_KEYS:{32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",61:"=",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",107:"+",109:"-",110:".",188:",",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"}};for(var t in e.FUNCTION_KEYS){var r=e.FUNCTION_KEYS[t].toLowerCase();e[r]=parseInt(t,10)}return i.mixin(e,e.MODIFIER_KEYS),i.mixin(e,e.PRINTABLE_KEYS),i.mixin(e,e.FUNCTION_KEYS),e.enter=e["return"],e.escape=e.esc,e.del=e["delete"],e[173]="-",e}();i.mixin(t,r),t.keyCodeToString=function(e){return(r[e]||String.fromCharCode(e)).toLowerCase()}}),define("ace/lib/oop",["require","exports","module"],function(e,t){t.inherits=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})},t.mixin=function(e,t){for(var i in t)e[i]=t[i];return e},t.implement=function(e,i){t.mixin(e,i)}}),define("ace/lib/useragent",["require","exports","module"],function(e,t){if(t.OS={LINUX:"LINUX",MAC:"MAC",WINDOWS:"WINDOWS"},t.getOS=function(){return t.isMac?t.OS.MAC:t.isLinux?t.OS.LINUX:t.OS.WINDOWS},"object"==typeof navigator){var i=(navigator.platform.match(/mac|win|linux/i)||["other"])[0].toLowerCase(),r=navigator.userAgent;t.isWin="win"==i,t.isMac="mac"==i,t.isLinux="linux"==i,t.isIE=("Microsoft Internet Explorer"==navigator.appName||navigator.appName.indexOf("MSAppHost")>=0)&&parseFloat(navigator.userAgent.match(/MSIE ([0-9]+[\.0-9]+)/)[1]),t.isOldIE=t.isIE&&t.isIE<9,t.isGecko=t.isMozilla=window.controllers&&"Gecko"===window.navigator.product,t.isOldGecko=t.isGecko&&parseInt((navigator.userAgent.match(/rv\:(\d+)/)||[])[1],10)<4,t.isOpera=window.opera&&"[object Opera]"==Object.prototype.toString.call(window.opera),t.isWebKit=parseFloat(r.split("WebKit/")[1])||void 0,t.isChrome=parseFloat(r.split(" Chrome/")[1])||void 0,t.isAIR=r.indexOf("AdobeAIR")>=0,t.isIPad=r.indexOf("iPad")>=0,t.isTouchPad=r.indexOf("TouchPad")>=0}}),define("ace/editor",["require","exports","module","ace/lib/fixoldbrowsers","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/useragent","ace/keyboard/textinput","ace/mouse/mouse_handler","ace/mouse/fold_handler","ace/keyboard/keybinding","ace/edit_session","ace/search","ace/range","ace/lib/event_emitter","ace/commands/command_manager","ace/commands/default_commands","ace/config"],function(e,t){e("./lib/fixoldbrowsers");var i=e("./lib/oop"),r=e("./lib/dom"),n=e("./lib/lang"),o=e("./lib/useragent"),s=e("./keyboard/textinput").TextInput,a=e("./mouse/mouse_handler").MouseHandler,l=e("./mouse/fold_handler").FoldHandler,h=e("./keyboard/keybinding").KeyBinding,c=e("./edit_session").EditSession,u=e("./search").Search,d=e("./range").Range,f=e("./lib/event_emitter").EventEmitter,m=e("./commands/command_manager").CommandManager,p=e("./commands/default_commands").commands,g=e("./config"),E=function(e,t){var i=e.getContainerElement();this.container=i,this.renderer=e,this.commands=new m(o.isMac?"mac":"win",p),this.textInput=new s(e.getTextAreaContainer(),this),this.renderer.textarea=this.textInput.getElement(),this.keyBinding=new h(this),this.$mouseHandler=new a(this),new l(this),this.$blockScrolling=0,this.$search=(new u).set({wrap:!0}),this.$historyTracker=this.$historyTracker.bind(this),this.commands.on("exec",this.$historyTracker),this.$initOperationListeners(),this._$emitInputEvent=n.delayedCall(function(){this._signal("input",{}),this.session.bgTokenizer&&this.session.bgTokenizer.scheduleStart()}.bind(this)),this.on("change",function(e,t){t._$emitInputEvent.schedule(31)}),this.setSession(t||new c("")),g.resetOptions(this),g._emit("editor",this)};(function(){i.implement(this,f),this.$initOperationListeners=function(){function e(e){return e[e.length-1]}this.selections=[],this.commands.on("exec",function(t){this.startOperation(t);var i=t.command;if("fileJump"==i.aceCommandGroup){var r=this.prevOp;r&&"fileJump"==r.command.aceCommandGroup||(this.lastFileJumpPos=e(this.selections))}else this.lastFileJumpPos=null}.bind(this),!0),this.commands.on("afterExec",function(e){var t=e.command;"fileJump"==t.aceCommandGroup&&this.lastFileJumpPos&&!this.curOp.selectionChanged&&this.selection.fromJSON(this.lastFileJumpPos),this.endOperation(e)}.bind(this),!0),this.$opResetTimer=n.delayedCall(this.endOperation.bind(this)),this.on("change",function(){this.curOp||this.startOperation(),this.curOp.docChanged=!0}.bind(this),!0),this.on("changeSelection",function(){this.curOp||this.startOperation(),this.curOp.selectionChanged=!0}.bind(this),!0)},this.curOp=null,this.prevOp={},this.startOperation=function(e){if(this.curOp){if(!e||this.curOp.command)return;this.prevOp=this.curOp}e||(this.previousCommand=null,e={}),this.$opResetTimer.schedule(),this.curOp={command:e.command||{},args:e.args,scrollTop:this.renderer.scrollTop};var t=this.curOp.command;t&&t.scrollIntoView&&this.$blockScrolling++,this.selections.push(this.selection.toJSON())},this.endOperation=function(){if(this.curOp){var e=this.curOp.command;if(e&&e.scrollIntoView){switch(this.$blockScrolling--,e.scrollIntoView){case"center":this.renderer.scrollCursorIntoView(null,.5);break;case"animate":case"cursor":this.renderer.scrollCursorIntoView();break;case"selectionPart":var t=this.selection.getRange(),i=this.renderer.layerConfig;(t.start.row>=i.lastRow||t.end.row<=i.firstRow)&&this.renderer.scrollSelectionIntoView(this.selection.anchor,this.selection.lead)}"animate"==e.scrollIntoView&&this.renderer.animateScrolling(this.curOp.scrollTop)}this.prevOp=this.curOp,this.curOp=null}},this.$historyTracker=function(e){if(this.$mergeUndoDeltas){var t=this.prevOp,i=["backspace","del","insertstring"],r=t.command&&e.command.name==t.command.name;if("insertstring"==e.command.name){var n=e.args;void 0===this.mergeNextCommand&&(this.mergeNextCommand=!0),r=r&&this.mergeNextCommand&&(!/\s/.test(n)||/\s/.test(t.args)),this.mergeNextCommand=!0}else r=r&&-1!==i.indexOf(e.command.name);"always"!=this.$mergeUndoDeltas&&Date.now()-this.sequenceStartTime>2e3&&(r=!1),r?this.session.mergeUndoDeltas=!0:-1!==i.indexOf(e.command.name)&&(this.sequenceStartTime=Date.now())}},this.setKeyboardHandler=function(e){if(e)if("string"==typeof e){this.$keybindingId=e;var t=this;g.loadModule(["keybinding",e],function(i){t.$keybindingId==e&&t.keyBinding.setKeyboardHandler(i&&i.handler)})}else this.$keybindingId=null,this.keyBinding.setKeyboardHandler(e);else this.keyBinding.setKeyboardHandler(null)},this.getKeyboardHandler=function(){return this.keyBinding.getKeyboardHandler()},this.setSession=function(e){if(this.session!=e){if(this.session){var t=this.session;this.session.removeEventListener("change",this.$onDocumentChange),this.session.removeEventListener("changeMode",this.$onChangeMode),this.session.removeEventListener("tokenizerUpdate",this.$onTokenizerUpdate),this.session.removeEventListener("changeTabSize",this.$onChangeTabSize),this.session.removeEventListener("changeWrapLimit",this.$onChangeWrapLimit),this.session.removeEventListener("changeWrapMode",this.$onChangeWrapMode),this.session.removeEventListener("onChangeFold",this.$onChangeFold),this.session.removeEventListener("changeFrontMarker",this.$onChangeFrontMarker),this.session.removeEventListener("changeBackMarker",this.$onChangeBackMarker),this.session.removeEventListener("changeBreakpoint",this.$onChangeBreakpoint),this.session.removeEventListener("changeAnnotation",this.$onChangeAnnotation),this.session.removeEventListener("changeOverwrite",this.$onCursorChange),this.session.removeEventListener("changeScrollTop",this.$onScrollTopChange),this.session.removeEventListener("changeScrollLeft",this.$onScrollLeftChange);var i=this.session.getSelection();i.removeEventListener("changeCursor",this.$onCursorChange),i.removeEventListener("changeSelection",this.$onSelectionChange)}this.session=e,this.$onDocumentChange=this.onDocumentChange.bind(this),e.addEventListener("change",this.$onDocumentChange),this.renderer.setSession(e),this.$onChangeMode=this.onChangeMode.bind(this),e.addEventListener("changeMode",this.$onChangeMode),this.$onTokenizerUpdate=this.onTokenizerUpdate.bind(this),e.addEventListener("tokenizerUpdate",this.$onTokenizerUpdate),this.$onChangeTabSize=this.renderer.onChangeTabSize.bind(this.renderer),e.addEventListener("changeTabSize",this.$onChangeTabSize),this.$onChangeWrapLimit=this.onChangeWrapLimit.bind(this),e.addEventListener("changeWrapLimit",this.$onChangeWrapLimit),this.$onChangeWrapMode=this.onChangeWrapMode.bind(this),e.addEventListener("changeWrapMode",this.$onChangeWrapMode),this.$onChangeFold=this.onChangeFold.bind(this),e.addEventListener("changeFold",this.$onChangeFold),this.$onChangeFrontMarker=this.onChangeFrontMarker.bind(this),this.session.addEventListener("changeFrontMarker",this.$onChangeFrontMarker),this.$onChangeBackMarker=this.onChangeBackMarker.bind(this),this.session.addEventListener("changeBackMarker",this.$onChangeBackMarker),this.$onChangeBreakpoint=this.onChangeBreakpoint.bind(this),this.session.addEventListener("changeBreakpoint",this.$onChangeBreakpoint),this.$onChangeAnnotation=this.onChangeAnnotation.bind(this),this.session.addEventListener("changeAnnotation",this.$onChangeAnnotation),this.$onCursorChange=this.onCursorChange.bind(this),this.session.addEventListener("changeOverwrite",this.$onCursorChange),this.$onScrollTopChange=this.onScrollTopChange.bind(this),this.session.addEventListener("changeScrollTop",this.$onScrollTopChange),this.$onScrollLeftChange=this.onScrollLeftChange.bind(this),this.session.addEventListener("changeScrollLeft",this.$onScrollLeftChange),this.selection=e.getSelection(),this.selection.addEventListener("changeCursor",this.$onCursorChange),this.$onSelectionChange=this.onSelectionChange.bind(this),this.selection.addEventListener("changeSelection",this.$onSelectionChange),this.onChangeMode(),this.$blockScrolling+=1,this.onCursorChange(),this.$blockScrolling-=1,this.onScrollTopChange(),this.onScrollLeftChange(),this.onSelectionChange(),this.onChangeFrontMarker(),this.onChangeBackMarker(),this.onChangeBreakpoint(),this.onChangeAnnotation(),this.session.getUseWrapMode()&&this.renderer.adjustWrapLimit(),this.renderer.updateFull(),this._emit("changeSession",{session:e,oldSession:t})}},this.getSession=function(){return this.session},this.setValue=function(e,t){return this.session.doc.setValue(e),t?1==t?this.navigateFileEnd():-1==t&&this.navigateFileStart():this.selectAll(),e},this.getValue=function(){return this.session.getValue()},this.getSelection=function(){return this.selection},this.resize=function(e){this.renderer.onResize(e)},this.setTheme=function(e){this.renderer.setTheme(e)},this.getTheme=function(){return this.renderer.getTheme()},this.setStyle=function(e){this.renderer.setStyle(e)},this.unsetStyle=function(e){this.renderer.unsetStyle(e)},this.getFontSize=function(){return this.getOption("fontSize")||r.computedStyle(this.container,"fontSize")},this.setFontSize=function(e){this.setOption("fontSize",e)},this.$highlightBrackets=function(){if(this.session.$bracketHighlight&&(this.session.removeMarker(this.session.$bracketHighlight),this.session.$bracketHighlight=null),!this.$highlightPending){var e=this;this.$highlightPending=!0,setTimeout(function(){e.$highlightPending=!1;var t=e.session.findMatchingBracket(e.getCursorPosition());if(t)var i=new d(t.row,t.column,t.row,t.column+1);else if(e.session.$mode.getMatching)var i=e.session.$mode.getMatching(e.session);i&&(e.session.$bracketHighlight=e.session.addMarker(i,"ace_bracket","text"))},50)}},this.focus=function(){var e=this;setTimeout(function(){e.textInput.focus()}),this.textInput.focus()},this.isFocused=function(){return this.textInput.isFocused()},this.blur=function(){this.textInput.blur()},this.onFocus=function(){this.$isFocused||(this.$isFocused=!0,this.renderer.showCursor(),this.renderer.visualizeFocus(),this._emit("focus"))},this.onBlur=function(){this.$isFocused&&(this.$isFocused=!1,this.renderer.hideCursor(),this.renderer.visualizeBlur(),this._emit("blur"))},this.$cursorChange=function(){this.renderer.updateCursor()},this.onDocumentChange=function(e){var t,i=e.data,r=i.range;t=r.start.row==r.end.row&&"insertLines"!=i.action&&"removeLines"!=i.action?r.end.row:1/0,this.renderer.updateLines(r.start.row,t),this._emit("change",e),this.$cursorChange()},this.onTokenizerUpdate=function(e){var t=e.data;this.renderer.updateLines(t.first,t.last)},this.onScrollTopChange=function(){this.renderer.scrollToY(this.session.getScrollTop())},this.onScrollLeftChange=function(){this.renderer.scrollToX(this.session.getScrollLeft())},this.onCursorChange=function(){this.$cursorChange(),this.$blockScrolling||this.renderer.scrollCursorIntoView(),this.$highlightBrackets(),this.$updateHighlightActiveLine(),this._emit("changeSelection")},this.$updateHighlightActiveLine=function(){var e,t=this.getSession();if(this.$highlightActiveLine&&("line"==this.$selectionStyle&&this.selection.isMultiLine()||(e=this.getCursorPosition()),this.renderer.$maxLines&&1===this.session.getLength()&&(e=!1)),t.$highlightLineMarker&&!e)t.removeMarker(t.$highlightLineMarker.id),t.$highlightLineMarker=null;else if(!t.$highlightLineMarker&&e){var i=new d(e.row,e.column,e.row,1/0);i.id=t.addMarker(i,"ace_active-line","screenLine"),t.$highlightLineMarker=i}else e&&(t.$highlightLineMarker.start.row=e.row,t.$highlightLineMarker.end.row=e.row,t.$highlightLineMarker.start.column=e.column,t._emit("changeBackMarker"))},this.onSelectionChange=function(){var e=this.session;if(e.$selectionMarker&&e.removeMarker(e.$selectionMarker),e.$selectionMarker=null,this.selection.isEmpty())this.$updateHighlightActiveLine();else{var t=this.selection.getRange(),i=this.getSelectionStyle();e.$selectionMarker=e.addMarker(t,"ace_selection",i)}var r=this.$highlightSelectedWord&&this.$getSelectionHighLightRegexp();this.session.highlight(r),this._emit("changeSelection")},this.$getSelectionHighLightRegexp=function(){var e=this.session,t=this.getSelectionRange();if(!t.isEmpty()&&!t.isMultiLine()){var i=t.start.column-1,r=t.end.column+1,n=e.getLine(t.start.row),o=n.length,s=n.substring(Math.max(i,0),Math.min(r,o));if(!(i>=0&&/^[\w\d]/.test(s)||o>=r&&/[\w\d]$/.test(s))&&(s=n.substring(t.start.column,t.end.column),/^[\w\d]+$/.test(s))){var a=this.$search.$assembleRegExp({wholeWord:!0,caseSensitive:!0,needle:s});return a}}},this.onChangeFrontMarker=function(){this.renderer.updateFrontMarkers()},this.onChangeBackMarker=function(){this.renderer.updateBackMarkers()},this.onChangeBreakpoint=function(){this.renderer.updateBreakpoints()},this.onChangeAnnotation=function(){this.renderer.setAnnotations(this.session.getAnnotations())},this.onChangeMode=function(e){this.renderer.updateText(),this._emit("changeMode",e)},this.onChangeWrapLimit=function(){this.renderer.updateFull()},this.onChangeWrapMode=function(){this.renderer.onResize(!0)},this.onChangeFold=function(){this.$updateHighlightActiveLine(),this.renderer.updateFull()},this.getSelectedText=function(){return this.session.getTextRange(this.getSelectionRange())},this.getCopyText=function(){var e=this.getSelectedText();return this._signal("copy",e),e},this.onCopy=function(){this.commands.exec("copy",this)},this.onCut=function(){this.commands.exec("cut",this)},this.onPaste=function(e){this.$readOnly||(this._emit("paste",e),this.insert(e))},this.execCommand=function(e,t){this.commands.exec(e,this,t)},this.insert=function(e){var t=this.session,i=t.getMode(),r=this.getCursorPosition();if(this.getBehavioursEnabled()){var n=i.transformAction(t.getState(r.row),"insertion",this,t,e);n&&(e!==n.text&&(this.session.mergeUndoDeltas=!1,this.$mergeNextCommand=!1),e=n.text)}if("	"==e&&(e=this.session.getTabString()),this.selection.isEmpty()){if(this.session.getOverwrite()){var o=new d.fromPoints(r,r);o.end.column+=e.length,this.session.remove(o)}}else{var o=this.getSelectionRange();r=this.session.remove(o),this.clearSelection()}if("\n"==e||"\r\n"==e){var s=t.getLine(r.row);if(r.column>s.search(/\S|$/)){var a=s.substr(r.column).search(/\S|$/);t.doc.removeInLine(r.row,r.column,r.column+a)}}this.clearSelection();{var l=r.column,h=t.getState(r.row),s=t.getLine(r.row),c=i.checkOutdent(h,s,e);t.insert(r,e)}if(n&&n.selection&&(2==n.selection.length?this.selection.setSelectionRange(new d(r.row,l+n.selection[0],r.row,l+n.selection[1])):this.selection.setSelectionRange(new d(r.row+n.selection[0],n.selection[1],r.row+n.selection[2],n.selection[3]))),t.getDocument().isNewLine(e)){var u=i.getNextLineIndent(h,s.slice(0,r.column),t.getTabString());t.insert({row:r.row+1,column:0},u)}c&&i.autoOutdent(h,t,r.row)},this.onTextInput=function(e){this.keyBinding.onTextInput(e)},this.onCommandKey=function(e,t,i){this.keyBinding.onCommandKey(e,t,i)},this.setOverwrite=function(e){this.session.setOverwrite(e)},this.getOverwrite=function(){return this.session.getOverwrite()},this.toggleOverwrite=function(){this.session.toggleOverwrite()},this.setScrollSpeed=function(e){this.setOption("scrollSpeed",e)},this.getScrollSpeed=function(){return this.getOption("scrollSpeed")},this.setDragDelay=function(e){this.setOption("dragDelay",e)},this.getDragDelay=function(){return this.getOption("dragDelay")},this.setSelectionStyle=function(e){this.setOption("selectionStyle",e)},this.getSelectionStyle=function(){return this.getOption("selectionStyle")},this.setHighlightActiveLine=function(e){this.setOption("highlightActiveLine",e)},this.getHighlightActiveLine=function(){return this.getOption("highlightActiveLine")},this.setHighlightGutterLine=function(e){this.setOption("highlightGutterLine",e)},this.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},this.setHighlightSelectedWord=function(e){this.setOption("highlightSelectedWord",e)},this.getHighlightSelectedWord=function(){return this.$highlightSelectedWord},this.setAnimatedScroll=function(e){this.renderer.setAnimatedScroll(e)},this.getAnimatedScroll=function(){return this.renderer.getAnimatedScroll()},this.setShowInvisibles=function(e){this.renderer.setShowInvisibles(e)},this.getShowInvisibles=function(){return this.renderer.getShowInvisibles()},this.setDisplayIndentGuides=function(e){this.renderer.setDisplayIndentGuides(e)},this.getDisplayIndentGuides=function(){return this.renderer.getDisplayIndentGuides()},this.setShowPrintMargin=function(e){this.renderer.setShowPrintMargin(e)},this.getShowPrintMargin=function(){return this.renderer.getShowPrintMargin()},this.setPrintMarginColumn=function(e){this.renderer.setPrintMarginColumn(e)},this.getPrintMarginColumn=function(){return this.renderer.getPrintMarginColumn()},this.setReadOnly=function(e){this.setOption("readOnly",e)},this.getReadOnly=function(){return this.getOption("readOnly")},this.setBehavioursEnabled=function(e){this.setOption("behavioursEnabled",e)},this.getBehavioursEnabled=function(){return this.getOption("behavioursEnabled")},this.setWrapBehavioursEnabled=function(e){this.setOption("wrapBehavioursEnabled",e)},this.getWrapBehavioursEnabled=function(){return this.getOption("wrapBehavioursEnabled")},this.setShowFoldWidgets=function(e){this.setOption("showFoldWidgets",e)},this.getShowFoldWidgets=function(){return this.getOption("showFoldWidgets")},this.setFadeFoldWidgets=function(e){this.setOption("fadeFoldWidgets",e)},this.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},this.remove=function(e){this.selection.isEmpty()&&("left"==e?this.selection.selectLeft():this.selection.selectRight());var t=this.getSelectionRange();if(this.getBehavioursEnabled()){var i=this.session,r=i.getState(t.start.row),n=i.getMode().transformAction(r,"deletion",this,i,t);if(0===t.end.column){var o=i.getTextRange(t);if("\n"==o[o.length-1]){var s=i.getLine(t.end.row);
/^\s+$/.test(s)&&(t.end.column=s.length)}}n&&(t=n)}this.session.remove(t),this.clearSelection()},this.removeWordRight=function(){this.selection.isEmpty()&&this.selection.selectWordRight(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeWordLeft=function(){this.selection.isEmpty()&&this.selection.selectWordLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeToLineStart=function(){this.selection.isEmpty()&&this.selection.selectLineStart(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeToLineEnd=function(){this.selection.isEmpty()&&this.selection.selectLineEnd();var e=this.getSelectionRange();e.start.column==e.end.column&&e.start.row==e.end.row&&(e.end.column=0,e.end.row++),this.session.remove(e),this.clearSelection()},this.splitLine=function(){this.selection.isEmpty()||(this.session.remove(this.getSelectionRange()),this.clearSelection());var e=this.getCursorPosition();this.insert("\n"),this.moveCursorToPosition(e)},this.transposeLetters=function(){if(this.selection.isEmpty()){var e=this.getCursorPosition(),t=e.column;if(0!==t){var i,r,n=this.session.getLine(e.row);t<n.length?(i=n.charAt(t)+n.charAt(t-1),r=new d(e.row,t-1,e.row,t+1)):(i=n.charAt(t-1)+n.charAt(t-2),r=new d(e.row,t-2,e.row,t)),this.session.replace(r,i)}}},this.toLowerCase=function(){var e=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var t=this.getSelectionRange(),i=this.session.getTextRange(t);this.session.replace(t,i.toLowerCase()),this.selection.setSelectionRange(e)},this.toUpperCase=function(){var e=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var t=this.getSelectionRange(),i=this.session.getTextRange(t);this.session.replace(t,i.toUpperCase()),this.selection.setSelectionRange(e)},this.indent=function(){var e=this.session,t=this.getSelectionRange();if(t.start.row<t.end.row){var i=this.$getSelectedRows();return e.indentRows(i.first,i.last,"	"),void 0}if(t.start.column<t.end.column){var r=e.getTextRange(t);if(!/^\s+$/.test(r)){var i=this.$getSelectedRows();return e.indentRows(i.first,i.last,"	"),void 0}}var o=e.getLine(t.start.row),s=t.start,a=e.getTabSize(),l=e.documentToScreenColumn(s.row,s.column);if(this.session.getUseSoftTabs())var h=a-l%a,c=n.stringRepeat(" ",h);else{for(var h=l%a;" "==o[t.start.column]&&h;)t.start.column--,h--;this.selection.setSelectionRange(t),c="	"}return this.insert(c)},this.blockIndent=function(){var e=this.$getSelectedRows();this.session.indentRows(e.first,e.last,"	")},this.blockOutdent=function(){var e=this.session.getSelection();this.session.outdentRows(e.getRange())},this.sortLines=function(){var e=this.$getSelectedRows(),t=this.session,i=[];for(n=e.first;n<=e.last;n++)i.push(t.getLine(n));i.sort(function(e,t){return e.toLowerCase()<t.toLowerCase()?-1:e.toLowerCase()>t.toLowerCase()?1:0});for(var r=new d(0,0,0,0),n=e.first;n<=e.last;n++){var o=t.getLine(n);r.start.row=n,r.end.row=n,r.end.column=o.length,t.replace(r,i[n-e.first])}},this.toggleCommentLines=function(){var e=this.session.getState(this.getCursorPosition().row),t=this.$getSelectedRows();this.session.getMode().toggleCommentLines(e,this.session,t.first,t.last)},this.toggleBlockComment=function(){var e=this.getCursorPosition(),t=this.session.getState(e.row),i=this.getSelectionRange();this.session.getMode().toggleBlockComment(t,this.session,i,e)},this.getNumberAt=function(e,t){var i=/[\-]?[0-9]+(?:\.[0-9]+)?/g;i.lastIndex=0;for(var r=this.session.getLine(e);i.lastIndex<t;){var n=i.exec(r);if(n.index<=t&&n.index+n[0].length>=t){var o={value:n[0],start:n.index,end:n.index+n[0].length};return o}}return null},this.modifyNumber=function(e){var t=this.selection.getCursor().row,i=this.selection.getCursor().column,r=new d(t,i-1,t,i),n=this.session.getTextRange(r);if(!isNaN(parseFloat(n))&&isFinite(n)){var o=this.getNumberAt(t,i);if(o){var s=o.value.indexOf(".")>=0?o.start+o.value.indexOf(".")+1:o.end,a=o.start+o.value.length-s,l=parseFloat(o.value);l*=Math.pow(10,a),e*=s!==o.end&&s>i?Math.pow(10,o.end-i-1):Math.pow(10,o.end-i),l+=e,l/=Math.pow(10,a);var h=l.toFixed(a),c=new d(t,o.start,t,o.end);this.session.replace(c,h),this.moveCursorTo(t,Math.max(o.start+1,i+h.length-o.value.length))}}},this.removeLines=function(){var e,t=this.$getSelectedRows();e=0===t.first||t.last+1<this.session.getLength()?new d(t.first,0,t.last+1,0):new d(t.first-1,this.session.getLine(t.first-1).length,t.last,this.session.getLine(t.last).length),this.session.remove(e),this.clearSelection()},this.duplicateSelection=function(){var e=this.selection,t=this.session,i=e.getRange(),r=e.isBackwards();if(i.isEmpty()){var n=i.start.row;t.duplicateLines(n,n)}else{var o=r?i.start:i.end,s=t.insert(o,t.getTextRange(i),!1);i.start=o,i.end=s,e.setSelectionRange(i,r)}},this.moveLinesDown=function(){this.$moveLines(function(e,t){return this.session.moveLinesDown(e,t)})},this.moveLinesUp=function(){this.$moveLines(function(e,t){return this.session.moveLinesUp(e,t)})},this.moveText=function(e,t,i){return this.session.moveText(e,t,i)},this.copyLinesUp=function(){this.$moveLines(function(e,t){return this.session.duplicateLines(e,t),0})},this.copyLinesDown=function(){this.$moveLines(function(e,t){return this.session.duplicateLines(e,t)})},this.$moveLines=function(e){var t=this.selection;if(!t.inMultiSelectMode||this.inVirtualSelectionMode){var i=t.toOrientedRange(),r=this.$getSelectedRows(i),n=e.call(this,r.first,r.last);i.moveBy(n,0),t.fromOrientedRange(i)}else{var o=t.rangeList.ranges;t.rangeList.detach(this.session);for(var s=o.length;s--;){for(var a=s,r=o[s].collapseRows(),l=r.end.row,h=r.start.row;s--&&(r=o[s].collapseRows(),h-r.end.row<=1);)h=r.end.row;s++;for(var n=e.call(this,h,l);a>=s;)o[a].moveBy(n,0),a--}t.fromOrientedRange(t.ranges[0]),t.rangeList.attach(this.session)}},this.$getSelectedRows=function(){var e=this.getSelectionRange().collapseRows();return{first:this.session.getRowFoldStart(e.start.row),last:this.session.getRowFoldEnd(e.end.row)}},this.onCompositionStart=function(){this.renderer.showComposition(this.getCursorPosition())},this.onCompositionUpdate=function(e){this.renderer.setCompositionText(e)},this.onCompositionEnd=function(){this.renderer.hideComposition()},this.getFirstVisibleRow=function(){return this.renderer.getFirstVisibleRow()},this.getLastVisibleRow=function(){return this.renderer.getLastVisibleRow()},this.isRowVisible=function(e){return e>=this.getFirstVisibleRow()&&e<=this.getLastVisibleRow()},this.isRowFullyVisible=function(e){return e>=this.renderer.getFirstFullyVisibleRow()&&e<=this.renderer.getLastFullyVisibleRow()},this.$getVisibleRowCount=function(){return this.renderer.getScrollBottomRow()-this.renderer.getScrollTopRow()+1},this.$moveByPage=function(e,t){var i=this.renderer,r=this.renderer.layerConfig,n=e*Math.floor(r.height/r.lineHeight);this.$blockScrolling++,t===!0?this.selection.$moveSelection(function(){this.moveCursorBy(n,0)}):t===!1&&(this.selection.moveCursorBy(n,0),this.selection.clearSelection()),this.$blockScrolling--;var o=i.scrollTop;i.scrollBy(0,n*r.lineHeight),null!=t&&i.scrollCursorIntoView(null,.5),i.animateScrolling(o)},this.selectPageDown=function(){this.$moveByPage(1,!0)},this.selectPageUp=function(){this.$moveByPage(-1,!0)},this.gotoPageDown=function(){this.$moveByPage(1,!1)},this.gotoPageUp=function(){this.$moveByPage(-1,!1)},this.scrollPageDown=function(){this.$moveByPage(1)},this.scrollPageUp=function(){this.$moveByPage(-1)},this.scrollToRow=function(e){this.renderer.scrollToRow(e)},this.scrollToLine=function(e,t,i,r){this.renderer.scrollToLine(e,t,i,r)},this.centerSelection=function(){var e=this.getSelectionRange(),t={row:Math.floor(e.start.row+(e.end.row-e.start.row)/2),column:Math.floor(e.start.column+(e.end.column-e.start.column)/2)};this.renderer.alignCursor(t,.5)},this.getCursorPosition=function(){return this.selection.getCursor()},this.getCursorPositionScreen=function(){return this.session.documentToScreenPosition(this.getCursorPosition())},this.getSelectionRange=function(){return this.selection.getRange()},this.selectAll=function(){this.$blockScrolling+=1,this.selection.selectAll(),this.$blockScrolling-=1},this.clearSelection=function(){this.selection.clearSelection()},this.moveCursorTo=function(e,t){this.selection.moveCursorTo(e,t)},this.moveCursorToPosition=function(e){this.selection.moveCursorToPosition(e)},this.jumpToMatching=function(e){var t=this.getCursorPosition(),i=this.session.getBracketRange(t);if(!i){if(i=this.find({needle:/[{}()\[\]]/g,preventScroll:!0,start:{row:t.row,column:t.column-1}}),!i)return;var r=i.start;r.row==t.row&&Math.abs(r.column-t.column)<2&&(i=this.session.getBracketRange(r))}r=i&&i.cursor||r,r&&(e?i&&i.isEqual(this.getSelectionRange())?this.clearSelection():this.selection.selectTo(r.row,r.column):(this.clearSelection(),this.moveCursorTo(r.row,r.column)))},this.gotoLine=function(e,t,i){this.selection.clearSelection(),this.session.unfold({row:e-1,column:t||0}),this.$blockScrolling+=1,this.exitMultiSelectMode&&this.exitMultiSelectMode(),this.moveCursorTo(e-1,t||0),this.$blockScrolling-=1,this.isRowFullyVisible(e-1)||this.scrollToLine(e-1,!0,i)},this.navigateTo=function(e,t){this.clearSelection(),this.moveCursorTo(e,t)},this.navigateUp=function(e){if(this.selection.isMultiLine()&&!this.selection.isBackwards()){var t=this.selection.anchor.getPosition();return this.moveCursorToPosition(t)}this.selection.clearSelection(),e=e||1,this.selection.moveCursorBy(-e,0)},this.navigateDown=function(e){if(this.selection.isMultiLine()&&this.selection.isBackwards()){var t=this.selection.anchor.getPosition();return this.moveCursorToPosition(t)}this.selection.clearSelection(),e=e||1,this.selection.moveCursorBy(e,0)},this.navigateLeft=function(e){if(this.selection.isEmpty())for(e=e||1;e--;)this.selection.moveCursorLeft();else{var t=this.getSelectionRange().start;this.moveCursorToPosition(t)}this.clearSelection()},this.navigateRight=function(e){if(this.selection.isEmpty())for(e=e||1;e--;)this.selection.moveCursorRight();else{var t=this.getSelectionRange().end;this.moveCursorToPosition(t)}this.clearSelection()},this.navigateLineStart=function(){this.selection.moveCursorLineStart(),this.clearSelection()},this.navigateLineEnd=function(){this.selection.moveCursorLineEnd(),this.clearSelection()},this.navigateFileEnd=function(){this.selection.moveCursorFileEnd(),this.clearSelection()},this.navigateFileStart=function(){this.selection.moveCursorFileStart(),this.clearSelection()},this.navigateWordRight=function(){this.selection.moveCursorWordRight(),this.clearSelection()},this.navigateWordLeft=function(){this.selection.moveCursorWordLeft(),this.clearSelection()},this.replace=function(e,t){t&&this.$search.set(t);var i=this.$search.find(this.session),r=0;return i?(this.$tryReplace(i,e)&&(r=1),null!==i&&(this.selection.setSelectionRange(i),this.renderer.scrollSelectionIntoView(i.start,i.end)),r):r},this.replaceAll=function(e,t){t&&this.$search.set(t);var i=this.$search.findAll(this.session),r=0;if(!i.length)return r;this.$blockScrolling+=1;var n=this.getSelectionRange();this.clearSelection(),this.selection.moveCursorTo(0,0);for(var o=i.length-1;o>=0;--o)this.$tryReplace(i[o],e)&&r++;return this.selection.setSelectionRange(n),this.$blockScrolling-=1,r},this.$tryReplace=function(e,t){var i=this.session.getTextRange(e);return t=this.$search.replace(i,t),null!==t?(e.end=this.session.replace(e,t),e):null},this.getLastSearchOptions=function(){return this.$search.getOptions()},this.find=function(e,t,r){t||(t={}),"string"==typeof e||e instanceof RegExp?t.needle=e:"object"==typeof e&&i.mixin(t,e);var n=this.selection.getRange();null==t.needle&&(e=this.session.getTextRange(n)||this.$search.$options.needle,e||(n=this.session.getWordRange(n.start.row,n.start.column),e=this.session.getTextRange(n)),this.$search.set({needle:e})),this.$search.set(t),t.start||this.$search.set({start:n});var o=this.$search.find(this.session);return t.preventScroll?o:o?(this.revealRange(o,r),o):(t.backwards?n.start=n.end:n.end=n.start,this.selection.setRange(n),void 0)},this.findNext=function(e,t){this.find({skipCurrent:!0,backwards:!1},e,t)},this.findPrevious=function(e,t){this.find(e,{skipCurrent:!0,backwards:!0},t)},this.revealRange=function(e,t){this.$blockScrolling+=1,this.session.unfold(e),this.selection.setSelectionRange(e),this.$blockScrolling-=1;var i=this.renderer.scrollTop;this.renderer.scrollSelectionIntoView(e.start,e.end,.5),t!==!1&&this.renderer.animateScrolling(i)},this.undo=function(){this.$blockScrolling++,this.session.getUndoManager().undo(),this.$blockScrolling--,this.renderer.scrollCursorIntoView(null,.5)},this.redo=function(){this.$blockScrolling++,this.session.getUndoManager().redo(),this.$blockScrolling--,this.renderer.scrollCursorIntoView(null,.5)},this.destroy=function(){this.renderer.destroy(),this._emit("destroy",this)},this.setAutoScrollEditorIntoView=function(e){if(e!==!1){var t,i=this,r=!1;this.$scrollAnchor||(this.$scrollAnchor=document.createElement("div"));var n=this.$scrollAnchor;n.style.cssText="position:absolute",this.container.insertBefore(n,this.container.firstChild);var o=this.on("changeSelection",function(){r=!0}),s=this.renderer.on("beforeRender",function(){r&&(t=i.renderer.container.getBoundingClientRect())}),a=this.renderer.on("afterRender",function(){if(r&&t&&i.isFocused()){var e=i.renderer,o=e.$cursorLayer.$pixelPos,s=e.layerConfig,a=o.top-s.offset;r=o.top>=0&&a+t.top<0?!0:o.top<s.height&&o.top+t.top+s.lineHeight>window.innerHeight?!1:null,null!=r&&(n.style.top=a+"px",n.style.left=o.left+"px",n.style.height=s.lineHeight+"px",n.scrollIntoView(r)),r=t=null}});this.setAutoScrollEditorIntoView=function(e){e!==!0&&(delete this.setAutoScrollEditorIntoView,this.removeEventListener("changeSelection",o),this.renderer.removeEventListener("afterRender",a),this.renderer.removeEventListener("beforeRender",s))}}},this.$resetCursorStyle=function(){var e=this.$cursorStyle||"ace",t=this.renderer.$cursorLayer;t&&(t.setSmoothBlinking("smooth"==e),t.isBlinking=!this.$readOnly&&"wide"!=e)}}).call(E.prototype),g.defineOptions(E.prototype,"editor",{selectionStyle:{set:function(e){this.onSelectionChange(),this._emit("changeSelectionStyle",{data:e})},initialValue:"line"},highlightActiveLine:{set:function(){this.$updateHighlightActiveLine()},initialValue:!0},highlightSelectedWord:{set:function(){this.$onSelectionChange()},initialValue:!0},readOnly:{set:function(e){this.textInput.setReadOnly(e),this.$resetCursorStyle()},initialValue:!1},cursorStyle:{set:function(){this.$resetCursorStyle()},values:["ace","slim","smooth","wide"],initialValue:"ace"},mergeUndoDeltas:{values:[!1,!0,"always"],initialValue:!0},behavioursEnabled:{initialValue:!0},wrapBehavioursEnabled:{initialValue:!0},hScrollBarAlwaysVisible:"renderer",vScrollBarAlwaysVisible:"renderer",highlightGutterLine:"renderer",animatedScroll:"renderer",showInvisibles:"renderer",showPrintMargin:"renderer",printMarginColumn:"renderer",printMargin:"renderer",fadeFoldWidgets:"renderer",showFoldWidgets:"renderer",showGutter:"renderer",displayIndentGuides:"renderer",fontSize:"renderer",fontFamily:"renderer",maxLines:"renderer",minLines:"renderer",scrollPastEnd:"renderer",fixedWidthGutter:"renderer",theme:"renderer",scrollSpeed:"$mouseHandler",dragDelay:"$mouseHandler",dragEnabled:"$mouseHandler",focusTimout:"$mouseHandler",firstLineNumber:"session",overwrite:"session",newLineMode:"session",useWorker:"session",useSoftTabs:"session",tabSize:"session",wrap:"session",foldStyle:"session",mode:"session"}),t.Editor=E}),define("ace/lib/lang",["require","exports","module"],function(e,t){t.stringReverse=function(e){return e.split("").reverse().join("")},t.stringRepeat=function(e,t){for(var i="";t>0;)1&t&&(i+=e),(t>>=1)&&(e+=e);return i};var i=/^\s\s*/,r=/\s\s*$/;t.stringTrimLeft=function(e){return e.replace(i,"")},t.stringTrimRight=function(e){return e.replace(r,"")},t.copyObject=function(e){var t={};for(var i in e)t[i]=e[i];return t},t.copyArray=function(e){for(var t=[],i=0,r=e.length;r>i;i++)t[i]=e[i]&&"object"==typeof e[i]?this.copyObject(e[i]):e[i];return t},t.deepCopy=function(e){if("object"!=typeof e||!e)return e;var i=e.constructor;if(i===RegExp)return e;var r=i();for(var n in e)r[n]="object"==typeof e[n]?t.deepCopy(e[n]):e[n];return r},t.arrayToMap=function(e){for(var t={},i=0;i<e.length;i++)t[e[i]]=1;return t},t.createMap=function(e){var t=Object.create(null);for(var i in e)t[i]=e[i];return t},t.arrayRemove=function(e,t){for(var i=0;i<=e.length;i++)t===e[i]&&e.splice(i,1)},t.escapeRegExp=function(e){return e.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1")},t.escapeHTML=function(e){return e.replace(/&/g,"&#38;").replace(/"/g,"&#34;").replace(/'/g,"&#39;").replace(/</g,"&#60;")},t.getMatchOffsets=function(e,t){var i=[];return e.replace(t,function(e){i.push({offset:arguments[arguments.length-2],length:e.length})}),i},t.deferredCall=function(e){var t=null,i=function(){t=null,e()},r=function(e){return r.cancel(),t=setTimeout(i,e||0),r};return r.schedule=r,r.call=function(){return this.cancel(),e(),r},r.cancel=function(){return clearTimeout(t),t=null,r},r.isPending=function(){return t},r},t.delayedCall=function(e,t){var i=null,r=function(){i=null,e()},n=function(e){null==i&&(i=setTimeout(r,e||t))};return n.delay=function(e){i&&clearTimeout(i),i=setTimeout(r,e||t)},n.schedule=n,n.call=function(){this.cancel(),e()},n.cancel=function(){i&&clearTimeout(i),i=null},n.isPending=function(){return i},n}}),define("ace/keyboard/textinput",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/lib/dom","ace/lib/lang"],function(e,t){var i=e("../lib/event"),r=e("../lib/useragent"),n=e("../lib/dom"),o=e("../lib/lang"),s=r.isChrome<18,a=function(e,t){function a(e){if(!p){if(F)t=0,i=e?0:c.value.length-1;else var t=e?2:1,i=2;try{c.setSelectionRange(t,i)}catch(r){}}}function l(){p||(c.value=u,r.isWebKit&&T.schedule())}function h(){setTimeout(function(){g&&(c.style.cssText=g,g=""),null==t.renderer.$keepTextAreaAtCursor&&(t.renderer.$keepTextAreaAtCursor=!0,t.renderer.$moveTextAreaToCursor())},0)}var c=n.createElement("textarea");c.className="ace_text-input",r.isTouchPad&&c.setAttribute("x-palm-disable-auto-cap",!0),c.wrap="off",c.autocorrect="off",c.autocapitalize="off",c.spellcheck=!1,c.style.opacity="0",e.insertBefore(c,e.firstChild);var u="",d=!1,f=!1,m=!1,p=!1,g="",E=!0;try{var v=document.activeElement===c}catch(y){}i.addListener(c,"blur",function(){t.onBlur(),v=!1}),i.addListener(c,"focus",function(){v=!0,t.onFocus(),a()}),this.focus=function(){c.focus()},this.blur=function(){c.blur()},this.isFocused=function(){return v};var x=o.delayedCall(function(){v&&a(E)}),T=o.delayedCall(function(){p||(c.value=u,v&&a())});r.isWebKit||t.addEventListener("changeSelection",function(){t.selection.isEmpty()!=E&&(E=!E,x.schedule())}),l(),v&&t.onFocus();var w=function(e){return 0===e.selectionStart&&e.selectionEnd===e.value.length};if(!c.setSelectionRange&&c.createTextRange&&(c.setSelectionRange=function(e,t){var i=this.createTextRange();i.collapse(!0),i.moveStart("character",e),i.moveEnd("character",t),i.select()},w=function(e){try{var t=e.ownerDocument.selection.createRange()}catch(i){}return t&&t.parentElement()==e?t.text==e.value:!1}),r.isOldIE){var A=!1,R=function(e){if(!A){var t=c.value;if(!p&&t&&t!=u)return e&&t==u[0]?_.schedule():(H(t),A=!0,l(),A=!1,void 0)}},_=o.delayedCall(R);i.addListener(c,"propertychange",R);var C={13:1,27:1};i.addListener(c,"keyup",function(e){return p&&(!c.value||C[e.keyCode])&&setTimeout(P,0),(c.value.charCodeAt(0)||0)<129?_.call():(p?q():k(),void 0)}),i.addListener(c,"keydown",function(){_.schedule(50)})}var b=function(){d?d=!1:f?f=!1:w(c)?(t.selectAll(),a()):F&&a(t.selection.isEmpty())},F=null;this.setInputHandler=function(e){F=e},this.getInputHandler=function(){return F};var S=!1,H=function(e){F&&(e=F(e),F=null),m?(a(),e&&t.onPaste(e),m=!1):e==u.charAt(0)?S?t.execCommand("del",{source:"ace"}):t.execCommand("backspace",{source:"ace"}):(e.substring(0,2)==u?e=e.substr(2):e.charAt(0)==u.charAt(0)?e=e.substr(1):e.charAt(e.length-1)==u.charAt(0)&&(e=e.slice(0,-1)),e.charAt(e.length-1)==u.charAt(0)&&(e=e.slice(0,-1)),e&&t.onTextInput(e)),S&&(S=!1)},D=function(){if(!p){var e=c.value;H(e),l()}},M=function(e){var r=t.getCopyText();if(!r)return i.preventDefault(e),void 0;var n=e.clipboardData||window.clipboardData;if(n&&!s){var o=n.setData("Text",r);o&&(t.onCut(),i.preventDefault(e))}o||(d=!0,c.value=r,c.select(),setTimeout(function(){d=!1,l(),a(),t.onCut()}))},B=function(e){var r=t.getCopyText();if(!r)return i.preventDefault(e),void 0;var n=e.clipboardData||window.clipboardData;if(n&&!s){var o=n.setData("Text",r);o&&(t.onCopy(),i.preventDefault(e))}o||(f=!0,c.value=r,c.select(),setTimeout(function(){f=!1,l(),a(),t.onCopy()}))},L=function(e){var n=e.clipboardData||window.clipboardData;if(n){var o=n.getData("Text");o&&t.onPaste(o),r.isIE&&setTimeout(a),i.preventDefault(e)}else c.value="",m=!0};i.addCommandKeyListener(c,t.onCommandKey.bind(t)),i.addListener(c,"select",b),i.addListener(c,"input",D),i.addListener(c,"cut",M),i.addListener(c,"copy",B),i.addListener(c,"paste",L),!("oncut"in c&&"oncopy"in c&&"onpaste"in c||!i.addListener(e,"keydown",function(e){if((!r.isMac||e.metaKey)&&e.ctrlKey)switch(e.keyCode){case 67:B(e);break;case 86:L(e);break;case 88:M(e)}}));var k=function(){p||(p={},t.onCompositionStart(),setTimeout(q,0),t.on("mousedown",P),t.selection.isEmpty()||(t.insert(""),t.session.markUndoGroup(),t.selection.clearSelection()),t.session.markUndoGroup())},q=function(){if(p){var e=c.value.replace(/\x01/g,"");if(p.lastValue!==e&&(t.onCompositionUpdate(e),p.lastValue&&t.undo(),p.lastValue=e,p.lastValue)){var i=t.selection.getRange();t.insert(p.lastValue),t.session.markUndoGroup(),p.range=t.selection.getRange(),t.selection.setRange(i),t.selection.clearSelection()}}},P=function(e){var i=p;p=!1;var r=setTimeout(function(){r=null;var e=c.value.replace(/\x01/g,"");p||(e==i.lastValue?l():!i.lastValue&&e&&(l(),H(e)))});F=function(e){return r&&clearTimeout(r),e=e.replace(/\x01/g,""),e==i.lastValue?"":(i.lastValue&&r&&t.undo(),e)},t.onCompositionEnd(),t.removeListener("mousedown",P),"compositionend"==e.type&&i.range&&t.selection.setRange(i.range)},$=o.delayedCall(q,50);if(i.addListener(c,"compositionstart",k),r.isGecko?i.addListener(c,"text",function(){$.schedule()}):(i.addListener(c,"keyup",function(){$.schedule()}),i.addListener(c,"keydown",function(){$.schedule()})),i.addListener(c,"compositionend",P),this.getElement=function(){return c},this.setReadOnly=function(e){c.readOnly=e},this.onContextMenu=function(e){S=!0,g||(g=c.style.cssText),c.style.cssText="z-index:100000;"+(r.isIE?"opacity:0.1;":""),a(t.selection.isEmpty()),t._emit("nativecontextmenu",{target:t,domEvent:e});var o=t.container.getBoundingClientRect(),s=n.computedStyle(t.container),l=o.top+(parseInt(s.borderTopWidth)||0),u=o.left+(parseInt(o.borderLeftWidth)||0),d=o.bottom-l-c.clientHeight,f=function(e){c.style.left=e.clientX-u-2+"px",c.style.top=Math.min(e.clientY-l-2,d)+"px"};f(e),"mousedown"==e.type&&(t.renderer.$keepTextAreaAtCursor&&(t.renderer.$keepTextAreaAtCursor=null),r.isWin&&i.capture(t.container,f,h))},this.onContextMenuClose=h,!r.isGecko||r.isMac){var O=function(e){t.textInput.onContextMenu(e),h()};i.addListener(t.renderer.scroller,"contextmenu",O),i.addListener(c,"contextmenu",O)}};t.TextInput=a}),define("ace/mouse/mouse_handler",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/mouse/default_handlers","ace/mouse/default_gutter_handler","ace/mouse/mouse_event","ace/mouse/dragdrop_handler","ace/config"],function(e,t){var i=e("../lib/event"),r=e("../lib/useragent"),n=e("./default_handlers").DefaultHandlers,o=e("./default_gutter_handler").GutterHandler,s=e("./mouse_event").MouseEvent,a=e("./dragdrop_handler").DragdropHandler,l=e("../config"),h=function(e){this.editor=e,new n(this),new o(this),new a(this);var t=e.renderer.getMouseEventTarget();i.addListener(t,"click",this.onMouseEvent.bind(this,"click")),i.addListener(t,"mousemove",this.onMouseMove.bind(this,"mousemove")),i.addMultiMouseDownListener(t,[300,300,250],this,"onMouseEvent"),e.renderer.scrollBarV&&(i.addMultiMouseDownListener(e.renderer.scrollBarV.inner,[300,300,250],this,"onMouseEvent"),i.addMultiMouseDownListener(e.renderer.scrollBarH.inner,[300,300,250],this,"onMouseEvent")),i.addMouseWheelListener(e.container,this.onMouseWheel.bind(this,"mousewheel"));var r=e.renderer.$gutter;i.addListener(r,"mousedown",this.onMouseEvent.bind(this,"guttermousedown")),i.addListener(r,"click",this.onMouseEvent.bind(this,"gutterclick")),i.addListener(r,"dblclick",this.onMouseEvent.bind(this,"gutterdblclick")),i.addListener(r,"mousemove",this.onMouseEvent.bind(this,"guttermousemove")),i.addListener(t,"mousedown",function(){e.focus()}),i.addListener(r,"mousedown",function(t){return e.focus(),i.preventDefault(t)})};(function(){this.onMouseEvent=function(e,t){this.editor._emit(e,new s(t,this.editor))},this.onMouseMove=function(e,t){var i=this.editor._eventRegistry&&this.editor._eventRegistry.mousemove;i&&i.length&&this.editor._emit(e,new s(t,this.editor))},this.onMouseWheel=function(e,t){var i=new s(t,this.editor);i.speed=2*this.$scrollSpeed,i.wheelX=t.wheelX,i.wheelY=t.wheelY,this.editor._emit(e,i)},this.setState=function(e){this.state=e},this.captureMouse=function(e,t){this.x=e.x,this.y=e.y,this.isMousePressed=!0;var n=this.editor.renderer;n.$keepTextAreaAtCursor&&(n.$keepTextAreaAtCursor=null);var o=this,a=function(e){o.x=e.clientX,o.y=e.clientY,t&&t(e),o.mouseEvent=new s(e,o.editor),o.$mouseMoved=!0},l=function(e){clearInterval(c),h(),o[o.state+"End"]&&o[o.state+"End"](e),o.$clickSelection=null,null==n.$keepTextAreaAtCursor&&(n.$keepTextAreaAtCursor=!0,n.$moveTextAreaToCursor()),o.isMousePressed=!1,o.$onCaptureMouseMove=o.releaseMouse=null,o.onMouseEvent("mouseup",e)},h=function(){o[o.state]&&o[o.state](),o.$mouseMoved=!1};if(r.isOldIE&&"dblclick"==e.domEvent.type)return setTimeout(function(){l(e)});o.$onCaptureMouseMove=a,o.releaseMouse=i.capture(this.editor.container,a,l);var c=setInterval(h,20)},this.releaseMouse=null}).call(h.prototype),l.defineOptions(h.prototype,"mouseHandler",{scrollSpeed:{initialValue:2},dragDelay:{initialValue:150},dragEnabled:{initialValue:!0},focusTimout:{initialValue:0}}),t.MouseHandler=h}),define("ace/mouse/default_handlers",["require","exports","module","ace/lib/dom","ace/lib/event","ace/lib/useragent"],function(e,t){function i(e){e.$clickSelection=null;var t=e.editor;t.setDefaultHandler("mousedown",this.onMouseDown.bind(e)),t.setDefaultHandler("dblclick",this.onDoubleClick.bind(e)),t.setDefaultHandler("tripleclick",this.onTripleClick.bind(e)),t.setDefaultHandler("quadclick",this.onQuadClick.bind(e)),t.setDefaultHandler("mousewheel",this.onMouseWheel.bind(e));var i=["select","startSelect","selectEnd","selectAllEnd","selectByWordsEnd","selectByLinesEnd","dragWait","dragWaitEnd","focusWait"];i.forEach(function(t){e[t]=this[t]},this),e.selectByLines=this.extendSelectionBy.bind(e,"getLineRange"),e.selectByWords=this.extendSelectionBy.bind(e,"getWordRange")}function r(e,t,i,r){return Math.sqrt(Math.pow(i-e,2)+Math.pow(r-t,2))}function n(e,t){if(e.start.row==e.end.row)var i=2*t.column-e.start.column-e.end.column;else if(e.start.row!=e.end.row-1||e.start.column||e.end.column)var i=2*t.row-e.start.row-e.end.row;else var i=t.column-4;return 0>i?{cursor:e.start,anchor:e.end}:{cursor:e.end,anchor:e.start}}var o=(e("../lib/dom"),e("../lib/event"),e("../lib/useragent"),0);(function(){this.onMouseDown=function(e){var t=e.inSelection(),i=e.getDocumentPosition();this.mousedownEvent=e;var r=this.editor,n=e.getButton();if(0!==n){var o=r.getSelectionRange(),s=o.isEmpty();return s&&(r.moveCursorToPosition(i),r.selection.clearSelection()),r.textInput.onContextMenu(e.domEvent),void 0}return!t||r.isFocused()||(r.focus(),!this.$focusTimout||this.$clickSelection||r.inMultiSelectMode)?(!t||this.$clickSelection||e.getShiftKey()||r.inMultiSelectMode?this.startSelect(i):t&&(this.mousedownEvent.time=Date.now(),this.startSelect(i)),this.captureMouse(e),e.preventDefault()):(this.mousedownEvent.time=Date.now(),this.setState("focusWait"),this.captureMouse(e),void 0)},this.startSelect=function(e){e=e||this.editor.renderer.screenToTextCoordinates(this.x,this.y);var t=this.editor,i=this.mousedownEvent.getShiftKey();i?t.selection.selectToPosition(e):this.$clickSelection||(t.moveCursorToPosition(e),t.selection.clearSelection()),t.renderer.scroller.setCapture&&t.renderer.scroller.setCapture(),t.setStyle("ace_selecting"),this.setState("select")},this.select=function(){var e,t=this.editor,i=t.renderer.screenToTextCoordinates(this.x,this.y);if(this.$clickSelection){var r=this.$clickSelection.comparePoint(i);if(-1==r)e=this.$clickSelection.end;else if(1==r)e=this.$clickSelection.start;else{var o=n(this.$clickSelection,i);i=o.cursor,e=o.anchor}t.selection.setSelectionAnchor(e.row,e.column)}t.selection.selectToPosition(i),t.renderer.scrollCursorIntoView()},this.extendSelectionBy=function(e){var t,i=this.editor,r=i.renderer.screenToTextCoordinates(this.x,this.y),o=i.selection[e](r.row,r.column);if(this.$clickSelection){var s=this.$clickSelection.comparePoint(o.start),a=this.$clickSelection.comparePoint(o.end);if(-1==s&&0>=a)t=this.$clickSelection.end,(o.end.row!=r.row||o.end.column!=r.column)&&(r=o.start);else if(1==a&&s>=0)t=this.$clickSelection.start,(o.start.row!=r.row||o.start.column!=r.column)&&(r=o.end);else if(-1==s&&1==a)r=o.end,t=o.start;else{var l=n(this.$clickSelection,r);r=l.cursor,t=l.anchor}i.selection.setSelectionAnchor(t.row,t.column)}i.selection.selectToPosition(r),i.renderer.scrollCursorIntoView()},this.selectEnd=this.selectAllEnd=this.selectByWordsEnd=this.selectByLinesEnd=function(){this.editor.unsetStyle("ace_selecting"),this.editor.renderer.scroller.releaseCapture&&this.editor.renderer.scroller.releaseCapture()},this.focusWait=function(){var e=r(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y),t=Date.now();(e>o||t-this.mousedownEvent.time>this.$focusTimout)&&this.startSelect(this.mousedownEvent.getDocumentPosition())},this.onDoubleClick=function(e){var t=e.getDocumentPosition(),i=this.editor,r=i.session,n=r.getBracketRange(t);n?(n.isEmpty()&&(n.start.column--,n.end.column++),this.setState("select")):(n=i.selection.getWordRange(t.row,t.column),this.setState("selectByWords")),this.$clickSelection=n,this[this.state]&&this[this.state](e)},this.onTripleClick=function(e){var t=e.getDocumentPosition(),i=this.editor;this.setState("selectByLines"),this.$clickSelection=i.selection.getLineRange(t.row),this[this.state]&&this[this.state](e)},this.onQuadClick=function(){var e=this.editor;e.selectAll(),this.$clickSelection=e.getSelectionRange(),this.setState("selectAll")},this.onMouseWheel=function(e){if(!e.getShiftKey()&&!e.getAccelKey()){var t=e.domEvent.timeStamp,i=t-(this.$lastScrollTime||0),r=this.editor,n=r.renderer.isScrollableBy(e.wheelX*e.speed,e.wheelY*e.speed);return n||200>i?(this.$lastScrollTime=t,r.renderer.scrollBy(e.wheelX*e.speed,e.wheelY*e.speed),e.stop()):void 0}}}).call(i.prototype),t.DefaultHandlers=i}),define("ace/mouse/default_gutter_handler",["require","exports","module","ace/lib/dom","ace/lib/event"],function(e,t){function i(e){function t(){u=r.createElement("div"),u.className="ace_gutter-tooltip",u.style.display="none",a.container.appendChild(u)}function i(){u||t();var e=c.getDocumentPosition().row,i=l.$annotations[e];if(!i)return o();var r=a.session.getLength();if(e==r){var n=a.renderer.pixelToScreenCoordinates(0,c.y).row,h=c.$pos;if(n>a.session.documentToScreenRow(h.row,h.column))return o()}d!=i&&(d=i.text.join("<br/>"),u.style.display="block",u.innerHTML=d,a.on("mousewheel",o),s(c))}function o(){h&&(h=clearTimeout(h)),d&&(u.style.display="none",d=null,a.removeEventListener("mousewheel",o))}function s(e){var t=a.renderer.$gutter.getBoundingClientRect();if(u.style.left=e.x+15+"px",e.y+3*a.renderer.lineHeight+15<t.bottom)u.style.bottom="",u.style.top=e.y+15+"px";else{u.style.top="";var i=window.innerHeight||document.documentElement.clientHeight;u.style.bottom=i-e.y+5+"px"}}var a=e.editor,l=a.renderer.$gutterLayer;e.editor.setDefaultHandler("guttermousedown",function(t){if(a.isFocused()&&0==t.getButton()){var i=l.getRegion(t);if("foldWidgets"!=i){var r=t.getDocumentPosition().row,n=a.session.selection;if(t.getShiftKey())n.selectTo(r,0);else{if(2==t.domEvent.detail)return a.selectAll(),t.preventDefault();e.$clickSelection=a.selection.getLineRange(r)}return e.setState("selectByLines"),e.captureMouse(t),t.preventDefault()}}});var h,c,u,d;e.editor.setDefaultHandler("guttermousemove",function(t){var n=t.domEvent.target||t.domEvent.srcElement;return r.hasCssClass(n,"ace_fold-widget")?o():(d&&s(t),c=t,h||(h=setTimeout(function(){h=null,c&&!e.isMousePressed?i():o()
},50)),void 0)}),n.addListener(a.renderer.$gutter,"mouseout",function(){c=null,d&&!h&&(h=setTimeout(function(){h=null,o()},50))}),a.on("changeSession",o)}var r=e("../lib/dom"),n=e("../lib/event");t.GutterHandler=i}),define("ace/mouse/mouse_event",["require","exports","module","ace/lib/event","ace/lib/useragent"],function(e,t){var i=e("../lib/event"),r=e("../lib/useragent"),n=t.MouseEvent=function(e,t){this.domEvent=e,this.editor=t,this.x=this.clientX=e.clientX,this.y=this.clientY=e.clientY,this.$pos=null,this.$inSelection=null,this.propagationStopped=!1,this.defaultPrevented=!1};(function(){this.stopPropagation=function(){i.stopPropagation(this.domEvent),this.propagationStopped=!0},this.preventDefault=function(){i.preventDefault(this.domEvent),this.defaultPrevented=!0},this.stop=function(){this.stopPropagation(),this.preventDefault()},this.getDocumentPosition=function(){return this.$pos?this.$pos:(this.$pos=this.editor.renderer.screenToTextCoordinates(this.clientX,this.clientY),this.$pos)},this.inSelection=function(){if(null!==this.$inSelection)return this.$inSelection;var e=this.editor,t=e.getSelectionRange();if(t.isEmpty())this.$inSelection=!1;else{var i=this.getDocumentPosition();this.$inSelection=t.contains(i.row,i.column)}return this.$inSelection},this.getButton=function(){return i.getButton(this.domEvent)},this.getShiftKey=function(){return this.domEvent.shiftKey},this.getAccelKey=r.isMac?function(){return this.domEvent.metaKey}:function(){return this.domEvent.ctrlKey}}).call(n.prototype)}),define("ace/mouse/dragdrop_handler",["require","exports","module","ace/lib/dom","ace/lib/event","ace/lib/useragent"],function(e,t){function i(e){function t(e,t){var i=Date.now(),n=!t||e.row!=t.row,o=!t||e.column!=t.column;if(!F||n||o)g.$blockScrolling+=1,g.moveCursorToPosition(e),g.$blockScrolling-=1,F=i,S={x:x,y:T};else{var s=r(S.x,S.y,x,T);s>h?F=null:i-F>=l&&(g.renderer.scrollCursorIntoView(),F=null)}}function i(e,t){var i=Date.now(),r=g.renderer.layerConfig.lineHeight,n=g.renderer.layerConfig.characterWidth,o=g.renderer.scroller.getBoundingClientRect(),s={x:{left:x-o.left,right:o.right-x},y:{top:T-o.top,bottom:o.bottom-T}},l=Math.min(s.x.left,s.x.right),h=Math.min(s.y.top,s.y.bottom),c={row:e.row,column:e.column};2>=l/n&&(c.column+=s.x.left<s.x.right?-3:2),1>=h/r&&(c.row+=s.y.top<s.y.bottom?-1:1);var u=e.row!=c.row,d=e.column!=c.column,f=!t||e.row!=t.row;u||d&&!f?b?i-b>=a&&g.renderer.scrollCursorIntoView(c):b=i:b=null}function c(){var e=R;R=g.renderer.screenToTextCoordinates(x,T),t(R,e),i(R,e)}function u(){A=g.selection.toOrientedRange(),y=g.session.addMarker(A,"ace_selection",g.getSelectionStyle()),g.clearSelection(),g.isFocused()&&g.renderer.$cursorLayer.setBlinking(!1),clearInterval(w),w=setInterval(c,20),D=0,o.addListener(document,"mousemove",f)}function d(){clearInterval(w),g.session.removeMarker(y),y=null,g.$blockScrolling+=1,g.selection.fromOrientedRange(A),g.$blockScrolling-=1,g.isFocused()&&!C&&g.renderer.$cursorLayer.setBlinking(!g.getReadOnly()),A=null,D=0,b=null,F=null,o.removeListener(document,"mousemove",f)}function f(){null==M&&(M=setTimeout(function(){null!=M&&y&&d()},20))}function m(e){var t=e.types;return!t||Array.prototype.some.call(t,function(e){return"text/plain"==e||"Text"==e})}function p(e){var t=["copy","copymove","all","uninitialized"],i=["move","copymove","linkmove","all","uninitialized"],r=s.isMac?e.altKey:e.ctrlKey,n="uninitialized";try{n=e.dataTransfer.effectAllowed.toLowerCase()}catch(e){}var o="none";return r&&t.indexOf(n)>=0?o="copy":i.indexOf(n)>=0?o="move":t.indexOf(n)>=0&&(o="copy"),o}var g=e.editor,E=n.createElement("img");E.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",s.isOpera&&(E.style.cssText="width:1px;height:1px;position:fixed;top:0;left:0;z-index:2147483647;opacity:0;");var v=["dragWait","dragWaitEnd","startDrag","dragReadyEnd","onMouseDrag"];v.forEach(function(t){e[t]=this[t]},this),g.addEventListener("mousedown",this.onMouseDown.bind(e));var y,x,T,w,A,R,_,C,b,F,S,H=g.container,D=0;this.onDragStart=function(e){if(this.cancelDrag||!H.draggable){var t=this;return setTimeout(function(){t.startSelect(),t.captureMouse(e)},0),e.preventDefault()}A=g.getSelectionRange();var i=e.dataTransfer;i.effectAllowed=g.getReadOnly()?"copy":"copyMove",s.isOpera&&(g.container.appendChild(E),E._top=E.offsetTop),i.setDragImage&&i.setDragImage(E,0,0),s.isOpera&&g.container.removeChild(E),i.clearData(),i.setData("Text",g.session.getTextRange()),C=!0,this.setState("drag")},this.onDragEnd=function(e){if(H.draggable=!1,C=!1,this.setState(null),!g.getReadOnly()){var t=e.dataTransfer.dropEffect;!_&&"move"==t&&g.session.remove(g.getSelectionRange()),g.renderer.$cursorLayer.setBlinking(!0)}this.editor.unsetStyle("ace_dragging")},this.onDragEnter=function(e){return!g.getReadOnly()&&m(e.dataTransfer)?(y||u(),D++,e.dataTransfer.dropEffect=_=p(e),o.preventDefault(e)):void 0},this.onDragOver=function(e){return!g.getReadOnly()&&m(e.dataTransfer)?(y||(u(),D++),null!==M&&(M=null),x=e.clientX,T=e.clientY,e.dataTransfer.dropEffect=_=p(e),o.preventDefault(e)):void 0},this.onDragLeave=function(e){return D--,0>=D&&y?(d(),_=null,o.preventDefault(e)):void 0},this.onDrop=function(e){if(y){var t=e.dataTransfer;if(C)switch(_){case"move":A=A.contains(R.row,R.column)?{start:R,end:R}:g.moveText(A,R);break;case"copy":A=g.moveText(A,R,!0)}else{var i=t.getData("Text");A={start:R,end:g.session.insert(R,i)},g.focus(),_=null}return d(),o.preventDefault(e)}},o.addListener(H,"dragstart",this.onDragStart.bind(e)),o.addListener(H,"dragend",this.onDragEnd.bind(e)),o.addListener(H,"dragenter",this.onDragEnter.bind(e)),o.addListener(H,"dragover",this.onDragOver.bind(e)),o.addListener(H,"dragleave",this.onDragLeave.bind(e)),o.addListener(H,"drop",this.onDrop.bind(e));var M=null}function r(e,t,i,r){return Math.sqrt(Math.pow(i-e,2)+Math.pow(r-t,2))}var n=e("../lib/dom"),o=e("../lib/event"),s=e("../lib/useragent"),a=200,l=200,h=5;(function(){this.dragWait=function(){var e=Date.now()-this.mousedownEvent.time;e>this.editor.getDragDelay()&&this.startDrag()},this.dragWaitEnd=function(){var e=this.editor.container;e.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()),this.selectEnd()},this.dragReadyEnd=function(){this.editor.renderer.$cursorLayer.setBlinking(!this.editor.getReadOnly()),this.editor.unsetStyle("ace_dragging"),this.dragWaitEnd()},this.startDrag=function(){this.cancelDrag=!1;var e=this.editor.container;e.draggable=!0,this.editor.renderer.$cursorLayer.setBlinking(!1),this.editor.setStyle("ace_dragging"),this.setState("dragReady")},this.onMouseDrag=function(){var e=this.editor.container;if(s.isIE&&"dragReady"==this.state){var t=r(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y);t>3&&e.dragDrop()}if("dragWait"===this.state){var t=r(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y);t>0&&(e.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()))}},this.onMouseDown=function(e){if(this.$dragEnabled){this.mousedownEvent=e;var t=this.editor,i=e.inSelection(),r=e.getButton(),n=e.domEvent.detail||1;if(1===n&&0===r&&i){if(e.editor.inMultiSelectMode&&(e.getAccelKey()||e.getShiftKey()))return;this.mousedownEvent.time=Date.now();var o=e.domEvent.target||e.domEvent.srcElement;if("unselectable"in o&&(o.unselectable="on"),t.getDragDelay()){if(s.isWebKit){this.cancelDrag=!0;var a=t.container;a.draggable=!0}this.setState("dragWait")}else this.startDrag();this.captureMouse(e,this.onMouseDrag.bind(this)),e.defaultPrevented=!0}}}}).call(i.prototype),t.DragdropHandler=i}),define("ace/config",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/lib/net","ace/lib/event_emitter"],function(e,t,i){"no use strict";function r(e){return e.replace(/-(.)/g,function(e,t){return t.toUpperCase()})}var n=e("./lib/lang"),o=e("./lib/oop"),s=e("./lib/net"),a=e("./lib/event_emitter").EventEmitter,l=function(){return this}(),h={packaged:!1,workerPath:null,modePath:null,themePath:null,basePath:"",suffix:".js",$moduleUrls:{}};t.get=function(e){if(!h.hasOwnProperty(e))throw new Error("Unknown config key: "+e);return h[e]},t.set=function(e,t){if(!h.hasOwnProperty(e))throw new Error("Unknown config key: "+e);h[e]=t},t.all=function(){return n.copyObject(h)},o.implement(t,a),t.moduleUrl=function(e,t){if(h.$moduleUrls[e])return h.$moduleUrls[e];var i=e.split("/");t=t||i[i.length-2]||"";var r="snippets"==t?"/":"-",n=i[i.length-1];if("-"==r){var o=new RegExp("^"+t+"[\\-_]|[\\-_]"+t+"$","g");n=n.replace(o,"")}(!n||n==t)&&i.length>1&&(n=i[i.length-2]);var s=h[t+"Path"];return null==s?s=h.basePath:"/"==r&&(t=r=""),s&&"/"!=s.slice(-1)&&(s+="/"),s+t+r+n+this.get("suffix")},t.setModuleUrl=function(e,t){return h.$moduleUrls[e]=t},t.$loading={},t.loadModule=function(i,r){var n,o;Array.isArray(i)&&(o=i[0],i=i[1]);try{n=e(i)}catch(a){}if(n&&!t.$loading[i])return r&&r(n);if(t.$loading[i]||(t.$loading[i]=[]),t.$loading[i].push(r),!(t.$loading[i].length>1)){var l=function(){e([i],function(e){t._emit("load.module",{name:i,module:e});var r=t.$loading[i];t.$loading[i]=null,r.forEach(function(t){t&&t(e)})})};return t.get("packaged")?(s.loadScript(t.moduleUrl(i,o),l),void 0):l()}},t.init=function(){if(h.packaged=e.packaged||i.packaged||l.define&&define.packaged,!l.document)return"";for(var n={},o="",s=document.getElementsByTagName("script"),a=0;a<s.length;a++){var c=s[a],u=c.src||c.getAttribute("src");if(u){for(var d=c.attributes,f=0,m=d.length;m>f;f++){var p=d[f];0===p.name.indexOf("data-ace-")&&(n[r(p.name.replace(/^data-ace-/,""))]=p.value)}var g=u.match(/^(.*)\/ace(\-\w+)?\.js(\?|$)/);g&&(o=g[1])}}o&&(n.base=n.base||o,n.packaged=!0),n.basePath=n.base,n.workerPath=n.workerPath||n.base,n.modePath=n.modePath||n.base,n.themePath=n.themePath||n.base,delete n.base;for(var E in n)"undefined"!=typeof n[E]&&t.set(E,n[E])};var c={setOptions:function(e){Object.keys(e).forEach(function(t){this.setOption(t,e[t])},this)},getOptions:function(e){var t={};return e?Array.isArray(e)||(t=e,e=Object.keys(t)):e=Object.keys(this.$options),e.forEach(function(e){t[e]=this.getOption(e)},this),t},setOption:function(e,t){if(this["$"+e]!==t){var i=this.$options[e];return i?i.forwardTo?this[i.forwardTo]&&this[i.forwardTo].setOption(e,t):(i.handlesSet||(this["$"+e]=t),i&&i.set&&i.set.call(this,t),void 0):("undefined"!=typeof console&&console.warn&&console.warn('misspelled option "'+e+'"'),void 0)}},getOption:function(e){var t=this.$options[e];return t?t.forwardTo?this[t.forwardTo]&&this[t.forwardTo].getOption(e):t&&t.get?t.get.call(this):this["$"+e]:("undefined"!=typeof console&&console.warn&&console.warn('misspelled option "'+e+'"'),void 0)}},u={};t.defineOptions=function(e,t,i){return e.$options||(u[t]=e.$options={}),Object.keys(i).forEach(function(t){var r=i[t];"string"==typeof r&&(r={forwardTo:r}),r.name||(r.name=t),e.$options[r.name]=r,"initialValue"in r&&(e["$"+r.name]=r.initialValue)}),o.implement(e,c),this},t.resetOptions=function(e){Object.keys(e.$options).forEach(function(t){var i=e.$options[t];"value"in i&&e.setOption(t,i.value)})},t.setDefaultValue=function(e,i,r){var n=u[e]||(u[e]={});n[i]&&(n.forwardTo?t.setDefaultValue(n.forwardTo,i,r):n[i].value=r)},t.setDefaultValues=function(e,i){Object.keys(i).forEach(function(r){t.setDefaultValue(e,r,i[r])})}}),define("ace/lib/net",["require","exports","module","ace/lib/dom"],function(e,t){var i=e("./dom");t.get=function(e,t){var i=new XMLHttpRequest;i.open("GET",e,!0),i.onreadystatechange=function(){4===i.readyState&&t(i.responseText)},i.send(null)},t.loadScript=function(e,t){var r=i.getDocumentHead(),n=document.createElement("script");n.src=e,r.appendChild(n),n.onload=n.onreadystatechange=function(e,i){(i||!n.readyState||"loaded"==n.readyState||"complete"==n.readyState)&&(n=n.onload=n.onreadystatechange=null,i||t())}}}),define("ace/lib/event_emitter",["require","exports","module"],function(e,t){var i={},r=function(){this.propagationStopped=!0},n=function(){this.defaultPrevented=!0};i._emit=i._dispatchEvent=function(e,t){this._eventRegistry||(this._eventRegistry={}),this._defaultHandlers||(this._defaultHandlers={});var i=this._eventRegistry[e]||[],o=this._defaultHandlers[e];if(i.length||o){"object"==typeof t&&t||(t={}),t.type||(t.type=e),t.stopPropagation||(t.stopPropagation=r),t.preventDefault||(t.preventDefault=n),i=i.slice();for(var s=0;s<i.length&&(i[s](t,this),!t.propagationStopped);s++);return o&&!t.defaultPrevented?o(t,this):void 0}},i._signal=function(e,t){var i=(this._eventRegistry||{})[e];if(i){i=i.slice();for(var r=0;r<i.length;r++)i[r](t,this)}},i.once=function(e,t){var i=this;t&&this.addEventListener(e,function r(){i.removeEventListener(e,r),t.apply(null,arguments)})},i.setDefaultHandler=function(e,t){var i=this._defaultHandlers;if(i||(i=this._defaultHandlers={_disabled_:{}}),i[e]){var r=i[e],n=i._disabled_[e];n||(i._disabled_[e]=n=[]),n.push(r);var o=n.indexOf(t);-1!=o&&n.splice(o,1)}i[e]=t},i.removeDefaultHandler=function(e,t){var i=this._defaultHandlers;if(i){var r=i._disabled_[e];if(i[e]==t){{i[e]}r&&this.setDefaultHandler(e,r.pop())}else if(r){var n=r.indexOf(t);-1!=n&&r.splice(n,1)}}},i.on=i.addEventListener=function(e,t,i){this._eventRegistry=this._eventRegistry||{};var r=this._eventRegistry[e];return r||(r=this._eventRegistry[e]=[]),-1==r.indexOf(t)&&r[i?"unshift":"push"](t),t},i.off=i.removeListener=i.removeEventListener=function(e,t){this._eventRegistry=this._eventRegistry||{};var i=this._eventRegistry[e];if(i){var r=i.indexOf(t);-1!==r&&i.splice(r,1)}},i.removeAllListeners=function(e){this._eventRegistry&&(this._eventRegistry[e]=[])},t.EventEmitter=i}),define("ace/mouse/fold_handler",["require","exports","module"],function(e,t){function i(e){e.on("click",function(t){var i=t.getDocumentPosition(),r=e.session,n=r.getFoldAt(i.row,i.column,1);n&&(t.getAccelKey()?r.removeFold(n):r.expandFold(n),t.stop())}),e.on("gutterclick",function(t){var i=e.renderer.$gutterLayer.getRegion(t);if("foldWidgets"==i){var r=t.getDocumentPosition().row,n=e.session;n.foldWidgets&&n.foldWidgets[r]&&e.session.onFoldWidgetClick(r,t),e.isFocused()||e.focus(),t.stop()}}),e.on("gutterdblclick",function(t){var i=e.renderer.$gutterLayer.getRegion(t);if("foldWidgets"==i){var r=t.getDocumentPosition().row,n=e.session,o=n.getParentFoldRangeData(r,!0),s=o.range||o.firstRange;if(s){r=s.start.row;var a=n.getFoldAt(r,n.getLine(r).length,1);a?n.removeFold(a):(n.addFold("...",s),e.renderer.scrollCursorIntoView({row:s.start.row,column:0}))}t.stop()}})}t.FoldHandler=i}),define("ace/keyboard/keybinding",["require","exports","module","ace/lib/keys","ace/lib/event"],function(e,t){var i=e("../lib/keys"),r=e("../lib/event"),n=function(e){this.$editor=e,this.$data={},this.$handlers=[],this.setDefaultHandler(e.commands)};(function(){this.setDefaultHandler=function(e){this.removeKeyboardHandler(this.$defaultHandler),this.$defaultHandler=e,this.addKeyboardHandler(e,0),this.$data={editor:this.$editor}},this.setKeyboardHandler=function(e){var t=this.$handlers;if(t[t.length-1]!=e){for(;t[t.length-1]&&t[t.length-1]!=this.$defaultHandler;)this.removeKeyboardHandler(t[t.length-1]);this.addKeyboardHandler(e,1)}},this.addKeyboardHandler=function(e,t){if(e){var i=this.$handlers.indexOf(e);-1!=i&&this.$handlers.splice(i,1),void 0==t?this.$handlers.push(e):this.$handlers.splice(t,0,e),-1==i&&e.attach&&e.attach(this.$editor)}},this.removeKeyboardHandler=function(e){var t=this.$handlers.indexOf(e);return-1==t?!1:(this.$handlers.splice(t,1),e.detach&&e.detach(this.$editor),!0)},this.getKeyboardHandler=function(){return this.$handlers[this.$handlers.length-1]},this.$callKeyboardHandlers=function(e,t,i,n){for(var o,s=!1,a=this.$editor.commands,l=this.$handlers.length;l--&&(o=this.$handlers[l].handleKeyboard(this.$data,e,t,i,n),!(o&&o.command&&(s="null"==o.command?!0:a.exec(o.command,this.$editor,o.args,n),s&&n&&-1!=e&&1!=o.passEvent&&1!=o.command.passEvent&&r.stopEvent(n),s))););return s},this.onCommandKey=function(e,t,r){var n=i.keyCodeToString(r);this.$callKeyboardHandlers(t,n,r,e)},this.onTextInput=function(e){var t=this.$callKeyboardHandlers(-1,e);t||this.$editor.commands.exec("insertstring",this.$editor,e)}}).call(n.prototype),t.KeyBinding=n}),define("ace/edit_session",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/config","ace/lib/event_emitter","ace/selection","ace/mode/text","ace/range","ace/document","ace/background_tokenizer","ace/search_highlight","ace/edit_session/folding","ace/edit_session/bracket_match"],function(e,t){var i=e("./lib/oop"),r=e("./lib/lang"),n=e("./config"),o=e("./lib/event_emitter").EventEmitter,s=e("./selection").Selection,a=e("./mode/text").Mode,l=e("./range").Range,h=e("./document").Document,c=e("./background_tokenizer").BackgroundTokenizer,u=e("./search_highlight").SearchHighlight,d=function(e,t){this.$breakpoints=[],this.$decorations=[],this.$frontMarkers={},this.$backMarkers={},this.$markerId=1,this.$undoSelect=!0,this.$foldData=[],this.$foldData.toString=function(){return this.join("\n")},this.on("changeFold",this.onChangeFold.bind(this)),this.$onChange=this.onChange.bind(this),"object"==typeof e&&e.getLine||(e=new h(e)),this.setDocument(e),this.selection=new s(this),n.resetOptions(this),this.setMode(t),n._emit("session",this)};(function(){function t(e){return 4352>e?!1:e>=4352&&4447>=e||e>=4515&&4519>=e||e>=4602&&4607>=e||e>=9001&&9002>=e||e>=11904&&11929>=e||e>=11931&&12019>=e||e>=12032&&12245>=e||e>=12272&&12283>=e||e>=12288&&12350>=e||e>=12353&&12438>=e||e>=12441&&12543>=e||e>=12549&&12589>=e||e>=12593&&12686>=e||e>=12688&&12730>=e||e>=12736&&12771>=e||e>=12784&&12830>=e||e>=12832&&12871>=e||e>=12880&&13054>=e||e>=13056&&19903>=e||e>=19968&&42124>=e||e>=42128&&42182>=e||e>=43360&&43388>=e||e>=44032&&55203>=e||e>=55216&&55238>=e||e>=55243&&55291>=e||e>=63744&&64255>=e||e>=65040&&65049>=e||e>=65072&&65106>=e||e>=65108&&65126>=e||e>=65128&&65131>=e||e>=65281&&65376>=e||e>=65504&&65510>=e}i.implement(this,o),this.setDocument=function(e){this.doc&&this.doc.removeListener("change",this.$onChange),this.doc=e,e.on("change",this.$onChange),this.bgTokenizer&&this.bgTokenizer.setDocument(this.getDocument()),this.resetCaches()},this.getDocument=function(){return this.doc},this.$resetRowCache=function(e){if(!e)return this.$docRowCache=[],this.$screenRowCache=[],void 0;var t=this.$docRowCache.length,i=this.$getRowCacheIndex(this.$docRowCache,e)+1;t>i&&(this.$docRowCache.splice(i,t),this.$screenRowCache.splice(i,t))},this.$getRowCacheIndex=function(e,t){for(var i=0,r=e.length-1;r>=i;){var n=i+r>>1,o=e[n];if(t>o)i=n+1;else{if(!(o>t))return n;r=n-1}}return i-1},this.resetCaches=function(){this.$modified=!0,this.$wrapData=[],this.$rowLengthCache=[],this.$resetRowCache(0),this.bgTokenizer&&this.bgTokenizer.start(0)},this.onChangeFold=function(e){var t=e.data;this.$resetRowCache(t.start.row)},this.onChange=function(e){var t=e.data;this.$modified=!0,this.$resetRowCache(t.range.start.row);var i=this.$updateInternalDataOnChange(e);!this.$fromUndo&&this.$undoManager&&!t.ignore&&(this.$deltasDoc.push(t),i&&0!=i.length&&this.$deltasFold.push({action:"removeFolds",folds:i}),this.$informUndoManager.schedule()),this.bgTokenizer.$updateOnChange(t),this._emit("change",e)},this.setValue=function(e){this.doc.setValue(e),this.selection.moveCursorTo(0,0),this.selection.clearSelection(),this.$resetRowCache(0),this.$deltas=[],this.$deltasDoc=[],this.$deltasFold=[],this.getUndoManager().reset()},this.getValue=this.toString=function(){return this.doc.getValue()},this.getSelection=function(){return this.selection},this.getState=function(e){return this.bgTokenizer.getState(e)},this.getTokens=function(e){return this.bgTokenizer.getTokens(e)},this.getTokenAt=function(e,t){var i,r=this.bgTokenizer.getTokens(e),n=0;if(null==t)o=r.length-1,n=this.getLine(e).length;else for(var o=0;o<r.length&&(n+=r[o].value.length,!(n>=t));o++);return i=r[o],i?(i.index=o,i.start=n-i.value.length,i):null},this.setUndoManager=function(e){if(this.$undoManager=e,this.$deltas=[],this.$deltasDoc=[],this.$deltasFold=[],this.$informUndoManager&&this.$informUndoManager.cancel(),e){var t=this;this.$syncInformUndoManager=function(){t.$informUndoManager.cancel(),t.$deltasFold.length&&(t.$deltas.push({group:"fold",deltas:t.$deltasFold}),t.$deltasFold=[]),t.$deltasDoc.length&&(t.$deltas.push({group:"doc",deltas:t.$deltasDoc}),t.$deltasDoc=[]),t.$deltas.length>0&&e.execute({action:"aceupdate",args:[t.$deltas,t],merge:t.mergeUndoDeltas}),t.mergeUndoDeltas=!1,t.$deltas=[]},this.$informUndoManager=r.delayedCall(this.$syncInformUndoManager)}},this.markUndoGroup=function(){this.$syncInformUndoManager&&this.$syncInformUndoManager()},this.$defaultUndoManager={undo:function(){},redo:function(){},reset:function(){}},this.getUndoManager=function(){return this.$undoManager||this.$defaultUndoManager},this.getTabString=function(){return this.getUseSoftTabs()?r.stringRepeat(" ",this.getTabSize()):"	"},this.setUseSoftTabs=function(e){this.setOption("useSoftTabs",e)},this.getUseSoftTabs=function(){return this.$useSoftTabs&&!this.$mode.$indentWithTabs},this.setTabSize=function(e){this.setOption("tabSize",e)},this.getTabSize=function(){return this.$tabSize},this.isTabStop=function(e){return this.$useSoftTabs&&e.column%this.$tabSize==0},this.$overwrite=!1,this.setOverwrite=function(e){this.setOption("overwrite",e)},this.getOverwrite=function(){return this.$overwrite},this.toggleOverwrite=function(){this.setOverwrite(!this.$overwrite)},this.addGutterDecoration=function(e,t){this.$decorations[e]||(this.$decorations[e]=""),this.$decorations[e]+=" "+t,this._emit("changeBreakpoint",{})},this.removeGutterDecoration=function(e,t){this.$decorations[e]=(this.$decorations[e]||"").replace(" "+t,""),this._emit("changeBreakpoint",{})},this.getBreakpoints=function(){return this.$breakpoints},this.setBreakpoints=function(e){this.$breakpoints=[];for(var t=0;t<e.length;t++)this.$breakpoints[e[t]]="ace_breakpoint";this._emit("changeBreakpoint",{})},this.clearBreakpoints=function(){this.$breakpoints=[],this._emit("changeBreakpoint",{})},this.setBreakpoint=function(e,t){void 0===t&&(t="ace_breakpoint"),t?this.$breakpoints[e]=t:delete this.$breakpoints[e],this._emit("changeBreakpoint",{})},this.clearBreakpoint=function(e){delete this.$breakpoints[e],this._emit("changeBreakpoint",{})},this.addMarker=function(e,t,i,r){var n=this.$markerId++,o={range:e,type:i||"line",renderer:"function"==typeof i?i:null,clazz:t,inFront:!!r,id:n};return r?(this.$frontMarkers[n]=o,this._emit("changeFrontMarker")):(this.$backMarkers[n]=o,this._emit("changeBackMarker")),n},this.addDynamicMarker=function(e,t){if(e.update){var i=this.$markerId++;return e.id=i,e.inFront=!!t,t?(this.$frontMarkers[i]=e,this._emit("changeFrontMarker")):(this.$backMarkers[i]=e,this._emit("changeBackMarker")),e}},this.removeMarker=function(e){var t=this.$frontMarkers[e]||this.$backMarkers[e];if(t){var i=t.inFront?this.$frontMarkers:this.$backMarkers;t&&(delete i[e],this._emit(t.inFront?"changeFrontMarker":"changeBackMarker"))}},this.getMarkers=function(e){return e?this.$frontMarkers:this.$backMarkers},this.highlight=function(e){if(!this.$searchHighlight){var t=new u(null,"ace_selected-word","text");this.$searchHighlight=this.addDynamicMarker(t)}this.$searchHighlight.setRegexp(e)},this.highlightLines=function(e,t,i,r){"number"!=typeof t&&(i=t,t=e),i||(i="ace_step");var n=new l(e,0,t,1/0);return n.id=this.addMarker(n,i,"fullLine",r),n},this.setAnnotations=function(e){this.$annotations=e,this._emit("changeAnnotation",{})},this.getAnnotations=function(){return this.$annotations||[]},this.clearAnnotations=function(){this.setAnnotations([])},this.$detectNewLine=function(e){var t=e.match(/^.*?(\r?\n)/m);this.$autoNewLine=t?t[1]:"\n"},this.getWordRange=function(e,t){var i=this.getLine(e),r=!1;if(t>0&&(r=!!i.charAt(t-1).match(this.tokenRe)),r||(r=!!i.charAt(t).match(this.tokenRe)),r)var n=this.tokenRe;else if(/^\s+$/.test(i.slice(t-1,t+1)))var n=/\s/;else var n=this.nonTokenRe;var o=t;if(o>0){do o--;while(o>=0&&i.charAt(o).match(n));o++}for(var s=t;s<i.length&&i.charAt(s).match(n);)s++;return new l(e,o,e,s)},this.getAWordRange=function(e,t){for(var i=this.getWordRange(e,t),r=this.getLine(i.end.row);r.charAt(i.end.column).match(/[ \t]/);)i.end.column+=1;return i},this.setNewLineMode=function(e){this.doc.setNewLineMode(e)},this.getNewLineMode=function(){return this.doc.getNewLineMode()},this.setUseWorker=function(e){this.setOption("useWorker",e)},this.getUseWorker=function(){return this.$useWorker},this.onReloadTokenizer=function(e){var t=e.data;this.bgTokenizer.start(t.first),this._emit("tokenizerUpdate",e)},this.$modes={},this.$mode=null,this.$modeId=null,this.setMode=function(e,t){if(e&&"object"==typeof e){if(e.getTokenizer)return this.$onChangeMode(e);var i=e,r=i.path}else r=e||"ace/mode/text";return this.$modes["ace/mode/text"]||(this.$modes["ace/mode/text"]=new a),this.$modes[r]&&!i?(this.$onChangeMode(this.$modes[r]),t&&t(),void 0):(this.$modeId=r,n.loadModule(["mode",r],function(e){return this.$modeId!==r?t&&t():this.$modes[r]&&!i?this.$onChangeMode(this.$modes[r]):(e&&e.Mode&&(e=new e.Mode(i),i||(this.$modes[r]=e,e.$id=r),this.$onChangeMode(e),t&&t()),void 0)}.bind(this)),this.$mode||this.$onChangeMode(this.$modes["ace/mode/text"],!0),void 0)},this.$onChangeMode=function(e,t){if(t||(this.$modeId=e.$id),this.$mode!==e){this.$mode=e,this.$stopWorker(),this.$useWorker&&this.$startWorker();var i=e.getTokenizer();if(void 0!==i.addEventListener){var r=this.onReloadTokenizer.bind(this);i.addEventListener("update",r)}if(this.bgTokenizer)this.bgTokenizer.setTokenizer(i);else{this.bgTokenizer=new c(i);var n=this;this.bgTokenizer.addEventListener("update",function(e){n._emit("tokenizerUpdate",e)})}this.bgTokenizer.setDocument(this.getDocument()),this.tokenRe=e.tokenRe,this.nonTokenRe=e.nonTokenRe,t||(this.$options.wrapMethod.set.call(this,this.$wrapMethod),this.$setFolding(e.foldingRules),this.bgTokenizer.start(0),this._emit("changeMode"))}},this.$stopWorker=function(){this.$worker&&this.$worker.terminate(),this.$worker=null},this.$startWorker=function(){if("undefined"==typeof Worker||e.noWorker)this.$worker=null;else try{this.$worker=this.$mode.createWorker(this)}catch(t){console.log("Could not load worker"),console.log(t),this.$worker=null}},this.getMode=function(){return this.$mode},this.$scrollTop=0,this.setScrollTop=function(e){this.$scrollTop===e||isNaN(e)||(this.$scrollTop=e,this._signal("changeScrollTop",e))},this.getScrollTop=function(){return this.$scrollTop},this.$scrollLeft=0,this.setScrollLeft=function(e){this.$scrollLeft===e||isNaN(e)||(this.$scrollLeft=e,this._signal("changeScrollLeft",e))},this.getScrollLeft=function(){return this.$scrollLeft},this.getScreenWidth=function(){return this.$computeWidth(),this.lineWidgets?Math.max(this.getLineWidgetMaxWidth(),this.screenWidth):this.screenWidth},this.getLineWidgetMaxWidth=function(){if(null!=this.lineWidgetsWidth)return this.lineWidgetsWidth;var e=0;return this.lineWidgets.forEach(function(t){t&&t.screenWidth>e&&(e=t.screenWidth)}),this.lineWidgetWidth=e},this.$computeWidth=function(e){if(this.$modified||e){if(this.$modified=!1,this.$useWrapMode)return this.screenWidth=this.$wrapLimit;for(var t=this.doc.getAllLines(),i=this.$rowLengthCache,r=0,n=0,o=this.$foldData[n],s=o?o.start.row:1/0,a=t.length,l=0;a>l;l++){if(l>s){if(l=o.end.row+1,l>=a)break;o=this.$foldData[n++],s=o?o.start.row:1/0}null==i[l]&&(i[l]=this.$getStringScreenWidth(t[l])[0]),i[l]>r&&(r=i[l])}this.screenWidth=r}},this.getLine=function(e){return this.doc.getLine(e)},this.getLines=function(e,t){return this.doc.getLines(e,t)},this.getLength=function(){return this.doc.getLength()},this.getTextRange=function(e){return this.doc.getTextRange(e||this.selection.getRange())},this.insert=function(e,t){return this.doc.insert(e,t)},this.remove=function(e){return this.doc.remove(e)},this.undoChanges=function(e,t){if(e.length){this.$fromUndo=!0;for(var i=null,r=e.length-1;-1!=r;r--){var n=e[r];"doc"==n.group?(this.doc.revertDeltas(n.deltas),i=this.$getUndoSelection(n.deltas,!0,i)):n.deltas.forEach(function(e){this.addFolds(e.folds)},this)}return this.$fromUndo=!1,i&&this.$undoSelect&&!t&&this.selection.setSelectionRange(i),i}},this.redoChanges=function(e,t){if(e.length){this.$fromUndo=!0;for(var i=null,r=0;r<e.length;r++){var n=e[r];"doc"==n.group&&(this.doc.applyDeltas(n.deltas),i=this.$getUndoSelection(n.deltas,!1,i))}return this.$fromUndo=!1,i&&this.$undoSelect&&!t&&this.selection.setSelectionRange(i),i}},this.setUndoSelect=function(e){this.$undoSelect=e},this.$getUndoSelection=function(e,t,i){function r(e){var i="insertText"===e.action||"insertLines"===e.action;return t?!i:i}var n,o,s=e[0],a=!1;r(s)?(n=l.fromPoints(s.range.start,s.range.end),a=!0):(n=l.fromPoints(s.range.start,s.range.start),a=!1);for(var h=1;h<e.length;h++)s=e[h],r(s)?(o=s.range.start,-1==n.compare(o.row,o.column)&&n.setStart(s.range.start),o=s.range.end,1==n.compare(o.row,o.column)&&n.setEnd(s.range.end),a=!0):(o=s.range.start,-1==n.compare(o.row,o.column)&&(n=l.fromPoints(s.range.start,s.range.start)),a=!1);if(null!=i){0==l.comparePoints(i.start,n.start)&&(i.start.column+=n.end.column-n.start.column,i.end.column+=n.end.column-n.start.column);var c=i.compareRange(n);1==c?n.setStart(i.start):-1==c&&n.setEnd(i.end)}return n},this.replace=function(e,t){return this.doc.replace(e,t)},this.moveText=function(e,t,i){var r=this.getTextRange(e),n=this.getFoldsInRange(e),o=l.fromPoints(t,t);if(!i){this.remove(e);var s=e.start.row-e.end.row,a=s?-e.end.column:e.start.column-e.end.column;a&&(o.start.row==e.end.row&&o.start.column>e.end.column&&(o.start.column+=a),o.end.row==e.end.row&&o.end.column>e.end.column&&(o.end.column+=a)),s&&o.start.row>=e.end.row&&(o.start.row+=s,o.end.row+=s)}if(o.end=this.insert(o.start,r),n.length){var h=e.start,c=o.start,s=c.row-h.row,a=c.column-h.column;this.addFolds(n.map(function(e){return e=e.clone(),e.start.row==h.row&&(e.start.column+=a),e.end.row==h.row&&(e.end.column+=a),e.start.row+=s,e.end.row+=s,e}))}return o},this.indentRows=function(e,t,i){i=i.replace(/\t/g,this.getTabString());for(var r=e;t>=r;r++)this.insert({row:r,column:0},i)},this.outdentRows=function(e){for(var t=e.collapseRows(),i=new l(0,0,0,0),r=this.getTabSize(),n=t.start.row;n<=t.end.row;++n){var o=this.getLine(n);i.start.row=n,i.end.row=n;for(var s=0;r>s&&" "==o.charAt(s);++s);r>s&&"	"==o.charAt(s)?(i.start.column=s,i.end.column=s+1):(i.start.column=0,i.end.column=s),this.remove(i)}},this.$moveLines=function(e,t,i){if(e=this.getRowFoldStart(e),t=this.getRowFoldEnd(t),0>i){var r=this.getRowFoldStart(e+i);if(0>r)return 0;var n=r-e}else if(i>0){var r=this.getRowFoldEnd(t+i);if(r>this.doc.getLength()-1)return 0;var n=r-t}else{e=this.$clipRowToDocument(e),t=this.$clipRowToDocument(t);var n=t-e+1}var o=new l(e,0,t,Number.MAX_VALUE),s=this.getFoldsInRange(o).map(function(e){return e=e.clone(),e.start.row+=n,e.end.row+=n,e}),a=0==i?this.doc.getLines(e,t):this.doc.removeLines(e,t);return this.doc.insertLines(e+n,a),s.length&&this.addFolds(s),n},this.moveLinesUp=function(e,t){return this.$moveLines(e,t,-1)},this.moveLinesDown=function(e,t){return this.$moveLines(e,t,1)},this.duplicateLines=function(e,t){return this.$moveLines(e,t,0)},this.$clipRowToDocument=function(e){return Math.max(0,Math.min(e,this.doc.getLength()-1))},this.$clipColumnToRow=function(e,t){return 0>t?0:Math.min(this.doc.getLine(e).length,t)},this.$clipPositionToDocument=function(e,t){if(t=Math.max(0,t),0>e)e=0,t=0;else{var i=this.doc.getLength();e>=i?(e=i-1,t=this.doc.getLine(i-1).length):t=Math.min(this.doc.getLine(e).length,t)}return{row:e,column:t}},this.$clipRangeToDocument=function(e){e.start.row<0?(e.start.row=0,e.start.column=0):e.start.column=this.$clipColumnToRow(e.start.row,e.start.column);var t=this.doc.getLength()-1;return e.end.row>t?(e.end.row=t,e.end.column=this.doc.getLine(t).length):e.end.column=this.$clipColumnToRow(e.end.row,e.end.column),e},this.$wrapLimit=80,this.$useWrapMode=!1,this.$wrapLimitRange={min:null,max:null},this.setUseWrapMode=function(e){if(e!=this.$useWrapMode){if(this.$useWrapMode=e,this.$modified=!0,this.$resetRowCache(0),e){var t=this.getLength();this.$wrapData=[];for(var i=0;t>i;i++)this.$wrapData.push([]);this.$updateWrapData(0,t-1)}this._emit("changeWrapMode")}},this.getUseWrapMode=function(){return this.$useWrapMode},this.setWrapLimitRange=function(e,t){(this.$wrapLimitRange.min!==e||this.$wrapLimitRange.max!==t)&&(this.$wrapLimitRange={min:e,max:t},this.$modified=!0,this._emit("changeWrapMode"))},this.adjustWrapLimit=function(e,t){var i=this.$wrapLimitRange;i.max<0&&(i={min:t,max:t});var r=this.$constrainWrapLimit(e,i.min,i.max);return r!=this.$wrapLimit&&r>1?(this.$wrapLimit=r,this.$modified=!0,this.$useWrapMode&&(this.$updateWrapData(0,this.getLength()-1),this.$resetRowCache(0),this._emit("changeWrapLimit")),!0):!1
},this.$constrainWrapLimit=function(e,t,i){return t&&(e=Math.max(t,e)),i&&(e=Math.min(i,e)),e},this.getWrapLimit=function(){return this.$wrapLimit},this.setWrapLimit=function(e){this.setWrapLimitRange(e,e)},this.getWrapLimitRange=function(){return{min:this.$wrapLimitRange.min,max:this.$wrapLimitRange.max}},this.$updateInternalDataOnChange=function(e){var t,i=this.$useWrapMode,r=e.data.action,n=e.data.range.start.row,o=e.data.range.end.row,s=e.data.range.start,a=e.data.range.end,l=null;if(-1!=r.indexOf("Lines")?(o="insertLines"==r?n+e.data.lines.length:n,t=e.data.lines?e.data.lines.length:o-n):t=o-n,this.$updating=!0,0!=t)if(-1!=r.indexOf("remove")){this[i?"$wrapData":"$rowLengthCache"].splice(n,t);var h=this.$foldData;l=this.getFoldsInRange(e.data.range),this.removeFolds(l);var c=this.getFoldLine(a.row),u=0;if(c){c.addRemoveChars(a.row,a.column,s.column-a.column),c.shiftRow(-t);var d=this.getFoldLine(n);d&&d!==c&&(d.merge(c),c=d),u=h.indexOf(c)+1}for(u;u<h.length;u++){var c=h[u];c.start.row>=a.row&&c.shiftRow(-t)}o=n}else{var f;if(i){f=[n,0];for(var m=0;t>m;m++)f.push([]);this.$wrapData.splice.apply(this.$wrapData,f)}else f=Array(t),f.unshift(n,0),this.$rowLengthCache.splice.apply(this.$rowLengthCache,f);var h=this.$foldData,c=this.getFoldLine(n),u=0;if(c){var p=c.range.compareInside(s.row,s.column);0==p?(c=c.split(s.row,s.column),c.shiftRow(t),c.addRemoveChars(o,0,a.column-s.column)):-1==p&&(c.addRemoveChars(n,0,a.column-s.column),c.shiftRow(t)),u=h.indexOf(c)+1}for(u;u<h.length;u++){var c=h[u];c.start.row>=n&&c.shiftRow(t)}}else{t=Math.abs(e.data.range.start.column-e.data.range.end.column),-1!=r.indexOf("remove")&&(l=this.getFoldsInRange(e.data.range),this.removeFolds(l),t=-t);var c=this.getFoldLine(n);c&&c.addRemoveChars(n,s.column,t)}return i&&this.$wrapData.length!=this.doc.getLength()&&console.error("doc.getLength() and $wrapData.length have to be the same!"),this.$updating=!1,i?this.$updateWrapData(n,o):this.$updateRowLengthCache(n,o),l},this.$updateRowLengthCache=function(e,t){this.$rowLengthCache[e]=null,this.$rowLengthCache[t]=null},this.$updateWrapData=function(e,t){var i,r,n=this.doc.getAllLines(),o=this.getTabSize(),s=this.$wrapData,a=this.$wrapLimit,l=e;for(t=Math.min(t,n.length-1);t>=l;)r=this.getFoldLine(l,r),r?(i=[],r.walk(function(e,t,r,o){var s;if(null!=e){s=this.$getDisplayTokens(e,i.length),s[0]=d;for(var a=1;a<s.length;a++)s[a]=f}else s=this.$getDisplayTokens(n[t].substring(o,r),i.length);i=i.concat(s)}.bind(this),r.end.row,n[r.end.row].length+1),s[r.start.row]=this.$computeWrapSplits(i,a,o),l=r.end.row+1):(i=this.$getDisplayTokens(n[l]),s[l]=this.$computeWrapSplits(i,a,o),l++)};var s=1,h=2,d=3,f=4,m=9,p=10,g=11,E=12;this.$computeWrapSplits=function(e,t){function i(t){var i=e.slice(o,t),n=i.length;i.join("").replace(/12/g,function(){n-=1}).replace(/2/g,function(){n-=1}),s+=n,r.push(s),o=t}if(0==e.length)return[];for(var r=[],n=e.length,o=0,s=0,a=this.$wrapAsCode;n-o>t;){var l=o+t;if(e[l-1]>=p&&e[l]>=p)i(l);else if(e[l]!=d&&e[l]!=f){for(var h=Math.max(l-(a?10:t-(t>>2)),o-1);l>h&&e[l]<d;)l--;if(a){for(;l>h&&e[l]<d;)l--;for(;l>h&&e[l]==m;)l--}else for(;l>h&&e[l]<p;)l--;l>h?i(++l):(l=o+t,i(l))}else{for(l;l!=o-1&&e[l]!=d;l--);if(l>o){i(l);continue}for(l=o+t;l<e.length&&e[l]==f;l++);if(l==e.length)break;i(l)}}return r},this.$getDisplayTokens=function(e,i){var r,n=[];i=i||0;for(var o=0;o<e.length;o++){var a=e.charCodeAt(o);if(9==a){r=this.getScreenTabSize(n.length+i),n.push(g);for(var l=1;r>l;l++)n.push(E)}else 32==a?n.push(p):a>39&&48>a||a>57&&64>a?n.push(m):a>=4352&&t(a)?n.push(s,h):n.push(s)}return n},this.$getStringScreenWidth=function(e,i,r){if(0==i)return[0,0];null==i&&(i=1/0),r=r||0;var n,o;for(o=0;o<e.length&&(n=e.charCodeAt(o),r+=9==n?this.getScreenTabSize(r):n>=4352&&t(n)?2:1,!(r>i));o++);return[r,o]},this.lineWidgets=null,this.getRowLength=function(e){if(this.lineWidgets)var t=this.lineWidgets[e]&&this.lineWidgets[e].rowCount||0;else t=0;return this.$useWrapMode&&this.$wrapData[e]?this.$wrapData[e].length+1+t:1+t},this.getRowLineCount=function(e){return this.$useWrapMode&&this.$wrapData[e]?this.$wrapData[e].length+1:1},this.getScreenLastRowColumn=function(e){var t=this.screenToDocumentPosition(e,Number.MAX_VALUE);return this.documentToScreenColumn(t.row,t.column)},this.getDocumentLastRowColumn=function(e,t){var i=this.documentToScreenRow(e,t);return this.getScreenLastRowColumn(i)},this.getDocumentLastRowColumnPosition=function(e,t){var i=this.documentToScreenRow(e,t);return this.screenToDocumentPosition(i,Number.MAX_VALUE/10)},this.getRowSplitData=function(e){return this.$useWrapMode?this.$wrapData[e]:void 0},this.getScreenTabSize=function(e){return this.$tabSize-e%this.$tabSize},this.screenToDocumentRow=function(e,t){return this.screenToDocumentPosition(e,t).row},this.screenToDocumentColumn=function(e,t){return this.screenToDocumentPosition(e,t).column},this.screenToDocumentPosition=function(e,t){if(0>e)return{row:0,column:0};var i,r,n=0,o=0,s=0,a=0,l=this.$screenRowCache,h=this.$getRowCacheIndex(l,e),c=l.length;if(c&&h>=0)var s=l[h],n=this.$docRowCache[h],u=e>l[c-1];else var u=!c;for(var d=this.getLength()-1,f=this.getNextFoldLine(n),m=f?f.start.row:1/0;e>=s&&(a=this.getRowLength(n),!(s+a>e||n>=d));)s+=a,n++,n>m&&(n=f.end.row+1,f=this.getNextFoldLine(n,f),m=f?f.start.row:1/0),u&&(this.$docRowCache.push(n),this.$screenRowCache.push(s));if(f&&f.start.row<=n)i=this.getFoldDisplayLine(f),n=f.start.row;else{if(e>=s+a||n>d)return{row:d,column:this.getLine(d).length};i=this.getLine(n),f=null}if(this.$useWrapMode){var p=this.$wrapData[n];if(p){var g=Math.floor(e-s);r=p[g],g>0&&p.length&&(o=p[g-1]||p[p.length-1],i=i.substring(o))}}return o+=this.$getStringScreenWidth(i,t)[1],this.$useWrapMode&&o>=r&&(o=r-1),f?f.idxToPosition(o):{row:n,column:o}},this.documentToScreenPosition=function(e,t){if("undefined"==typeof t)var i=this.$clipPositionToDocument(e.row,e.column);else i=this.$clipPositionToDocument(e,t);e=i.row,t=i.column;var r=0,n=null,o=null;o=this.getFoldAt(e,t,1),o&&(e=o.start.row,t=o.start.column);var s,a=0,l=this.$docRowCache,h=this.$getRowCacheIndex(l,e),c=l.length;if(c&&h>=0)var a=l[h],r=this.$screenRowCache[h],u=e>l[c-1];else var u=!c;for(var d=this.getNextFoldLine(a),f=d?d.start.row:1/0;e>a;){if(a>=f){if(s=d.end.row+1,s>e)break;d=this.getNextFoldLine(s,d),f=d?d.start.row:1/0}else s=a+1;r+=this.getRowLength(a),a=s,u&&(this.$docRowCache.push(a),this.$screenRowCache.push(r))}var m="";if(d&&a>=f?(m=this.getFoldDisplayLine(d,e,t),n=d.start.row):(m=this.getLine(e).substring(0,t),n=e),this.$useWrapMode){for(var p=this.$wrapData[n],g=0;m.length>=p[g];)r++,g++;m=m.substring(p[g-1]||0,m.length)}return{row:r,column:this.$getStringScreenWidth(m)[0]}},this.documentToScreenColumn=function(e,t){return this.documentToScreenPosition(e,t).column},this.documentToScreenRow=function(e,t){return this.documentToScreenPosition(e,t).row},this.getScreenLength=function(){var e=0,t=null;if(this.$useWrapMode)for(var i=this.$wrapData.length,r=0,n=0,t=this.$foldData[n++],o=t?t.start.row:1/0;i>r;)e+=this.$wrapData[r].length+1,r++,r>o&&(r=t.end.row+1,t=this.$foldData[n++],o=t?t.start.row:1/0);else{e=this.getLength();for(var s=this.$foldData,n=0;n<s.length;n++)t=s[n],e-=t.end.row-t.start.row}return this.lineWidgets&&(e+=this.$getWidgetScreenLength()),e}}).call(d.prototype),e("./edit_session/folding").Folding.call(d.prototype),e("./edit_session/bracket_match").BracketMatch.call(d.prototype),n.defineOptions(d.prototype,"session",{wrap:{set:function(e){if(e&&"off"!=e?"free"==e?e=!0:"printMargin"==e?e=-1:"string"==typeof e&&(e=parseInt(e,10)||!1):e=!1,this.$wrap!=e){if(e){var t="number"==typeof e?e:null;this.setWrapLimitRange(t,t),this.setUseWrapMode(!0)}else this.setUseWrapMode(!1);this.$wrap=e}},get:function(){return this.getUseWrapMode()?-1==this.$wrap?"printMargin":this.getWrapLimitRange().min?this.$wrap:"free":"off"},handlesSet:!0},wrapMethod:{set:function(e){e="auto"==e?"text"!=this.$mode.type:"text"!=e,e!=this.$wrapAsCode&&(this.$wrapAsCode=e,this.$useWrapMode&&(this.$modified=!0,this.$resetRowCache(0),this.$updateWrapData(0,this.getLength()-1)))},initialValue:"auto"},firstLineNumber:{set:function(){this._emit("changeBreakpoint")},initialValue:1},useWorker:{set:function(e){this.$useWorker=e,this.$stopWorker(),e&&this.$startWorker()},initialValue:!0},useSoftTabs:{initialValue:!0},tabSize:{set:function(e){isNaN(e)||this.$tabSize===e||(this.$modified=!0,this.$rowLengthCache=[],this.$tabSize=e,this._emit("changeTabSize"))},initialValue:4,handlesSet:!0},overwrite:{set:function(){this._emit("changeOverwrite")},initialValue:!1},newLineMode:{set:function(e){this.doc.setNewLineMode(e)},get:function(){return this.doc.getNewLineMode()},handlesSet:!0},mode:{set:function(e){this.setMode(e)},get:function(){return this.$modeId}}}),t.EditSession=d}),define("ace/selection",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/range"],function(e,t){var i=e("./lib/oop"),r=e("./lib/lang"),n=e("./lib/event_emitter").EventEmitter,o=e("./range").Range,s=function(e){this.session=e,this.doc=e.getDocument(),this.clearSelection(),this.lead=this.selectionLead=this.doc.createAnchor(0,0),this.anchor=this.selectionAnchor=this.doc.createAnchor(0,0);var t=this;this.lead.on("change",function(e){t._emit("changeCursor"),t.$isEmpty||t._emit("changeSelection"),!t.$keepDesiredColumnOnChange&&e.old.column!=e.value.column&&(t.$desiredColumn=null)}),this.selectionAnchor.on("change",function(){t.$isEmpty||t._emit("changeSelection")})};(function(){i.implement(this,n),this.isEmpty=function(){return this.$isEmpty||this.anchor.row==this.lead.row&&this.anchor.column==this.lead.column},this.isMultiLine=function(){return this.isEmpty()?!1:this.getRange().isMultiLine()},this.getCursor=function(){return this.lead.getPosition()},this.setSelectionAnchor=function(e,t){this.anchor.setPosition(e,t),this.$isEmpty&&(this.$isEmpty=!1,this._emit("changeSelection"))},this.getSelectionAnchor=function(){return this.$isEmpty?this.getSelectionLead():this.anchor.getPosition()},this.getSelectionLead=function(){return this.lead.getPosition()},this.shiftSelection=function(e){if(this.$isEmpty)return this.moveCursorTo(this.lead.row,this.lead.column+e),void 0;var t=this.getSelectionAnchor(),i=this.getSelectionLead(),r=this.isBackwards();(!r||0!==t.column)&&this.setSelectionAnchor(t.row,t.column+e),(r||0!==i.column)&&this.$moveSelection(function(){this.moveCursorTo(i.row,i.column+e)})},this.isBackwards=function(){var e=this.anchor,t=this.lead;return e.row>t.row||e.row==t.row&&e.column>t.column},this.getRange=function(){var e=this.anchor,t=this.lead;return this.isEmpty()?o.fromPoints(t,t):this.isBackwards()?o.fromPoints(t,e):o.fromPoints(e,t)},this.clearSelection=function(){this.$isEmpty||(this.$isEmpty=!0,this._emit("changeSelection"))},this.selectAll=function(){var e=this.doc.getLength()-1;this.setSelectionAnchor(0,0),this.moveCursorTo(e,this.doc.getLine(e).length)},this.setRange=this.setSelectionRange=function(e,t){t?(this.setSelectionAnchor(e.end.row,e.end.column),this.selectTo(e.start.row,e.start.column)):(this.setSelectionAnchor(e.start.row,e.start.column),this.selectTo(e.end.row,e.end.column)),this.getRange().isEmpty()&&(this.$isEmpty=!0),this.$desiredColumn=null},this.$moveSelection=function(e){var t=this.lead;this.$isEmpty&&this.setSelectionAnchor(t.row,t.column),e.call(this)},this.selectTo=function(e,t){this.$moveSelection(function(){this.moveCursorTo(e,t)})},this.selectToPosition=function(e){this.$moveSelection(function(){this.moveCursorToPosition(e)})},this.selectUp=function(){this.$moveSelection(this.moveCursorUp)},this.selectDown=function(){this.$moveSelection(this.moveCursorDown)},this.selectRight=function(){this.$moveSelection(this.moveCursorRight)},this.selectLeft=function(){this.$moveSelection(this.moveCursorLeft)},this.selectLineStart=function(){this.$moveSelection(this.moveCursorLineStart)},this.selectLineEnd=function(){this.$moveSelection(this.moveCursorLineEnd)},this.selectFileEnd=function(){this.$moveSelection(this.moveCursorFileEnd)},this.selectFileStart=function(){this.$moveSelection(this.moveCursorFileStart)},this.selectWordRight=function(){this.$moveSelection(this.moveCursorWordRight)},this.selectWordLeft=function(){this.$moveSelection(this.moveCursorWordLeft)},this.getWordRange=function(e,t){if("undefined"==typeof t){var i=e||this.lead;e=i.row,t=i.column}return this.session.getWordRange(e,t)},this.selectWord=function(){this.setSelectionRange(this.getWordRange())},this.selectAWord=function(){var e=this.getCursor(),t=this.session.getAWordRange(e.row,e.column);this.setSelectionRange(t)},this.getLineRange=function(e,t){var i,r="number"==typeof e?e:this.lead.row,n=this.session.getFoldLine(r);return n?(r=n.start.row,i=n.end.row):i=r,t===!0?new o(r,0,i,this.session.getLine(i).length):new o(r,0,i+1,0)},this.selectLine=function(){this.setSelectionRange(this.getLineRange())},this.moveCursorUp=function(){this.moveCursorBy(-1,0)},this.moveCursorDown=function(){this.moveCursorBy(1,0)},this.moveCursorLeft=function(){var e,t=this.lead.getPosition();if(e=this.session.getFoldAt(t.row,t.column,-1))this.moveCursorTo(e.start.row,e.start.column);else if(0==t.column)t.row>0&&this.moveCursorTo(t.row-1,this.doc.getLine(t.row-1).length);else{var i=this.session.getTabSize();this.session.isTabStop(t)&&this.doc.getLine(t.row).slice(t.column-i,t.column).split(" ").length-1==i?this.moveCursorBy(0,-i):this.moveCursorBy(0,-1)}},this.moveCursorRight=function(){var e,t=this.lead.getPosition();if(e=this.session.getFoldAt(t.row,t.column,1))this.moveCursorTo(e.end.row,e.end.column);else if(this.lead.column==this.doc.getLine(this.lead.row).length)this.lead.row<this.doc.getLength()-1&&this.moveCursorTo(this.lead.row+1,0);else{var i=this.session.getTabSize(),t=this.lead;this.session.isTabStop(t)&&this.doc.getLine(t.row).slice(t.column,t.column+i).split(" ").length-1==i?this.moveCursorBy(0,i):this.moveCursorBy(0,1)}},this.moveCursorLineStart=function(){var e=this.lead.row,t=this.lead.column,i=this.session.documentToScreenRow(e,t),r=this.session.screenToDocumentPosition(i,0),n=this.session.getDisplayLine(e,null,r.row,r.column),o=n.match(/^\s*/);o[0].length!=t&&!this.session.$useEmacsStyleLineStart&&(r.column+=o[0].length),this.moveCursorToPosition(r)},this.moveCursorLineEnd=function(){var e=this.lead,t=this.session.getDocumentLastRowColumnPosition(e.row,e.column);if(this.lead.column==t.column){var i=this.session.getLine(t.row);if(t.column==i.length){var r=i.search(/\s+$/);r>0&&(t.column=r)}}this.moveCursorTo(t.row,t.column)},this.moveCursorFileEnd=function(){var e=this.doc.getLength()-1,t=this.doc.getLine(e).length;this.moveCursorTo(e,t)},this.moveCursorFileStart=function(){this.moveCursorTo(0,0)},this.moveCursorLongWordRight=function(){var e,t=this.lead.row,i=this.lead.column,r=this.doc.getLine(t),n=r.substring(i);this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0;var o=this.session.getFoldAt(t,i,1);return o?(this.moveCursorTo(o.end.row,o.end.column),void 0):((e=this.session.nonTokenRe.exec(n))&&(i+=this.session.nonTokenRe.lastIndex,this.session.nonTokenRe.lastIndex=0,n=r.substring(i)),i>=r.length?(this.moveCursorTo(t,r.length),this.moveCursorRight(),t<this.doc.getLength()-1&&this.moveCursorWordRight(),void 0):((e=this.session.tokenRe.exec(n))&&(i+=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),this.moveCursorTo(t,i),void 0))},this.moveCursorLongWordLeft=function(){var e,t=this.lead.row,i=this.lead.column;if(e=this.session.getFoldAt(t,i,-1))return this.moveCursorTo(e.start.row,e.start.column),void 0;var n=this.session.getFoldStringAt(t,i,-1);null==n&&(n=this.doc.getLine(t).substring(0,i));var o,s=r.stringReverse(n);return this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0,(o=this.session.nonTokenRe.exec(s))&&(i-=this.session.nonTokenRe.lastIndex,s=s.slice(this.session.nonTokenRe.lastIndex),this.session.nonTokenRe.lastIndex=0),0>=i?(this.moveCursorTo(t,0),this.moveCursorLeft(),t>0&&this.moveCursorWordLeft(),void 0):((o=this.session.tokenRe.exec(s))&&(i-=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),this.moveCursorTo(t,i),void 0)},this.$shortWordEndIndex=function(e){var t,i,r=0,n=/\s/,o=this.session.tokenRe;if(o.lastIndex=0,t=this.session.tokenRe.exec(e))r=this.session.tokenRe.lastIndex;else{for(;(i=e[r])&&n.test(i);)r++;if(1>r)for(o.lastIndex=0;(i=e[r])&&!o.test(i);)if(o.lastIndex=0,r++,n.test(i)){if(r>2){r--;break}for(;(i=e[r])&&n.test(i);)r++;if(r>2)break}}return o.lastIndex=0,r},this.moveCursorShortWordRight=function(){var e=this.lead.row,t=this.lead.column,i=this.doc.getLine(e),r=i.substring(t),n=this.session.getFoldAt(e,t,1);if(n)return this.moveCursorTo(n.end.row,n.end.column);if(t==i.length){var o=this.doc.getLength();do e++,r=this.doc.getLine(e);while(o>e&&/^\s*$/.test(r));/^\s+/.test(r)||(r=""),t=0}var s=this.$shortWordEndIndex(r);this.moveCursorTo(e,t+s)},this.moveCursorShortWordLeft=function(){var e,t=this.lead.row,i=this.lead.column;if(e=this.session.getFoldAt(t,i,-1))return this.moveCursorTo(e.start.row,e.start.column);var n=this.session.getLine(t).substring(0,i);if(0==i){do t--,n=this.doc.getLine(t);while(t>0&&/^\s*$/.test(n));i=n.length,/\s+$/.test(n)||(n="")}var o=r.stringReverse(n),s=this.$shortWordEndIndex(o);return this.moveCursorTo(t,i-s)},this.moveCursorWordRight=function(){this.session.$selectLongWords?this.moveCursorLongWordRight():this.moveCursorShortWordRight()},this.moveCursorWordLeft=function(){this.session.$selectLongWords?this.moveCursorLongWordLeft():this.moveCursorShortWordLeft()},this.moveCursorBy=function(e,t){var i=this.session.documentToScreenPosition(this.lead.row,this.lead.column);0===t&&(this.$desiredColumn?i.column=this.$desiredColumn:this.$desiredColumn=i.column);var r=this.session.screenToDocumentPosition(i.row+e,i.column);0!==e&&0===t&&r.row===this.lead.row&&r.column===this.lead.column&&this.session.lineWidgets&&this.session.lineWidgets[r.row]&&r.row++,this.moveCursorTo(r.row,r.column+t,0===t)},this.moveCursorToPosition=function(e){this.moveCursorTo(e.row,e.column)},this.moveCursorTo=function(e,t,i){var r=this.session.getFoldAt(e,t,1);r&&(e=r.start.row,t=r.start.column),this.$keepDesiredColumnOnChange=!0,this.lead.setPosition(e,t),this.$keepDesiredColumnOnChange=!1,i||(this.$desiredColumn=null)},this.moveCursorToScreen=function(e,t,i){var r=this.session.screenToDocumentPosition(e,t);this.moveCursorTo(r.row,r.column,i)},this.detach=function(){this.lead.detach(),this.anchor.detach(),this.session=this.doc=null},this.fromOrientedRange=function(e){this.setSelectionRange(e,e.cursor==e.start),this.$desiredColumn=e.desiredColumn||this.$desiredColumn},this.toOrientedRange=function(e){var t=this.getRange();return e?(e.start.column=t.start.column,e.start.row=t.start.row,e.end.column=t.end.column,e.end.row=t.end.row):e=t,e.cursor=this.isBackwards()?e.start:e.end,e.desiredColumn=this.$desiredColumn,e},this.toJSON=function(){if(this.rangeCount)var e=this.ranges.map(function(e){var t=e.clone();return t.isBackwards=e.cursor==e.start,t});else{var e=this.getRange();e.isBackwards=this.isBackwards()}return e},this.fromJSON=function(e){if(void 0==e.start){if(this.rangeList){this.toSingleRange(e[0]);for(var t=e.length;t--;){var i=o.fromPoints(e[t].start,e[t].end);e.isBackwards&&(i.cursor=i.start),this.addRange(i,!0)}return}e=e[0]}this.rangeList&&this.toSingleRange(e),this.setSelectionRange(e,e.isBackwards)},this.isEqual=function(e){if((e.length||this.rangeCount)&&e.length!=this.rangeCount)return!1;if(!e.length||!this.ranges)return this.getRange().isEqual(e);for(var t=this.ranges.length;t--;)if(!this.ranges[t].isEqual(e[t]))return!1;return!0}}).call(s.prototype),t.Selection=s}),define("ace/range",["require","exports","module"],function(e,t){var i=function(e,t){return e.row-t.row||e.column-t.column},r=function(e,t,i,r){this.start={row:e,column:t},this.end={row:i,column:r}};(function(){this.isEqual=function(e){return this.start.row===e.start.row&&this.end.row===e.end.row&&this.start.column===e.start.column&&this.end.column===e.end.column},this.toString=function(){return"Range: ["+this.start.row+"/"+this.start.column+"] -> ["+this.end.row+"/"+this.end.column+"]"},this.contains=function(e,t){return 0==this.compare(e,t)},this.compareRange=function(e){var t,i=e.end,r=e.start;return t=this.compare(i.row,i.column),1==t?(t=this.compare(r.row,r.column),1==t?2:0==t?1:0):-1==t?-2:(t=this.compare(r.row,r.column),-1==t?-1:1==t?42:0)},this.comparePoint=function(e){return this.compare(e.row,e.column)},this.containsRange=function(e){return 0==this.comparePoint(e.start)&&0==this.comparePoint(e.end)},this.intersects=function(e){var t=this.compareRange(e);return-1==t||0==t||1==t},this.isEnd=function(e,t){return this.end.row==e&&this.end.column==t},this.isStart=function(e,t){return this.start.row==e&&this.start.column==t},this.setStart=function(e,t){"object"==typeof e?(this.start.column=e.column,this.start.row=e.row):(this.start.row=e,this.start.column=t)},this.setEnd=function(e,t){"object"==typeof e?(this.end.column=e.column,this.end.row=e.row):(this.end.row=e,this.end.column=t)},this.inside=function(e,t){return 0==this.compare(e,t)?this.isEnd(e,t)||this.isStart(e,t)?!1:!0:!1},this.insideStart=function(e,t){return 0==this.compare(e,t)?this.isEnd(e,t)?!1:!0:!1},this.insideEnd=function(e,t){return 0==this.compare(e,t)?this.isStart(e,t)?!1:!0:!1},this.compare=function(e,t){return this.isMultiLine()||e!==this.start.row?e<this.start.row?-1:e>this.end.row?1:this.start.row===e?t>=this.start.column?0:-1:this.end.row===e?t<=this.end.column?0:1:0:t<this.start.column?-1:t>this.end.column?1:0},this.compareStart=function(e,t){return this.start.row==e&&this.start.column==t?-1:this.compare(e,t)},this.compareEnd=function(e,t){return this.end.row==e&&this.end.column==t?1:this.compare(e,t)},this.compareInside=function(e,t){return this.end.row==e&&this.end.column==t?1:this.start.row==e&&this.start.column==t?-1:this.compare(e,t)},this.clipRows=function(e,t){if(this.end.row>t)var i={row:t+1,column:0};else if(this.end.row<e)var i={row:e,column:0};if(this.start.row>t)var n={row:t+1,column:0};else if(this.start.row<e)var n={row:e,column:0};return r.fromPoints(n||this.start,i||this.end)},this.extend=function(e,t){var i=this.compare(e,t);if(0==i)return this;if(-1==i)var n={row:e,column:t};else var o={row:e,column:t};return r.fromPoints(n||this.start,o||this.end)},this.isEmpty=function(){return this.start.row===this.end.row&&this.start.column===this.end.column},this.isMultiLine=function(){return this.start.row!==this.end.row},this.clone=function(){return r.fromPoints(this.start,this.end)},this.collapseRows=function(){return 0==this.end.column?new r(this.start.row,0,Math.max(this.start.row,this.end.row-1),0):new r(this.start.row,0,this.end.row,0)},this.toScreenRange=function(e){var t=e.documentToScreenPosition(this.start),i=e.documentToScreenPosition(this.end);return new r(t.row,t.column,i.row,i.column)},this.moveBy=function(e,t){this.start.row+=e,this.start.column+=t,this.end.row+=e,this.end.column+=t}}).call(r.prototype),r.fromPoints=function(e,t){return new r(e.row,e.column,t.row,t.column)},r.comparePoints=i,r.comparePoints=function(e,t){return e.row-t.row||e.column-t.column},t.Range=r}),define("ace/mode/text",["require","exports","module","ace/tokenizer","ace/mode/text_highlight_rules","ace/mode/behaviour","ace/unicode","ace/lib/lang","ace/token_iterator","ace/range"],function(e,t){var i=e("../tokenizer").Tokenizer,r=e("./text_highlight_rules").TextHighlightRules,n=e("./behaviour").Behaviour,o=e("../unicode"),s=e("../lib/lang"),a=e("../token_iterator").TokenIterator,l=e("../range").Range,h=function(){this.HighlightRules=r,this.$behaviour=new n};(function(){this.tokenRe=new RegExp("^["+o.packages.L+o.packages.Mn+o.packages.Mc+o.packages.Nd+o.packages.Pc+"\\$_]+","g"),this.nonTokenRe=new RegExp("^(?:[^"+o.packages.L+o.packages.Mn+o.packages.Mc+o.packages.Nd+o.packages.Pc+"\\$_]|s])+","g"),this.getTokenizer=function(){return this.$tokenizer||(this.$highlightRules=new this.HighlightRules,this.$tokenizer=new i(this.$highlightRules.getRules())),this.$tokenizer},this.lineCommentStart="",this.blockComment="",this.toggleCommentLines=function(e,t,i,r){function n(e){for(var t=i;r>=t;t++)e(o.getLine(t),t)}var o=t.doc,a=!0,l=!0,h=1/0,c=t.getTabSize(),u=!1;if(this.lineCommentStart){if(Array.isArray(this.lineCommentStart))var d=this.lineCommentStart.map(s.escapeRegExp).join("|"),f=this.lineCommentStart[0];else var d=s.escapeRegExp(this.lineCommentStart),f=this.lineCommentStart;d=new RegExp("^(\\s*)(?:"+d+") ?"),u=t.getUseSoftTabs();var m=function(e,t){var i=e.match(d);if(i){var r=i[1].length,n=i[0].length;!v(e,r,n)&&" "==i[0][n-1]&&n--,o.removeInLine(t,r,n)}},p=f+" ",g=function(e,t){(!a||/\S/.test(e))&&(v(e,h,h)?o.insertInLine({row:t,column:h},p):o.insertInLine({row:t,column:h},f))},E=function(e){return d.test(e)},v=function(e,t,i){for(var r=0;t--&&" "==e.charAt(t);)r++;if(r%c!=0)return!1;for(var r=0;" "==e.charAt(i++);)r++;return c>2?r%c!=c-1:r%c==0}}else{if(!this.blockComment)return!1;var f=this.blockComment.start,y=this.blockComment.end,d=new RegExp("^(\\s*)(?:"+s.escapeRegExp(f)+")"),x=new RegExp("(?:"+s.escapeRegExp(y)+")\\s*$"),g=function(e,t){E(e,t)||(!a||/\S/.test(e))&&(o.insertInLine({row:t,column:e.length},y),o.insertInLine({row:t,column:h},f))},m=function(e,t){var i;(i=e.match(x))&&o.removeInLine(t,e.length-i[0].length,e.length),(i=e.match(d))&&o.removeInLine(t,i[1].length,i[0].length)},E=function(e,i){if(d.test(e))return!0;for(var r=t.getTokens(i),n=0;n<r.length;n++)if("comment"===r[n].type)return!0}}var T=1/0;n(function(e,t){var i=e.search(/\S/);-1!==i?(h>i&&(h=i),l&&!E(e,t)&&(l=!1)):T>e.length&&(T=e.length)}),1/0==h&&(h=T,a=!1,l=!1),u&&h%c!=0&&(h=Math.floor(h/c)*c),n(l?m:g)},this.toggleBlockComment=function(e,t,i,r){var n=this.blockComment;if(n){!n.start&&n[0]&&(n=n[0]);var o,s,h=new a(t,r.row,r.column),c=h.getCurrentToken(),u=(t.selection,t.selection.toOrientedRange());if(c&&/comment/.test(c.type)){for(var d,f;c&&/comment/.test(c.type);){var m=c.value.indexOf(n.start);if(-1!=m){var p=h.getCurrentTokenRow(),g=h.getCurrentTokenColumn()+m;d=new l(p,g,p,g+n.start.length);break}c=h.stepBackward()}for(var h=new a(t,r.row,r.column),c=h.getCurrentToken();c&&/comment/.test(c.type);){var m=c.value.indexOf(n.end);if(-1!=m){var p=h.getCurrentTokenRow(),g=h.getCurrentTokenColumn()+m;f=new l(p,g,p,g+n.end.length);break}c=h.stepForward()}f&&t.remove(f),d&&(t.remove(d),o=d.start.row,s=-n.start.length)}else s=n.start.length,o=i.start.row,t.insert(i.end,n.end),t.insert(i.start,n.start);u.start.row==o&&(u.start.column+=s),u.end.row==o&&(u.end.column+=s),t.selection.fromOrientedRange(u)}},this.getNextLineIndent=function(e,t){return this.$getIndent(t)},this.checkOutdent=function(){return!1},this.autoOutdent=function(){},this.$getIndent=function(e){return e.match(/^\s*/)[0]},this.createWorker=function(){return null},this.createModeDelegates=function(e){this.$embeds=[],this.$modes={};for(var t in e)e[t]&&(this.$embeds.push(t),this.$modes[t]=new e[t]);for(var i=["toggleCommentLines","getNextLineIndent","checkOutdent","autoOutdent","transformAction","getCompletions"],t=0;t<i.length;t++)(function(e){var r=i[t],n=e[r];e[i[t]]=function(){return this.$delegator(r,arguments,n)}})(this)},this.$delegator=function(e,t,i){var r=t[0];"string"!=typeof r&&(r=r[0]);for(var n=0;n<this.$embeds.length;n++)if(this.$modes[this.$embeds[n]]){var o=r.split(this.$embeds[n]);if(!o[0]&&o[1]){t[0]=o[1];var s=this.$modes[this.$embeds[n]];return s[e].apply(s,t)}}var a=i.apply(this,t);return i?a:void 0},this.transformAction=function(e,t){if(this.$behaviour){var i=this.$behaviour.getBehaviours();for(var r in i)if(i[r][t]){var n=i[r][t].apply(this,arguments);if(n)return n}}},this.getKeywords=function(e){if(!this.completionKeywords){var t=this.$tokenizer.rules,i=[];for(var r in t)for(var n=t[r],o=0,s=n.length;s>o;o++)if("string"==typeof n[o].token)/keyword|support|storage/.test(n[o].token)&&i.push(n[o].regex);else if("object"==typeof n[o].token)for(var a=0,l=n[o].token.length;l>a;a++)if(/keyword|support|storage/.test(n[o].token[a])){var r=n[o].regex.match(/\(.+?\)/g)[a];i.push(r.substr(1,r.length-2))}this.completionKeywords=i}return e?i.concat(this.$keywordList||[]):this.$keywordList},this.$createKeywordList=function(){return this.$highlightRules||this.getTokenizer(),this.$keywordList=this.$highlightRules.$keywordList||[]},this.getCompletions=function(){var e=this.$keywordList||this.$createKeywordList();return e.map(function(e){return{name:e,value:e,score:0,meta:"keyword"}})},this.$id="ace/mode/text"}).call(h.prototype),t.Mode=h}),define("ace/tokenizer",["require","exports","module"],function(e,t){var i=1e3,r=function(e){this.states=e,this.regExps={},this.matchMappings={};for(var t in this.states){for(var i=this.states[t],r=[],n=0,o=this.matchMappings[t]={defaultToken:"text"},s="g",a=[],l=0;l<i.length;l++){var h=i[l];if(h.defaultToken&&(o.defaultToken=h.defaultToken),h.caseInsensitive&&(s="gi"),null!=h.regex){h.regex instanceof RegExp&&(h.regex=h.regex.toString().slice(1,-1));var c=h.regex,u=new RegExp("(?:("+c+")|(.))").exec("a").length-2;if(Array.isArray(h.token))if(1==h.token.length||1==u)h.token=h.token[0];else{if(u-1!=h.token.length)throw new Error("number of classes and regexp groups in '"+h.token+"'\n'"+h.regex+"' doesn't match\n"+(u-1)+"!="+h.token.length);h.tokenArray=h.token,h.token=null,h.onMatch=this.$arrayTokens}else"function"==typeof h.token&&!h.onMatch&&(h.onMatch=u>1?this.$applyToken:h.token);u>1&&(/\\\d/.test(h.regex)?c=h.regex.replace(/\\([0-9]+)/g,function(e,t){return"\\"+(parseInt(t,10)+n+1)}):(u=1,c=this.removeCapturingGroups(h.regex)),!h.splitRegex&&"string"!=typeof h.token&&a.push(h)),o[n]=l,n+=u,r.push(c),h.onMatch||(h.onMatch=null),h.__proto__=null}}a.forEach(function(e){e.splitRegex=this.createSplitterRegexp(e.regex,s)},this),this.regExps[t]=new RegExp("("+r.join(")|(")+")|($)",s)}};(function(){this.$setMaxTokenCount=function(e){i=0|e},this.$applyToken=function(e){var t=this.splitRegex.exec(e).slice(1),i=this.token.apply(this,t);if("string"==typeof i)return[{type:i,value:e}];for(var r=[],n=0,o=i.length;o>n;n++)t[n]&&(r[r.length]={type:i[n],value:t[n]});return r},this.$arrayTokens=function(e){if(!e)return[];var t=this.splitRegex.exec(e);if(!t)return"text";for(var i=[],r=this.tokenArray,n=0,o=r.length;o>n;n++)t[n+1]&&(i[i.length]={type:r[n],value:t[n+1]});return i},this.removeCapturingGroups=function(e){var t=e.replace(/\[(?:\\.|[^\]])*?\]|\\.|\(\?[:=!]|(\()/g,function(e,t){return t?"(?:":e});return t},this.createSplitterRegexp=function(e,t){if(-1!=e.indexOf("(?=")){var i=0,r=!1,n={};e.replace(/(\\.)|(\((?:\?[=!])?)|(\))|([\[\]])/g,function(e,t,o,s,a,l){return r?r="]"!=a:a?r=!0:s?(i==n.stack&&(n.end=l+1,n.stack=-1),i--):o&&(i++,1!=o.length&&(n.stack=i,n.start=l)),e}),null!=n.end&&/^\)*$/.test(e.substr(n.end))&&(e=e.substring(0,n.start)+e.substr(n.end))}return new RegExp(e,(t||"").replace("g",""))},this.getLineTokens=function(e,t){if(t&&"string"!=typeof t){var r=t.slice(0);t=r[0]}else var r=[];var n=t||"start",o=this.states[n];o||(n="start",o=this.states[n]);var s=this.matchMappings[n],a=this.regExps[n];a.lastIndex=0;for(var l,h=[],c=0,u={type:null,value:""};l=a.exec(e);){var d=s.defaultToken,f=null,m=l[0],p=a.lastIndex;if(p-m.length>c){var g=e.substring(c,p-m.length);u.type==d?u.value+=g:(u.type&&h.push(u),u={type:d,value:g})}for(var E=0;E<l.length-2;E++)if(void 0!==l[E+1]){f=o[s[E]],d=f.onMatch?f.onMatch(m,n,r):f.token,f.next&&(n="string"==typeof f.next?f.next:f.next(n,r),o=this.states[n],o||(window.console&&console.error&&console.error(n,"doesn't exist"),n="start",o=this.states[n]),s=this.matchMappings[n],c=p,a=this.regExps[n],a.lastIndex=p);break}if(m)if("string"==typeof d)f&&f.merge===!1||u.type!==d?(u.type&&h.push(u),u={type:d,value:m}):u.value+=m;else if(d){u.type&&h.push(u),u={type:null,value:""};for(var E=0;E<d.length;E++)h.push(d[E])}if(c==e.length)break;if(c=p,h.length>i){for(;c<e.length;)u.type&&h.push(u),u={value:e.substring(c,c+=2e3),type:"overflow"};n="start",r=[];break}}return u.type&&h.push(u),r.length>1&&r[0]!==n&&r.unshift(n),{tokens:h,state:r.length?r:n}}}).call(r.prototype),t.Tokenizer=r}),define("ace/mode/text_highlight_rules",["require","exports","module","ace/lib/lang"],function(e,t){var i=e("../lib/lang"),r=function(){this.$rules={start:[{token:"empty_line",regex:"^$"},{defaultToken:"text"}]}};(function(){this.addRules=function(e,t){if(t)for(var i in e){for(var r=e[i],n=0;n<r.length;n++){var o=r[n];o.next&&("string"!=typeof o.next?o.nextState&&0!==o.nextState.indexOf(t)&&(o.nextState=t+o.nextState):0!==o.next.indexOf(t)&&(o.next=t+o.next))}this.$rules[t+i]=r}else for(var i in e)this.$rules[i]=e[i]},this.getRules=function(){return this.$rules},this.embedRules=function(e,t,r,n,o){var s=(new e).getRules();
if(n)for(var a=0;a<n.length;a++)n[a]=t+n[a];else{n=[];for(var l in s)n.push(t+l)}if(this.addRules(s,t),r)for(var h=Array.prototype[o?"push":"unshift"],a=0;a<n.length;a++)h.apply(this.$rules[n[a]],i.deepCopy(r));this.$embeds||(this.$embeds=[]),this.$embeds.push(t)},this.getEmbeds=function(){return this.$embeds};var e=function(e,t){return"start"!=e&&t.unshift(this.nextState,e),this.nextState},t=function(e,t){return t[0]!==e?"start":(t.shift(),t.shift())};this.normalizeRules=function(){function i(o){var s=n[o];s.processed=!0;for(var a=0;a<s.length;a++){var l=s[a];!l.regex&&l.start&&(l.regex=l.start,l.next||(l.next=[]),l.next.push({defaultToken:l.token},{token:l.token+".end",regex:l.end||l.start,next:"pop"}),l.token=l.token+".start",l.push=!0);var h=l.next||l.push;if(h&&Array.isArray(h)){var c=l.stateName;c||(c=l.token,"string"!=typeof c&&(c=c[0]||""),n[c]&&(c+=r++)),n[c]=h,l.next=c,i(c)}else"pop"==h&&(l.next=t);if(l.push&&(l.nextState=l.next||l.push,l.next=e,delete l.push),l.rules)for(var u in l.rules)n[u]?n[u].push&&n[u].push.apply(n[u],l.rules[u]):n[u]=l.rules[u];if(l.include||"string"==typeof l)var d=l.include||l,f=n[d];else Array.isArray(l)&&(f=l);if(f){var m=[a,1].concat(f);l.noEscape&&(m=m.filter(function(e){return!e.next})),s.splice.apply(s,m),a--,f=null}l.keywordMap&&(l.token=this.createKeywordMapper(l.keywordMap,l.defaultToken||"text",l.caseInsensitive),delete l.defaultToken)}}var r=0,n=this.$rules;Object.keys(n).forEach(i,this)},this.createKeywordMapper=function(e,t,i,r){var n=Object.create(null);return Object.keys(e).forEach(function(t){var o=e[t];i&&(o=o.toLowerCase());for(var s=o.split(r||"|"),a=s.length;a--;)n[s[a]]=t}),Object.getPrototypeOf(n)&&(n.__proto__=null),this.$keywordList=Object.keys(n),e=null,i?function(e){return n[e.toLowerCase()]||t}:function(e){return n[e]||t}},this.getKeywords=function(){return this.$keywords}}).call(r.prototype),t.TextHighlightRules=r}),define("ace/mode/behaviour",["require","exports","module"],function(e,t){var i=function(){this.$behaviours={}};(function(){this.add=function(e,t,i){switch(void 0){case this.$behaviours:this.$behaviours={};case this.$behaviours[e]:this.$behaviours[e]={}}this.$behaviours[e][t]=i},this.addBehaviours=function(e){for(var t in e)for(var i in e[t])this.add(t,i,e[t][i])},this.remove=function(e){this.$behaviours&&this.$behaviours[e]&&delete this.$behaviours[e]},this.inherit=function(e,t){if("function"==typeof e)var i=(new e).getBehaviours(t);else var i=e.getBehaviours(t);this.addBehaviours(i)},this.getBehaviours=function(e){if(!e)return this.$behaviours;for(var t={},i=0;i<e.length;i++)this.$behaviours[e[i]]&&(t[e[i]]=this.$behaviours[e[i]]);return t}}).call(i.prototype),t.Behaviour=i}),define("ace/unicode",["require","exports","module"],function(e,t){function i(e){var i=/\w{4}/g;for(var r in e)t.packages[r]=e[r].replace(i,"\\u$&")}t.packages={},i({L:"0041-005A0061-007A00AA00B500BA00C0-00D600D8-00F600F8-02C102C6-02D102E0-02E402EC02EE0370-037403760377037A-037D03860388-038A038C038E-03A103A3-03F503F7-0481048A-05250531-055605590561-058705D0-05EA05F0-05F20621-064A066E066F0671-06D306D506E506E606EE06EF06FA-06FC06FF07100712-072F074D-07A507B107CA-07EA07F407F507FA0800-0815081A082408280904-0939093D09500958-0961097109720979-097F0985-098C098F09900993-09A809AA-09B009B209B6-09B909BD09CE09DC09DD09DF-09E109F009F10A05-0A0A0A0F0A100A13-0A280A2A-0A300A320A330A350A360A380A390A59-0A5C0A5E0A72-0A740A85-0A8D0A8F-0A910A93-0AA80AAA-0AB00AB20AB30AB5-0AB90ABD0AD00AE00AE10B05-0B0C0B0F0B100B13-0B280B2A-0B300B320B330B35-0B390B3D0B5C0B5D0B5F-0B610B710B830B85-0B8A0B8E-0B900B92-0B950B990B9A0B9C0B9E0B9F0BA30BA40BA8-0BAA0BAE-0BB90BD00C05-0C0C0C0E-0C100C12-0C280C2A-0C330C35-0C390C3D0C580C590C600C610C85-0C8C0C8E-0C900C92-0CA80CAA-0CB30CB5-0CB90CBD0CDE0CE00CE10D05-0D0C0D0E-0D100D12-0D280D2A-0D390D3D0D600D610D7A-0D7F0D85-0D960D9A-0DB10DB3-0DBB0DBD0DC0-0DC60E01-0E300E320E330E40-0E460E810E820E840E870E880E8A0E8D0E94-0E970E99-0E9F0EA1-0EA30EA50EA70EAA0EAB0EAD-0EB00EB20EB30EBD0EC0-0EC40EC60EDC0EDD0F000F40-0F470F49-0F6C0F88-0F8B1000-102A103F1050-1055105A-105D106110651066106E-10701075-1081108E10A0-10C510D0-10FA10FC1100-1248124A-124D1250-12561258125A-125D1260-1288128A-128D1290-12B012B2-12B512B8-12BE12C012C2-12C512C8-12D612D8-13101312-13151318-135A1380-138F13A0-13F41401-166C166F-167F1681-169A16A0-16EA1700-170C170E-17111720-17311740-17511760-176C176E-17701780-17B317D717DC1820-18771880-18A818AA18B0-18F51900-191C1950-196D1970-19741980-19AB19C1-19C71A00-1A161A20-1A541AA71B05-1B331B45-1B4B1B83-1BA01BAE1BAF1C00-1C231C4D-1C4F1C5A-1C7D1CE9-1CEC1CEE-1CF11D00-1DBF1E00-1F151F18-1F1D1F20-1F451F48-1F4D1F50-1F571F591F5B1F5D1F5F-1F7D1F80-1FB41FB6-1FBC1FBE1FC2-1FC41FC6-1FCC1FD0-1FD31FD6-1FDB1FE0-1FEC1FF2-1FF41FF6-1FFC2071207F2090-209421022107210A-211321152119-211D212421262128212A-212D212F-2139213C-213F2145-2149214E218321842C00-2C2E2C30-2C5E2C60-2CE42CEB-2CEE2D00-2D252D30-2D652D6F2D80-2D962DA0-2DA62DA8-2DAE2DB0-2DB62DB8-2DBE2DC0-2DC62DC8-2DCE2DD0-2DD62DD8-2DDE2E2F300530063031-3035303B303C3041-3096309D-309F30A1-30FA30FC-30FF3105-312D3131-318E31A0-31B731F0-31FF3400-4DB54E00-9FCBA000-A48CA4D0-A4FDA500-A60CA610-A61FA62AA62BA640-A65FA662-A66EA67F-A697A6A0-A6E5A717-A71FA722-A788A78BA78CA7FB-A801A803-A805A807-A80AA80C-A822A840-A873A882-A8B3A8F2-A8F7A8FBA90A-A925A930-A946A960-A97CA984-A9B2A9CFAA00-AA28AA40-AA42AA44-AA4BAA60-AA76AA7AAA80-AAAFAAB1AAB5AAB6AAB9-AABDAAC0AAC2AADB-AADDABC0-ABE2AC00-D7A3D7B0-D7C6D7CB-D7FBF900-FA2DFA30-FA6DFA70-FAD9FB00-FB06FB13-FB17FB1DFB1F-FB28FB2A-FB36FB38-FB3CFB3EFB40FB41FB43FB44FB46-FBB1FBD3-FD3DFD50-FD8FFD92-FDC7FDF0-FDFBFE70-FE74FE76-FEFCFF21-FF3AFF41-FF5AFF66-FFBEFFC2-FFC7FFCA-FFCFFFD2-FFD7FFDA-FFDC",Ll:"0061-007A00AA00B500BA00DF-00F600F8-00FF01010103010501070109010B010D010F01110113011501170119011B011D011F01210123012501270129012B012D012F01310133013501370138013A013C013E014001420144014601480149014B014D014F01510153015501570159015B015D015F01610163016501670169016B016D016F0171017301750177017A017C017E-0180018301850188018C018D019201950199-019B019E01A101A301A501A801AA01AB01AD01B001B401B601B901BA01BD-01BF01C601C901CC01CE01D001D201D401D601D801DA01DC01DD01DF01E101E301E501E701E901EB01ED01EF01F001F301F501F901FB01FD01FF02010203020502070209020B020D020F02110213021502170219021B021D021F02210223022502270229022B022D022F02310233-0239023C023F0240024202470249024B024D024F-02930295-02AF037103730377037B-037D039003AC-03CE03D003D103D5-03D703D903DB03DD03DF03E103E303E503E703E903EB03ED03EF-03F303F503F803FB03FC0430-045F04610463046504670469046B046D046F04710473047504770479047B047D047F0481048B048D048F04910493049504970499049B049D049F04A104A304A504A704A904AB04AD04AF04B104B304B504B704B904BB04BD04BF04C204C404C604C804CA04CC04CE04CF04D104D304D504D704D904DB04DD04DF04E104E304E504E704E904EB04ED04EF04F104F304F504F704F904FB04FD04FF05010503050505070509050B050D050F05110513051505170519051B051D051F0521052305250561-05871D00-1D2B1D62-1D771D79-1D9A1E011E031E051E071E091E0B1E0D1E0F1E111E131E151E171E191E1B1E1D1E1F1E211E231E251E271E291E2B1E2D1E2F1E311E331E351E371E391E3B1E3D1E3F1E411E431E451E471E491E4B1E4D1E4F1E511E531E551E571E591E5B1E5D1E5F1E611E631E651E671E691E6B1E6D1E6F1E711E731E751E771E791E7B1E7D1E7F1E811E831E851E871E891E8B1E8D1E8F1E911E931E95-1E9D1E9F1EA11EA31EA51EA71EA91EAB1EAD1EAF1EB11EB31EB51EB71EB91EBB1EBD1EBF1EC11EC31EC51EC71EC91ECB1ECD1ECF1ED11ED31ED51ED71ED91EDB1EDD1EDF1EE11EE31EE51EE71EE91EEB1EED1EEF1EF11EF31EF51EF71EF91EFB1EFD1EFF-1F071F10-1F151F20-1F271F30-1F371F40-1F451F50-1F571F60-1F671F70-1F7D1F80-1F871F90-1F971FA0-1FA71FB0-1FB41FB61FB71FBE1FC2-1FC41FC61FC71FD0-1FD31FD61FD71FE0-1FE71FF2-1FF41FF61FF7210A210E210F2113212F21342139213C213D2146-2149214E21842C30-2C5E2C612C652C662C682C6A2C6C2C712C732C742C76-2C7C2C812C832C852C872C892C8B2C8D2C8F2C912C932C952C972C992C9B2C9D2C9F2CA12CA32CA52CA72CA92CAB2CAD2CAF2CB12CB32CB52CB72CB92CBB2CBD2CBF2CC12CC32CC52CC72CC92CCB2CCD2CCF2CD12CD32CD52CD72CD92CDB2CDD2CDF2CE12CE32CE42CEC2CEE2D00-2D25A641A643A645A647A649A64BA64DA64FA651A653A655A657A659A65BA65DA65FA663A665A667A669A66BA66DA681A683A685A687A689A68BA68DA68FA691A693A695A697A723A725A727A729A72BA72DA72F-A731A733A735A737A739A73BA73DA73FA741A743A745A747A749A74BA74DA74FA751A753A755A757A759A75BA75DA75FA761A763A765A767A769A76BA76DA76FA771-A778A77AA77CA77FA781A783A785A787A78CFB00-FB06FB13-FB17FF41-FF5A",Lu:"0041-005A00C0-00D600D8-00DE01000102010401060108010A010C010E01100112011401160118011A011C011E01200122012401260128012A012C012E01300132013401360139013B013D013F0141014301450147014A014C014E01500152015401560158015A015C015E01600162016401660168016A016C016E017001720174017601780179017B017D018101820184018601870189-018B018E-0191019301940196-0198019C019D019F01A001A201A401A601A701A901AC01AE01AF01B1-01B301B501B701B801BC01C401C701CA01CD01CF01D101D301D501D701D901DB01DE01E001E201E401E601E801EA01EC01EE01F101F401F6-01F801FA01FC01FE02000202020402060208020A020C020E02100212021402160218021A021C021E02200222022402260228022A022C022E02300232023A023B023D023E02410243-02460248024A024C024E03700372037603860388-038A038C038E038F0391-03A103A3-03AB03CF03D2-03D403D803DA03DC03DE03E003E203E403E603E803EA03EC03EE03F403F703F903FA03FD-042F04600462046404660468046A046C046E04700472047404760478047A047C047E0480048A048C048E04900492049404960498049A049C049E04A004A204A404A604A804AA04AC04AE04B004B204B404B604B804BA04BC04BE04C004C104C304C504C704C904CB04CD04D004D204D404D604D804DA04DC04DE04E004E204E404E604E804EA04EC04EE04F004F204F404F604F804FA04FC04FE05000502050405060508050A050C050E05100512051405160518051A051C051E0520052205240531-055610A0-10C51E001E021E041E061E081E0A1E0C1E0E1E101E121E141E161E181E1A1E1C1E1E1E201E221E241E261E281E2A1E2C1E2E1E301E321E341E361E381E3A1E3C1E3E1E401E421E441E461E481E4A1E4C1E4E1E501E521E541E561E581E5A1E5C1E5E1E601E621E641E661E681E6A1E6C1E6E1E701E721E741E761E781E7A1E7C1E7E1E801E821E841E861E881E8A1E8C1E8E1E901E921E941E9E1EA01EA21EA41EA61EA81EAA1EAC1EAE1EB01EB21EB41EB61EB81EBA1EBC1EBE1EC01EC21EC41EC61EC81ECA1ECC1ECE1ED01ED21ED41ED61ED81EDA1EDC1EDE1EE01EE21EE41EE61EE81EEA1EEC1EEE1EF01EF21EF41EF61EF81EFA1EFC1EFE1F08-1F0F1F18-1F1D1F28-1F2F1F38-1F3F1F48-1F4D1F591F5B1F5D1F5F1F68-1F6F1FB8-1FBB1FC8-1FCB1FD8-1FDB1FE8-1FEC1FF8-1FFB21022107210B-210D2110-211221152119-211D212421262128212A-212D2130-2133213E213F214521832C00-2C2E2C602C62-2C642C672C692C6B2C6D-2C702C722C752C7E-2C802C822C842C862C882C8A2C8C2C8E2C902C922C942C962C982C9A2C9C2C9E2CA02CA22CA42CA62CA82CAA2CAC2CAE2CB02CB22CB42CB62CB82CBA2CBC2CBE2CC02CC22CC42CC62CC82CCA2CCC2CCE2CD02CD22CD42CD62CD82CDA2CDC2CDE2CE02CE22CEB2CEDA640A642A644A646A648A64AA64CA64EA650A652A654A656A658A65AA65CA65EA662A664A666A668A66AA66CA680A682A684A686A688A68AA68CA68EA690A692A694A696A722A724A726A728A72AA72CA72EA732A734A736A738A73AA73CA73EA740A742A744A746A748A74AA74CA74EA750A752A754A756A758A75AA75CA75EA760A762A764A766A768A76AA76CA76EA779A77BA77DA77EA780A782A784A786A78BFF21-FF3A",Lt:"01C501C801CB01F21F88-1F8F1F98-1F9F1FA8-1FAF1FBC1FCC1FFC",Lm:"02B0-02C102C6-02D102E0-02E402EC02EE0374037A0559064006E506E607F407F507FA081A0824082809710E460EC610FC17D718431AA71C78-1C7D1D2C-1D611D781D9B-1DBF2071207F2090-20942C7D2D6F2E2F30053031-3035303B309D309E30FC-30FEA015A4F8-A4FDA60CA67FA717-A71FA770A788A9CFAA70AADDFF70FF9EFF9F",Lo:"01BB01C0-01C3029405D0-05EA05F0-05F20621-063F0641-064A066E066F0671-06D306D506EE06EF06FA-06FC06FF07100712-072F074D-07A507B107CA-07EA0800-08150904-0939093D09500958-096109720979-097F0985-098C098F09900993-09A809AA-09B009B209B6-09B909BD09CE09DC09DD09DF-09E109F009F10A05-0A0A0A0F0A100A13-0A280A2A-0A300A320A330A350A360A380A390A59-0A5C0A5E0A72-0A740A85-0A8D0A8F-0A910A93-0AA80AAA-0AB00AB20AB30AB5-0AB90ABD0AD00AE00AE10B05-0B0C0B0F0B100B13-0B280B2A-0B300B320B330B35-0B390B3D0B5C0B5D0B5F-0B610B710B830B85-0B8A0B8E-0B900B92-0B950B990B9A0B9C0B9E0B9F0BA30BA40BA8-0BAA0BAE-0BB90BD00C05-0C0C0C0E-0C100C12-0C280C2A-0C330C35-0C390C3D0C580C590C600C610C85-0C8C0C8E-0C900C92-0CA80CAA-0CB30CB5-0CB90CBD0CDE0CE00CE10D05-0D0C0D0E-0D100D12-0D280D2A-0D390D3D0D600D610D7A-0D7F0D85-0D960D9A-0DB10DB3-0DBB0DBD0DC0-0DC60E01-0E300E320E330E40-0E450E810E820E840E870E880E8A0E8D0E94-0E970E99-0E9F0EA1-0EA30EA50EA70EAA0EAB0EAD-0EB00EB20EB30EBD0EC0-0EC40EDC0EDD0F000F40-0F470F49-0F6C0F88-0F8B1000-102A103F1050-1055105A-105D106110651066106E-10701075-1081108E10D0-10FA1100-1248124A-124D1250-12561258125A-125D1260-1288128A-128D1290-12B012B2-12B512B8-12BE12C012C2-12C512C8-12D612D8-13101312-13151318-135A1380-138F13A0-13F41401-166C166F-167F1681-169A16A0-16EA1700-170C170E-17111720-17311740-17511760-176C176E-17701780-17B317DC1820-18421844-18771880-18A818AA18B0-18F51900-191C1950-196D1970-19741980-19AB19C1-19C71A00-1A161A20-1A541B05-1B331B45-1B4B1B83-1BA01BAE1BAF1C00-1C231C4D-1C4F1C5A-1C771CE9-1CEC1CEE-1CF12135-21382D30-2D652D80-2D962DA0-2DA62DA8-2DAE2DB0-2DB62DB8-2DBE2DC0-2DC62DC8-2DCE2DD0-2DD62DD8-2DDE3006303C3041-3096309F30A1-30FA30FF3105-312D3131-318E31A0-31B731F0-31FF3400-4DB54E00-9FCBA000-A014A016-A48CA4D0-A4F7A500-A60BA610-A61FA62AA62BA66EA6A0-A6E5A7FB-A801A803-A805A807-A80AA80C-A822A840-A873A882-A8B3A8F2-A8F7A8FBA90A-A925A930-A946A960-A97CA984-A9B2AA00-AA28AA40-AA42AA44-AA4BAA60-AA6FAA71-AA76AA7AAA80-AAAFAAB1AAB5AAB6AAB9-AABDAAC0AAC2AADBAADCABC0-ABE2AC00-D7A3D7B0-D7C6D7CB-D7FBF900-FA2DFA30-FA6DFA70-FAD9FB1DFB1F-FB28FB2A-FB36FB38-FB3CFB3EFB40FB41FB43FB44FB46-FBB1FBD3-FD3DFD50-FD8FFD92-FDC7FDF0-FDFBFE70-FE74FE76-FEFCFF66-FF6FFF71-FF9DFFA0-FFBEFFC2-FFC7FFCA-FFCFFFD2-FFD7FFDA-FFDC",M:"0300-036F0483-04890591-05BD05BF05C105C205C405C505C70610-061A064B-065E067006D6-06DC06DE-06E406E706E806EA-06ED07110730-074A07A6-07B007EB-07F30816-0819081B-08230825-08270829-082D0900-0903093C093E-094E0951-0955096209630981-098309BC09BE-09C409C709C809CB-09CD09D709E209E30A01-0A030A3C0A3E-0A420A470A480A4B-0A4D0A510A700A710A750A81-0A830ABC0ABE-0AC50AC7-0AC90ACB-0ACD0AE20AE30B01-0B030B3C0B3E-0B440B470B480B4B-0B4D0B560B570B620B630B820BBE-0BC20BC6-0BC80BCA-0BCD0BD70C01-0C030C3E-0C440C46-0C480C4A-0C4D0C550C560C620C630C820C830CBC0CBE-0CC40CC6-0CC80CCA-0CCD0CD50CD60CE20CE30D020D030D3E-0D440D46-0D480D4A-0D4D0D570D620D630D820D830DCA0DCF-0DD40DD60DD8-0DDF0DF20DF30E310E34-0E3A0E47-0E4E0EB10EB4-0EB90EBB0EBC0EC8-0ECD0F180F190F350F370F390F3E0F3F0F71-0F840F860F870F90-0F970F99-0FBC0FC6102B-103E1056-1059105E-10601062-10641067-106D1071-10741082-108D108F109A-109D135F1712-17141732-1734175217531772177317B6-17D317DD180B-180D18A91920-192B1930-193B19B0-19C019C819C91A17-1A1B1A55-1A5E1A60-1A7C1A7F1B00-1B041B34-1B441B6B-1B731B80-1B821BA1-1BAA1C24-1C371CD0-1CD21CD4-1CE81CED1CF21DC0-1DE61DFD-1DFF20D0-20F02CEF-2CF12DE0-2DFF302A-302F3099309AA66F-A672A67CA67DA6F0A6F1A802A806A80BA823-A827A880A881A8B4-A8C4A8E0-A8F1A926-A92DA947-A953A980-A983A9B3-A9C0AA29-AA36AA43AA4CAA4DAA7BAAB0AAB2-AAB4AAB7AAB8AABEAABFAAC1ABE3-ABEAABECABEDFB1EFE00-FE0FFE20-FE26",Mn:"0300-036F0483-04870591-05BD05BF05C105C205C405C505C70610-061A064B-065E067006D6-06DC06DF-06E406E706E806EA-06ED07110730-074A07A6-07B007EB-07F30816-0819081B-08230825-08270829-082D0900-0902093C0941-0948094D0951-095509620963098109BC09C1-09C409CD09E209E30A010A020A3C0A410A420A470A480A4B-0A4D0A510A700A710A750A810A820ABC0AC1-0AC50AC70AC80ACD0AE20AE30B010B3C0B3F0B41-0B440B4D0B560B620B630B820BC00BCD0C3E-0C400C46-0C480C4A-0C4D0C550C560C620C630CBC0CBF0CC60CCC0CCD0CE20CE30D41-0D440D4D0D620D630DCA0DD2-0DD40DD60E310E34-0E3A0E47-0E4E0EB10EB4-0EB90EBB0EBC0EC8-0ECD0F180F190F350F370F390F71-0F7E0F80-0F840F860F870F90-0F970F99-0FBC0FC6102D-10301032-10371039103A103D103E10581059105E-10601071-1074108210851086108D109D135F1712-17141732-1734175217531772177317B7-17BD17C617C9-17D317DD180B-180D18A91920-19221927192819321939-193B1A171A181A561A58-1A5E1A601A621A65-1A6C1A73-1A7C1A7F1B00-1B031B341B36-1B3A1B3C1B421B6B-1B731B801B811BA2-1BA51BA81BA91C2C-1C331C361C371CD0-1CD21CD4-1CE01CE2-1CE81CED1DC0-1DE61DFD-1DFF20D0-20DC20E120E5-20F02CEF-2CF12DE0-2DFF302A-302F3099309AA66FA67CA67DA6F0A6F1A802A806A80BA825A826A8C4A8E0-A8F1A926-A92DA947-A951A980-A982A9B3A9B6-A9B9A9BCAA29-AA2EAA31AA32AA35AA36AA43AA4CAAB0AAB2-AAB4AAB7AAB8AABEAABFAAC1ABE5ABE8ABEDFB1EFE00-FE0FFE20-FE26",Mc:"0903093E-09400949-094C094E0982098309BE-09C009C709C809CB09CC09D70A030A3E-0A400A830ABE-0AC00AC90ACB0ACC0B020B030B3E0B400B470B480B4B0B4C0B570BBE0BBF0BC10BC20BC6-0BC80BCA-0BCC0BD70C01-0C030C41-0C440C820C830CBE0CC0-0CC40CC70CC80CCA0CCB0CD50CD60D020D030D3E-0D400D46-0D480D4A-0D4C0D570D820D830DCF-0DD10DD8-0DDF0DF20DF30F3E0F3F0F7F102B102C10311038103B103C105610571062-10641067-106D108310841087-108C108F109A-109C17B617BE-17C517C717C81923-19261929-192B193019311933-193819B0-19C019C819C91A19-1A1B1A551A571A611A631A641A6D-1A721B041B351B3B1B3D-1B411B431B441B821BA11BA61BA71BAA1C24-1C2B1C341C351CE11CF2A823A824A827A880A881A8B4-A8C3A952A953A983A9B4A9B5A9BAA9BBA9BD-A9C0AA2FAA30AA33AA34AA4DAA7BABE3ABE4ABE6ABE7ABE9ABEAABEC",Me:"0488048906DE20DD-20E020E2-20E4A670-A672",N:"0030-003900B200B300B900BC-00BE0660-066906F0-06F907C0-07C90966-096F09E6-09EF09F4-09F90A66-0A6F0AE6-0AEF0B66-0B6F0BE6-0BF20C66-0C6F0C78-0C7E0CE6-0CEF0D66-0D750E50-0E590ED0-0ED90F20-0F331040-10491090-10991369-137C16EE-16F017E0-17E917F0-17F91810-18191946-194F19D0-19DA1A80-1A891A90-1A991B50-1B591BB0-1BB91C40-1C491C50-1C5920702074-20792080-20892150-21822185-21892460-249B24EA-24FF2776-27932CFD30073021-30293038-303A3192-31953220-32293251-325F3280-328932B1-32BFA620-A629A6E6-A6EFA830-A835A8D0-A8D9A900-A909A9D0-A9D9AA50-AA59ABF0-ABF9FF10-FF19",Nd:"0030-00390660-066906F0-06F907C0-07C90966-096F09E6-09EF0A66-0A6F0AE6-0AEF0B66-0B6F0BE6-0BEF0C66-0C6F0CE6-0CEF0D66-0D6F0E50-0E590ED0-0ED90F20-0F291040-10491090-109917E0-17E91810-18191946-194F19D0-19DA1A80-1A891A90-1A991B50-1B591BB0-1BB91C40-1C491C50-1C59A620-A629A8D0-A8D9A900-A909A9D0-A9D9AA50-AA59ABF0-ABF9FF10-FF19",Nl:"16EE-16F02160-21822185-218830073021-30293038-303AA6E6-A6EF",No:"00B200B300B900BC-00BE09F4-09F90BF0-0BF20C78-0C7E0D70-0D750F2A-0F331369-137C17F0-17F920702074-20792080-20892150-215F21892460-249B24EA-24FF2776-27932CFD3192-31953220-32293251-325F3280-328932B1-32BFA830-A835",P:"0021-00230025-002A002C-002F003A003B003F0040005B-005D005F007B007D00A100AB00B700BB00BF037E0387055A-055F0589058A05BE05C005C305C605F305F40609060A060C060D061B061E061F066A-066D06D40700-070D07F7-07F90830-083E0964096509700DF40E4F0E5A0E5B0F04-0F120F3A-0F3D0F850FD0-0FD4104A-104F10FB1361-13681400166D166E169B169C16EB-16ED1735173617D4-17D617D8-17DA1800-180A1944194519DE19DF1A1E1A1F1AA0-1AA61AA8-1AAD1B5A-1B601C3B-1C3F1C7E1C7F1CD32010-20272030-20432045-20512053-205E207D207E208D208E2329232A2768-277527C527C627E6-27EF2983-299829D8-29DB29FC29FD2CF9-2CFC2CFE2CFF2E00-2E2E2E302E313001-30033008-30113014-301F3030303D30A030FBA4FEA4FFA60D-A60FA673A67EA6F2-A6F7A874-A877A8CEA8CFA8F8-A8FAA92EA92FA95FA9C1-A9CDA9DEA9DFAA5C-AA5FAADEAADFABEBFD3EFD3FFE10-FE19FE30-FE52FE54-FE61FE63FE68FE6AFE6BFF01-FF03FF05-FF0AFF0C-FF0FFF1AFF1BFF1FFF20FF3B-FF3DFF3FFF5BFF5DFF5F-FF65",Pd:"002D058A05BE140018062010-20152E172E1A301C303030A0FE31FE32FE58FE63FF0D",Ps:"0028005B007B0F3A0F3C169B201A201E2045207D208D23292768276A276C276E27702772277427C527E627E827EA27EC27EE2983298529872989298B298D298F299129932995299729D829DA29FC2E222E242E262E283008300A300C300E3010301430163018301A301DFD3EFE17FE35FE37FE39FE3BFE3DFE3FFE41FE43FE47FE59FE5BFE5DFF08FF3BFF5BFF5FFF62",Pe:"0029005D007D0F3B0F3D169C2046207E208E232A2769276B276D276F27712773277527C627E727E927EB27ED27EF298429862988298A298C298E2990299229942996299829D929DB29FD2E232E252E272E293009300B300D300F3011301530173019301B301E301FFD3FFE18FE36FE38FE3AFE3CFE3EFE40FE42FE44FE48FE5AFE5CFE5EFF09FF3DFF5DFF60FF63",Pi:"00AB2018201B201C201F20392E022E042E092E0C2E1C2E20",Pf:"00BB2019201D203A2E032E052E0A2E0D2E1D2E21",Pc:"005F203F20402054FE33FE34FE4D-FE4FFF3F",Po:"0021-00230025-0027002A002C002E002F003A003B003F0040005C00A100B700BF037E0387055A-055F058905C005C305C605F305F40609060A060C060D061B061E061F066A-066D06D40700-070D07F7-07F90830-083E0964096509700DF40E4F0E5A0E5B0F04-0F120F850FD0-0FD4104A-104F10FB1361-1368166D166E16EB-16ED1735173617D4-17D617D8-17DA1800-18051807-180A1944194519DE19DF1A1E1A1F1AA0-1AA61AA8-1AAD1B5A-1B601C3B-1C3F1C7E1C7F1CD3201620172020-20272030-2038203B-203E2041-20432047-205120532055-205E2CF9-2CFC2CFE2CFF2E002E012E06-2E082E0B2E0E-2E162E182E192E1B2E1E2E1F2E2A-2E2E2E302E313001-3003303D30FBA4FEA4FFA60D-A60FA673A67EA6F2-A6F7A874-A877A8CEA8CFA8F8-A8FAA92EA92FA95FA9C1-A9CDA9DEA9DFAA5C-AA5FAADEAADFABEBFE10-FE16FE19FE30FE45FE46FE49-FE4CFE50-FE52FE54-FE57FE5F-FE61FE68FE6AFE6BFF01-FF03FF05-FF07FF0AFF0CFF0EFF0FFF1AFF1BFF1FFF20FF3CFF61FF64FF65",S:"0024002B003C-003E005E0060007C007E00A2-00A900AC00AE-00B100B400B600B800D700F702C2-02C502D2-02DF02E5-02EB02ED02EF-02FF03750384038503F604820606-0608060B060E060F06E906FD06FE07F609F209F309FA09FB0AF10B700BF3-0BFA0C7F0CF10CF20D790E3F0F01-0F030F13-0F170F1A-0F1F0F340F360F380FBE-0FC50FC7-0FCC0FCE0FCF0FD5-0FD8109E109F13601390-139917DB194019E0-19FF1B61-1B6A1B74-1B7C1FBD1FBF-1FC11FCD-1FCF1FDD-1FDF1FED-1FEF1FFD1FFE20442052207A-207C208A-208C20A0-20B8210021012103-21062108210921142116-2118211E-2123212521272129212E213A213B2140-2144214A-214D214F2190-2328232B-23E82400-24262440-244A249C-24E92500-26CD26CF-26E126E326E8-26FF2701-27042706-2709270C-27272729-274B274D274F-27522756-275E2761-276727942798-27AF27B1-27BE27C0-27C427C7-27CA27CC27D0-27E527F0-29822999-29D729DC-29FB29FE-2B4C2B50-2B592CE5-2CEA2E80-2E992E9B-2EF32F00-2FD52FF0-2FFB300430123013302030363037303E303F309B309C319031913196-319F31C0-31E33200-321E322A-32503260-327F328A-32B032C0-32FE3300-33FF4DC0-4DFFA490-A4C6A700-A716A720A721A789A78AA828-A82BA836-A839AA77-AA79FB29FDFCFDFDFE62FE64-FE66FE69FF04FF0BFF1C-FF1EFF3EFF40FF5CFF5EFFE0-FFE6FFE8-FFEEFFFCFFFD",Sm:"002B003C-003E007C007E00AC00B100D700F703F60606-060820442052207A-207C208A-208C2140-2144214B2190-2194219A219B21A021A321A621AE21CE21CF21D221D421F4-22FF2308-230B23202321237C239B-23B323DC-23E125B725C125F8-25FF266F27C0-27C427C7-27CA27CC27D0-27E527F0-27FF2900-29822999-29D729DC-29FB29FE-2AFF2B30-2B442B47-2B4CFB29FE62FE64-FE66FF0BFF1C-FF1EFF5CFF5EFFE2FFE9-FFEC",Sc:"002400A2-00A5060B09F209F309FB0AF10BF90E3F17DB20A0-20B8A838FDFCFE69FF04FFE0FFE1FFE5FFE6",Sk:"005E006000A800AF00B400B802C2-02C502D2-02DF02E5-02EB02ED02EF-02FF0375038403851FBD1FBF-1FC11FCD-1FCF1FDD-1FDF1FED-1FEF1FFD1FFE309B309CA700-A716A720A721A789A78AFF3EFF40FFE3",So:"00A600A700A900AE00B000B60482060E060F06E906FD06FE07F609FA0B700BF3-0BF80BFA0C7F0CF10CF20D790F01-0F030F13-0F170F1A-0F1F0F340F360F380FBE-0FC50FC7-0FCC0FCE0FCF0FD5-0FD8109E109F13601390-1399194019E0-19FF1B61-1B6A1B74-1B7C210021012103-21062108210921142116-2118211E-2123212521272129212E213A213B214A214C214D214F2195-2199219C-219F21A121A221A421A521A7-21AD21AF-21CD21D021D121D321D5-21F32300-2307230C-231F2322-2328232B-237B237D-239A23B4-23DB23E2-23E82400-24262440-244A249C-24E92500-25B625B8-25C025C2-25F72600-266E2670-26CD26CF-26E126E326E8-26FF2701-27042706-2709270C-27272729-274B274D274F-27522756-275E2761-276727942798-27AF27B1-27BE2800-28FF2B00-2B2F2B452B462B50-2B592CE5-2CEA2E80-2E992E9B-2EF32F00-2FD52FF0-2FFB300430123013302030363037303E303F319031913196-319F31C0-31E33200-321E322A-32503260-327F328A-32B032C0-32FE3300-33FF4DC0-4DFFA490-A4C6A828-A82BA836A837A839AA77-AA79FDFDFFE4FFE8FFEDFFEEFFFCFFFD",Z:"002000A01680180E2000-200A20282029202F205F3000",Zs:"002000A01680180E2000-200A202F205F3000",Zl:"2028",Zp:"2029",C:"0000-001F007F-009F00AD03780379037F-0383038B038D03A20526-05300557055805600588058B-059005C8-05CF05EB-05EF05F5-0605061C061D0620065F06DD070E070F074B074C07B2-07BF07FB-07FF082E082F083F-08FF093A093B094F095609570973-097809800984098D098E0991099209A909B109B3-09B509BA09BB09C509C609C909CA09CF-09D609D8-09DB09DE09E409E509FC-0A000A040A0B-0A0E0A110A120A290A310A340A370A3A0A3B0A3D0A43-0A460A490A4A0A4E-0A500A52-0A580A5D0A5F-0A650A76-0A800A840A8E0A920AA90AB10AB40ABA0ABB0AC60ACA0ACE0ACF0AD1-0ADF0AE40AE50AF00AF2-0B000B040B0D0B0E0B110B120B290B310B340B3A0B3B0B450B460B490B4A0B4E-0B550B58-0B5B0B5E0B640B650B72-0B810B840B8B-0B8D0B910B96-0B980B9B0B9D0BA0-0BA20BA5-0BA70BAB-0BAD0BBA-0BBD0BC3-0BC50BC90BCE0BCF0BD1-0BD60BD8-0BE50BFB-0C000C040C0D0C110C290C340C3A-0C3C0C450C490C4E-0C540C570C5A-0C5F0C640C650C70-0C770C800C810C840C8D0C910CA90CB40CBA0CBB0CC50CC90CCE-0CD40CD7-0CDD0CDF0CE40CE50CF00CF3-0D010D040D0D0D110D290D3A-0D3C0D450D490D4E-0D560D58-0D5F0D640D650D76-0D780D800D810D840D97-0D990DB20DBC0DBE0DBF0DC7-0DC90DCB-0DCE0DD50DD70DE0-0DF10DF5-0E000E3B-0E3E0E5C-0E800E830E850E860E890E8B0E8C0E8E-0E930E980EA00EA40EA60EA80EA90EAC0EBA0EBE0EBF0EC50EC70ECE0ECF0EDA0EDB0EDE-0EFF0F480F6D-0F700F8C-0F8F0F980FBD0FCD0FD9-0FFF10C6-10CF10FD-10FF1249124E124F12571259125E125F1289128E128F12B112B612B712BF12C112C612C712D7131113161317135B-135E137D-137F139A-139F13F5-13FF169D-169F16F1-16FF170D1715-171F1737-173F1754-175F176D17711774-177F17B417B517DE17DF17EA-17EF17FA-17FF180F181A-181F1878-187F18AB-18AF18F6-18FF191D-191F192C-192F193C-193F1941-1943196E196F1975-197F19AC-19AF19CA-19CF19DB-19DD1A1C1A1D1A5F1A7D1A7E1A8A-1A8F1A9A-1A9F1AAE-1AFF1B4C-1B4F1B7D-1B7F1BAB-1BAD1BBA-1BFF1C38-1C3A1C4A-1C4C1C80-1CCF1CF3-1CFF1DE7-1DFC1F161F171F1E1F1F1F461F471F4E1F4F1F581F5A1F5C1F5E1F7E1F7F1FB51FC51FD41FD51FDC1FF01FF11FF51FFF200B-200F202A-202E2060-206F20722073208F2095-209F20B9-20CF20F1-20FF218A-218F23E9-23FF2427-243F244B-245F26CE26E226E4-26E727002705270A270B2728274C274E2753-2755275F27602795-279727B027BF27CB27CD-27CF2B4D-2B4F2B5A-2BFF2C2F2C5F2CF2-2CF82D26-2D2F2D66-2D6E2D70-2D7F2D97-2D9F2DA72DAF2DB72DBF2DC72DCF2DD72DDF2E32-2E7F2E9A2EF4-2EFF2FD6-2FEF2FFC-2FFF3040309730983100-3104312E-3130318F31B8-31BF31E4-31EF321F32FF4DB6-4DBF9FCC-9FFFA48D-A48FA4C7-A4CFA62C-A63FA660A661A674-A67BA698-A69FA6F8-A6FFA78D-A7FAA82C-A82FA83A-A83FA878-A87FA8C5-A8CDA8DA-A8DFA8FC-A8FFA954-A95EA97D-A97FA9CEA9DA-A9DDA9E0-A9FFAA37-AA3FAA4EAA4FAA5AAA5BAA7C-AA7FAAC3-AADAAAE0-ABBFABEEABEFABFA-ABFFD7A4-D7AFD7C7-D7CAD7FC-F8FFFA2EFA2FFA6EFA6FFADA-FAFFFB07-FB12FB18-FB1CFB37FB3DFB3FFB42FB45FBB2-FBD2FD40-FD4FFD90FD91FDC8-FDEFFDFEFDFFFE1A-FE1FFE27-FE2FFE53FE67FE6C-FE6FFE75FEFD-FF00FFBF-FFC1FFC8FFC9FFD0FFD1FFD8FFD9FFDD-FFDFFFE7FFEF-FFFBFFFEFFFF",Cc:"0000-001F007F-009F",Cf:"00AD0600-060306DD070F17B417B5200B-200F202A-202E2060-2064206A-206FFEFFFFF9-FFFB",Co:"E000-F8FF",Cs:"D800-DFFF",Cn:"03780379037F-0383038B038D03A20526-05300557055805600588058B-059005C8-05CF05EB-05EF05F5-05FF06040605061C061D0620065F070E074B074C07B2-07BF07FB-07FF082E082F083F-08FF093A093B094F095609570973-097809800984098D098E0991099209A909B109B3-09B509BA09BB09C509C609C909CA09CF-09D609D8-09DB09DE09E409E509FC-0A000A040A0B-0A0E0A110A120A290A310A340A370A3A0A3B0A3D0A43-0A460A490A4A0A4E-0A500A52-0A580A5D0A5F-0A650A76-0A800A840A8E0A920AA90AB10AB40ABA0ABB0AC60ACA0ACE0ACF0AD1-0ADF0AE40AE50AF00AF2-0B000B040B0D0B0E0B110B120B290B310B340B3A0B3B0B450B460B490B4A0B4E-0B550B58-0B5B0B5E0B640B650B72-0B810B840B8B-0B8D0B910B96-0B980B9B0B9D0BA0-0BA20BA5-0BA70BAB-0BAD0BBA-0BBD0BC3-0BC50BC90BCE0BCF0BD1-0BD60BD8-0BE50BFB-0C000C040C0D0C110C290C340C3A-0C3C0C450C490C4E-0C540C570C5A-0C5F0C640C650C70-0C770C800C810C840C8D0C910CA90CB40CBA0CBB0CC50CC90CCE-0CD40CD7-0CDD0CDF0CE40CE50CF00CF3-0D010D040D0D0D110D290D3A-0D3C0D450D490D4E-0D560D58-0D5F0D640D650D76-0D780D800D810D840D97-0D990DB20DBC0DBE0DBF0DC7-0DC90DCB-0DCE0DD50DD70DE0-0DF10DF5-0E000E3B-0E3E0E5C-0E800E830E850E860E890E8B0E8C0E8E-0E930E980EA00EA40EA60EA80EA90EAC0EBA0EBE0EBF0EC50EC70ECE0ECF0EDA0EDB0EDE-0EFF0F480F6D-0F700F8C-0F8F0F980FBD0FCD0FD9-0FFF10C6-10CF10FD-10FF1249124E124F12571259125E125F1289128E128F12B112B612B712BF12C112C612C712D7131113161317135B-135E137D-137F139A-139F13F5-13FF169D-169F16F1-16FF170D1715-171F1737-173F1754-175F176D17711774-177F17DE17DF17EA-17EF17FA-17FF180F181A-181F1878-187F18AB-18AF18F6-18FF191D-191F192C-192F193C-193F1941-1943196E196F1975-197F19AC-19AF19CA-19CF19DB-19DD1A1C1A1D1A5F1A7D1A7E1A8A-1A8F1A9A-1A9F1AAE-1AFF1B4C-1B4F1B7D-1B7F1BAB-1BAD1BBA-1BFF1C38-1C3A1C4A-1C4C1C80-1CCF1CF3-1CFF1DE7-1DFC1F161F171F1E1F1F1F461F471F4E1F4F1F581F5A1F5C1F5E1F7E1F7F1FB51FC51FD41FD51FDC1FF01FF11FF51FFF2065-206920722073208F2095-209F20B9-20CF20F1-20FF218A-218F23E9-23FF2427-243F244B-245F26CE26E226E4-26E727002705270A270B2728274C274E2753-2755275F27602795-279727B027BF27CB27CD-27CF2B4D-2B4F2B5A-2BFF2C2F2C5F2CF2-2CF82D26-2D2F2D66-2D6E2D70-2D7F2D97-2D9F2DA72DAF2DB72DBF2DC72DCF2DD72DDF2E32-2E7F2E9A2EF4-2EFF2FD6-2FEF2FFC-2FFF3040309730983100-3104312E-3130318F31B8-31BF31E4-31EF321F32FF4DB6-4DBF9FCC-9FFFA48D-A48FA4C7-A4CFA62C-A63FA660A661A674-A67BA698-A69FA6F8-A6FFA78D-A7FAA82C-A82FA83A-A83FA878-A87FA8C5-A8CDA8DA-A8DFA8FC-A8FFA954-A95EA97D-A97FA9CEA9DA-A9DDA9E0-A9FFAA37-AA3FAA4EAA4FAA5AAA5BAA7C-AA7FAAC3-AADAAAE0-ABBFABEEABEFABFA-ABFFD7A4-D7AFD7C7-D7CAD7FC-D7FFFA2EFA2FFA6EFA6FFADA-FAFFFB07-FB12FB18-FB1CFB37FB3DFB3FFB42FB45FBB2-FBD2FD40-FD4FFD90FD91FDC8-FDEFFDFEFDFFFE1A-FE1FFE27-FE2FFE53FE67FE6C-FE6FFE75FEFDFEFEFF00FFBF-FFC1FFC8FFC9FFD0FFD1FFD8FFD9FFDD-FFDFFFE7FFEF-FFF8FFFEFFFF"})}),define("ace/token_iterator",["require","exports","module"],function(e,t){var i=function(e,t,i){this.$session=e,this.$row=t,this.$rowTokens=e.getTokens(t);var r=e.getTokenAt(t,i);this.$tokenIndex=r?r.index:-1};(function(){this.stepBackward=function(){for(this.$tokenIndex-=1;this.$tokenIndex<0;){if(this.$row-=1,this.$row<0)return this.$row=0,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=this.$rowTokens.length-1}return this.$rowTokens[this.$tokenIndex]},this.stepForward=function(){this.$tokenIndex+=1;for(var e;this.$tokenIndex>=this.$rowTokens.length;){if(this.$row+=1,e||(e=this.$session.getLength()),this.$row>=e)return this.$row=e-1,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=0}return this.$rowTokens[this.$tokenIndex]},this.getCurrentToken=function(){return this.$rowTokens[this.$tokenIndex]},this.getCurrentTokenRow=function(){return this.$row},this.getCurrentTokenColumn=function(){var e=this.$rowTokens,t=this.$tokenIndex,i=e[t].start;if(void 0!==i)return i;for(i=0;t>0;)t-=1,i+=e[t].value.length;return i}}).call(i.prototype),t.TokenIterator=i}),define("ace/document",["require","exports","module","ace/lib/oop","ace/lib/event_emitter","ace/range","ace/anchor"],function(e,t){var i=e("./lib/oop"),r=e("./lib/event_emitter").EventEmitter,n=e("./range").Range,o=e("./anchor").Anchor,s=function(e){this.$lines=[],0==e.length?this.$lines=[""]:Array.isArray(e)?this._insertLines(0,e):this.insert({row:0,column:0},e)};(function(){i.implement(this,r),this.setValue=function(e){var t=this.getLength();this.remove(new n(0,0,t,this.getLine(t-1).length)),this.insert({row:0,column:0},e)},this.getValue=function(){return this.getAllLines().join(this.getNewLineCharacter())},this.createAnchor=function(e,t){return new o(this,e,t)},this.$split=0=="aaa".split(/a/).length?function(e){return e.replace(/\r\n|\r/g,"\n").split("\n")}:function(e){return e.split(/\r\n|\r|\n/)},this.$detectNewLine=function(e){var t=e.match(/^.*?(\r\n|\r|\n)/m);this.$autoNewLine=t?t[1]:"\n"},this.getNewLineCharacter=function(){switch(this.$newLineMode){case"windows":return"\r\n";case"unix":return"\n";default:return this.$autoNewLine}},this.$autoNewLine="\n",this.$newLineMode="auto",this.setNewLineMode=function(e){this.$newLineMode!==e&&(this.$newLineMode=e)},this.getNewLineMode=function(){return this.$newLineMode},this.isNewLine=function(e){return"\r\n"==e||"\r"==e||"\n"==e},this.getLine=function(e){return this.$lines[e]||""},this.getLines=function(e,t){return this.$lines.slice(e,t+1)},this.getAllLines=function(){return this.getLines(0,this.getLength())},this.getLength=function(){return this.$lines.length},this.getTextRange=function(e){if(e.start.row==e.end.row)return this.getLine(e.start.row).substring(e.start.column,e.end.column);var t=this.getLines(e.start.row,e.end.row);t[0]=(t[0]||"").substring(e.start.column);var i=t.length-1;return e.end.row-e.start.row==i&&(t[i]=t[i].substring(0,e.end.column)),t.join(this.getNewLineCharacter())},this.$clipPosition=function(e){var t=this.getLength();return e.row>=t?(e.row=Math.max(0,t-1),e.column=this.getLine(t-1).length):e.row<0&&(e.row=0),e},this.insert=function(e,t){if(!t||0===t.length)return e;e=this.$clipPosition(e),this.getLength()<=1&&this.$detectNewLine(t);var i=this.$split(t),r=i.splice(0,1)[0],n=0==i.length?null:i.splice(i.length-1,1)[0];return e=this.insertInLine(e,r),null!==n&&(e=this.insertNewLine(e),e=this._insertLines(e.row,i),e=this.insertInLine(e,n||"")),e},this.insertLines=function(e,t){return e>=this.getLength()?this.insert({row:e,column:0},"\n"+t.join("\n")):this._insertLines(Math.max(e,0),t)},this._insertLines=function(e,t){if(0==t.length)return{row:e,column:0};if(t.length>65535){var i=this._insertLines(e,t.slice(65535));t=t.slice(0,65535)}var r=[e,0];r.push.apply(r,t),this.$lines.splice.apply(this.$lines,r);var o=new n(e,0,e+t.length,0),s={action:"insertLines",range:o,lines:t};return this._emit("change",{data:s}),i||o.end},this.insertNewLine=function(e){e=this.$clipPosition(e);var t=this.$lines[e.row]||"";this.$lines[e.row]=t.substring(0,e.column),this.$lines.splice(e.row+1,0,t.substring(e.column,t.length));var i={row:e.row+1,column:0},r={action:"insertText",range:n.fromPoints(e,i),text:this.getNewLineCharacter()};return this._emit("change",{data:r}),i},this.insertInLine=function(e,t){if(0==t.length)return e;var i=this.$lines[e.row]||"";this.$lines[e.row]=i.substring(0,e.column)+t+i.substring(e.column);var r={row:e.row,column:e.column+t.length},o={action:"insertText",range:n.fromPoints(e,r),text:t};
return this._emit("change",{data:o}),r},this.remove=function(e){if(!e instanceof n&&(e=n.fromPoints(e.start,e.end)),e.start=this.$clipPosition(e.start),e.end=this.$clipPosition(e.end),e.isEmpty())return e.start;var t=e.start.row,i=e.end.row;if(e.isMultiLine()){var r=0==e.start.column?t:t+1,o=i-1;e.end.column>0&&this.removeInLine(i,0,e.end.column),o>=r&&this._removeLines(r,o),r!=t&&(this.removeInLine(t,e.start.column,this.getLine(t).length),this.removeNewLine(e.start.row))}else this.removeInLine(t,e.start.column,e.end.column);return e.start},this.removeInLine=function(e,t,i){if(t!=i){var r=new n(e,t,e,i),o=this.getLine(e),s=o.substring(t,i),a=o.substring(0,t)+o.substring(i,o.length);this.$lines.splice(e,1,a);var l={action:"removeText",range:r,text:s};return this._emit("change",{data:l}),r.start}},this.removeLines=function(e,t){return 0>e||t>=this.getLength()?this.remove(new n(e,0,t+1,0)):this._removeLines(e,t)},this._removeLines=function(e,t){var i=new n(e,0,t+1,0),r=this.$lines.splice(e,t-e+1),o={action:"removeLines",range:i,nl:this.getNewLineCharacter(),lines:r};return this._emit("change",{data:o}),r},this.removeNewLine=function(e){var t=this.getLine(e),i=this.getLine(e+1),r=new n(e,t.length,e+1,0),o=t+i;this.$lines.splice(e,2,o);var s={action:"removeText",range:r,text:this.getNewLineCharacter()};this._emit("change",{data:s})},this.replace=function(e,t){if(!e instanceof n&&(e=n.fromPoints(e.start,e.end)),0==t.length&&e.isEmpty())return e.start;if(t==this.getTextRange(e))return e.end;if(this.remove(e),t)var i=this.insert(e.start,t);else i=e.start;return i},this.applyDeltas=function(e){for(var t=0;t<e.length;t++){var i=e[t],r=n.fromPoints(i.range.start,i.range.end);"insertLines"==i.action?this.insertLines(r.start.row,i.lines):"insertText"==i.action?this.insert(r.start,i.text):"removeLines"==i.action?this._removeLines(r.start.row,r.end.row-1):"removeText"==i.action&&this.remove(r)}},this.revertDeltas=function(e){for(var t=e.length-1;t>=0;t--){var i=e[t],r=n.fromPoints(i.range.start,i.range.end);"insertLines"==i.action?this._removeLines(r.start.row,r.end.row-1):"insertText"==i.action?this.remove(r):"removeLines"==i.action?this._insertLines(r.start.row,i.lines):"removeText"==i.action&&this.insert(r.start,i.text)}},this.indexToPosition=function(e,t){for(var i=this.$lines||this.getAllLines(),r=this.getNewLineCharacter().length,n=t||0,o=i.length;o>n;n++)if(e-=i[n].length+r,0>e)return{row:n,column:e+i[n].length+r};return{row:o-1,column:i[o-1].length}},this.positionToIndex=function(e,t){for(var i=this.$lines||this.getAllLines(),r=this.getNewLineCharacter().length,n=0,o=Math.min(e.row,i.length),s=t||0;o>s;++s)n+=i[s].length+r;return n+e.column}}).call(s.prototype),t.Document=s}),define("ace/anchor",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(e,t){var i=e("./lib/oop"),r=e("./lib/event_emitter").EventEmitter,n=t.Anchor=function(e,t,i){this.$onChange=this.onChange.bind(this),this.attach(e),"undefined"==typeof i?this.setPosition(t.row,t.column):this.setPosition(t,i)};(function(){i.implement(this,r),this.getPosition=function(){return this.$clipPositionToDocument(this.row,this.column)},this.getDocument=function(){return this.document},this.$insertRight=!1,this.onChange=function(e){var t=e.data,i=t.range;if((i.start.row!=i.end.row||i.start.row==this.row)&&!(i.start.row>this.row||i.start.row==this.row&&i.start.column>this.column)){var r=this.row,n=this.column,o=i.start,s=i.end;"insertText"===t.action?o.row===r&&o.column<=n?o.column===n&&this.$insertRight||(o.row===s.row?n+=s.column-o.column:(n-=o.column,r+=s.row-o.row)):o.row!==s.row&&o.row<r&&(r+=s.row-o.row):"insertLines"===t.action?o.row<=r&&(r+=s.row-o.row):"removeText"===t.action?o.row===r&&o.column<n?n=s.column>=n?o.column:Math.max(0,n-(s.column-o.column)):o.row!==s.row&&o.row<r?(s.row===r&&(n=Math.max(0,n-s.column)+o.column),r-=s.row-o.row):s.row===r&&(r-=s.row-o.row,n=Math.max(0,n-s.column)+o.column):"removeLines"==t.action&&o.row<=r&&(s.row<=r?r-=s.row-o.row:(r=o.row,n=0)),this.setPosition(r,n,!0)}},this.setPosition=function(e,t,i){var r;if(r=i?{row:e,column:t}:this.$clipPositionToDocument(e,t),this.row!=r.row||this.column!=r.column){var n={row:this.row,column:this.column};this.row=r.row,this.column=r.column,this._emit("change",{old:n,value:r})}},this.detach=function(){this.document.removeEventListener("change",this.$onChange)},this.attach=function(e){this.document=e||this.document,this.document.on("change",this.$onChange)},this.$clipPositionToDocument=function(e,t){var i={};return e>=this.document.getLength()?(i.row=Math.max(0,this.document.getLength()-1),i.column=this.document.getLine(i.row).length):0>e?(i.row=0,i.column=0):(i.row=e,i.column=Math.min(this.document.getLine(i.row).length,Math.max(0,t))),0>t&&(i.column=0),i}}).call(n.prototype)}),define("ace/background_tokenizer",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(e,t){var i=e("./lib/oop"),r=e("./lib/event_emitter").EventEmitter,n=function(e){this.running=!1,this.lines=[],this.states=[],this.currentLine=0,this.tokenizer=e;var t=this;this.$worker=function(){if(t.running){for(var e=new Date,i=t.currentLine,r=-1,n=t.doc;t.lines[i];)i++;var o=i,s=n.getLength(),a=0;for(t.running=!1;s>i;){t.$tokenizeRow(i),r=i;do i++;while(t.lines[i]);if(a++,a%5==0&&new Date-e>20)return t.running=setTimeout(t.$worker,20),t.currentLine=i,void 0}t.currentLine=i,r>=o&&t.fireUpdateEvent(o,r)}}};(function(){i.implement(this,r),this.setTokenizer=function(e){this.tokenizer=e,this.lines=[],this.states=[],this.start(0)},this.setDocument=function(e){this.doc=e,this.lines=[],this.states=[],this.stop()},this.fireUpdateEvent=function(e,t){var i={first:e,last:t};this._emit("update",{data:i})},this.start=function(e){this.currentLine=Math.min(e||0,this.currentLine,this.doc.getLength()),this.lines.splice(this.currentLine,this.lines.length),this.states.splice(this.currentLine,this.states.length),this.stop(),this.running=setTimeout(this.$worker,700)},this.scheduleStart=function(){this.running||(this.running=setTimeout(this.$worker,700))},this.$updateOnChange=function(e){var t=e.range,i=t.start.row,r=t.end.row-i;if(0===r)this.lines[i]=null;else if("removeText"==e.action||"removeLines"==e.action)this.lines.splice(i,r+1,null),this.states.splice(i,r+1,null);else{var n=Array(r+1);n.unshift(i,1),this.lines.splice.apply(this.lines,n),this.states.splice.apply(this.states,n)}this.currentLine=Math.min(i,this.currentLine,this.doc.getLength()),this.stop()},this.stop=function(){this.running&&clearTimeout(this.running),this.running=!1},this.getTokens=function(e){return this.lines[e]||this.$tokenizeRow(e)},this.getState=function(e){return this.currentLine==e&&this.$tokenizeRow(e),this.states[e]||"start"},this.$tokenizeRow=function(e){var t=this.doc.getLine(e),i=this.states[e-1],r=this.tokenizer.getLineTokens(t,i,e);return this.states[e]+""!=r.state+""?(this.states[e]=r.state,this.lines[e+1]=null,this.currentLine>e+1&&(this.currentLine=e+1)):this.currentLine==e&&(this.currentLine=e+1),this.lines[e]=r.tokens}}).call(n.prototype),t.BackgroundTokenizer=n}),define("ace/search_highlight",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/range"],function(e,t){var i=e("./lib/lang"),r=(e("./lib/oop"),e("./range").Range),n=function(e,t,i){this.setRegexp(e),this.clazz=t,this.type=i||"text"};(function(){this.MAX_RANGES=500,this.setRegexp=function(e){this.regExp+""!=e+""&&(this.regExp=e,this.cache=[])},this.update=function(e,t,n,o){if(this.regExp)for(var s=o.firstRow,a=o.lastRow,l=s;a>=l;l++){var h=this.cache[l];null==h&&(h=i.getMatchOffsets(n.getLine(l),this.regExp),h.length>this.MAX_RANGES&&(h=h.slice(0,this.MAX_RANGES)),h=h.map(function(e){return new r(l,e.offset,l,e.offset+e.length)}),this.cache[l]=h.length?h:"");for(var c=h.length;c--;)t.drawSingleLineMarker(e,h[c].toScreenRange(n),this.clazz,o)}}}).call(n.prototype),t.SearchHighlight=n}),define("ace/edit_session/folding",["require","exports","module","ace/range","ace/edit_session/fold_line","ace/edit_session/fold","ace/token_iterator"],function(e,t){function i(){this.getFoldAt=function(e,t,i){var r=this.getFoldLine(e);if(!r)return null;for(var n=r.folds,o=0;o<n.length;o++){var s=n[o];if(s.range.contains(e,t)){if(1==i&&s.range.isEnd(e,t))continue;if(-1==i&&s.range.isStart(e,t))continue;return s}}},this.getFoldsInRange=function(e){var t=e.start,i=e.end,r=this.$foldData,n=[];t.column+=1,i.column-=1;for(var o=0;o<r.length;o++){var s=r[o].range.compareRange(e);if(2!=s){if(-2==s)break;for(var a=r[o].folds,l=0;l<a.length;l++){var h=a[l];if(s=h.range.compareRange(e),-2==s)break;if(2!=s){if(42==s)break;n.push(h)}}}}return t.column-=1,i.column+=1,n},this.getFoldsInRangeList=function(e){if(Array.isArray(e)){var t=[];e.forEach(function(e){t=t.concat(this.getFoldsInRange(e))},this)}else var t=this.getFoldsInRange(e);return t},this.getAllFolds=function(){for(var e=[],t=this.$foldData,i=0;i<t.length;i++)for(var r=0;r<t[i].folds.length;r++)e.push(t[i].folds[r]);return e},this.getFoldStringAt=function(e,t,i,r){if(r=r||this.getFoldLine(e),!r)return null;for(var n,o,s={end:{column:0}},a=0;a<r.folds.length;a++){o=r.folds[a];var l=o.range.compareEnd(e,t);if(-1==l){n=this.getLine(o.start.row).substring(s.end.column,o.start.column);break}if(0===l)return null;s=o}return n||(n=this.getLine(o.start.row).substring(s.end.column)),-1==i?n.substring(0,t-s.end.column):1==i?n.substring(t-s.end.column):n},this.getFoldLine=function(e,t){var i=this.$foldData,r=0;for(t&&(r=i.indexOf(t)),-1==r&&(r=0),r;r<i.length;r++){var n=i[r];if(n.start.row<=e&&n.end.row>=e)return n;if(n.end.row>e)return null}return null},this.getNextFoldLine=function(e,t){var i=this.$foldData,r=0;for(t&&(r=i.indexOf(t)),-1==r&&(r=0),r;r<i.length;r++){var n=i[r];if(n.end.row>=e)return n}return null},this.getFoldedRowCount=function(e,t){for(var i=this.$foldData,r=t-e+1,n=0;n<i.length;n++){var o=i[n],s=o.end.row,a=o.start.row;if(s>=t){t>a&&(a>=e?r-=t-a:r=0);break}s>=e&&(r-=a>=e?s-a:s-e+1)}return r},this.$addFoldLine=function(e){return this.$foldData.push(e),this.$foldData.sort(function(e,t){return e.start.row-t.start.row}),e},this.addFold=function(e,t){var i,r=this.$foldData,s=!1;e instanceof o?i=e:(i=new o(t,e),i.collapseChildren=t.collapseChildren),this.$clipRangeToDocument(i.range);var a=i.start.row,l=i.start.column,h=i.end.row,c=i.end.column;if(h>a||a==h&&c-2>=l){var u=this.getFoldAt(a,l,1),d=this.getFoldAt(h,c,-1);if(u&&d==u)return u.addSubFold(i);if(u&&!u.range.isStart(a,l)||d&&!d.range.isEnd(h,c))throw new Error("A fold can't intersect already existing fold"+i.range+u.range);var f=this.getFoldsInRange(i.range);f.length>0&&(this.removeFolds(f),f.forEach(function(e){i.addSubFold(e)}));for(var m=0;m<r.length;m++){var p=r[m];if(h==p.start.row){p.addFold(i),s=!0;break}if(a==p.end.row){if(p.addFold(i),s=!0,!i.sameRow){var g=r[m+1];if(g&&g.start.row==h){p.merge(g);break}}break}if(h<=p.start.row)break}return s||(p=this.$addFoldLine(new n(this.$foldData,i))),this.$useWrapMode?this.$updateWrapData(p.start.row,p.start.row):this.$updateRowLengthCache(p.start.row,p.start.row),this.$modified=!0,this._emit("changeFold",{data:i,action:"add"}),i}throw new Error("The range has to be at least 2 characters width")},this.addFolds=function(e){e.forEach(function(e){this.addFold(e)},this)},this.removeFold=function(e){var t=e.foldLine,i=t.start.row,r=t.end.row,n=this.$foldData,o=t.folds;if(1==o.length)n.splice(n.indexOf(t),1);else if(t.range.isEnd(e.end.row,e.end.column))o.pop(),t.end.row=o[o.length-1].end.row,t.end.column=o[o.length-1].end.column;else if(t.range.isStart(e.start.row,e.start.column))o.shift(),t.start.row=o[0].start.row,t.start.column=o[0].start.column;else if(e.sameRow)o.splice(o.indexOf(e),1);else{var s=t.split(e.start.row,e.start.column);o=s.folds,o.shift(),s.start.row=o[0].start.row,s.start.column=o[0].start.column}this.$updating||(this.$useWrapMode?this.$updateWrapData(i,r):this.$updateRowLengthCache(i,r)),this.$modified=!0,this._emit("changeFold",{data:e,action:"remove"})},this.removeFolds=function(e){for(var t=[],i=0;i<e.length;i++)t.push(e[i]);t.forEach(function(e){this.removeFold(e)},this),this.$modified=!0},this.expandFold=function(e){this.removeFold(e),e.subFolds.forEach(function(t){e.restoreRange(t),this.addFold(t)},this),e.collapseChildren>0&&this.foldAll(e.start.row+1,e.end.row,e.collapseChildren-1),e.subFolds=[]},this.expandFolds=function(e){e.forEach(function(e){this.expandFold(e)},this)},this.unfold=function(e,t){var i,n;if(null==e?(i=new r(0,0,this.getLength(),0),t=!0):i="number"==typeof e?new r(e,0,e,this.getLine(e).length):"row"in e?r.fromPoints(e,e):e,n=this.getFoldsInRangeList(i),t)this.removeFolds(n);else for(var o=n;o.length;)this.expandFolds(o),o=this.getFoldsInRangeList(i);return n.length?n:void 0},this.isRowFolded=function(e,t){return!!this.getFoldLine(e,t)},this.getRowFoldEnd=function(e,t){var i=this.getFoldLine(e,t);return i?i.end.row:e},this.getRowFoldStart=function(e,t){var i=this.getFoldLine(e,t);return i?i.start.row:e},this.getFoldDisplayLine=function(e,t,i,r,n){null==r&&(r=e.start.row,n=0),null==t&&(t=e.end.row,i=this.getLine(t).length);var o=this.doc,s="";return e.walk(function(e,t,i,a){if(!(r>t)){if(t==r){if(n>i)return;a=Math.max(n,a)}s+=null!=e?e:o.getLine(t).substring(a,i)}},t,i),s},this.getDisplayLine=function(e,t,i,r){var n=this.getFoldLine(e);if(!n){var o;return o=this.doc.getLine(e),o.substring(r||0,t||o.length)}return this.getFoldDisplayLine(n,e,t,i,r)},this.$cloneFoldData=function(){var e=[];return e=this.$foldData.map(function(t){var i=t.folds.map(function(e){return e.clone()});return new n(e,i)})},this.toggleFold=function(e){var t,i,r=this.selection,n=r.getRange();if(n.isEmpty()){var o=n.start;if(t=this.getFoldAt(o.row,o.column))return this.expandFold(t),void 0;(i=this.findMatchingBracket(o))?1==n.comparePoint(i)?n.end=i:(n.start=i,n.start.column++,n.end.column--):(i=this.findMatchingBracket({row:o.row,column:o.column+1}))?(1==n.comparePoint(i)?n.end=i:n.start=i,n.start.column++):n=this.getCommentFoldRange(o.row,o.column)||n}else{var s=this.getFoldsInRange(n);if(e&&s.length)return this.expandFolds(s),void 0;1==s.length&&(t=s[0])}if(t||(t=this.getFoldAt(n.start.row,n.start.column)),t&&t.range.toString()==n.toString())return this.expandFold(t),void 0;var a="...";if(!n.isMultiLine()){if(a=this.getTextRange(n),a.length<4)return;a=a.trim().substring(0,2)+".."}this.addFold(a,n)},this.getCommentFoldRange=function(e,t,i){var n=new s(this,e,t),o=n.getCurrentToken();if(o&&/^comment|string/.test(o.type)){var a=new r,l=new RegExp(o.type.replace(/\..*/,"\\."));if(1!=i){do o=n.stepBackward();while(o&&l.test(o.type));n.stepForward()}if(a.start.row=n.getCurrentTokenRow(),a.start.column=n.getCurrentTokenColumn()+2,n=new s(this,e,t),-1!=i){do o=n.stepForward();while(o&&l.test(o.type));o=n.stepBackward()}else o=n.getCurrentToken();return a.end.row=n.getCurrentTokenRow(),a.end.column=n.getCurrentTokenColumn()+o.value.length-2,a}},this.foldAll=function(e,t,i){void 0==i&&(i=1e5);var r=this.foldWidgets;if(r){t=t||this.getLength(),e=e||0;for(var n=e;t>n;n++)if(null==r[n]&&(r[n]=this.getFoldWidget(n)),"start"==r[n]){var o=this.getFoldWidgetRange(n);if(o&&o.isMultiLine()&&o.end.row<=t&&o.start.row>=e){n=o.end.row;try{var s=this.addFold("...",o);s&&(s.collapseChildren=i)}catch(a){}}}}},this.$foldStyles={manual:1,markbegin:1,markbeginend:1},this.$foldStyle="markbegin",this.setFoldStyle=function(e){if(!this.$foldStyles[e])throw new Error("invalid fold style: "+e+"["+Object.keys(this.$foldStyles).join(", ")+"]");if(this.$foldStyle!=e){this.$foldStyle=e,"manual"==e&&this.unfold();var t=this.$foldMode;this.$setFolding(null),this.$setFolding(t)}},this.$setFolding=function(e){return this.$foldMode!=e?(this.$foldMode=e,this.removeListener("change",this.$updateFoldWidgets),this._emit("changeAnnotation"),e&&"manual"!=this.$foldStyle?(this.foldWidgets=[],this.getFoldWidget=e.getFoldWidget.bind(e,this,this.$foldStyle),this.getFoldWidgetRange=e.getFoldWidgetRange.bind(e,this,this.$foldStyle),this.$updateFoldWidgets=this.updateFoldWidgets.bind(this),this.on("change",this.$updateFoldWidgets),void 0):(this.foldWidgets=null,void 0)):void 0},this.getParentFoldRangeData=function(e,t){var i=this.foldWidgets;if(!i||t&&i[e])return{};for(var r,n=e-1;n>=0;){var o=i[n];if(null==o&&(o=i[n]=this.getFoldWidget(n)),"start"==o){var s=this.getFoldWidgetRange(n);if(r||(r=s),s&&s.end.row>=e)break}n--}return{range:-1!==n&&s,firstRange:r}},this.onFoldWidgetClick=function(e,t){t=t.domEvent;var i={children:t.shiftKey,all:t.ctrlKey||t.metaKey,siblings:t.altKey},r=this.$toggleFoldWidget(e,i);if(!r){var n=t.target||t.srcElement;n&&/ace_fold-widget/.test(n.className)&&(n.className+=" ace_invalid")}},this.$toggleFoldWidget=function(e,t){if(this.getFoldWidget){var i=this.getFoldWidget(e),r=this.getLine(e),n="end"===i?-1:1,o=this.getFoldAt(e,-1===n?0:r.length,n);if(o)return t.children||t.all?this.removeFold(o):this.expandFold(o),void 0;var s=this.getFoldWidgetRange(e,!0);if(s&&!s.isMultiLine()&&(o=this.getFoldAt(s.start.row,s.start.column,1),o&&s.isEqual(o.range)))return this.removeFold(o),void 0;if(t.siblings){var a=this.getParentFoldRangeData(e);if(a.range)var l=a.range.start.row+1,h=a.range.end.row;this.foldAll(l,h,t.all?1e4:0)}else t.children?(h=s?s.end.row:this.getLength(),this.foldAll(e+1,s.end.row,t.all?1e4:0)):s&&(t.all&&(s.collapseChildren=1e4),this.addFold("...",s));return s}},this.toggleFoldWidget=function(){var e=this.selection.getCursor().row;e=this.getRowFoldStart(e);var t=this.$toggleFoldWidget(e,{});if(!t){var i=this.getParentFoldRangeData(e,!0);if(t=i.range||i.firstRange){e=t.start.row;var r=this.getFoldAt(e,this.getLine(e).length,1);r?this.removeFold(r):this.addFold("...",t)}}},this.updateFoldWidgets=function(e){var t=e.data,i=t.range,r=i.start.row,n=i.end.row-r;if(0===n)this.foldWidgets[r]=null;else if("removeText"==t.action||"removeLines"==t.action)this.foldWidgets.splice(r,n+1,null);else{var o=Array(n+1);o.unshift(r,1),this.foldWidgets.splice.apply(this.foldWidgets,o)}}}var r=e("../range").Range,n=e("./fold_line").FoldLine,o=e("./fold").Fold,s=e("../token_iterator").TokenIterator;t.Folding=i}),define("ace/edit_session/fold_line",["require","exports","module","ace/range"],function(e,t){function i(e,t){this.foldData=e,Array.isArray(t)?this.folds=t:t=this.folds=[t];var i=t[t.length-1];this.range=new r(t[0].start.row,t[0].start.column,i.end.row,i.end.column),this.start=this.range.start,this.end=this.range.end,this.folds.forEach(function(e){e.setFoldLine(this)},this)}var r=e("../range").Range;(function(){this.shiftRow=function(e){this.start.row+=e,this.end.row+=e,this.folds.forEach(function(t){t.start.row+=e,t.end.row+=e})},this.addFold=function(e){if(e.sameRow){if(e.start.row<this.startRow||e.endRow>this.endRow)throw new Error("Can't add a fold to this FoldLine as it has no connection");this.folds.push(e),this.folds.sort(function(e,t){return-e.range.compareEnd(t.start.row,t.start.column)}),this.range.compareEnd(e.start.row,e.start.column)>0?(this.end.row=e.end.row,this.end.column=e.end.column):this.range.compareStart(e.end.row,e.end.column)<0&&(this.start.row=e.start.row,this.start.column=e.start.column)}else if(e.start.row==this.end.row)this.folds.push(e),this.end.row=e.end.row,this.end.column=e.end.column;else{if(e.end.row!=this.start.row)throw new Error("Trying to add fold to FoldRow that doesn't have a matching row");this.folds.unshift(e),this.start.row=e.start.row,this.start.column=e.start.column}e.foldLine=this},this.containsRow=function(e){return e>=this.start.row&&e<=this.end.row},this.walk=function(e,t,i){var r,n,o,s=0,a=this.folds,l=!0;null==t&&(t=this.end.row,i=this.end.column);for(var h=0;h<a.length;h++){if(r=a[h],n=r.range.compareStart(t,i),-1==n)return e(null,t,i,s,l),void 0;if(o=e(null,r.start.row,r.start.column,s,l),o=!o&&e(r.placeholder,r.start.row,r.start.column,s),o||0==n)return;l=!r.sameRow,s=r.end.column}e(null,t,i,s,l)},this.getNextFoldTo=function(e,t){for(var i,r,n=0;n<this.folds.length;n++){if(i=this.folds[n],r=i.range.compareEnd(e,t),-1==r)return{fold:i,kind:"after"};if(0==r)return{fold:i,kind:"inside"}}return null},this.addRemoveChars=function(e,t,i){var r,n,o=this.getNextFoldTo(e,t);if(o)if(r=o.fold,"inside"==o.kind&&r.start.column!=t&&r.start.row!=e)window.console&&window.console.log(e,t,r);else if(r.start.row==e){n=this.folds;var s=n.indexOf(r);for(0==s&&(this.start.column+=i),s;s<n.length;s++){if(r=n[s],r.start.column+=i,!r.sameRow)return;r.end.column+=i}this.end.column+=i}},this.split=function(e,t){var r=this.getNextFoldTo(e,t).fold,n=this.folds,o=this.foldData;if(!r)return null;var s=n.indexOf(r),a=n[s-1];this.end.row=a.end.row,this.end.column=a.end.column,n=n.splice(s,n.length-s);var l=new i(o,n);return o.splice(o.indexOf(this)+1,0,l),l},this.merge=function(e){for(var t=e.folds,i=0;i<t.length;i++)this.addFold(t[i]);var r=this.foldData;r.splice(r.indexOf(e),1)},this.toString=function(){var e=[this.range.toString()+": ["];return this.folds.forEach(function(t){e.push("  "+t.toString())}),e.push("]"),e.join("\n")},this.idxToPosition=function(e){for(var t,i=0,r=0;r<this.folds.length;r++){var t=this.folds[r];if(e-=t.start.column-i,0>e)return{row:t.start.row,column:t.start.column+e};if(e-=t.placeholder.length,0>e)return t.start;i=t.end.column}return{row:this.end.row,column:this.end.column+e}}}).call(i.prototype),t.FoldLine=i}),define("ace/edit_session/fold",["require","exports","module","ace/range","ace/range_list","ace/lib/oop"],function(e,t){function i(e,t){e.row-=t.row,0==e.row&&(e.column-=t.column)}function r(e,t){i(e.start,t),i(e.end,t)}function n(e,t){0==e.row&&(e.column+=t.column),e.row+=t.row}function o(e,t){n(e.start,t),n(e.end,t)}var s=(e("../range").Range,e("../range_list").RangeList),a=e("../lib/oop"),l=t.Fold=function(e,t){this.foldLine=null,this.placeholder=t,this.range=e,this.start=e.start,this.end=e.end,this.sameRow=e.start.row==e.end.row,this.subFolds=this.ranges=[]};a.inherits(l,s),function(){this.toString=function(){return'"'+this.placeholder+'" '+this.range.toString()},this.setFoldLine=function(e){this.foldLine=e,this.subFolds.forEach(function(t){t.setFoldLine(e)})},this.clone=function(){var e=this.range.clone(),t=new l(e,this.placeholder);return this.subFolds.forEach(function(e){t.subFolds.push(e.clone())}),t.collapseChildren=this.collapseChildren,t},this.addSubFold=function(e){if(!this.range.isEqual(e)){if(!this.range.containsRange(e))throw new Error("A fold can't intersect already existing fold"+e.range+this.range);r(e,this.start);for(var t=e.start.row,i=e.start.column,n=0,o=-1;n<this.subFolds.length&&(o=this.subFolds[n].range.compare(t,i),1==o);n++);var s=this.subFolds[n];if(0==o)return s.addSubFold(e);for(var t=e.range.end.row,i=e.range.end.column,a=n,o=-1;a<this.subFolds.length&&(o=this.subFolds[a].range.compare(t,i),1==o);a++);{this.subFolds[a]}if(0==o)throw new Error("A fold can't intersect already existing fold"+e.range+this.range);{this.subFolds.splice(n,a-n,e)}return e.setFoldLine(this.foldLine),e}},this.restoreRange=function(e){return o(e,this.start)}}.call(l.prototype)}),define("ace/range_list",["require","exports","module","ace/range"],function(e,t){var i=e("./range").Range,r=i.comparePoints,n=function(){this.ranges=[]};(function(){this.comparePoints=r,this.pointIndex=function(e,t,i){for(var n=this.ranges,o=i||0;o<n.length;o++){var s=n[o],a=r(e,s.end);if(!(a>0)){var l=r(e,s.start);return 0===a?t&&0!==l?-o-2:o:l>0||0===l&&!t?o:-o-1}}return-o-1},this.add=function(e){var t=!e.isEmpty(),i=this.pointIndex(e.start,t);0>i&&(i=-i-1);var r=this.pointIndex(e.end,t,i);return 0>r?r=-r-1:r++,this.ranges.splice(i,r-i,e)},this.addList=function(e){for(var t=[],i=e.length;i--;)t.push.call(t,this.add(e[i]));return t},this.substractPoint=function(e){var t=this.pointIndex(e);return t>=0?this.ranges.splice(t,1):void 0},this.merge=function(){var e=[],t=this.ranges;t=t.sort(function(e,t){return r(e.start,t.start)});for(var i,n=t[0],o=1;o<t.length;o++){i=n,n=t[o];var s=r(i.end,n.start);0>s||(0!=s||i.isEmpty()||n.isEmpty())&&(r(i.end,n.end)<0&&(i.end.row=n.end.row,i.end.column=n.end.column),t.splice(o,1),e.push(n),n=i,o--)}return this.ranges=t,e},this.contains=function(e,t){return this.pointIndex({row:e,column:t})>=0},this.containsPoint=function(e){return this.pointIndex(e)>=0},this.rangeAtPoint=function(e){var t=this.pointIndex(e);return t>=0?this.ranges[t]:void 0},this.clipRows=function(e,t){var i=this.ranges;if(i[0].start.row>t||i[i.length-1].start.row<e)return[];var r=this.pointIndex({row:e,column:0});0>r&&(r=-r-1);var n=this.pointIndex({row:t,column:0},r);0>n&&(n=-n-1);for(var o=[],s=r;n>s;s++)o.push(i[s]);return o},this.removeAll=function(){return this.ranges.splice(0,this.ranges.length)},this.attach=function(e){this.session&&this.detach(),this.session=e,this.onChange=this.$onChange.bind(this),this.session.on("change",this.onChange)},this.detach=function(){this.session&&(this.session.removeListener("change",this.onChange),this.session=null)},this.$onChange=function(e){var t=e.data.range;if("i"==e.data.action[0])var i=t.start,r=t.end;else var r=t.start,i=t.end;for(var n=i.row,o=r.row,s=o-n,a=-i.column+r.column,l=this.ranges,h=0,c=l.length;c>h;h++){var u=l[h];if(!(u.end.row<n)){if(u.start.row>n)break;if(u.start.row==n&&u.start.column>=i.column&&(u.start.column!=i.column||!this.$insertRight)&&(u.start.column+=a,u.start.row+=s),u.end.row==n&&u.end.column>=i.column){if(u.end.column==i.column&&this.$insertRight)continue;u.end.column==i.column&&a>0&&c-1>h&&u.end.column>u.start.column&&u.end.column==l[h+1].start.column&&(u.end.column-=a),u.end.column+=a,u.end.row+=s}}}if(0!=s&&c>h)for(;c>h;h++){var u=l[h];u.start.row+=s,u.end.row+=s}}}).call(n.prototype),t.RangeList=n}),define("ace/edit_session/bracket_match",["require","exports","module","ace/token_iterator","ace/range"],function(e,t){function i(){this.findMatchingBracket=function(e,t){if(0==e.column)return null;var i=t||this.getLine(e.row).charAt(e.column-1);if(""==i)return null;var r=i.match(/([\(\[\{])|([\)\]\}])/);return r?r[1]?this.$findClosingBracket(r[1],e):this.$findOpeningBracket(r[2],e):null},this.getBracketRange=function(e){var t,i=this.getLine(e.row),r=!0,o=i.charAt(e.column-1),s=o&&o.match(/([\(\[\{])|([\)\]\}])/);if(s||(o=i.charAt(e.column),e={row:e.row,column:e.column+1},s=o&&o.match(/([\(\[\{])|([\)\]\}])/),r=!1),!s)return null;if(s[1]){var a=this.$findClosingBracket(s[1],e);if(!a)return null;t=n.fromPoints(e,a),r||(t.end.column++,t.start.column--),t.cursor=t.end}else{var a=this.$findOpeningBracket(s[2],e);if(!a)return null;t=n.fromPoints(a,e),r||(t.start.column++,t.end.column--),t.cursor=t.start}return t},this.$brackets={")":"(","(":")","]":"[","[":"]","{":"}","}":"{"},this.$findOpeningBracket=function(e,t,i){var n=this.$brackets[e],o=1,s=new r(this,t.row,t.column),a=s.getCurrentToken();if(a||(a=s.stepForward()),a){i||(i=new RegExp("(\\.?"+a.type.replace(".","\\.").replace("rparen",".paren")+")+"));for(var l=t.column-s.getCurrentTokenColumn()-2,h=a.value;;){for(;l>=0;){var c=h.charAt(l);if(c==n){if(o-=1,0==o)return{row:s.getCurrentTokenRow(),column:l+s.getCurrentTokenColumn()}}else c==e&&(o+=1);l-=1}do a=s.stepBackward();while(a&&!i.test(a.type));if(null==a)break;h=a.value,l=h.length-1}return null}},this.$findClosingBracket=function(e,t,i){var n=this.$brackets[e],o=1,s=new r(this,t.row,t.column),a=s.getCurrentToken();if(a||(a=s.stepForward()),a){i||(i=new RegExp("(\\.?"+a.type.replace(".","\\.").replace("lparen",".paren")+")+"));for(var l=t.column-s.getCurrentTokenColumn();;){for(var h=a.value,c=h.length;c>l;){var u=h.charAt(l);if(u==n){if(o-=1,0==o)return{row:s.getCurrentTokenRow(),column:l+s.getCurrentTokenColumn()}}else u==e&&(o+=1);l+=1}do a=s.stepForward();while(a&&!i.test(a.type));if(null==a)break;l=0}return null}}}var r=e("../token_iterator").TokenIterator,n=e("../range").Range;t.BracketMatch=i}),define("ace/search",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/range"],function(e,t){var i=e("./lib/lang"),r=e("./lib/oop"),n=e("./range").Range,o=function(){this.$options={}};(function(){this.set=function(e){return r.mixin(this.$options,e),this},this.getOptions=function(){return i.copyObject(this.$options)},this.setOptions=function(e){this.$options=e},this.find=function(e){var t=this.$matchIterator(e,this.$options);if(!t)return!1;var i=null;return t.forEach(function(e,t,r){if(e.start)i=e;else{var o=e.offset+(r||0);i=new n(t,o,t,o+e.length)}return!0}),i},this.findAll=function(e){var t=this.$options;if(!t.needle)return[];this.$assembleRegExp(t);var r=t.range,o=r?e.getLines(r.start.row,r.end.row):e.doc.getAllLines(),s=[],a=t.re;if(t.$isMultiLine)for(var l=a.length,h=o.length-l,c=a.offset||0;h>=c;c++){for(var u=0;l>u&&-1!=o[c+u].search(a[u]);u++);var d=o[c],f=o[c+l-1],m=d.match(a[0])[0].length,p=f.match(a[l-1])[0].length;s.push(new n(c,d.length-m,c+l-1,p))}else for(var g=0;g<o.length;g++)for(var E=i.getMatchOffsets(o[g],a),u=0;u<E.length;u++){var v=E[u];s.push(new n(g,v.offset,g,v.offset+v.length))}if(r){for(var y=r.start.column,x=r.start.column,g=0,u=s.length-1;u>g&&s[g].start.column<y&&s[g].start.row==r.start.row;)g++;for(;u>g&&s[u].end.column>x&&s[u].end.row==r.end.row;)u--;for(s=s.slice(g,u+1),g=0,u=s.length;u>g;g++)s[g].start.row+=r.start.row,s[g].end.row+=r.start.row}return s},this.replace=function(e,t){var i=this.$options,r=this.$assembleRegExp(i);if(i.$isMultiLine)return t;if(r){var n=r.exec(e);if(!n||n[0].length!=e.length)return null;if(t=e.replace(r,t),i.preserveCase){t=t.split("");for(var o=Math.min(e.length,e.length);o--;){var s=e[o];t[o]=s&&s.toLowerCase()!=s?t[o].toUpperCase():t[o].toLowerCase()}t=t.join("")}return t}},this.$matchIterator=function(e,t){var r=this.$assembleRegExp(t);if(!r)return!1;var o,s=this,a=t.backwards;if(t.$isMultiLine)var l=r.length,h=function(t,i,s){var a=t.search(r[0]);if(-1!=a){for(var h=1;l>h;h++)if(t=e.getLine(i+h),-1==t.search(r[h]))return;var c=t.match(r[l-1])[0].length,u=new n(i,a,i+l-1,c);return 1==r.offset?(u.start.row--,u.start.column=Number.MAX_VALUE):s&&(u.start.column+=s),o(u)?!0:void 0}};else if(a)var h=function(e,t,n){for(var s=i.getMatchOffsets(e,r),a=s.length-1;a>=0;a--)if(o(s[a],t,n))return!0};else var h=function(e,t,n){for(var s=i.getMatchOffsets(e,r),a=0;a<s.length;a++)if(o(s[a],t,n))return!0};return{forEach:function(i){o=i,s.$lineIterator(e,t).forEach(h)}}},this.$assembleRegExp=function(e,t){if(e.needle instanceof RegExp)return e.re=e.needle;var r=e.needle;if(!e.needle)return e.re=!1;e.regExp||(r=i.escapeRegExp(r)),e.wholeWord&&(r="\\b"+r+"\\b");var n=e.caseSensitive?"g":"gi";if(e.$isMultiLine=!t&&/[\n\r]/.test(r),e.$isMultiLine)return e.re=this.$assembleMultilineRegExp(r,n);try{var o=new RegExp(r,n)}catch(s){o=!1}return e.re=o},this.$assembleMultilineRegExp=function(e,t){for(var i=e.replace(/\r\n|\r|\n/g,"$\n^").split("\n"),r=[],n=0;n<i.length;n++)try{r.push(new RegExp(i[n],t))}catch(o){return!1}return""==i[0]?(r.shift(),r.offset=1):r.offset=0,r},this.$lineIterator=function(e,t){var i=1==t.backwards,r=0!=t.skipCurrent,n=t.range,o=t.start;o||(o=n?n[i?"end":"start"]:e.selection.getRange()),o.start&&(o=o[r!=i?"end":"start"]);var s=n?n.start.row:0,a=n?n.end.row:e.getLength()-1,l=i?function(i){var r=o.row,n=e.getLine(r).substring(0,o.column);if(!i(n,r)){for(r--;r>=s;r--)if(i(e.getLine(r),r))return;if(0!=t.wrap)for(r=a,s=o.row;r>=s;r--)if(i(e.getLine(r),r))return}}:function(i){var r=o.row,n=e.getLine(r).substr(o.column);if(!i(n,r,o.column)){for(r+=1;a>=r;r++)if(i(e.getLine(r),r))return;if(0!=t.wrap)for(r=s,a=o.row;a>=r;r++)if(i(e.getLine(r),r))return}};return{forEach:l}}}).call(o.prototype),t.Search=o}),define("ace/commands/command_manager",["require","exports","module","ace/lib/oop","ace/keyboard/hash_handler","ace/lib/event_emitter"],function(e,t){var i=e("../lib/oop"),r=e("../keyboard/hash_handler").HashHandler,n=e("../lib/event_emitter").EventEmitter,o=function(e,t){r.call(this,t,e),this.byName=this.commands,this.setDefaultHandler("exec",function(e){return e.command.exec(e.editor,e.args||{})})};i.inherits(o,r),function(){i.implement(this,n),this.exec=function(e,t,i){if("string"==typeof e&&(e=this.commands[e]),!e)return!1;if(t&&t.$readOnly&&!e.readOnly)return!1;var r={editor:t,command:e,args:i},n=this._emit("exec",r);return this._signal("afterExec",r),n===!1?!1:!0},this.toggleRecording=function(e){return this.$inReplay?void 0:(e&&e._emit("changeStatus"),this.recording?(this.macro.pop(),this.removeEventListener("exec",this.$addCommandToMacro),this.macro.length||(this.macro=this.oldMacro),this.recording=!1):(this.$addCommandToMacro||(this.$addCommandToMacro=function(e){this.macro.push([e.command,e.args])}.bind(this)),this.oldMacro=this.macro,this.macro=[],this.on("exec",this.$addCommandToMacro),this.recording=!0))},this.replay=function(e){if(!this.$inReplay&&this.macro){if(this.recording)return this.toggleRecording(e);
try{this.$inReplay=!0,this.macro.forEach(function(t){"string"==typeof t?this.exec(t,e):this.exec(t[0],e,t[1])},this)}finally{this.$inReplay=!1}}},this.trimMacro=function(e){return e.map(function(e){return"string"!=typeof e[0]&&(e[0]=e[0].name),e[1]||(e=e[0]),e})}}.call(o.prototype),t.CommandManager=o}),define("ace/keyboard/hash_handler",["require","exports","module","ace/lib/keys","ace/lib/useragent"],function(e,t){function i(e,t){if(this.platform=t||(n.isMac?"mac":"win"),this.commands={},this.commandKeyBinding={},this.__defineGetter__&&this.__defineSetter__&&"undefined"!=typeof console&&console.error){var i=!1,r=function(){i||(i=!0,console.error("commmandKeyBinding has too many m's. use commandKeyBinding"))};this.__defineGetter__("commmandKeyBinding",function(){return r(),this.commandKeyBinding}),this.__defineSetter__("commmandKeyBinding",function(e){return r(),this.commandKeyBinding=e})}else this.commmandKeyBinding=this.commandKeyBinding;this.addCommands(e)}var r=e("../lib/keys"),n=e("../lib/useragent");(function(){this.addCommand=function(e){this.commands[e.name]&&this.removeCommand(e),this.commands[e.name]=e,e.bindKey&&this._buildKeyHash(e)},this.removeCommand=function(e){var t="string"==typeof e?e:e.name;e=this.commands[t],delete this.commands[t];var i=this.commandKeyBinding;for(var r in i)for(var n in i[r])i[r][n]==e&&delete i[r][n]},this.bindKey=function(e,t){if(e){if("function"==typeof t)return this.addCommand({exec:t,bindKey:e,name:t.name||e}),void 0;var i=this.commandKeyBinding;e.split("|").forEach(function(e){var r=this.parseKeys(e,t),n=r.hashId;(i[n]||(i[n]={}))[r.key]=t},this)}},this.addCommands=function(e){e&&Object.keys(e).forEach(function(t){var i=e[t];if(i){if("string"==typeof i)return this.bindKey(i,t);"function"==typeof i&&(i={exec:i}),"object"==typeof i&&(i.name||(i.name=t),this.addCommand(i))}},this)},this.removeCommands=function(e){Object.keys(e).forEach(function(t){this.removeCommand(e[t])},this)},this.bindKeys=function(e){Object.keys(e).forEach(function(t){this.bindKey(t,e[t])},this)},this._buildKeyHash=function(e){var t=e.bindKey;if(t){var i="string"==typeof t?t:t[this.platform];this.bindKey(i,e)}},this.parseKeys=function(e){-1!=e.indexOf(" ")&&(e=e.split(/\s+/).pop());var t=e.toLowerCase().split(/[\-\+]([\-\+])?/).filter(function(e){return e}),i=t.pop(),n=r[i];if(r.FUNCTION_KEYS[n])i=r.FUNCTION_KEYS[n].toLowerCase();else{if(!t.length)return{key:i,hashId:-1};if(1==t.length&&"shift"==t[0])return{key:i.toUpperCase(),hashId:-1}}for(var o=0,s=t.length;s--;){var a=r.KEY_MODS[t[s]];if(null==a)return"undefined"!=typeof console&&console.error("invalid modifier "+t[s]+" in "+e),!1;o|=a}return{key:i,hashId:o}},this.findKeyCommand=function(e,t){var i=this.commandKeyBinding;return i[e]&&i[e][t]},this.handleKeyboard=function(e,t,i){return{command:this.findKeyCommand(t,i)}}}).call(i.prototype),t.HashHandler=i}),define("ace/commands/default_commands",["require","exports","module","ace/lib/lang","ace/config"],function(e,t){function i(e,t){return{win:e,mac:t}}var r=e("../lib/lang"),n=e("../config");t.commands=[{name:"showSettingsMenu",bindKey:i("Ctrl-,","Command-,"),exec:function(e){n.loadModule("ace/ext/settings_menu",function(t){t.init(e),e.showSettingsMenu()})},readOnly:!0},{name:"goToNextError",bindKey:i("Alt-E","Ctrl-E"),exec:function(e){n.loadModule("ace/ext/error_marker",function(t){t.showErrorMarker(e,1)})},scrollIntoView:"center",readOnly:!0},{name:"goToPreviousError",bindKey:i("Alt-Shift-E","Ctrl-Shift-E"),exec:function(e){n.loadModule("ace/ext/error_marker",function(t){t.showErrorMarker(e,-1)})},scrollIntoView:"center",readOnly:!0},{name:"selectall",bindKey:i("Ctrl-A","Command-A"),exec:function(e){e.selectAll()},readOnly:!0},{name:"centerselection",bindKey:i(null,"Ctrl-L"),exec:function(e){e.centerSelection()},readOnly:!0},{name:"gotoline",bindKey:i("Ctrl-L","Command-L"),exec:function(e){var t=parseInt(prompt("Enter line number:"),10);isNaN(t)||e.gotoLine(t)},readOnly:!0},{name:"fold",bindKey:i("Alt-L|Ctrl-F1","Command-Alt-L|Command-F1"),exec:function(e){e.session.toggleFold(!1)},scrollIntoView:"center",readOnly:!0},{name:"unfold",bindKey:i("Alt-Shift-L|Ctrl-Shift-F1","Command-Alt-Shift-L|Command-Shift-F1"),exec:function(e){e.session.toggleFold(!0)},scrollIntoView:"center",readOnly:!0},{name:"toggleFoldWidget",bindKey:i("F2","F2"),exec:function(e){e.session.toggleFoldWidget()},scrollIntoView:"center",readOnly:!0},{name:"toggleParentFoldWidget",bindKey:i("Alt-F2","Alt-F2"),exec:function(e){e.session.toggleFoldWidget(!0)},scrollIntoView:"center",readOnly:!0},{name:"foldall",bindKey:i("Ctrl-Alt-0","Ctrl-Command-Option-0"),exec:function(e){e.session.foldAll()},scrollIntoView:"center",readOnly:!0},{name:"foldOther",bindKey:i("Alt-0","Command-Option-0"),exec:function(e){e.session.foldAll(),e.session.unfold(e.selection.getAllRanges())},scrollIntoView:"center",readOnly:!0},{name:"unfoldall",bindKey:i("Alt-Shift-0","Command-Option-Shift-0"),exec:function(e){e.session.unfold()},scrollIntoView:"center",readOnly:!0},{name:"findnext",bindKey:i("Ctrl-K","Command-G"),exec:function(e){e.findNext()},readOnly:!0},{name:"findprevious",bindKey:i("Ctrl-Shift-K","Command-Shift-G"),exec:function(e){e.findPrevious()},readOnly:!0},{name:"selectOrFindNext",bindKey:i("ALt-K","Ctrl-G"),exec:function(e){e.selection.isEmpty()?e.selection.selectWord():e.findNext()},readOnly:!0},{name:"selectOrFindPrevious",bindKey:i("Alt-Shift-K","Ctrl-Shift-G"),exec:function(e){e.selection.isEmpty()?e.selection.selectWord():e.findPrevious()},readOnly:!0},{name:"find",bindKey:i("Ctrl-F","Command-F"),exec:function(e){n.loadModule("ace/ext/searchbox",function(t){t.Search(e)})},readOnly:!0},{name:"overwrite",bindKey:"Insert",exec:function(e){e.toggleOverwrite()},readOnly:!0},{name:"selecttostart",bindKey:i("Ctrl-Shift-Home","Command-Shift-Up"),exec:function(e){e.getSelection().selectFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotostart",bindKey:i("Ctrl-Home","Command-Home|Command-Up"),exec:function(e){e.navigateFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectup",bindKey:i("Shift-Up","Shift-Up"),exec:function(e){e.getSelection().selectUp()},multiSelectAction:"forEach",readOnly:!0},{name:"golineup",bindKey:i("Up","Up|Ctrl-P"),exec:function(e,t){e.navigateUp(t.times)},multiSelectAction:"forEach",readOnly:!0},{name:"selecttoend",bindKey:i("Ctrl-Shift-End","Command-Shift-Down"),exec:function(e){e.getSelection().selectFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotoend",bindKey:i("Ctrl-End","Command-End|Command-Down"),exec:function(e){e.navigateFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectdown",bindKey:i("Shift-Down","Shift-Down"),exec:function(e){e.getSelection().selectDown()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golinedown",bindKey:i("Down","Down|Ctrl-N"),exec:function(e,t){e.navigateDown(t.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordleft",bindKey:i("Ctrl-Shift-Left","Option-Shift-Left"),exec:function(e){e.getSelection().selectWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordleft",bindKey:i("Ctrl-Left","Option-Left"),exec:function(e){e.navigateWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolinestart",bindKey:i("Alt-Shift-Left","Command-Shift-Left"),exec:function(e){e.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolinestart",bindKey:i("Alt-Left|Home","Command-Left|Home|Ctrl-A"),exec:function(e){e.navigateLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectleft",bindKey:i("Shift-Left","Shift-Left"),exec:function(e){e.getSelection().selectLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoleft",bindKey:i("Left","Left|Ctrl-B"),exec:function(e,t){e.navigateLeft(t.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordright",bindKey:i("Ctrl-Shift-Right","Option-Shift-Right"),exec:function(e){e.getSelection().selectWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordright",bindKey:i("Ctrl-Right","Option-Right"),exec:function(e){e.navigateWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolineend",bindKey:i("Alt-Shift-Right","Command-Shift-Right"),exec:function(e){e.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolineend",bindKey:i("Alt-Right|End","Command-Right|End|Ctrl-E"),exec:function(e){e.navigateLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectright",bindKey:i("Shift-Right","Shift-Right"),exec:function(e){e.getSelection().selectRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoright",bindKey:i("Right","Right|Ctrl-F"),exec:function(e,t){e.navigateRight(t.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectpagedown",bindKey:"Shift-PageDown",exec:function(e){e.selectPageDown()},readOnly:!0},{name:"pagedown",bindKey:i(null,"Option-PageDown"),exec:function(e){e.scrollPageDown()},readOnly:!0},{name:"gotopagedown",bindKey:i("PageDown","PageDown|Ctrl-V"),exec:function(e){e.gotoPageDown()},readOnly:!0},{name:"selectpageup",bindKey:"Shift-PageUp",exec:function(e){e.selectPageUp()},readOnly:!0},{name:"pageup",bindKey:i(null,"Option-PageUp"),exec:function(e){e.scrollPageUp()},readOnly:!0},{name:"gotopageup",bindKey:"PageUp",exec:function(e){e.gotoPageUp()},readOnly:!0},{name:"scrollup",bindKey:i("Ctrl-Up",null),exec:function(e){e.renderer.scrollBy(0,-2*e.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"scrolldown",bindKey:i("Ctrl-Down",null),exec:function(e){e.renderer.scrollBy(0,2*e.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"selectlinestart",bindKey:"Shift-Home",exec:function(e){e.getSelection().selectLineStart()},multiSelectAction:"forEach",readOnly:!0},{name:"selectlineend",bindKey:"Shift-End",exec:function(e){e.getSelection().selectLineEnd()},multiSelectAction:"forEach",readOnly:!0},{name:"togglerecording",bindKey:i("Ctrl-Alt-E","Command-Option-E"),exec:function(e){e.commands.toggleRecording(e)},readOnly:!0},{name:"replaymacro",bindKey:i("Ctrl-Shift-E","Command-Shift-E"),exec:function(e){e.commands.replay(e)},readOnly:!0},{name:"jumptomatching",bindKey:i("Ctrl-P","Ctrl-Shift-P"),exec:function(e){e.jumpToMatching()},multiSelectAction:"forEach",readOnly:!0},{name:"selecttomatching",bindKey:i("Ctrl-Shift-P",null),exec:function(e){e.jumpToMatching(!0)},multiSelectAction:"forEach",readOnly:!0},{name:"cut",exec:function(e){var t=e.getSelectionRange();e._emit("cut",t),e.selection.isEmpty()||(e.session.remove(t),e.clearSelection())},multiSelectAction:"forEach"},{name:"removeline",bindKey:i("Ctrl-D","Command-D"),exec:function(e){e.removeLines()},multiSelectAction:"forEachLine"},{name:"duplicateSelection",bindKey:i("Ctrl-Shift-D","Command-Shift-D"),exec:function(e){e.duplicateSelection()},multiSelectAction:"forEach"},{name:"sortlines",bindKey:i("Ctrl-Alt-S","Command-Alt-S"),exec:function(e){e.sortLines()},multiSelectAction:"forEachLine"},{name:"togglecomment",bindKey:i("Ctrl-/","Command-/"),exec:function(e){e.toggleCommentLines()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"toggleBlockComment",bindKey:i("Ctrl-Shift-/","Command-Shift-/"),exec:function(e){e.toggleBlockComment()},multiSelectAction:"forEach"},{name:"modifyNumberUp",bindKey:i("Ctrl-Shift-Up","Alt-Shift-Up"),exec:function(e){e.modifyNumber(1)},multiSelectAction:"forEach"},{name:"modifyNumberDown",bindKey:i("Ctrl-Shift-Down","Alt-Shift-Down"),exec:function(e){e.modifyNumber(-1)},multiSelectAction:"forEach"},{name:"replace",bindKey:i("Ctrl-H","Command-Option-F"),exec:function(e){n.loadModule("ace/ext/searchbox",function(t){t.Search(e,!0)})}},{name:"undo",bindKey:i("Ctrl-Z","Command-Z"),exec:function(e){e.undo()}},{name:"redo",bindKey:i("Ctrl-Shift-Z|Ctrl-Y","Command-Shift-Z|Command-Y"),exec:function(e){e.redo()}},{name:"copylinesup",bindKey:i("Alt-Shift-Up","Command-Option-Up"),exec:function(e){e.copyLinesUp()}},{name:"movelinesup",bindKey:i("Alt-Up","Option-Up"),exec:function(e){e.moveLinesUp()}},{name:"copylinesdown",bindKey:i("Alt-Shift-Down","Command-Option-Down"),exec:function(e){e.copyLinesDown()}},{name:"movelinesdown",bindKey:i("Alt-Down","Option-Down"),exec:function(e){e.moveLinesDown()}},{name:"del",bindKey:i("Delete","Delete|Ctrl-D|Shift-Delete"),exec:function(e){e.remove("right")},multiSelectAction:"forEach"},{name:"backspace",bindKey:i("Shift-Backspace|Backspace","Ctrl-Backspace|Shift-Backspace|Backspace|Ctrl-H"),exec:function(e){e.remove("left")},multiSelectAction:"forEach"},{name:"cut_or_delete",bindKey:i("Shift-Delete",null),exec:function(e){return e.selection.isEmpty()?(e.remove("left"),void 0):!1},multiSelectAction:"forEach"},{name:"removetolinestart",bindKey:i("Alt-Backspace","Command-Backspace"),exec:function(e){e.removeToLineStart()},multiSelectAction:"forEach"},{name:"removetolineend",bindKey:i("Alt-Delete","Ctrl-K"),exec:function(e){e.removeToLineEnd()},multiSelectAction:"forEach"},{name:"removewordleft",bindKey:i("Ctrl-Backspace","Alt-Backspace|Ctrl-Alt-Backspace"),exec:function(e){e.removeWordLeft()},multiSelectAction:"forEach"},{name:"removewordright",bindKey:i("Ctrl-Delete","Alt-Delete"),exec:function(e){e.removeWordRight()},multiSelectAction:"forEach"},{name:"outdent",bindKey:i("Shift-Tab","Shift-Tab"),exec:function(e){e.blockOutdent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"indent",bindKey:i("Tab","Tab"),exec:function(e){e.indent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"blockoutdent",bindKey:i("Ctrl-[","Ctrl-["),exec:function(e){e.blockOutdent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"blockindent",bindKey:i("Ctrl-]","Ctrl-]"),exec:function(e){e.blockIndent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"insertstring",exec:function(e,t){e.insert(t)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"inserttext",exec:function(e,t){e.insert(r.stringRepeat(t.text||"",t.times||1))},multiSelectAction:"forEach"},{name:"splitline",bindKey:i(null,"Ctrl-O"),exec:function(e){e.splitLine()},multiSelectAction:"forEach"},{name:"transposeletters",bindKey:i("Ctrl-T","Ctrl-T"),exec:function(e){e.transposeLetters()},multiSelectAction:function(e){e.transposeSelections(1)}},{name:"touppercase",bindKey:i("Ctrl-U","Ctrl-U"),exec:function(e){e.toUpperCase()},multiSelectAction:"forEach"},{name:"tolowercase",bindKey:i("Ctrl-Shift-U","Ctrl-Shift-U"),exec:function(e){e.toLowerCase()},multiSelectAction:"forEach"}]}),define("ace/undomanager",["require","exports","module"],function(e,t){var i=function(){this.reset()};(function(){this.execute=function(e){var t=e.args[0];this.$doc=e.args[1],e.merge&&this.hasUndo()&&(t=this.$undoStack.pop().concat(t)),this.$undoStack.push(t),this.$redoStack=[],this.dirtyCounter<0&&(this.dirtyCounter=0/0),this.dirtyCounter++},this.undo=function(e){var t=this.$undoStack.pop(),i=null;return t&&(i=this.$doc.undoChanges(t,e),this.$redoStack.push(t),this.dirtyCounter--),i},this.redo=function(e){var t=this.$redoStack.pop(),i=null;return t&&(i=this.$doc.redoChanges(t,e),this.$undoStack.push(t),this.dirtyCounter++),i},this.reset=function(){this.$undoStack=[],this.$redoStack=[],this.dirtyCounter=0},this.hasUndo=function(){return this.$undoStack.length>0},this.hasRedo=function(){return this.$redoStack.length>0},this.markClean=function(){this.dirtyCounter=0},this.isClean=function(){return 0===this.dirtyCounter}}).call(i.prototype),t.UndoManager=i}),define("ace/virtual_renderer",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/useragent","ace/config","ace/layer/gutter","ace/layer/marker","ace/layer/text","ace/layer/cursor","ace/scrollbar","ace/renderloop","ace/lib/event_emitter"],function(e,t){var i=e("./lib/oop"),r=e("./lib/dom"),n=(e("./lib/useragent"),e("./config")),o=e("./layer/gutter").Gutter,s=e("./layer/marker").Marker,a=e("./layer/text").Text,l=e("./layer/cursor").Cursor,h=e("./scrollbar").HScrollBar,c=e("./scrollbar").VScrollBar,u=e("./renderloop").RenderLoop,d=e("./lib/event_emitter").EventEmitter,f=".ace_editor {position: relative;overflow: hidden;font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', 'Consolas', 'source-code-pro', monospace;font-size: 12px;line-height: normal;color: black;}.ace_editor .ace_line {direction: ltr;unicode-bidi: bidi-override;}.ace_scroller {position: absolute;overflow: hidden;top: 0;bottom: 0;background-color: inherit;-ms-user-select: none;-moz-user-select: none;-webkit-user-select: none;user-select: none;}.ace_content {position: absolute;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;cursor: text;min-width: 100%;}.ace_dragging, .ace_dragging * {cursor: move !important;}.ace_dragging .ace_scroller:before{position: absolute;top: 0;left: 0;right: 0;bottom: 0;content: '';background: rgba(250, 250, 250, 0.01);z-index: 1000;}.ace_dragging.ace_dark .ace_scroller:before{background: rgba(0, 0, 0, 0.01);}.ace_selecting, .ace_selecting * {cursor: text !important;}.ace_gutter {position: absolute;overflow : hidden;width: auto;top: 0;bottom: 0;left: 0;cursor: default;z-index: 4;}.ace_gutter-active-line {position: absolute;left: 0;right: 0;}.ace_scroller.ace_scroll-left {box-shadow: 17px 0 16px -16px rgba(0, 0, 0, 0.4) inset;}.ace_gutter-cell {padding-left: 19px;padding-right: 6px;background-repeat: no-repeat;}.ace_gutter-cell.ace_error {background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QUM2OEZDQTQ4RTU0MTFFMUEzM0VFRTM2RUY1M0RBMjYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QUM2OEZDQTU4RTU0MTFFMUEzM0VFRTM2RUY1M0RBMjYiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpBQzY4RkNBMjhFNTQxMUUxQTMzRUVFMzZFRjUzREEyNiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpBQzY4RkNBMzhFNTQxMUUxQTMzRUVFMzZFRjUzREEyNiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PkgXxbAAAAJbSURBVHjapFNNaBNBFH4zs5vdZLP5sQmNpT82QY209heh1ioWisaDRcSKF0WKJ0GQnrzrxasHsR6EnlrwD0TagxJabaVEpFYxLWlLSS822tr87m66ccfd2GKyVhA6MMybgfe97/vmPUQphd0sZjto9XIn9OOsvlu2nkqRzVU+6vvlzPf8W6bk8dxQ0NPbxAALgCgg2JkaQuhzQau/El0zbmUA7U0Es8v2CiYmKQJHGO1QICCLoqilMhkmurDAyapKgqItezi/USRdJqEYY4D5jCy03ht2yMkkvL91jTTX10qzyyu2hruPRN7jgbH+EOsXcMLgYiThEgAMhABW85oqy1DXdRIdvP1AHJ2acQXvDIrVHcdQNrEKNYSVMSZGMjEzIIAwDXIo+6G/FxcGnzkC3T2oMhLjre49sBB+RRcHLqdafK6sYdE/GGBwU1VpFNj0aN8pJbe+BkZyevUrvLl6Xmm0W9IuTc0DxrDNAJd5oEvI/KRsNC3bQyNjPO9yQ1YHcfj2QvfQc/5TUhJTBc2iM0U7AWDQtc1nJHvD/cfO2s7jaGkiTEfa/Ep8coLu7zmNmh8+dc5lZDuUeFAGUNA/OY6JVaypQ0vjr7XYjUvJM37vt+j1vuTK5DgVfVUoTjVe+y3/LxMxY2GgU+CSLy4cpfsYorRXuXIOi0Vt40h67uZFTdIo6nLaZcwUJWAzwNS0tBnqqKzQDnjdG/iPyZxo46HaKUpbvYkj8qYRTZsBhge+JHhZyh0x9b95JqjVJkT084kZIPwu/mPWqPgfQ5jXh2+92Ay7HedfAgwA6KDWafb4w3cAAAAASUVORK5CYII=\");background-repeat: no-repeat;background-position: 2px center;}.ace_gutter-cell.ace_warning {background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QUM2OEZDQTg4RTU0MTFFMUEzM0VFRTM2RUY1M0RBMjYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QUM2OEZDQTk4RTU0MTFFMUEzM0VFRTM2RUY1M0RBMjYiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpBQzY4RkNBNjhFNTQxMUUxQTMzRUVFMzZFRjUzREEyNiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpBQzY4RkNBNzhFNTQxMUUxQTMzRUVFMzZFRjUzREEyNiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pgd7PfIAAAGmSURBVHjaYvr//z8DJZiJgUIANoCRkREb9gLiSVAaQx4OQM7AAkwd7XU2/v++/rOttdYGEB9dASEvOMydGKfH8Gv/p4XTkvRBfLxeQAP+1cUhXopyvzhP7P/IoSj7g7Mw09cNKO6J1QQ0L4gICPIv/veg/8W+JdFvQNLHVsW9/nmn9zk7B+cCkDwhL7gt6knSZnx9/LuCEOcvkIAMP+cvto9nfqyZmmUAksfnBUtbM60gX/3/kgyv3/xSFOL5DZT+L8vP+Yfh5cvfPvp/xUHyQHXGyAYwgpwBjZYFT3Y1OEl/OfCH4ffv3wzc4iwMvNIsDJ+f/mH4+vIPAxsb631WW0Yln6ZpQLXdMK/DXGDflh+sIv37EivD5x//Gb7+YWT4y86sl7BCCkSD+Z++/1dkvsFRl+HnD1Rvje4F8whjMXmGj58YGf5zsDMwcnAwfPvKcml62DsQDeaDxN+/Y0qwlpEHqrdB94IRNIDUgfgfKJChGK4OikEW3gTiXUB950ASLFAF54AC94A0G9QAfOnmF9DCDzABFqS08IHYDIScdijOjQABBgC+/9awBH96jwAAAABJRU5ErkJggg==\");background-position: 2px center;}.ace_gutter-cell.ace_info {background-image: url(\"data:image/gif;base64,R0lGODlhEAAQAMQAAAAAAEFBQVJSUl5eXmRkZGtra39/f4WFhYmJiZGRkaampry8vMPDw8zMzNXV1dzc3OTk5Orq6vDw8P///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAkAABQALAAAAAAQABAAAAUuICWOZGmeaBml5XGwFCQSBGyXRSAwtqQIiRuiwIM5BoYVbEFIyGCQoeJGrVptIQA7\");background-position: 2px center;}.ace_dark .ace_gutter-cell.ace_info {background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpGRTk5MTVGREIxNDkxMUUxOTc5Q0FFREQyMTNGMjBFQyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpGRTk5MTVGRUIxNDkxMUUxOTc5Q0FFREQyMTNGMjBFQyI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZFOTkxNUZCQjE0OTExRTE5NzlDQUVERDIxM0YyMEVDIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkZFOTkxNUZDQjE0OTExRTE5NzlDQUVERDIxM0YyMEVDIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+SIDkjAAAAJ1JREFUeNpi/P//PwMlgImBQkB7A6qrq/+DMC55FkIGKCoq4pVnpFkgTp069f/+/fv/r1u37r+tre1/kg0A+ptn9uzZYLaRkRHpLvjw4cNXWVlZhufPnzOcO3eOdAO0tbVPAjHDmzdvGA4fPsxIsgGSkpJmv379Ynj37h2DjIyMCMkG3LhxQ/T27dsMampqDHZ2dq/pH41DxwCAAAMAFdc68dUsFZgAAAAASUVORK5CYII=\");}.ace_scrollbar {position: absolute;right: 0;bottom: 0;z-index: 6;}.ace_scrollbar-inner {position: absolute;cursor: text;left: 0;top: 0;}.ace_scrollbar-v{overflow-x: hidden;overflow-y: scroll;top: 0;}.ace_scrollbar-h {overflow-x: scroll;overflow-y: hidden;left: 0;}.ace_print-margin {position: absolute;height: 100%;}.ace_text-input {position: absolute;z-index: 0;width: 0.5em;height: 1em;opacity: 0;background: transparent;-moz-appearance: none;appearance: none;border: none;resize: none;outline: none;overflow: hidden;font: inherit;padding: 0 1px;margin: 0 -1px;text-indent: -1em;-ms-user-select: text;-moz-user-select: text;-webkit-user-select: text;user-select: text;}.ace_text-input.ace_composition {background: #f8f8f8;color: #111;z-index: 1000;opacity: 1;text-indent: 0;}.ace_layer {z-index: 1;position: absolute;overflow: hidden;white-space: pre;height: 100%;width: 100%;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;/* setting pointer-events: auto; on node under the mouse, which changesduring scroll, will break mouse wheel scrolling in Safari */pointer-events: none;}.ace_gutter-layer {position: relative;width: auto;text-align: right;pointer-events: auto;}.ace_text-layer {font: inherit !important;}.ace_cjk {display: inline-block;text-align: center;}.ace_cursor-layer {z-index: 4;}.ace_cursor {z-index: 4;position: absolute;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;border-left: 2px solid}.ace_slim-cursors .ace_cursor {border-left-width: 1px;}.ace_overwrite-cursors .ace_cursor {border-left-width: 0px;border-bottom: 1px solid;}.ace_hidden-cursors .ace_cursor {opacity: 0.2;}.ace_smooth-blinking .ace_cursor {-moz-transition: opacity 0.18s;-webkit-transition: opacity 0.18s;-o-transition: opacity 0.18s;-ms-transition: opacity 0.18s;transition: opacity 0.18s;}.ace_cursor[style*=\"opacity: 0\"]{-ms-filter: \"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)\";}.ace_editor.ace_multiselect .ace_cursor {border-left-width: 1px;}.ace_marker-layer .ace_step, .ace_marker-layer .ace_stack {position: absolute;z-index: 3;}.ace_marker-layer .ace_selection {position: absolute;z-index: 5;}.ace_marker-layer .ace_bracket {position: absolute;z-index: 6;}.ace_marker-layer .ace_active-line {position: absolute;z-index: 2;}.ace_marker-layer .ace_selected-word {position: absolute;z-index: 4;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;}.ace_line .ace_fold {-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;display: inline-block;height: 11px;margin-top: -2px;vertical-align: middle;background-image:url(\"data:image/png,%89PNG%0D%0A%1A%0A%00%00%00%0DIHDR%00%00%00%11%00%00%00%09%08%06%00%00%00%D4%E8%C7%0C%00%00%03%1EiCCPICC%20Profile%00%00x%01%85T%DFk%D3P%14%FE%DAe%9D%B0%E1%8B%3Ag%11%09%3Eh%91ndStC%9C%B6kW%BA%CDZ%EA6%B7!H%9B%A6m%5C%9A%C6%24%ED~%B0%07%D9%8Bo%3A%C5w%F1%07%3E%F9%07%0C%D9%83o%7B%92%0D%C6%14a%F8%AC%88%22L%F6%22%B3%9E%9B4M'S%03%B9%F7%BB%DF%F9%EE9'%E7%E4%5E%A0%F9qZ%D3%14%2F%0F%14USO%C5%C2%FC%C4%E4%14%DF%F2%01%5E%1CC%2B%FChM%8B%86%16J%26G%40%0F%D3%B2y%EF%B3%F3%0E%1E%C6lt%EEo%DF%AB%FEc%D5%9A%95%0C%11%F0%1C%20%BE%945%C4%22%E1Y%A0i%5C%D4t%13%E0%D6%89%EF%9D15%C2%CDLsX%A7%04%09%1Fg8oc%81%E1%8C%8D%23%96f45%40%9A%09%C2%07%C5B%3AK%B8%408%98i%E0%F3%0D%D8%CE%81%14%E4'%26%A9%92.%8B%3C%ABER%2F%E5dE%B2%0C%F6%F0%1Fs%83%F2_%B0%A8%94%E9%9B%AD%E7%10%8Dm%9A%19N%D1%7C%8A%DE%1F9%7Dp%8C%E6%00%D5%C1%3F_%18%BDA%B8%9DpX6%E3%A35~B%CD%24%AE%11%26%BD%E7%EEti%98%EDe%9A%97Y)%12%25%1C%24%BCbT%AE3li%E6%0B%03%89%9A%E6%D3%ED%F4P%92%B0%9F4%BF43Y%F3%E3%EDP%95%04%EB1%C5%F5%F6KF%F4%BA%BD%D7%DB%91%93%07%E35%3E%A7)%D6%7F%40%FE%BD%F7%F5r%8A%E5y%92%F0%EB%B4%1E%8D%D5%F4%5B%92%3AV%DB%DB%E4%CD%A6%23%C3%C4wQ%3F%03HB%82%8E%1Cd(%E0%91B%0Ca%9Ac%C4%AA%F8L%16%19%22J%A4%D2itTy%B28%D6%3B(%93%96%ED%1CGx%C9_%0E%B8%5E%16%F5%5B%B2%B8%F6%E0%FB%9E%DD%25%D7%8E%BC%15%85%C5%B7%A3%D8Q%ED%B5%81%E9%BA%B2%13%9A%1B%7Fua%A5%A3n%E17%B9%E5%9B%1Bm%AB%0B%08Q%FE%8A%E5%B1H%5Ee%CAO%82Q%D7u6%E6%90S%97%FCu%0B%CF2%94%EE%25v%12X%0C%BA%AC%F0%5E%F8*l%0AO%85%17%C2%97%BF%D4%C8%CE%DE%AD%11%CB%80q%2C%3E%AB%9ES%CD%C6%EC%25%D2L%D2%EBd%B8%BF%8A%F5B%C6%18%F9%901CZ%9D%BE%24M%9C%8A9%F2%DAP%0B'%06w%82%EB%E6%E2%5C%2F%D7%07%9E%BB%CC%5D%E1%FA%B9%08%AD.r%23%8E%C2%17%F5E%7C!%F0%BE3%BE%3E_%B7o%88a%A7%DB%BE%D3d%EB%A31Z%EB%BB%D3%91%BA%A2%B1z%94%8F%DB'%F6%3D%8E%AA%13%19%B2%B1%BE%B1~V%08%2B%B4%A2cjJ%B3tO%00%03%25mN%97%F3%05%93%EF%11%84%0B%7C%88%AE-%89%8F%ABbW%90O%2B%0Ao%99%0C%5E%97%0CI%AFH%D9.%B0%3B%8F%ED%03%B6S%D6%5D%E6i_s9%F3*p%E9%1B%FD%C3%EB.7U%06%5E%19%C0%D1s.%17%A03u%E4%09%B0%7C%5E%2C%EB%15%DB%1F%3C%9E%B7%80%91%3B%DBc%AD%3Dma%BA%8B%3EV%AB%DBt.%5B%1E%01%BB%0F%AB%D5%9F%CF%AA%D5%DD%E7%E4%7F%0Bx%A3%FC%06%A9%23%0A%D6%C2%A1_2%00%00%00%09pHYs%00%00%0B%13%00%00%0B%13%01%00%9A%9C%18%00%00%00%B5IDAT(%15%A5%91%3D%0E%02!%10%85ac%E1%05%D6%CE%D6%C6%CE%D2%E8%ED%CD%DE%C0%C6%D6N.%E0V%F8%3D%9Ca%891XH%C2%BE%D9y%3F%90!%E6%9C%C3%BFk%E5%011%C6-%F5%C8N%04%DF%BD%FF%89%DFt%83DN%60%3E%F3%AB%A0%DE%1A%5Dg%BE%10Q%97%1B%40%9C%A8o%10%8F%5E%828%B4%1B%60%87%F6%02%26%85%1Ch%1E%C1%2B%5Bk%FF%86%EE%B7j%09%9A%DA%9B%ACe%A3%F9%EC%DA!9%B4%D5%A6%81%86%86%98%CC%3C%5B%40%FA%81%B3%E9%CB%23%94%C16Azo%05%D4%E1%C1%95a%3B%8A'%A0%E8%CC%17%22%85%1D%BA%00%A2%FA%DC%0A%94%D1%D1%8D%8B%3A%84%17B%C7%60%1A%25Z%FC%8D%00%00%00%00IEND%AEB%60%82\"),url(\"data:image/png,%89PNG%0D%0A%1A%0A%00%00%00%0DIHDR%00%00%00%05%00%00%007%08%06%00%00%00%C4%DD%80C%00%00%03%1EiCCPICC%20Profile%00%00x%01%85T%DFk%D3P%14%FE%DAe%9D%B0%E1%8B%3Ag%11%09%3Eh%91ndStC%9C%B6kW%BA%CDZ%EA6%B7!H%9B%A6m%5C%9A%C6%24%ED~%B0%07%D9%8Bo%3A%C5w%F1%07%3E%F9%07%0C%D9%83o%7B%92%0D%C6%14a%F8%AC%88%22L%F6%22%B3%9E%9B4M'S%03%B9%F7%BB%DF%F9%EE9'%E7%E4%5E%A0%F9qZ%D3%14%2F%0F%14USO%C5%C2%FC%C4%E4%14%DF%F2%01%5E%1CC%2B%FChM%8B%86%16J%26G%40%0F%D3%B2y%EF%B3%F3%0E%1E%C6lt%EEo%DF%AB%FEc%D5%9A%95%0C%11%F0%1C%20%BE%945%C4%22%E1Y%A0i%5C%D4t%13%E0%D6%89%EF%9D15%C2%CDLsX%A7%04%09%1Fg8oc%81%E1%8C%8D%23%96f45%40%9A%09%C2%07%C5B%3AK%B8%408%98i%E0%F3%0D%D8%CE%81%14%E4'%26%A9%92.%8B%3C%ABER%2F%E5dE%B2%0C%F6%F0%1Fs%83%F2_%B0%A8%94%E9%9B%AD%E7%10%8Dm%9A%19N%D1%7C%8A%DE%1F9%7Dp%8C%E6%00%D5%C1%3F_%18%BDA%B8%9DpX6%E3%A35~B%CD%24%AE%11%26%BD%E7%EEti%98%EDe%9A%97Y)%12%25%1C%24%BCbT%AE3li%E6%0B%03%89%9A%E6%D3%ED%F4P%92%B0%9F4%BF43Y%F3%E3%EDP%95%04%EB1%C5%F5%F6KF%F4%BA%BD%D7%DB%91%93%07%E35%3E%A7)%D6%7F%40%FE%BD%F7%F5r%8A%E5y%92%F0%EB%B4%1E%8D%D5%F4%5B%92%3AV%DB%DB%E4%CD%A6%23%C3%C4wQ%3F%03HB%82%8E%1Cd(%E0%91B%0Ca%9Ac%C4%AA%F8L%16%19%22J%A4%D2itTy%B28%D6%3B(%93%96%ED%1CGx%C9_%0E%B8%5E%16%F5%5B%B2%B8%F6%E0%FB%9E%DD%25%D7%8E%BC%15%85%C5%B7%A3%D8Q%ED%B5%81%E9%BA%B2%13%9A%1B%7Fua%A5%A3n%E17%B9%E5%9B%1Bm%AB%0B%08Q%FE%8A%E5%B1H%5Ee%CAO%82Q%D7u6%E6%90S%97%FCu%0B%CF2%94%EE%25v%12X%0C%BA%AC%F0%5E%F8*l%0AO%85%17%C2%97%BF%D4%C8%CE%DE%AD%11%CB%80q%2C%3E%AB%9ES%CD%C6%EC%25%D2L%D2%EBd%B8%BF%8A%F5B%C6%18%F9%901CZ%9D%BE%24M%9C%8A9%F2%DAP%0B'%06w%82%EB%E6%E2%5C%2F%D7%07%9E%BB%CC%5D%E1%FA%B9%08%AD.r%23%8E%C2%17%F5E%7C!%F0%BE3%BE%3E_%B7o%88a%A7%DB%BE%D3d%EB%A31Z%EB%BB%D3%91%BA%A2%B1z%94%8F%DB'%F6%3D%8E%AA%13%19%B2%B1%BE%B1~V%08%2B%B4%A2cjJ%B3tO%00%03%25mN%97%F3%05%93%EF%11%84%0B%7C%88%AE-%89%8F%ABbW%90O%2B%0Ao%99%0C%5E%97%0CI%AFH%D9.%B0%3B%8F%ED%03%B6S%D6%5D%E6i_s9%F3*p%E9%1B%FD%C3%EB.7U%06%5E%19%C0%D1s.%17%A03u%E4%09%B0%7C%5E%2C%EB%15%DB%1F%3C%9E%B7%80%91%3B%DBc%AD%3Dma%BA%8B%3EV%AB%DBt.%5B%1E%01%BB%0F%AB%D5%9F%CF%AA%D5%DD%E7%E4%7F%0Bx%A3%FC%06%A9%23%0A%D6%C2%A1_2%00%00%00%09pHYs%00%00%0B%13%00%00%0B%13%01%00%9A%9C%18%00%00%00%3AIDAT8%11c%FC%FF%FF%7F%18%03%1A%60%01%F2%3F%A0%891%80%04%FF%11-%F8%17%9BJ%E2%05%B1ZD%81v%26t%E7%80%F8%A3%82h%A12%1A%20%A3%01%02%0F%01%BA%25%06%00%19%C0%0D%AEF%D5%3ES%00%00%00%00IEND%AEB%60%82\");background-repeat: no-repeat, repeat-x;background-position: center center, top left;color: transparent;border: 1px solid black;-moz-border-radius: 2px;-webkit-border-radius: 2px;border-radius: 2px;cursor: pointer;pointer-events: auto;}.ace_dark .ace_fold {}.ace_fold:hover{background-image:url(\"data:image/png,%89PNG%0D%0A%1A%0A%00%00%00%0DIHDR%00%00%00%11%00%00%00%09%08%06%00%00%00%D4%E8%C7%0C%00%00%03%1EiCCPICC%20Profile%00%00x%01%85T%DFk%D3P%14%FE%DAe%9D%B0%E1%8B%3Ag%11%09%3Eh%91ndStC%9C%B6kW%BA%CDZ%EA6%B7!H%9B%A6m%5C%9A%C6%24%ED~%B0%07%D9%8Bo%3A%C5w%F1%07%3E%F9%07%0C%D9%83o%7B%92%0D%C6%14a%F8%AC%88%22L%F6%22%B3%9E%9B4M'S%03%B9%F7%BB%DF%F9%EE9'%E7%E4%5E%A0%F9qZ%D3%14%2F%0F%14USO%C5%C2%FC%C4%E4%14%DF%F2%01%5E%1CC%2B%FChM%8B%86%16J%26G%40%0F%D3%B2y%EF%B3%F3%0E%1E%C6lt%EEo%DF%AB%FEc%D5%9A%95%0C%11%F0%1C%20%BE%945%C4%22%E1Y%A0i%5C%D4t%13%E0%D6%89%EF%9D15%C2%CDLsX%A7%04%09%1Fg8oc%81%E1%8C%8D%23%96f45%40%9A%09%C2%07%C5B%3AK%B8%408%98i%E0%F3%0D%D8%CE%81%14%E4'%26%A9%92.%8B%3C%ABER%2F%E5dE%B2%0C%F6%F0%1Fs%83%F2_%B0%A8%94%E9%9B%AD%E7%10%8Dm%9A%19N%D1%7C%8A%DE%1F9%7Dp%8C%E6%00%D5%C1%3F_%18%BDA%B8%9DpX6%E3%A35~B%CD%24%AE%11%26%BD%E7%EEti%98%EDe%9A%97Y)%12%25%1C%24%BCbT%AE3li%E6%0B%03%89%9A%E6%D3%ED%F4P%92%B0%9F4%BF43Y%F3%E3%EDP%95%04%EB1%C5%F5%F6KF%F4%BA%BD%D7%DB%91%93%07%E35%3E%A7)%D6%7F%40%FE%BD%F7%F5r%8A%E5y%92%F0%EB%B4%1E%8D%D5%F4%5B%92%3AV%DB%DB%E4%CD%A6%23%C3%C4wQ%3F%03HB%82%8E%1Cd(%E0%91B%0Ca%9Ac%C4%AA%F8L%16%19%22J%A4%D2itTy%B28%D6%3B(%93%96%ED%1CGx%C9_%0E%B8%5E%16%F5%5B%B2%B8%F6%E0%FB%9E%DD%25%D7%8E%BC%15%85%C5%B7%A3%D8Q%ED%B5%81%E9%BA%B2%13%9A%1B%7Fua%A5%A3n%E17%B9%E5%9B%1Bm%AB%0B%08Q%FE%8A%E5%B1H%5Ee%CAO%82Q%D7u6%E6%90S%97%FCu%0B%CF2%94%EE%25v%12X%0C%BA%AC%F0%5E%F8*l%0AO%85%17%C2%97%BF%D4%C8%CE%DE%AD%11%CB%80q%2C%3E%AB%9ES%CD%C6%EC%25%D2L%D2%EBd%B8%BF%8A%F5B%C6%18%F9%901CZ%9D%BE%24M%9C%8A9%F2%DAP%0B'%06w%82%EB%E6%E2%5C%2F%D7%07%9E%BB%CC%5D%E1%FA%B9%08%AD.r%23%8E%C2%17%F5E%7C!%F0%BE3%BE%3E_%B7o%88a%A7%DB%BE%D3d%EB%A31Z%EB%BB%D3%91%BA%A2%B1z%94%8F%DB'%F6%3D%8E%AA%13%19%B2%B1%BE%B1~V%08%2B%B4%A2cjJ%B3tO%00%03%25mN%97%F3%05%93%EF%11%84%0B%7C%88%AE-%89%8F%ABbW%90O%2B%0Ao%99%0C%5E%97%0CI%AFH%D9.%B0%3B%8F%ED%03%B6S%D6%5D%E6i_s9%F3*p%E9%1B%FD%C3%EB.7U%06%5E%19%C0%D1s.%17%A03u%E4%09%B0%7C%5E%2C%EB%15%DB%1F%3C%9E%B7%80%91%3B%DBc%AD%3Dma%BA%8B%3EV%AB%DBt.%5B%1E%01%BB%0F%AB%D5%9F%CF%AA%D5%DD%E7%E4%7F%0Bx%A3%FC%06%A9%23%0A%D6%C2%A1_2%00%00%00%09pHYs%00%00%0B%13%00%00%0B%13%01%00%9A%9C%18%00%00%00%B5IDAT(%15%A5%91%3D%0E%02!%10%85ac%E1%05%D6%CE%D6%C6%CE%D2%E8%ED%CD%DE%C0%C6%D6N.%E0V%F8%3D%9Ca%891XH%C2%BE%D9y%3F%90!%E6%9C%C3%BFk%E5%011%C6-%F5%C8N%04%DF%BD%FF%89%DFt%83DN%60%3E%F3%AB%A0%DE%1A%5Dg%BE%10Q%97%1B%40%9C%A8o%10%8F%5E%828%B4%1B%60%87%F6%02%26%85%1Ch%1E%C1%2B%5Bk%FF%86%EE%B7j%09%9A%DA%9B%ACe%A3%F9%EC%DA!9%B4%D5%A6%81%86%86%98%CC%3C%5B%40%FA%81%B3%E9%CB%23%94%C16Azo%05%D4%E1%C1%95a%3B%8A'%A0%E8%CC%17%22%85%1D%BA%00%A2%FA%DC%0A%94%D1%D1%8D%8B%3A%84%17B%C7%60%1A%25Z%FC%8D%00%00%00%00IEND%AEB%60%82\"),url(\"data:image/png,%89PNG%0D%0A%1A%0A%00%00%00%0DIHDR%00%00%00%05%00%00%007%08%06%00%00%00%C4%DD%80C%00%00%03%1EiCCPICC%20Profile%00%00x%01%85T%DFk%D3P%14%FE%DAe%9D%B0%E1%8B%3Ag%11%09%3Eh%91ndStC%9C%B6kW%BA%CDZ%EA6%B7!H%9B%A6m%5C%9A%C6%24%ED~%B0%07%D9%8Bo%3A%C5w%F1%07%3E%F9%07%0C%D9%83o%7B%92%0D%C6%14a%F8%AC%88%22L%F6%22%B3%9E%9B4M'S%03%B9%F7%BB%DF%F9%EE9'%E7%E4%5E%A0%F9qZ%D3%14%2F%0F%14USO%C5%C2%FC%C4%E4%14%DF%F2%01%5E%1CC%2B%FChM%8B%86%16J%26G%40%0F%D3%B2y%EF%B3%F3%0E%1E%C6lt%EEo%DF%AB%FEc%D5%9A%95%0C%11%F0%1C%20%BE%945%C4%22%E1Y%A0i%5C%D4t%13%E0%D6%89%EF%9D15%C2%CDLsX%A7%04%09%1Fg8oc%81%E1%8C%8D%23%96f45%40%9A%09%C2%07%C5B%3AK%B8%408%98i%E0%F3%0D%D8%CE%81%14%E4'%26%A9%92.%8B%3C%ABER%2F%E5dE%B2%0C%F6%F0%1Fs%83%F2_%B0%A8%94%E9%9B%AD%E7%10%8Dm%9A%19N%D1%7C%8A%DE%1F9%7Dp%8C%E6%00%D5%C1%3F_%18%BDA%B8%9DpX6%E3%A35~B%CD%24%AE%11%26%BD%E7%EEti%98%EDe%9A%97Y)%12%25%1C%24%BCbT%AE3li%E6%0B%03%89%9A%E6%D3%ED%F4P%92%B0%9F4%BF43Y%F3%E3%EDP%95%04%EB1%C5%F5%F6KF%F4%BA%BD%D7%DB%91%93%07%E35%3E%A7)%D6%7F%40%FE%BD%F7%F5r%8A%E5y%92%F0%EB%B4%1E%8D%D5%F4%5B%92%3AV%DB%DB%E4%CD%A6%23%C3%C4wQ%3F%03HB%82%8E%1Cd(%E0%91B%0Ca%9Ac%C4%AA%F8L%16%19%22J%A4%D2itTy%B28%D6%3B(%93%96%ED%1CGx%C9_%0E%B8%5E%16%F5%5B%B2%B8%F6%E0%FB%9E%DD%25%D7%8E%BC%15%85%C5%B7%A3%D8Q%ED%B5%81%E9%BA%B2%13%9A%1B%7Fua%A5%A3n%E17%B9%E5%9B%1Bm%AB%0B%08Q%FE%8A%E5%B1H%5Ee%CAO%82Q%D7u6%E6%90S%97%FCu%0B%CF2%94%EE%25v%12X%0C%BA%AC%F0%5E%F8*l%0AO%85%17%C2%97%BF%D4%C8%CE%DE%AD%11%CB%80q%2C%3E%AB%9ES%CD%C6%EC%25%D2L%D2%EBd%B8%BF%8A%F5B%C6%18%F9%901CZ%9D%BE%24M%9C%8A9%F2%DAP%0B'%06w%82%EB%E6%E2%5C%2F%D7%07%9E%BB%CC%5D%E1%FA%B9%08%AD.r%23%8E%C2%17%F5E%7C!%F0%BE3%BE%3E_%B7o%88a%A7%DB%BE%D3d%EB%A31Z%EB%BB%D3%91%BA%A2%B1z%94%8F%DB'%F6%3D%8E%AA%13%19%B2%B1%BE%B1~V%08%2B%B4%A2cjJ%B3tO%00%03%25mN%97%F3%05%93%EF%11%84%0B%7C%88%AE-%89%8F%ABbW%90O%2B%0Ao%99%0C%5E%97%0CI%AFH%D9.%B0%3B%8F%ED%03%B6S%D6%5D%E6i_s9%F3*p%E9%1B%FD%C3%EB.7U%06%5E%19%C0%D1s.%17%A03u%E4%09%B0%7C%5E%2C%EB%15%DB%1F%3C%9E%B7%80%91%3B%DBc%AD%3Dma%BA%8B%3EV%AB%DBt.%5B%1E%01%BB%0F%AB%D5%9F%CF%AA%D5%DD%E7%E4%7F%0Bx%A3%FC%06%A9%23%0A%D6%C2%A1_2%00%00%00%09pHYs%00%00%0B%13%00%00%0B%13%01%00%9A%9C%18%00%00%003IDAT8%11c%FC%FF%FF%7F%3E%03%1A%60%01%F2%3F%A3%891%80%04%FFQ%26%F8w%C0%B43%A1%DB%0C%E2%8F%0A%A2%85%CAh%80%8C%06%08%3C%04%E8%96%18%00%A3S%0D%CD%CF%D8%C1%9D%00%00%00%00IEND%AEB%60%82\");background-repeat: no-repeat, repeat-x;background-position: center center, top left;}.ace_gutter-tooltip {background-color: #FFF;background-image: -webkit-linear-gradient(top, transparent, rgba(0, 0, 0, 0.1));background-image: linear-gradient(to bottom, transparent, rgba(0, 0, 0, 0.1));border: 1px solid gray;border-radius: 1px;box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);color: black;display: inline-block;max-width: 500px;padding: 4px;position: fixed;z-index: 999999;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;cursor: default;white-space: pre-line;word-wrap: break-word;line-height: normal;font-style: normal;font-weight: normal;letter-spacing: normal;}.ace_folding-enabled > .ace_gutter-cell {padding-right: 13px;}.ace_fold-widget {-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;margin: 0 -12px 0 1px;display: none;width: 11px;vertical-align: top;background-image: url(\"data:image/png,%89PNG%0D%0A%1A%0A%00%00%00%0DIHDR%00%00%00%05%00%00%00%05%08%06%00%00%00%8Do%26%E5%00%00%004IDATx%DAe%8A%B1%0D%000%0C%C2%F2%2CK%96%BC%D0%8F9%81%88H%E9%D0%0E%96%C0%10%92%3E%02%80%5E%82%E4%A9*-%EEsw%C8%CC%11%EE%96w%D8%DC%E9*Eh%0C%151(%00%00%00%00IEND%AEB%60%82\");background-repeat: no-repeat;background-position: center;border-radius: 3px;border: 1px solid transparent;cursor: pointer;}.ace_folding-enabled .ace_fold-widget {display: inline-block;   }.ace_fold-widget.ace_end {background-image: url(\"data:image/png,%89PNG%0D%0A%1A%0A%00%00%00%0DIHDR%00%00%00%05%00%00%00%05%08%06%00%00%00%8Do%26%E5%00%00%004IDATx%DAm%C7%C1%09%000%08C%D1%8C%ECE%C8E(%8E%EC%02)%1EZJ%F1%C1'%04%07I%E1%E5%EE%CAL%F5%A2%99%99%22%E2%D6%1FU%B5%FE0%D9x%A7%26Wz5%0E%D5%00%00%00%00IEND%AEB%60%82\");}.ace_fold-widget.ace_closed {background-image: url(\"data:image/png,%89PNG%0D%0A%1A%0A%00%00%00%0DIHDR%00%00%00%03%00%00%00%06%08%06%00%00%00%06%E5%24%0C%00%00%009IDATx%DA5%CA%C1%09%000%08%03%C0%AC*(%3E%04%C1%0D%BA%B1%23%A4Uh%E0%20%81%C0%CC%F8%82%81%AA%A2%AArGfr%88%08%11%11%1C%DD%7D%E0%EE%5B%F6%F6%CB%B8%05Q%2F%E9tai%D9%00%00%00%00IEND%AEB%60%82\");}.ace_fold-widget:hover {border: 1px solid rgba(0, 0, 0, 0.3);background-color: rgba(255, 255, 255, 0.2);-moz-box-shadow: 0 1px 1px rgba(255, 255, 255, 0.7);-webkit-box-shadow: 0 1px 1px rgba(255, 255, 255, 0.7);box-shadow: 0 1px 1px rgba(255, 255, 255, 0.7);}.ace_fold-widget:active {border: 1px solid rgba(0, 0, 0, 0.4);background-color: rgba(0, 0, 0, 0.05);-moz-box-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);-webkit-box-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);box-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);}/*** Dark version for fold widgets*/.ace_dark .ace_fold-widget {background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHklEQVQIW2P4//8/AzoGEQ7oGCaLLAhWiSwB146BAQCSTPYocqT0AAAAAElFTkSuQmCC\");}.ace_dark .ace_fold-widget.ace_end {background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAH0lEQVQIW2P4//8/AxQ7wNjIAjDMgC4AxjCVKBirIAAF0kz2rlhxpAAAAABJRU5ErkJggg==\");}.ace_dark .ace_fold-widget.ace_closed {background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAFCAYAAACAcVaiAAAAHElEQVQIW2P4//+/AxAzgDADlOOAznHAKgPWAwARji8UIDTfQQAAAABJRU5ErkJggg==\");}.ace_dark .ace_fold-widget:hover {box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);background-color: rgba(255, 255, 255, 0.1);}.ace_dark .ace_fold-widget:active {-moz-box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);-webkit-box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);}.ace_fold-widget.ace_invalid {background-color: #FFB4B4;border-color: #DE5555;}.ace_fade-fold-widgets .ace_fold-widget {-moz-transition: opacity 0.4s ease 0.05s;-webkit-transition: opacity 0.4s ease 0.05s;-o-transition: opacity 0.4s ease 0.05s;-ms-transition: opacity 0.4s ease 0.05s;transition: opacity 0.4s ease 0.05s;opacity: 0;}.ace_fade-fold-widgets:hover .ace_fold-widget {-moz-transition: opacity 0.05s ease 0.05s;-webkit-transition: opacity 0.05s ease 0.05s;-o-transition: opacity 0.05s ease 0.05s;-ms-transition: opacity 0.05s ease 0.05s;transition: opacity 0.05s ease 0.05s;opacity:1;}.ace_underline {text-decoration: underline;}.ace_bold {font-weight: bold;}.ace_nobold .ace_bold {font-weight: normal;}.ace_italic {font-style: italic;}.ace_error-marker {background-color: rgba(255, 0, 0,0.2);position: absolute;z-index: 9;}.ace_highlight-marker {background-color: rgba(255, 255, 0,0.2);position: absolute;z-index: 8;}";
r.importCssString(f,"ace_editor");var m=function(e,t){var i=this;this.container=e||r.createElement("div"),this.$keepTextAreaAtCursor=!0,r.addCssClass(this.container,"ace_editor"),this.setTheme(t),this.$gutter=r.createElement("div"),this.$gutter.className="ace_gutter",this.container.appendChild(this.$gutter),this.scroller=r.createElement("div"),this.scroller.className="ace_scroller",this.container.appendChild(this.scroller),this.content=r.createElement("div"),this.content.className="ace_content",this.scroller.appendChild(this.content),this.$gutterLayer=new o(this.$gutter),this.$gutterLayer.on("changeGutterWidth",this.onGutterResize.bind(this)),this.$markerBack=new s(this.content);var d=this.$textLayer=new a(this.content);this.canvas=d.element,this.$markerFront=new s(this.content),this.$cursorLayer=new l(this.content),this.$horizScroll=!1,this.$vScroll=!1,this.scrollBar=this.scrollBarV=new c(this.container,this),this.scrollBarH=new h(this.container,this),this.scrollBarV.addEventListener("scroll",function(e){i.$scrollAnimation||i.session.setScrollTop(e.data-i.scrollMargin.top)}),this.scrollBarH.addEventListener("scroll",function(e){i.$scrollAnimation||i.session.setScrollLeft(e.data-i.scrollMargin.left)}),this.scrollTop=0,this.scrollLeft=0,this.cursorPos={row:0,column:0},this.$textLayer.addEventListener("changeCharacterSize",function(){i.updateCharacterSize(),i.onResize(!0,i.gutterWidth,i.$size.width,i.$size.height),i._signal("changeCharacterSize")}),this.$size={width:0,height:0,scrollerHeight:0,scrollerWidth:0,$dirty:!0},this.layerConfig={width:1,padding:0,firstRow:0,firstRowScreen:0,lastRow:0,lineHeight:0,characterWidth:0,minHeight:1,maxHeight:1,offset:0,height:1},this.scrollMargin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.$loop=new u(this.$renderChanges.bind(this),this.container.ownerDocument.defaultView),this.$loop.schedule(this.CHANGE_FULL),this.updateCharacterSize(),this.setPadding(4),n.resetOptions(this),n._emit("renderer",this)};(function(){this.CHANGE_CURSOR=1,this.CHANGE_MARKER=2,this.CHANGE_GUTTER=4,this.CHANGE_SCROLL=8,this.CHANGE_LINES=16,this.CHANGE_TEXT=32,this.CHANGE_SIZE=64,this.CHANGE_MARKER_BACK=128,this.CHANGE_MARKER_FRONT=256,this.CHANGE_FULL=512,this.CHANGE_H_SCROLL=1024,i.implement(this,d),this.updateCharacterSize=function(){this.$textLayer.allowBoldFonts!=this.$allowBoldFonts&&(this.$allowBoldFonts=this.$textLayer.allowBoldFonts,this.setStyle("ace_nobold",!this.$allowBoldFonts)),this.layerConfig.characterWidth=this.characterWidth=this.$textLayer.getCharacterWidth(),this.layerConfig.lineHeight=this.lineHeight=this.$textLayer.getLineHeight(),this.$updatePrintMargin()},this.setSession=function(e){this.session=e,this.scrollMargin.top&&e.getScrollTop()<=0&&e.setScrollTop(-this.scrollMargin.top),this.$cursorLayer.setSession(e),this.$markerBack.setSession(e),this.$markerFront.setSession(e),this.$gutterLayer.setSession(e),this.$textLayer.setSession(e),this.$loop.schedule(this.CHANGE_FULL)},this.updateLines=function(e,t){void 0===t&&(t=1/0),this.$changedLines?(this.$changedLines.firstRow>e&&(this.$changedLines.firstRow=e),this.$changedLines.lastRow<t&&(this.$changedLines.lastRow=t)):this.$changedLines={firstRow:e,lastRow:t},this.$changedLines.firstRow>this.layerConfig.lastRow||this.$changedLines.lastRow<this.layerConfig.firstRow||this.$loop.schedule(this.CHANGE_LINES)},this.onChangeTabSize=function(){this.$loop.schedule(this.CHANGE_TEXT|this.CHANGE_MARKER),this.$textLayer.onChangeTabSize()},this.updateText=function(){this.$loop.schedule(this.CHANGE_TEXT)},this.updateFull=function(e){e?this.$renderChanges(this.CHANGE_FULL,!0):this.$loop.schedule(this.CHANGE_FULL)},this.updateFontSize=function(){this.$textLayer.checkForSizeChanges()},this.$changes=0,this.$updateSizeAsync=function(){this.$loop.pending?this.$size.$dirty=!0:this.onResize()},this.onResize=function(e,t,i,r){if(!(this.resizing>2)){this.resizing>0?this.resizing++:this.resizing=e?1:0;var n=this.container;r||(r=n.clientHeight||n.scrollHeight),i||(i=n.clientWidth||n.scrollWidth);var o=this.$updateCachedSize(e,t,i,r);return this.$size.scrollerHeight&&(i||r)?(e&&(this.$gutterLayer.$padding=null),e?this.$renderChanges(o|this.$changes,!0):this.$loop.schedule(o|this.$changes),this.resizing&&(this.resizing=0),void 0):this.resizing=0}},this.$updateCachedSize=function(e,t,i,r){r-=this.$extraHeight||0;var n=0,o=this.$size,s={width:o.width,height:o.height,scrollerHeight:o.scrollerHeight,scrollerWidth:o.scrollerWidth};return r&&(e||o.height!=r)&&(o.height=r,n=this.CHANGE_SIZE,o.scrollerHeight=o.height,this.$horizScroll&&(o.scrollerHeight-=this.scrollBarH.getHeight()),this.scrollBarV.element.style.bottom=this.scrollBarH.getHeight()+"px",this.session&&(n|=this.CHANGE_SCROLL)),i&&(e||o.width!=i)&&(n=this.CHANGE_SIZE,o.width=i,null==t&&(t=this.$showGutter?this.$gutter.offsetWidth:0),this.gutterWidth=t,this.scrollBarH.element.style.left=this.scroller.style.left=t+"px",o.scrollerWidth=Math.max(0,i-t-this.scrollBarV.getWidth()),this.scrollBarH.element.style.right=this.scroller.style.right=this.scrollBarV.getWidth()+"px",this.scroller.style.bottom=this.scrollBarH.getHeight()+"px",(this.session&&this.session.getUseWrapMode()&&this.adjustWrapLimit()||e)&&(n|=this.CHANGE_FULL)),o.$dirty=!i||!r,n&&this._signal("resize",s),n},this.onGutterResize=function(){var e=this.$showGutter?this.$gutter.offsetWidth:0;e!=this.gutterWidth&&(this.$changes|=this.$updateCachedSize(!0,e,this.$size.width,this.$size.height)),this.session.getUseWrapMode()&&this.adjustWrapLimit()?this.$loop.schedule(this.CHANGE_FULL):this.$size.$dirty?this.$loop.schedule(this.CHANGE_FULL):(this.$computeLayerConfig(),this.$loop.schedule(this.CHANGE_MARKER))},this.adjustWrapLimit=function(){var e=this.$size.scrollerWidth-2*this.$padding,t=Math.floor(e/this.characterWidth);return this.session.adjustWrapLimit(t,this.$showPrintMargin&&this.$printMarginColumn)},this.setAnimatedScroll=function(e){this.setOption("animatedScroll",e)},this.getAnimatedScroll=function(){return this.$animatedScroll},this.setShowInvisibles=function(e){this.setOption("showInvisibles",e)},this.getShowInvisibles=function(){return this.getOption("showInvisibles")},this.getDisplayIndentGuides=function(){return this.getOption("displayIndentGuides")},this.setDisplayIndentGuides=function(e){this.setOption("displayIndentGuides",e)},this.setShowPrintMargin=function(e){this.setOption("showPrintMargin",e)},this.getShowPrintMargin=function(){return this.getOption("showPrintMargin")},this.setPrintMarginColumn=function(e){this.setOption("printMarginColumn",e)},this.getPrintMarginColumn=function(){return this.getOption("printMarginColumn")},this.getShowGutter=function(){return this.getOption("showGutter")},this.setShowGutter=function(e){return this.setOption("showGutter",e)},this.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},this.setFadeFoldWidgets=function(e){this.setOption("fadeFoldWidgets",e)},this.setHighlightGutterLine=function(e){this.setOption("highlightGutterLine",e)},this.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},this.$updateGutterLineHighlight=function(){var e=this.$cursorLayer.$pixelPos,t=this.layerConfig.lineHeight;if(this.session.getUseWrapMode()){var i=this.session.selection.getCursor();i.column=0,e=this.$cursorLayer.getPixelPosition(i,!0),t*=this.session.getRowLength(i.row)}this.$gutterLineHighlight.style.top=e.top-this.layerConfig.offset+"px",this.$gutterLineHighlight.style.height=t+"px"},this.$updatePrintMargin=function(){if(this.$showPrintMargin||this.$printMarginEl){if(!this.$printMarginEl){var e=r.createElement("div");e.className="ace_layer ace_print-margin-layer",this.$printMarginEl=r.createElement("div"),this.$printMarginEl.className="ace_print-margin",e.appendChild(this.$printMarginEl),this.content.insertBefore(e,this.content.firstChild)}var t=this.$printMarginEl.style;t.left=this.characterWidth*this.$printMarginColumn+this.$padding+"px",t.visibility=this.$showPrintMargin?"visible":"hidden",this.session&&-1==this.session.$wrap&&this.adjustWrapLimit()}},this.getContainerElement=function(){return this.container},this.getMouseEventTarget=function(){return this.content},this.getTextAreaContainer=function(){return this.container},this.$moveTextAreaToCursor=function(){if(this.$keepTextAreaAtCursor){var e=this.layerConfig,t=this.$cursorLayer.$pixelPos.top,i=this.$cursorLayer.$pixelPos.left;t-=e.offset;var r=this.lineHeight;if(!(0>t||t>e.height-r)){var n=this.characterWidth;if(this.$composition){var o=this.textarea.value.replace(/^\x01+/,"");n*=this.session.$getStringScreenWidth(o)[0]+2,r+=2,t-=1}i-=this.scrollLeft,i>this.$size.scrollerWidth-n&&(i=this.$size.scrollerWidth-n),i-=this.scrollBar.width,this.textarea.style.height=r+"px",this.textarea.style.width=n+"px",this.textarea.style.right=Math.max(0,this.$size.scrollerWidth-i-n)+"px",this.textarea.style.bottom=Math.max(0,this.$size.height-t-r)+"px"}}},this.getFirstVisibleRow=function(){return this.layerConfig.firstRow},this.getFirstFullyVisibleRow=function(){return this.layerConfig.firstRow+(0===this.layerConfig.offset?0:1)},this.getLastFullyVisibleRow=function(){var e=Math.floor((this.layerConfig.height+this.layerConfig.offset)/this.layerConfig.lineHeight);return this.layerConfig.firstRow-1+e},this.getLastVisibleRow=function(){return this.layerConfig.lastRow},this.$padding=null,this.setPadding=function(e){this.$padding=e,this.$textLayer.setPadding(e),this.$cursorLayer.setPadding(e),this.$markerFront.setPadding(e),this.$markerBack.setPadding(e),this.$loop.schedule(this.CHANGE_FULL),this.$updatePrintMargin()},this.setScrollMargin=function(e,t,i,r){var n=this.scrollMargin;n.top=0|e,n.bottom=0|t,n.right=0|r,n.left=0|i,n.v=n.top+n.bottom,n.h=n.left+n.right,n.top&&this.scrollTop<=0&&this.session&&this.session.setScrollTop(n.top),this.updateFull()},this.getHScrollBarAlwaysVisible=function(){return this.$hScrollBarAlwaysVisible},this.setHScrollBarAlwaysVisible=function(e){this.setOption("hScrollBarAlwaysVisible",e)},this.getVScrollBarAlwaysVisible=function(){return this.$hScrollBarAlwaysVisible},this.setVScrollBarAlwaysVisible=function(e){this.setOption("vScrollBarAlwaysVisible",e)},this.$updateScrollBarV=function(){this.scrollBarV.setScrollHeight(this.layerConfig.maxHeight+this.scrollMargin.v),this.scrollBarV.setScrollTop(this.scrollTop+this.scrollMargin.top)},this.$updateScrollBarH=function(){this.scrollBarH.setScrollWidth(this.layerConfig.width+2*this.$padding+this.scrollMargin.h),this.scrollBarH.setScrollLeft(this.scrollLeft+this.scrollMargin.left)},this.$frozen=!1,this.freeze=function(){this.$frozen=!0},this.unfreeze=function(){this.$frozen=!1},this.$renderChanges=function(e,t){if(this.$changes&&(e|=this.$changes,this.$changes=0),!this.session||!this.container.offsetWidth||this.$frozen||!e&&!t)return this.$changes|=e,void 0;if(this.$size.$dirty)return this.$changes|=e,this.onResize(!0);this.lineHeight||this.$textLayer.checkForSizeChanges(),this._signal("beforeRender");var i=this.layerConfig;return(e&this.CHANGE_FULL||e&this.CHANGE_SIZE||e&this.CHANGE_TEXT||e&this.CHANGE_LINES||e&this.CHANGE_SCROLL||e&this.CHANGE_H_SCROLL)&&(e|=this.$computeLayerConfig(),i=this.layerConfig,this.$updateScrollBarV(),e&this.CHANGE_H_SCROLL&&this.$updateScrollBarH(),this.$gutterLayer.element.style.marginTop=-i.offset+"px",this.content.style.marginTop=-i.offset+"px",this.content.style.width=i.width+2*this.$padding+"px",this.content.style.height=i.minHeight+"px"),e&this.CHANGE_H_SCROLL&&(this.content.style.marginLeft=-this.scrollLeft+"px",this.scroller.className=this.scrollLeft<=0?"ace_scroller":"ace_scroller ace_scroll-left"),e&this.CHANGE_FULL?(this.$textLayer.update(i),this.$showGutter&&this.$gutterLayer.update(i),this.$markerBack.update(i),this.$markerFront.update(i),this.$cursorLayer.update(i),this.$moveTextAreaToCursor(),this.$highlightGutterLine&&this.$updateGutterLineHighlight(),this._signal("afterRender"),void 0):e&this.CHANGE_SCROLL?(e&this.CHANGE_TEXT||e&this.CHANGE_LINES?this.$textLayer.update(i):this.$textLayer.scrollLines(i),this.$showGutter&&this.$gutterLayer.update(i),this.$markerBack.update(i),this.$markerFront.update(i),this.$cursorLayer.update(i),this.$highlightGutterLine&&this.$updateGutterLineHighlight(),this.$moveTextAreaToCursor(),this._signal("afterRender"),void 0):(e&this.CHANGE_TEXT?(this.$textLayer.update(i),this.$showGutter&&this.$gutterLayer.update(i)):e&this.CHANGE_LINES?(this.$updateLines()||e&this.CHANGE_GUTTER&&this.$showGutter)&&this.$gutterLayer.update(i):(e&this.CHANGE_TEXT||e&this.CHANGE_GUTTER)&&this.$showGutter&&this.$gutterLayer.update(i),e&this.CHANGE_CURSOR&&(this.$cursorLayer.update(i),this.$moveTextAreaToCursor(),this.$highlightGutterLine&&this.$updateGutterLineHighlight()),e&(this.CHANGE_MARKER|this.CHANGE_MARKER_FRONT)&&this.$markerFront.update(i),e&(this.CHANGE_MARKER|this.CHANGE_MARKER_BACK)&&this.$markerBack.update(i),this._signal("afterRender"),void 0)},this.$autosize=function(){var e=this.session.getScreenLength()*this.lineHeight,t=this.$maxLines*this.lineHeight,i=Math.max((this.$minLines||1)*this.lineHeight,Math.min(t,e))+this.scrollMargin.v+(this.$extraHeight||0),r=e>t;if(i!=this.desiredHeight||this.$size.height!=this.desiredHeight||r!=this.$vScroll){r!=this.$vScroll&&(this.$vScroll=r,this.scrollBarV.setVisible(r));var n=this.container.clientWidth;this.container.style.height=i+"px",this.$updateCachedSize(!0,this.$gutterWidth,n,i),this.desiredHeight=i}},this.$computeLayerConfig=function(){this.$maxLines&&this.lineHeight>1&&this.$autosize();var e=this.session,t=this.$size.height<=2*this.lineHeight,i=this.session.getScreenLength(),r=i*this.lineHeight,n=this.scrollTop%this.lineHeight,o=this.$size.scrollerHeight+this.lineHeight,s=this.$getLongestLine(),a=!t&&(this.$hScrollBarAlwaysVisible||this.$size.scrollerWidth-s-2*this.$padding<0),l=this.$horizScroll!==a;l&&(this.$horizScroll=a,this.scrollBarH.setVisible(a)),!this.$maxLines&&this.$scrollPastEnd&&this.scrollTop>r-this.$size.scrollerHeight&&(r+=Math.min((this.$size.scrollerHeight-this.lineHeight)*this.$scrollPastEnd,this.scrollTop-r+this.$size.scrollerHeight));var h=!t&&(this.$vScrollBarAlwaysVisible||this.$size.scrollerHeight-r<0),c=this.$vScroll!==h;c&&(this.$vScroll=h,this.scrollBarV.setVisible(h)),this.session.setScrollTop(Math.max(-this.scrollMargin.top,Math.min(this.scrollTop,r-this.$size.scrollerHeight+this.scrollMargin.v))),this.session.setScrollLeft(Math.max(-this.scrollMargin.left,Math.min(this.scrollLeft,s+2*this.$padding-this.$size.scrollerWidth+this.scrollMargin.h)));var u,d,f=Math.ceil(o/this.lineHeight)-1,m=Math.max(0,Math.round((this.scrollTop-n)/this.lineHeight)),p=m+f,g=this.lineHeight;m=e.screenToDocumentRow(m,0);var E=e.getFoldLine(m);E&&(m=E.start.row),u=e.documentToScreenRow(m,0),d=e.getRowLength(m)*g,p=Math.min(e.screenToDocumentRow(p,0),e.getLength()-1),o=this.$size.scrollerHeight+e.getRowLength(p)*g+d,n=this.scrollTop-u*g;var v=0;return(l||c)&&(v=this.$updateCachedSize(!0,this.gutterWidth,this.$size.width,this.$size.height),this._signal("scrollbarVisibilityChanged"),c&&(s=this.$getLongestLine())),this.layerConfig={width:s,padding:this.$padding,firstRow:m,firstRowScreen:u,lastRow:p,lineHeight:g,characterWidth:this.characterWidth,minHeight:o,maxHeight:r,offset:n,height:this.$size.scrollerHeight},v},this.$updateLines=function(){var e=this.$changedLines.firstRow,t=this.$changedLines.lastRow;this.$changedLines=null;var i=this.layerConfig;if(!(e>i.lastRow+1||t<i.firstRow))return 1/0===t?(this.$showGutter&&this.$gutterLayer.update(i),this.$textLayer.update(i),void 0):(this.$textLayer.updateLines(i,e,t),!0)},this.$getLongestLine=function(){var e=this.session.getScreenWidth();return this.showInvisibles&&!this.session.$useWrapMode&&(e+=1),Math.max(this.$size.scrollerWidth-2*this.$padding,Math.round(e*this.characterWidth))},this.updateFrontMarkers=function(){this.$markerFront.setMarkers(this.session.getMarkers(!0)),this.$loop.schedule(this.CHANGE_MARKER_FRONT)},this.updateBackMarkers=function(){this.$markerBack.setMarkers(this.session.getMarkers()),this.$loop.schedule(this.CHANGE_MARKER_BACK)},this.addGutterDecoration=function(e,t){this.$gutterLayer.addGutterDecoration(e,t)},this.removeGutterDecoration=function(e,t){this.$gutterLayer.removeGutterDecoration(e,t)},this.updateBreakpoints=function(){this.$loop.schedule(this.CHANGE_GUTTER)},this.setAnnotations=function(e){this.$gutterLayer.setAnnotations(e),this.$loop.schedule(this.CHANGE_GUTTER)},this.updateCursor=function(){this.$loop.schedule(this.CHANGE_CURSOR)},this.hideCursor=function(){this.$cursorLayer.hideCursor()},this.showCursor=function(){this.$cursorLayer.showCursor()},this.scrollSelectionIntoView=function(e,t,i){this.scrollCursorIntoView(e,i),this.scrollCursorIntoView(t,i)},this.scrollCursorIntoView=function(e,t){if(0!==this.$size.scrollerHeight){var i=this.$cursorLayer.getPixelPosition(e),r=i.left,n=i.top,o=this.$scrollAnimation?this.session.getScrollTop():this.scrollTop;o>n?(t&&(n-=t*this.$size.scrollerHeight),0==n?n=-this.scrollMargin.top:0==n&&(n=+this.scrollMargin.bottom),this.session.setScrollTop(n)):o+this.$size.scrollerHeight<n+this.lineHeight&&(t&&(n+=t*this.$size.scrollerHeight),this.session.setScrollTop(n+this.lineHeight-this.$size.scrollerHeight));var s=this.scrollLeft;s>r?(r<this.$padding+2*this.layerConfig.characterWidth&&(r=-this.scrollMargin.left),this.session.setScrollLeft(r)):s+this.$size.scrollerWidth<r+this.characterWidth?this.session.setScrollLeft(Math.round(r+this.characterWidth-this.$size.scrollerWidth)):s<=this.$padding&&r-s<this.characterWidth&&this.session.setScrollLeft(0)}},this.getScrollTop=function(){return this.session.getScrollTop()},this.getScrollLeft=function(){return this.session.getScrollLeft()},this.getScrollTopRow=function(){return this.scrollTop/this.lineHeight},this.getScrollBottomRow=function(){return Math.max(0,Math.floor((this.scrollTop+this.$size.scrollerHeight)/this.lineHeight)-1)},this.scrollToRow=function(e){this.session.setScrollTop(e*this.lineHeight)},this.alignCursor=function(e,t){"number"==typeof e&&(e={row:e,column:0});var i=this.$cursorLayer.getPixelPosition(e),r=this.$size.scrollerHeight-this.lineHeight,n=i.top-r*(t||0);return this.session.setScrollTop(n),n},this.STEPS=8,this.$calcSteps=function(e,t){var i=0,r=this.STEPS,n=[],o=function(e,t,i){return i*(Math.pow(e-1,3)+1)+t};for(i=0;r>i;++i)n.push(o(i/this.STEPS,e,t-e));return n},this.scrollToLine=function(e,t,i,r){var n=this.$cursorLayer.getPixelPosition({row:e,column:0}),o=n.top;t&&(o-=this.$size.scrollerHeight/2);var s=this.scrollTop;this.session.setScrollTop(o),i!==!1&&this.animateScrolling(s,r)},this.animateScrolling=function(e,t){var i=this.scrollTop;if(this.$animatedScroll){var r=this;if(e!=i){if(this.$scrollAnimation){var n=this.$scrollAnimation.steps;if(n.length&&(e=n[0],e==i))return}var o=r.$calcSteps(e,i);this.$scrollAnimation={from:e,to:i,steps:o},clearInterval(this.$timer),r.session.setScrollTop(o.shift()),r.session.$scrollTop=i,this.$timer=setInterval(function(){o.length?(r.session.setScrollTop(o.shift()),r.session.$scrollTop=i):null!=i?(r.session.$scrollTop=-1,r.session.setScrollTop(i),i=null):(r.$timer=clearInterval(r.$timer),r.$scrollAnimation=null,t&&t())},10)}}},this.scrollToY=function(e){this.scrollTop!==e&&(this.$loop.schedule(this.CHANGE_SCROLL),this.scrollTop=e)},this.scrollToX=function(e){this.scrollLeft!==e&&(this.scrollLeft=e),this.$loop.schedule(this.CHANGE_H_SCROLL)},this.scrollTo=function(e,t){this.session.setScrollTop(t),this.session.setScrollLeft(t)},this.scrollBy=function(e,t){t&&this.session.setScrollTop(this.session.getScrollTop()+t),e&&this.session.setScrollLeft(this.session.getScrollLeft()+e)},this.isScrollableBy=function(e,t){return 0>t&&this.session.getScrollTop()>=1-this.scrollMargin.top?!0:t>0&&this.session.getScrollTop()+this.$size.scrollerHeight-this.layerConfig.maxHeight-(this.$size.scrollerHeight-this.lineHeight)*this.$scrollPastEnd<-1+this.scrollMargin.bottom?!0:0>e&&this.session.getScrollLeft()>=1-this.scrollMargin.left?!0:e>0&&this.session.getScrollLeft()+this.$size.scrollerWidth-this.layerConfig.width<-1+this.scrollMargin.right?!0:void 0},this.pixelToScreenCoordinates=function(e,t){var i=this.scroller.getBoundingClientRect(),r=(e+this.scrollLeft-i.left-this.$padding)/this.characterWidth,n=Math.floor((t+this.scrollTop-i.top)/this.lineHeight),o=Math.round(r);return{row:n,column:o,side:r-o>0?1:-1}},this.screenToTextCoordinates=function(e,t){var i=this.scroller.getBoundingClientRect(),r=Math.round((e+this.scrollLeft-i.left-this.$padding)/this.characterWidth),n=(t+this.scrollTop-i.top)/this.lineHeight;return this.session.screenToDocumentPosition(n,Math.max(r,0))},this.textToScreenCoordinates=function(e,t){var i=this.scroller.getBoundingClientRect(),r=this.session.documentToScreenPosition(e,t),n=this.$padding+Math.round(r.column*this.characterWidth),o=r.row*this.lineHeight;return{pageX:i.left+n-this.scrollLeft,pageY:i.top+o-this.scrollTop}},this.visualizeFocus=function(){r.addCssClass(this.container,"ace_focus")},this.visualizeBlur=function(){r.removeCssClass(this.container,"ace_focus")},this.showComposition=function(){this.$composition||(this.$composition={keepTextAreaAtCursor:this.$keepTextAreaAtCursor,cssText:this.textarea.style.cssText}),this.$keepTextAreaAtCursor=!0,r.addCssClass(this.textarea,"ace_composition"),this.textarea.style.cssText="",this.$moveTextAreaToCursor()},this.setCompositionText=function(){this.$moveTextAreaToCursor()},this.hideComposition=function(){this.$composition&&(r.removeCssClass(this.textarea,"ace_composition"),this.$keepTextAreaAtCursor=this.$composition.keepTextAreaAtCursor,this.textarea.style.cssText=this.$composition.cssText,this.$composition=null)},this.setTheme=function(e,t){function i(i){if(o.$themeId!=e)return t&&t();if(i.cssClass){r.importCssString(i.cssText,i.cssClass,o.container.ownerDocument),o.theme&&r.removeCssClass(o.container,o.theme.cssClass);var n="padding"in i?i.padding:"padding"in(o.theme||{})?4:o.$padding;o.$padding&&n!=o.$padding&&o.setPadding(n),o.$theme=i.cssClass,o.theme=i,r.addCssClass(o.container,i.cssClass),r.setCssClass(o.container,"ace_dark",i.isDark),o.$size&&(o.$size.width=0,o.$updateSizeAsync()),o._dispatchEvent("themeLoaded",{theme:i}),t&&t()}}var o=this;if(this.$themeId=e,o._dispatchEvent("themeChange",{theme:e}),e&&"string"!=typeof e)i(e);else{var s=e||this.$options.theme.initialValue;n.loadModule(["theme",s],i)}},this.getTheme=function(){return this.$themeId},this.setStyle=function(e,t){r.setCssClass(this.container,e,t!==!1)},this.unsetStyle=function(e){r.removeCssClass(this.container,e)},this.setCursorStyle=function(e){this.content.style.cursor!=e&&(this.content.style.cursor=e)},this.setMouseCursor=function(e){this.content.style.cursor=e},this.destroy=function(){this.$textLayer.destroy(),this.$cursorLayer.destroy()}}).call(m.prototype),n.defineOptions(m.prototype,"renderer",{animatedScroll:{initialValue:!1},showInvisibles:{set:function(e){this.$textLayer.setShowInvisibles(e)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!1},showPrintMargin:{set:function(){this.$updatePrintMargin()},initialValue:!0},printMarginColumn:{set:function(){this.$updatePrintMargin()},initialValue:80},printMargin:{set:function(e){"number"==typeof e&&(this.$printMarginColumn=e),this.$showPrintMargin=!!e,this.$updatePrintMargin()},get:function(){return this.$showPrintMargin&&this.$printMarginColumn}},showGutter:{set:function(e){this.$gutter.style.display=e?"block":"none",this.onGutterResize()},initialValue:!0},fadeFoldWidgets:{set:function(e){r.setCssClass(this.$gutter,"ace_fade-fold-widgets",e)},initialValue:!1},showFoldWidgets:{set:function(e){this.$gutterLayer.setShowFoldWidgets(e)},initialValue:!0},displayIndentGuides:{set:function(e){this.$textLayer.setDisplayIndentGuides(e)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!0},highlightGutterLine:{set:function(e){return this.$gutterLineHighlight?(this.$gutterLineHighlight.style.display=e?"":"none",this.$cursorLayer.$pixelPos&&this.$updateGutterLineHighlight(),void 0):(this.$gutterLineHighlight=r.createElement("div"),this.$gutterLineHighlight.className="ace_gutter-active-line",this.$gutter.appendChild(this.$gutterLineHighlight),void 0)},initialValue:!1,value:!0},hScrollBarAlwaysVisible:{set:function(){(!this.$hScrollBarAlwaysVisible||!this.$horizScroll)&&this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},vScrollBarAlwaysVisible:{set:function(){(!this.$vScrollBarAlwaysVisible||!this.$vScroll)&&this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},fontSize:{set:function(e){"number"==typeof e&&(e+="px"),this.container.style.fontSize=e,this.updateFontSize()},initialValue:12},fontFamily:{set:function(e){this.container.style.fontFamily=e,this.updateFontSize()}},maxLines:{set:function(){this.updateFull()}},minLines:{set:function(){this.updateFull()}},scrollPastEnd:{set:function(e){e=+e||0,this.$scrollPastEnd!=e&&(this.$scrollPastEnd=e,this.$loop.schedule(this.CHANGE_SCROLL))},initialValue:0,handlesSet:!0},fixedWidthGutter:{set:function(e){this.$gutterLayer.$fixedWidth=!!e,this.$loop.schedule(this.CHANGE_GUTTER)}},theme:{set:function(e){this.setTheme(e)},get:function(){return this.$themeId||this.theme},initialValue:"./theme/textmate",handlesSet:!0}}),t.VirtualRenderer=m}),define("ace/layer/gutter",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter"],function(e,t){var i=e("../lib/dom"),r=e("../lib/oop"),n=e("../lib/lang"),o=e("../lib/event_emitter").EventEmitter,s=function(e){this.element=i.createElement("div"),this.element.className="ace_layer ace_gutter-layer",e.appendChild(this.element),this.setShowFoldWidgets(this.$showFoldWidgets),this.gutterWidth=0,this.$annotations=[],this.$updateAnnotations=this.$updateAnnotations.bind(this),this.$cells=[]};(function(){r.implement(this,o),this.setSession=function(e){this.session&&this.session.removeEventListener("change",this.$updateAnnotations),this.session=e,e.on("change",this.$updateAnnotations)},this.addGutterDecoration=function(e,t){window.console&&console.warn&&console.warn("deprecated use session.addGutterDecoration"),this.session.addGutterDecoration(e,t)},this.removeGutterDecoration=function(e,t){window.console&&console.warn&&console.warn("deprecated use session.removeGutterDecoration"),this.session.removeGutterDecoration(e,t)},this.setAnnotations=function(e){this.$annotations=[];for(var t=0;t<e.length;t++){var i=e[t],r=i.row,o=this.$annotations[r];o||(o=this.$annotations[r]={text:[]});var s=i.text;s=s?n.escapeHTML(s):i.html||"",-1===o.text.indexOf(s)&&o.text.push(s);var a=i.type;"error"==a?o.className=" ace_error":"warning"==a&&" ace_error"!=o.className?o.className=" ace_warning":"info"==a&&!o.className&&(o.className=" ace_info")}},this.$updateAnnotations=function(e){if(this.$annotations.length){var t=e.data,i=t.range,r=i.start.row,n=i.end.row-r;if(0!==n)if("removeText"==t.action||"removeLines"==t.action)this.$annotations.splice(r,n+1,null);else{var o=new Array(n+1);o.unshift(r,1),this.$annotations.splice.apply(this.$annotations,o)}}},this.update=function(e){for(var t=e.firstRow,r=e.lastRow,n=this.session,o=n.getNextFoldLine(t),s=o?o.start.row:1/0,a=this.$showFoldWidgets&&n.foldWidgets,l=n.$breakpoints,h=n.$decorations,c=n.$firstLineNumber,u=0,d=n.gutterRenderer,f=null,m=-1,p=t;;){if(p>s&&(p=o.end.row+1,o=n.getNextFoldLine(p,o),s=o?o.start.row:1/0),p>r){for(;this.$cells.length>m+1;)f=this.$cells.pop(),this.element.removeChild(f.element);break}f=this.$cells[++m],f||(f={element:null,textNode:null,foldWidget:null},f.element=i.createElement("div"),f.textNode=document.createTextNode(""),f.element.appendChild(f.textNode),this.element.appendChild(f.element),this.$cells[m]=f);var g="ace_gutter-cell ";l[p]&&(g+=l[p]),h[p]&&(g+=h[p]),this.$annotations[p]&&(g+=this.$annotations[p].className),f.element.className!=g&&(f.element.className=g);var E=n.getRowLength(p)*e.lineHeight+"px";if(E!=f.element.style.height&&(f.element.style.height=E),a){var v=a[p];null==v&&(v=a[p]=n.getFoldWidget(p))}if(v){f.foldWidget||(f.foldWidget=i.createElement("span"),f.element.appendChild(f.foldWidget));var g="ace_fold-widget ace_"+v;g+="start"==v&&p==s&&p<o.end.row?" ace_closed":" ace_open",f.foldWidget.className!=g&&(f.foldWidget.className=g);var E=e.lineHeight+"px";f.foldWidget.style.height!=E&&(f.foldWidget.style.height=E)}else f.foldWidget&&(f.element.removeChild(f.foldWidget),f.foldWidget=null);var y=u=d?d.getText(n,p):p+c;y!=f.textNode.data&&(f.textNode.data=y),p++}this.element.style.height=e.minHeight+"px",(this.$fixedWidth||n.$useWrapMode)&&(u=n.getLength()+c);var x=d?d.getWidth(n,u,e):u.toString().length*e.characterWidth,T=this.$padding||this.$computePadding();x+=T.left+T.right,x!==this.gutterWidth&&!isNaN(x)&&(this.gutterWidth=x,this.element.style.width=Math.ceil(this.gutterWidth)+"px",this._emit("changeGutterWidth",x))},this.$fixedWidth=!1,this.$showFoldWidgets=!0,this.setShowFoldWidgets=function(e){e?i.addCssClass(this.element,"ace_folding-enabled"):i.removeCssClass(this.element,"ace_folding-enabled"),this.$showFoldWidgets=e,this.$padding=null},this.getShowFoldWidgets=function(){return this.$showFoldWidgets},this.$computePadding=function(){if(!this.element.firstChild)return{left:0,right:0};var e=i.computedStyle(this.element.firstChild);return this.$padding={},this.$padding.left=parseInt(e.paddingLeft)+1||0,this.$padding.right=parseInt(e.paddingRight)||0,this.$padding},this.getRegion=function(e){var t=this.$padding||this.$computePadding(),i=this.element.getBoundingClientRect();return e.x<t.left+i.left?"markers":this.$showFoldWidgets&&e.x>i.right-t.right?"foldWidgets":void 0}}).call(s.prototype),t.Gutter=s}),define("ace/layer/marker",["require","exports","module","ace/range","ace/lib/dom"],function(e,t){var i=e("../range").Range,r=e("../lib/dom"),n=function(e){this.element=r.createElement("div"),this.element.className="ace_layer ace_marker-layer",e.appendChild(this.element)};(function(){this.$padding=0,this.setPadding=function(e){this.$padding=e},this.setSession=function(e){this.session=e},this.setMarkers=function(e){this.markers=e},this.update=function(e){var e=e||this.config;if(e){this.config=e;var t=[];for(var i in this.markers){var n=this.markers[i];if(n.range){var o=n.range.clipRows(e.firstRow,e.lastRow);if(!o.isEmpty())if(o=o.toScreenRange(this.session),n.renderer){var s=this.$getTop(o.start.row,e),a=this.$padding+o.start.column*e.characterWidth;n.renderer(t,o,a,s,e)}else"fullLine"==n.type?this.drawFullLineMarker(t,o,n.clazz,e):"screenLine"==n.type?this.drawScreenLineMarker(t,o,n.clazz,e):o.isMultiLine()?"text"==n.type?this.drawTextMarker(t,o,n.clazz,e):this.drawMultiLineMarker(t,o,n.clazz,e):this.drawSingleLineMarker(t,o,n.clazz+" ace_start",e)}else n.update(t,this,this.session,e)}this.element=r.setInnerHtml(this.element,t.join(""))}},this.$getTop=function(e,t){return(e-t.firstRowScreen)*t.lineHeight},this.drawTextMarker=function(e,t,r,n,o){var s=t.start.row,a=new i(s,t.start.column,s,this.session.getScreenLastRowColumn(s));for(this.drawSingleLineMarker(e,a,r+" ace_start",n,1,o),s=t.end.row,a=new i(s,0,s,t.end.column),this.drawSingleLineMarker(e,a,r,n,0,o),s=t.start.row+1;s<t.end.row;s++)a.start.row=s,a.end.row=s,a.end.column=this.session.getScreenLastRowColumn(s),this.drawSingleLineMarker(e,a,r,n,1,o)},this.drawMultiLineMarker=function(e,t,i,r,n){var o=this.$padding,s=r.lineHeight,a=this.$getTop(t.start.row,r),l=o+t.start.column*r.characterWidth;n=n||"",e.push("<div class='",i," ace_start' style='","height:",s,"px;","right:0;","top:",a,"px;","left:",l,"px;",n,"'></div>"),a=this.$getTop(t.end.row,r);var h=t.end.column*r.characterWidth;e.push("<div class='",i,"' style='","height:",s,"px;","width:",h,"px;","top:",a,"px;","left:",o,"px;",n,"'></div>"),s=(t.end.row-t.start.row-1)*r.lineHeight,0>s||(a=this.$getTop(t.start.row+1,r),e.push("<div class='",i,"' style='","height:",s,"px;","right:0;","top:",a,"px;","left:",o,"px;",n,"'></div>"))},this.drawSingleLineMarker=function(e,t,i,r,n,o){var s=r.lineHeight,a=(t.end.column+(n||0)-t.start.column)*r.characterWidth,l=this.$getTop(t.start.row,r),h=this.$padding+t.start.column*r.characterWidth;e.push("<div class='",i,"' style='","height:",s,"px;","width:",a,"px;","top:",l,"px;","left:",h,"px;",o||"","'></div>")},this.drawFullLineMarker=function(e,t,i,r,n){var o=this.$getTop(t.start.row,r),s=r.lineHeight;t.start.row!=t.end.row&&(s+=this.$getTop(t.end.row,r)-o),e.push("<div class='",i,"' style='","height:",s,"px;","top:",o,"px;","left:0;right:0;",n||"","'></div>")},this.drawScreenLineMarker=function(e,t,i,r,n){var o=this.$getTop(t.start.row,r),s=r.lineHeight;e.push("<div class='",i,"' style='","height:",s,"px;","top:",o,"px;","left:0;right:0;",n||"","'></div>")}}).call(n.prototype),t.Marker=n}),define("ace/layer/text",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/useragent","ace/lib/event_emitter"],function(e,t){var i=e("../lib/oop"),r=e("../lib/dom"),n=e("../lib/lang"),o=e("../lib/useragent"),s=e("../lib/event_emitter").EventEmitter,a=function(e){this.element=r.createElement("div"),this.element.className="ace_layer ace_text-layer",e.appendChild(this.element),this.$characterSize={width:0,height:0},this.checkForSizeChanges(),this.$pollSizeChanges()
};(function(){i.implement(this,s),this.EOF_CHAR="¶",this.EOL_CHAR="¬",this.TAB_CHAR="→",this.SPACE_CHAR="·",this.$padding=0,this.setPadding=function(e){this.$padding=e,this.element.style.padding="0 "+e+"px"},this.getLineHeight=function(){return this.$characterSize.height||0},this.getCharacterWidth=function(){return this.$characterSize.width||0},this.checkForSizeChanges=function(){var e=this.$measureSizes();if(e&&(this.$characterSize.width!==e.width||this.$characterSize.height!==e.height)){this.$measureNode.style.fontWeight="bold";var t=this.$measureSizes();this.$measureNode.style.fontWeight="",this.$characterSize=e,this.allowBoldFonts=t&&t.width===e.width&&t.height===e.height,this._emit("changeCharacterSize",{data:e})}},this.$pollSizeChanges=function(){var e=this;this.$pollSizeChangesTimer=setInterval(function(){e.checkForSizeChanges()},500)},this.$fontStyles={fontFamily:1,fontSize:1,fontWeight:1,fontStyle:1,lineHeight:1},this.$measureSizes=o.isIE||o.isOldGecko?function(){var e=1e3;if(!this.$measureNode){var t=this.$measureNode=r.createElement("div"),i=t.style;if(i.width=i.height="auto",i.left=i.top=40*-e+"px",i.visibility="hidden",i.position="fixed",i.overflow="visible",i.whiteSpace="nowrap",t.innerHTML=n.stringRepeat("Xy",e),this.element.ownerDocument.body)this.element.ownerDocument.body.appendChild(t);else{for(var o=this.element.parentNode;!r.hasCssClass(o,"ace_editor");)o=o.parentNode;o.appendChild(t)}}if(!this.element.offsetWidth)return null;var i=this.$measureNode.style,s=r.computedStyle(this.element);for(var a in this.$fontStyles)i[a]=s[a];var l={height:this.$measureNode.offsetHeight,width:this.$measureNode.offsetWidth/(2*e)};return 0==l.width||0==l.height?null:l}:function(){if(!this.$measureNode){var e=this.$measureNode=r.createElement("div"),t=e.style;t.width=t.height="auto",t.left=t.top="-100px",t.visibility="hidden",t.position="fixed",t.overflow="visible",t.whiteSpace="nowrap",e.innerHTML=n.stringRepeat("X",100);for(var i=this.element.parentNode;i&&!r.hasCssClass(i,"ace_editor");)i=i.parentNode;if(!i)return this.$measureNode=null;i.appendChild(e)}var o=this.$measureNode.getBoundingClientRect(),s={height:o.height,width:o.width/100};return 0==s.width||0==s.height?null:s},this.setSession=function(e){this.session=e,this.$computeTabString()},this.showInvisibles=!1,this.setShowInvisibles=function(e){return this.showInvisibles==e?!1:(this.showInvisibles=e,this.$computeTabString(),!0)},this.displayIndentGuides=!0,this.setDisplayIndentGuides=function(e){return this.displayIndentGuides==e?!1:(this.displayIndentGuides=e,this.$computeTabString(),!0)},this.$tabStrings=[],this.onChangeTabSize=this.$computeTabString=function(){var e=this.session.getTabSize();this.tabSize=e;for(var t=this.$tabStrings=[0],i=1;e+1>i;i++)this.showInvisibles?t.push("<span class='ace_invisible'>"+this.TAB_CHAR+n.stringRepeat(" ",i-1)+"</span>"):t.push(n.stringRepeat(" ",i));if(this.displayIndentGuides){this.$indentGuideRe=/\s\S| \t|\t |\s$/;var r="ace_indent-guide";if(this.showInvisibles){r+=" ace_invisible";var o=n.stringRepeat(this.SPACE_CHAR,this.tabSize),s=this.TAB_CHAR+n.stringRepeat(" ",this.tabSize-1)}else var o=n.stringRepeat(" ",this.tabSize),s=o;this.$tabStrings[" "]="<span class='"+r+"'>"+o+"</span>",this.$tabStrings["	"]="<span class='"+r+"'>"+s+"</span>"}},this.updateLines=function(e,t,i){(this.config.lastRow!=e.lastRow||this.config.firstRow!=e.firstRow)&&this.scrollLines(e),this.config=e;for(var n=Math.max(t,e.firstRow),o=Math.min(i,e.lastRow),s=this.element.childNodes,a=0,l=e.firstRow;n>l;l++){var h=this.session.getFoldLine(l);if(h){if(h.containsRow(n)){n=h.start.row;break}l=h.end.row}a++}for(var l=n,h=this.session.getNextFoldLine(l),c=h?h.start.row:1/0;l>c&&(l=h.end.row+1,h=this.session.getNextFoldLine(l,h),c=h?h.start.row:1/0),!(l>o);){var u=s[a++];if(u){var d=[];this.$renderLine(d,l,!this.$useLineGroups(),l==c?h:!1),u.style.height=e.lineHeight*this.session.getRowLength(l)+"px",r.setInnerHtml(u,d.join(""))}l++}},this.scrollLines=function(e){var t=this.config;if(this.config=e,!t||t.lastRow<e.firstRow)return this.update(e);if(e.lastRow<t.firstRow)return this.update(e);var i=this.element;if(t.firstRow<e.firstRow)for(var r=this.session.getFoldedRowCount(t.firstRow,e.firstRow-1);r>0;r--)i.removeChild(i.firstChild);if(t.lastRow>e.lastRow)for(var r=this.session.getFoldedRowCount(e.lastRow+1,t.lastRow);r>0;r--)i.removeChild(i.lastChild);if(e.firstRow<t.firstRow){var n=this.$renderLinesFragment(e,e.firstRow,t.firstRow-1);i.firstChild?i.insertBefore(n,i.firstChild):i.appendChild(n)}if(e.lastRow>t.lastRow){var n=this.$renderLinesFragment(e,t.lastRow+1,e.lastRow);i.appendChild(n)}},this.$renderLinesFragment=function(e,t,i){for(var n=this.element.ownerDocument.createDocumentFragment(),o=t,s=this.session.getNextFoldLine(o),a=s?s.start.row:1/0;o>a&&(o=s.end.row+1,s=this.session.getNextFoldLine(o,s),a=s?s.start.row:1/0),!(o>i);){var l=r.createElement("div"),h=[];if(this.$renderLine(h,o,!1,o==a?s:!1),l.innerHTML=h.join(""),this.$useLineGroups())l.className="ace_line_group",n.appendChild(l),l.style.height=e.lineHeight*this.session.getRowLength(o)+"px";else for(var c=l.childNodes;c.length;)n.appendChild(c[0]);o++}return n},this.update=function(e){this.config=e;for(var t=[],i=e.firstRow,n=e.lastRow,o=i,s=this.session.getNextFoldLine(o),a=s?s.start.row:1/0;o>a&&(o=s.end.row+1,s=this.session.getNextFoldLine(o,s),a=s?s.start.row:1/0),!(o>n);)this.$useLineGroups()&&t.push("<div class='ace_line_group' style='height:",e.lineHeight*this.session.getRowLength(o),"px'>"),this.$renderLine(t,o,!1,o==a?s:!1),this.$useLineGroups()&&t.push("</div>"),o++;this.element=r.setInnerHtml(this.element,t.join(""))},this.$textToken={text:!0,rparen:!0,lparen:!0},this.$renderToken=function(e,t,i,r){var o=this,s=/\t|&|<|( +)|([\x00-\x1f\x80-\xa0\u1680\u180E\u2000-\u200f\u2028\u2029\u202F\u205F\u3000\uFEFF])|[\u1100-\u115F\u11A3-\u11A7\u11FA-\u11FF\u2329-\u232A\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFB\u3000-\u303E\u3041-\u3096\u3099-\u30FF\u3105-\u312D\u3131-\u318E\u3190-\u31BA\u31C0-\u31E3\u31F0-\u321E\u3220-\u3247\u3250-\u32FE\u3300-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFAFF\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFF01-\uFF60\uFFE0-\uFFE6]/g,a=function(e,i,r,s){if(i)return o.showInvisibles?"<span class='ace_invisible'>"+n.stringRepeat(o.SPACE_CHAR,e.length)+"</span>":n.stringRepeat(" ",e.length);if("&"==e)return"&#38;";if("<"==e)return"&#60;";if("	"==e){var a=o.session.getScreenTabSize(t+s);return t+=a-1,o.$tabStrings[a]}if("　"==e){var l=o.showInvisibles?"ace_cjk ace_invisible":"ace_cjk",h=o.showInvisibles?o.SPACE_CHAR:"";return t+=1,"<span class='"+l+"' style='width:"+2*o.config.characterWidth+"px'>"+h+"</span>"}return r?"<span class='ace_invisible ace_invalid'>"+o.SPACE_CHAR+"</span>":(t+=1,"<span class='ace_cjk' style='width:"+2*o.config.characterWidth+"px'>"+e+"</span>")},l=r.replace(s,a);if(this.$textToken[i.type])e.push(l);else{var h="ace_"+i.type.replace(/\./g," ace_"),c="";"fold"==i.type&&(c=" style='width:"+i.value.length*this.config.characterWidth+"px;' "),e.push("<span class='",h,"'",c,">",l,"</span>")}return t+r.length},this.renderIndentGuide=function(e,t,i){var r=t.search(this.$indentGuideRe);return 0>=r||r>=i?t:" "==t[0]?(r-=r%this.tabSize,e.push(n.stringRepeat(this.$tabStrings[" "],r/this.tabSize)),t.substr(r)):"	"==t[0]?(e.push(n.stringRepeat(this.$tabStrings["	"],r)),t.substr(r)):t},this.$renderWrappedLine=function(e,t,i,r){for(var n=0,o=0,s=i[0],a=0,l=0;l<t.length;l++){var h=t[l],c=h.value;if(0==l&&this.displayIndentGuides){if(n=c.length,c=this.renderIndentGuide(e,c,s),!c)continue;n-=c.length}if(n+c.length<s)a=this.$renderToken(e,a,h,c),n+=c.length;else{for(;n+c.length>=s;)a=this.$renderToken(e,a,h,c.substring(0,s-n)),c=c.substring(s-n),n=s,r||e.push("</div>","<div class='ace_line' style='height:",this.config.lineHeight,"px'>"),o++,a=0,s=i[o]||Number.MAX_VALUE;0!=c.length&&(n+=c.length,a=this.$renderToken(e,a,h,c))}}},this.$renderSimpleLine=function(e,t){var i=0,r=t[0],n=r.value;this.displayIndentGuides&&(n=this.renderIndentGuide(e,n)),n&&(i=this.$renderToken(e,i,r,n));for(var o=1;o<t.length;o++)r=t[o],n=r.value,i=this.$renderToken(e,i,r,n)},this.$renderLine=function(e,t,i,r){if(!r&&0!=r&&(r=this.session.getFoldLine(t)),r)var n=this.$getFoldLineTokens(t,r);else var n=this.session.getTokens(t);if(i||e.push("<div class='ace_line' style='height:",this.config.lineHeight*(this.$useLineGroups()?1:this.session.getRowLength(t)),"px'>"),n.length){var o=this.session.getRowSplitData(t);o&&o.length?this.$renderWrappedLine(e,n,o,i):this.$renderSimpleLine(e,n)}this.showInvisibles&&(r&&(t=r.end.row),e.push("<span class='ace_invisible'>",t==this.session.getLength()-1?this.EOF_CHAR:this.EOL_CHAR,"</span>")),i||e.push("</div>")},this.$getFoldLineTokens=function(e,t){function i(e,t,i){for(var r=0,o=0;o+e[r].value.length<t;)if(o+=e[r].value.length,r++,r==e.length)return;if(o!=t){var s=e[r].value.substring(t-o);s.length>i-t&&(s=s.substring(0,i-t)),n.push({type:e[r].type,value:s}),o=t+s.length,r+=1}for(;i>o&&r<e.length;){var s=e[r].value;s.length+o>i?n.push({type:e[r].type,value:s.substring(0,i-o)}):n.push(e[r]),o+=s.length,r+=1}}var r=this.session,n=[],o=r.getTokens(e);return t.walk(function(e,t,s,a,l){null!=e?n.push({type:"fold",value:e}):(l&&(o=r.getTokens(t)),o.length&&i(o,a,s))},t.end.row,this.session.getLine(t.end.row).length),n},this.$useLineGroups=function(){return this.session.getUseWrapMode()},this.destroy=function(){clearInterval(this.$pollSizeChangesTimer),this.$measureNode&&this.$measureNode.parentNode.removeChild(this.$measureNode),delete this.$measureNode}}).call(a.prototype),t.Text=a}),define("ace/layer/cursor",["require","exports","module","ace/lib/dom"],function(e,t){var i=e("../lib/dom"),r=function(e){this.element=i.createElement("div"),this.element.className="ace_layer ace_cursor-layer",e.appendChild(this.element),this.isVisible=!1,this.isBlinking=!0,this.blinkInterval=1e3,this.smoothBlinking=!1,this.cursors=[],this.cursor=this.addCursor(),i.addCssClass(this.element,"ace_hidden-cursors")};(function(){this.$padding=0,this.setPadding=function(e){this.$padding=e},this.setSession=function(e){this.session=e},this.setBlinking=function(e){e!=this.isBlinking&&(this.isBlinking=e,this.restartTimer())},this.setBlinkInterval=function(e){e!=this.blinkInterval&&(this.blinkInterval=e,this.restartTimer())},this.setSmoothBlinking=function(e){e!=this.smoothBlinking&&(this.smoothBlinking=e,e?i.addCssClass(this.element,"ace_smooth-blinking"):i.removeCssClass(this.element,"ace_smooth-blinking"),this.restartTimer())},this.addCursor=function(){var e=i.createElement("div");return e.className="ace_cursor",this.element.appendChild(e),this.cursors.push(e),e},this.removeCursor=function(){if(this.cursors.length>1){var e=this.cursors.pop();return e.parentNode.removeChild(e),e}},this.hideCursor=function(){this.isVisible=!1,i.addCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},this.showCursor=function(){this.isVisible=!0,i.removeCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},this.restartTimer=function(){clearInterval(this.intervalId),clearTimeout(this.timeoutId),this.smoothBlinking&&i.removeCssClass(this.element,"ace_smooth-blinking");for(var e=this.cursors.length;e--;)this.cursors[e].style.opacity="";if(this.isBlinking&&this.blinkInterval&&this.isVisible){this.smoothBlinking&&setTimeout(function(){i.addCssClass(this.element,"ace_smooth-blinking")}.bind(this));var t=function(){this.timeoutId=setTimeout(function(){for(var e=this.cursors.length;e--;)this.cursors[e].style.opacity=0}.bind(this),.6*this.blinkInterval)}.bind(this);this.intervalId=setInterval(function(){for(var e=this.cursors.length;e--;)this.cursors[e].style.opacity="";t()}.bind(this),this.blinkInterval),t()}},this.getPixelPosition=function(e,t){if(!this.config||!this.session)return{left:0,top:0};e||(e=this.session.selection.getCursor());var i=this.session.documentToScreenPosition(e),r=this.$padding+i.column*this.config.characterWidth,n=(i.row-(t?this.config.firstRowScreen:0))*this.config.lineHeight;return{left:r,top:n}},this.update=function(e){this.config=e;var t=this.session.$selectionMarkers,i=0,r=0;(void 0===t||0===t.length)&&(t=[{cursor:null}]);for(var i=0,n=t.length;n>i;i++){var o=this.getPixelPosition(t[i].cursor,!0);if(!((o.top>e.height+e.offset||o.top<-e.offset)&&i>1)){var s=(this.cursors[r++]||this.addCursor()).style;s.left=o.left+"px",s.top=o.top+"px",s.width=e.characterWidth+"px",s.height=e.lineHeight+"px"}}for(;this.cursors.length>r;)this.removeCursor();var a=this.session.getOverwrite();this.$setOverwrite(a),this.$pixelPos=o,this.restartTimer()},this.$setOverwrite=function(e){e!=this.overwrite&&(this.overwrite=e,e?i.addCssClass(this.element,"ace_overwrite-cursors"):i.removeCssClass(this.element,"ace_overwrite-cursors"))},this.destroy=function(){clearInterval(this.intervalId),clearTimeout(this.timeoutId)}}).call(r.prototype),t.Cursor=r}),define("ace/scrollbar",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/event","ace/lib/event_emitter"],function(e,t){var i=e("./lib/oop"),r=e("./lib/dom"),n=e("./lib/event"),o=e("./lib/event_emitter").EventEmitter,s=function(e){this.element=r.createElement("div"),this.element.className="ace_scrollbar ace_scrollbar"+this.classSuffix,this.inner=r.createElement("div"),this.inner.className="ace_scrollbar-inner",this.element.appendChild(this.inner),e.appendChild(this.element),this.setVisible(!1),this.skipEvent=!1,n.addListener(this.element,"scroll",this.onScroll.bind(this)),n.addListener(this.element,"mousedown",n.preventDefault)};(function(){i.implement(this,o),this.setVisible=function(e){this.element.style.display=e?"":"none",this.isVisible=e}}).call(s.prototype);var a=function(e,t){s.call(this,e),this.scrollTop=0,t.$scrollbarWidth=this.width=r.scrollbarWidth(e.ownerDocument),this.inner.style.width=this.element.style.width=(this.width||15)+5+"px"};i.inherits(a,s),function(){this.classSuffix="-v",this.onScroll=function(){this.skipEvent||(this.scrollTop=this.element.scrollTop,this._emit("scroll",{data:this.scrollTop})),this.skipEvent=!1},this.getWidth=function(){return this.isVisible?this.width:0},this.setHeight=function(e){this.element.style.height=e+"px"},this.setInnerHeight=function(e){this.inner.style.height=e+"px"},this.setScrollHeight=function(e){this.inner.style.height=e+"px"},this.setScrollTop=function(e){this.scrollTop!=e&&(this.skipEvent=!0,this.scrollTop=this.element.scrollTop=e)}}.call(a.prototype);var l=function(e,t){s.call(this,e),this.scrollLeft=0,this.height=t.$scrollbarWidth,this.inner.style.height=this.element.style.height=(this.height||15)+5+"px"};i.inherits(l,s),function(){this.classSuffix="-h",this.onScroll=function(){this.skipEvent||(this.scrollLeft=this.element.scrollLeft,this._emit("scroll",{data:this.scrollLeft})),this.skipEvent=!1},this.getHeight=function(){return this.isVisible?this.height:0},this.setWidth=function(e){this.element.style.width=e+"px"},this.setInnerWidth=function(e){this.inner.style.width=e+"px"},this.setScrollWidth=function(e){this.inner.style.width=e+"px"},this.setScrollLeft=function(e){this.scrollLeft!=e&&(this.skipEvent=!0,this.scrollLeft=this.element.scrollLeft=e)}}.call(l.prototype),t.ScrollBar=a,t.ScrollBarV=a,t.ScrollBarH=l,t.VScrollBar=a,t.HScrollBar=l}),define("ace/renderloop",["require","exports","module","ace/lib/event"],function(e,t){var i=e("./lib/event"),r=function(e,t){this.onRender=e,this.pending=!1,this.changes=0,this.window=t||window};(function(){this.schedule=function(e){if(this.changes=this.changes|e,!this.pending&&this.changes){this.pending=!0;var t=this;i.nextFrame(function(){t.pending=!1;for(var e;e=t.changes;)t.changes=0,t.onRender(e)},this.window)}}}).call(r.prototype),t.RenderLoop=r}),define("ace/multi_select",["require","exports","module","ace/range_list","ace/range","ace/selection","ace/mouse/multi_select_handler","ace/lib/event","ace/lib/lang","ace/commands/multi_select_commands","ace/search","ace/edit_session","ace/editor","ace/config"],function(e,t){function i(e,t,i){return m.$options.wrap=!0,m.$options.needle=t,m.$options.backwards=-1==i,m.find(e)}function r(e,t){return e.row==t.row&&e.column==t.column}function n(e){e.$multiselectOnSessionChange||(e.$onAddRange=e.$onAddRange.bind(e),e.$onRemoveRange=e.$onRemoveRange.bind(e),e.$onMultiSelect=e.$onMultiSelect.bind(e),e.$onSingleSelect=e.$onSingleSelect.bind(e),e.$multiselectOnSessionChange=t.onSessionChange.bind(e),e.$multiselectOnSessionChange(e),e.on("changeSession",e.$multiselectOnSessionChange),e.on("mousedown",h),e.commands.addCommands(d.defaultCommands),o(e))}function o(e){function t(){r&&(e.renderer.setMouseCursor(""),r=!1)}var i=e.textInput.getElement(),r=!1;c.addListener(i,"keydown",function(i){18!=i.keyCode||i.ctrlKey||i.shiftKey||i.metaKey?r&&t():r||(e.renderer.setMouseCursor("crosshair"),r=!0)}),c.addListener(i,"keyup",t),c.addListener(i,"blur",t)}var s=e("./range_list").RangeList,a=e("./range").Range,l=e("./selection").Selection,h=e("./mouse/multi_select_handler").onMouseDown,c=e("./lib/event"),u=e("./lib/lang"),d=e("./commands/multi_select_commands");t.commands=d.defaultCommands.concat(d.multiSelectCommands);var f=e("./search").Search,m=new f,p=e("./edit_session").EditSession;(function(){this.getSelectionMarkers=function(){return this.$selectionMarkers}}).call(p.prototype),function(){this.ranges=null,this.rangeList=null,this.addRange=function(e,t){if(e){if(!this.inMultiSelectMode&&0==this.rangeCount){var i=this.toOrientedRange();if(this.rangeList.add(i),this.rangeList.add(e),2!=this.rangeList.ranges.length)return this.rangeList.removeAll(),t||this.fromOrientedRange(e);this.rangeList.removeAll(),this.rangeList.add(i),this.$onAddRange(i)}e.cursor||(e.cursor=e.end);var r=this.rangeList.add(e);return this.$onAddRange(e),r.length&&this.$onRemoveRange(r),this.rangeCount>1&&!this.inMultiSelectMode&&(this._emit("multiSelect"),this.inMultiSelectMode=!0,this.session.$undoSelect=!1,this.rangeList.attach(this.session)),t||this.fromOrientedRange(e)}},this.toSingleRange=function(e){e=e||this.ranges[0];var t=this.rangeList.removeAll();t.length&&this.$onRemoveRange(t),e&&this.fromOrientedRange(e)},this.substractPoint=function(e){var t=this.rangeList.substractPoint(e);return t?(this.$onRemoveRange(t),t[0]):void 0},this.mergeOverlappingRanges=function(){var e=this.rangeList.merge();e.length?this.$onRemoveRange(e):this.ranges[0]&&this.fromOrientedRange(this.ranges[0])},this.$onAddRange=function(e){this.rangeCount=this.rangeList.ranges.length,this.ranges.unshift(e),this._emit("addRange",{range:e})},this.$onRemoveRange=function(e){if(this.rangeCount=this.rangeList.ranges.length,1==this.rangeCount&&this.inMultiSelectMode){var t=this.rangeList.ranges.pop();e.push(t),this.rangeCount=0}for(var i=e.length;i--;){var r=this.ranges.indexOf(e[i]);this.ranges.splice(r,1)}this._emit("removeRange",{ranges:e}),0==this.rangeCount&&this.inMultiSelectMode&&(this.inMultiSelectMode=!1,this._emit("singleSelect"),this.session.$undoSelect=!0,this.rangeList.detach(this.session)),t=t||this.ranges[0],t&&!t.isEqual(this.getRange())&&this.fromOrientedRange(t)},this.$initRangeList=function(){this.rangeList||(this.rangeList=new s,this.ranges=[],this.rangeCount=0)},this.getAllRanges=function(){return this.rangeCount?this.rangeList.ranges.concat():[this.getRange()]},this.splitIntoLines=function(){if(this.rangeCount>1){var e=this.rangeList.ranges,t=e[e.length-1],i=a.fromPoints(e[0].start,t.end);this.toSingleRange(),this.setSelectionRange(i,t.cursor==t.start)}else{var i=this.getRange(),r=this.isBackwards(),n=i.start.row,o=i.end.row;if(n==o){if(r)var s=i.end,l=i.start;else var s=i.start,l=i.end;return this.addRange(a.fromPoints(l,l)),this.addRange(a.fromPoints(s,s)),void 0}var h=[],c=this.getLineRange(n,!0);c.start.column=i.start.column,h.push(c);for(var u=n+1;o>u;u++)h.push(this.getLineRange(u,!0));c=this.getLineRange(o,!0),c.end.column=i.end.column,h.push(c),h.forEach(this.addRange,this)}},this.toggleBlockSelection=function(){if(this.rangeCount>1){var e=this.rangeList.ranges,t=e[e.length-1],i=a.fromPoints(e[0].start,t.end);this.toSingleRange(),this.setSelectionRange(i,t.cursor==t.start)}else{var r=this.session.documentToScreenPosition(this.selectionLead),n=this.session.documentToScreenPosition(this.selectionAnchor),o=this.rectangularRangeBlock(r,n);o.forEach(this.addRange,this)}},this.rectangularRangeBlock=function(e,t,i){var n=[],o=e.column<t.column;if(o)var s=e.column,l=t.column;else var s=t.column,l=e.column;var h=e.row<t.row;if(h)var c=e.row,u=t.row;else var c=t.row,u=e.row;0>s&&(s=0),0>c&&(c=0),c==u&&(i=!0);for(var d=c;u>=d;d++){var f=a.fromPoints(this.session.screenToDocumentPosition(d,s),this.session.screenToDocumentPosition(d,l));if(f.isEmpty()){if(m&&r(f.end,m))break;var m=f.end}f.cursor=o?f.start:f.end,n.push(f)}if(h&&n.reverse(),!i){for(var p=n.length-1;n[p].isEmpty()&&p>0;)p--;if(p>0)for(var g=0;n[g].isEmpty();)g++;for(var E=p;E>=g;E--)n[E].isEmpty()&&n.splice(E,1)}return n}}.call(l.prototype);var g=e("./editor").Editor;(function(){this.updateSelectionMarkers=function(){this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.addSelectionMarker=function(e){e.cursor||(e.cursor=e.end);var t=this.getSelectionStyle();return e.marker=this.session.addMarker(e,"ace_selection",t),this.session.$selectionMarkers.push(e),this.session.selectionMarkerCount=this.session.$selectionMarkers.length,e},this.removeSelectionMarker=function(e){if(e.marker){this.session.removeMarker(e.marker);var t=this.session.$selectionMarkers.indexOf(e);-1!=t&&this.session.$selectionMarkers.splice(t,1),this.session.selectionMarkerCount=this.session.$selectionMarkers.length}},this.removeSelectionMarkers=function(e){for(var t=this.session.$selectionMarkers,i=e.length;i--;){var r=e[i];if(r.marker){this.session.removeMarker(r.marker);var n=t.indexOf(r);-1!=n&&t.splice(n,1)}}this.session.selectionMarkerCount=t.length},this.$onAddRange=function(e){this.addSelectionMarker(e.range),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onRemoveRange=function(e){this.removeSelectionMarkers(e.ranges),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onMultiSelect=function(){this.inMultiSelectMode||(this.inMultiSelectMode=!0,this.setStyle("ace_multiselect"),this.keyBinding.addKeyboardHandler(d.keyboardHandler),this.commands.setDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers())},this.$onSingleSelect=function(){this.session.multiSelect.inVirtualMode||(this.inMultiSelectMode=!1,this.unsetStyle("ace_multiselect"),this.keyBinding.removeKeyboardHandler(d.keyboardHandler),this.commands.removeDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers())},this.$onMultiSelectExec=function(e){var t=e.command,i=e.editor;if(i.multiSelect){if(t.multiSelectAction)"forEach"==t.multiSelectAction?r=i.forEachSelection(t,e.args):"forEachLine"==t.multiSelectAction?r=i.forEachSelection(t,e.args,!0):"single"==t.multiSelectAction?(i.exitMultiSelectMode(),r=t.exec(i,e.args||{})):r=t.multiSelectAction(i,e.args||{});else{var r=t.exec(i,e.args||{});i.multiSelect.addRange(i.multiSelect.toOrientedRange()),i.multiSelect.mergeOverlappingRanges()}return r}},this.forEachSelection=function(e,t,i){if(!this.inVirtualSelectionMode){var r,n=this.session,o=this.selection,s=o.rangeList,a=o._eventRegistry;o._eventRegistry={};var h=new l(n);this.inVirtualSelectionMode=!0;for(var c=s.ranges.length;c--;){if(i)for(;c>0&&s.ranges[c].start.row==s.ranges[c-1].end.row;)c--;h.fromOrientedRange(s.ranges[c]),this.selection=n.selection=h;var u=e.exec(this,t||{});void 0==!r&&(r=u),h.toOrientedRange(s.ranges[c])}h.detach(),this.selection=n.selection=o,this.inVirtualSelectionMode=!1,o._eventRegistry=a,o.mergeOverlappingRanges();var d=this.renderer.$scrollAnimation;return this.onCursorChange(),this.onSelectionChange(),d&&d.from==d.to&&this.renderer.animateScrolling(d.from),r}},this.exitMultiSelectMode=function(){this.inMultiSelectMode&&!this.inVirtualSelectionMode&&this.multiSelect.toSingleRange()},this.getSelectedText=function(){var e="";if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){for(var t=this.multiSelect.rangeList.ranges,i=[],r=0;r<t.length;r++)i.push(this.session.getTextRange(t[r]));var n=this.session.getDocument().getNewLineCharacter();e=i.join(n),e.length==(i.length-1)*n.length&&(e="")}else this.selection.isEmpty()||(e=this.session.getTextRange(this.getSelectionRange()));return e},this.onPaste=function(e){if(!this.$readOnly){if(this._signal("paste",e),!this.inMultiSelectMode||this.inVirtualSelectionMode)return this.insert(e);var t=e.split(/\r\n|\r|\n/),i=this.selection.rangeList.ranges;if(t.length>i.length||t.length<2||!t[1])return this.commands.exec("insertstring",this,e);for(var r=i.length;r--;){var n=i[r];n.isEmpty()||this.session.remove(n),this.session.insert(n.start,t[r])}}},this.findAll=function(e,t,i){t=t||{},t.needle=e||t.needle,this.$search.set(t);var r=this.$search.findAll(this.session);if(!r.length)return 0;this.$blockScrolling+=1;var n=this.multiSelect;i||n.toSingleRange(r[0]);for(var o=r.length;o--;)n.addRange(r[o],!0);return this.$blockScrolling-=1,r.length},this.selectMoreLines=function(e,t){var i=this.selection.toOrientedRange(),r=i.cursor==i.end,n=this.session.documentToScreenPosition(i.cursor);this.selection.$desiredColumn&&(n.column=this.selection.$desiredColumn);var o=this.session.screenToDocumentPosition(n.row+e,n.column);if(i.isEmpty())var s=o;else var l=this.session.documentToScreenPosition(r?i.end:i.start),s=this.session.screenToDocumentPosition(l.row+e,l.column);if(r){var h=a.fromPoints(o,s);h.cursor=h.start}else{var h=a.fromPoints(s,o);h.cursor=h.end}if(h.desiredColumn=n.column,this.selection.inMultiSelectMode){if(t)var c=i.cursor}else this.selection.addRange(i);this.selection.addRange(h),c&&this.selection.substractPoint(c)},this.transposeSelections=function(e){for(var t=this.session,i=t.multiSelect,r=i.ranges,n=r.length;n--;){var o=r[n];if(o.isEmpty()){var s=t.getWordRange(o.start.row,o.start.column);o.start.row=s.start.row,o.start.column=s.start.column,o.end.row=s.end.row,o.end.column=s.end.column}}i.mergeOverlappingRanges();for(var a=[],n=r.length;n--;){var o=r[n];a.unshift(t.getTextRange(o))}0>e?a.unshift(a.pop()):a.push(a.shift());for(var n=r.length;n--;){var o=r[n],s=o.clone();t.replace(o,a[n]),o.start.row=s.start.row,o.start.column=s.start.column}},this.selectMore=function(e,t){var r=this.session,n=r.multiSelect,o=n.toOrientedRange();o.isEmpty()&&(o=r.getWordRange(o.start.row,o.start.column),o.cursor=-1==e?o.start:o.end,this.multiSelect.addRange(o));var s=r.getTextRange(o),a=i(r,s,e);a&&(a.cursor=-1==e?a.start:a.end,this.$blockScrolling+=1,this.session.unfold(a),this.multiSelect.addRange(a),this.$blockScrolling-=1,this.renderer.scrollCursorIntoView(null,.5)),t&&this.multiSelect.substractPoint(o.cursor)},this.alignCursors=function(){var e=this.session,t=e.multiSelect,i=t.ranges;if(i.length){var r=-1,n=i.filter(function(e){return e.cursor.row==r?!0:(r=e.cursor.row,void 0)});t.$onRemoveRange(n);var o=0,s=1/0,l=i.map(function(t){var i=t.cursor,r=e.getLine(i.row),n=r.substr(i.column).search(/\S/g);return-1==n&&(n=0),i.column>o&&(o=i.column),s>n&&(s=n),n});i.forEach(function(t,i){var r=t.cursor,n=o-r.column,h=l[i]-s;n>h?e.insert(r,u.stringRepeat(" ",n-h)):e.remove(new a(r.row,r.column,r.row,r.column-n+h)),t.start.column=t.end.column=o,t.start.row=t.end.row=r.row,t.cursor=t.end}),t.fromOrientedRange(i[0]),this.renderer.updateCursor(),this.renderer.updateBackMarkers()}else{var h=this.selection.getRange(),c=h.start.row,d=h.end.row,f=c==d;if(f){var m,p=this.session.getLength();do m=this.session.getLine(d);while(/[=:]/.test(m)&&++d<p);do m=this.session.getLine(c);while(/[=:]/.test(m)&&--c>0);0>c&&(c=0),d>=p&&(d=p-1)}var g=this.session.doc.removeLines(c,d);g=this.$reAlignText(g,f),this.session.doc.insert({row:c,column:0},g.join("\n")+"\n"),f||(h.start.column=0,h.end.column=g[g.length-1].length),this.selection.setRange(h)}},this.$reAlignText=function(e,t){function i(e){return u.stringRepeat(" ",e)}function r(e){return e[2]?i(s)+e[2]+i(a-e[2].length+l)+e[4].replace(/^([=:])\s+/,"$1 "):e[0]}function n(e){return e[2]?i(s+a-e[2].length)+e[2]+i(l," ")+e[4].replace(/^([=:])\s+/,"$1 "):e[0]}function o(e){return e[2]?i(s)+e[2]+i(l)+e[4].replace(/^([=:])\s+/,"$1 "):e[0]}var s,a,l,h=!0,c=!0;return e.map(function(e){var t=e.match(/(\s*)(.*?)(\s*)([=:].*)/);return t?null==s?(s=t[1].length,a=t[2].length,l=t[3].length,t):(s+a+l!=t[1].length+t[2].length+t[3].length&&(c=!1),s!=t[1].length&&(h=!1),s>t[1].length&&(s=t[1].length),a<t[2].length&&(a=t[2].length),l>t[3].length&&(l=t[3].length),t):[e]}).map(t?r:h?c?n:r:o)}}).call(g.prototype),t.onSessionChange=function(e){var t=e.session;t.multiSelect||(t.$selectionMarkers=[],t.selection.$initRangeList(),t.multiSelect=t.selection),this.multiSelect=t.multiSelect;var i=e.oldSession;i&&(i.multiSelect.removeEventListener("addRange",this.$onAddRange),i.multiSelect.removeEventListener("removeRange",this.$onRemoveRange),i.multiSelect.removeEventListener("multiSelect",this.$onMultiSelect),i.multiSelect.removeEventListener("singleSelect",this.$onSingleSelect)),t.multiSelect.on("addRange",this.$onAddRange),t.multiSelect.on("removeRange",this.$onRemoveRange),t.multiSelect.on("multiSelect",this.$onMultiSelect),t.multiSelect.on("singleSelect",this.$onSingleSelect),this.inMultiSelectMode!=t.selection.inMultiSelectMode&&(t.selection.inMultiSelectMode?this.$onMultiSelect():this.$onSingleSelect())},t.MultiSelect=n,e("./config").defineOptions(g.prototype,"editor",{enableMultiselect:{set:function(e){n(this),e?(this.on("changeSession",this.$multiselectOnSessionChange),this.on("mousedown",h)):(this.off("changeSession",this.$multiselectOnSessionChange),this.off("mousedown",h))},value:!0}})}),define("ace/mouse/multi_select_handler",["require","exports","module","ace/lib/event"],function(e,t){function i(e,t){return e.row==t.row&&e.column==t.column}function r(e){var t=e.domEvent,r=t.altKey,o=t.shiftKey,s=e.getAccelKey(),a=e.getButton();if(e.editor.inMultiSelectMode&&2==a)return e.editor.textInput.onContextMenu(e.domEvent),void 0;if(!s&&!r)return 0==a&&e.editor.inMultiSelectMode&&e.editor.exitMultiSelectMode(),void 0;var l=e.editor,h=l.selection,c=l.inMultiSelectMode,u=e.getDocumentPosition(),d=h.getCursor(),f=e.inSelection()||h.isEmpty()&&i(u,d),m=e.x,p=e.y,g=function(e){m=e.clientX,p=e.clientY},E=function(){var e=l.renderer.pixelToScreenCoordinates(m,p),t=v.screenToDocumentPosition(e.row,e.column);i(x,e)&&i(t,h.selectionLead)||(x=e,l.selection.moveCursorToPosition(t),l.selection.clearSelection(),l.renderer.scrollCursorIntoView(),l.removeSelectionMarkers(T),T=h.rectangularRangeBlock(x,y),T.forEach(l.addSelectionMarker,l),l.updateSelectionMarkers())},v=l.session,y=l.renderer.pixelToScreenCoordinates(m,p),x=y;if(!s||o||r||0!=a){if(r&&0==a){e.stop(),c&&!s?h.toSingleRange():!c&&s&&h.addRange();var T=[];o?(y=v.documentToScreenPosition(h.lead),E()):(h.moveCursorToPosition(u),h.clearSelection());var w=function(){clearInterval(R),l.removeSelectionMarkers(T);for(var e=0;e<T.length;e++)h.addRange(T[e])},A=E;n.capture(l.container,g,w);var R=setInterval(function(){A()},20);return e.preventDefault()}}else{if(!c&&f)return;if(!c){var _=h.toOrientedRange();l.addSelectionMarker(_)}var C=h.rangeList.rangeAtPoint(u);l.$blockScrolling++,l.once("mouseup",function(){var e=h.toOrientedRange();C&&e.isEmpty()&&i(C.cursor,e.cursor)?h.substractPoint(e.cursor):(_&&(l.removeSelectionMarker(_),h.addRange(_)),h.addRange(e)),l.$blockScrolling--})}}var n=e("../lib/event");t.onMouseDown=r}),define("ace/commands/multi_select_commands",["require","exports","module","ace/keyboard/hash_handler"],function(e,t){t.defaultCommands=[{name:"addCursorAbove",exec:function(e){e.selectMoreLines(-1)},bindKey:{win:"Ctrl-Alt-Up",mac:"Ctrl-Alt-Up"},readonly:!0},{name:"addCursorBelow",exec:function(e){e.selectMoreLines(1)},bindKey:{win:"Ctrl-Alt-Down",mac:"Ctrl-Alt-Down"},readonly:!0},{name:"addCursorAboveSkipCurrent",exec:function(e){e.selectMoreLines(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Up",mac:"Ctrl-Alt-Shift-Up"},readonly:!0},{name:"addCursorBelowSkipCurrent",exec:function(e){e.selectMoreLines(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Down",mac:"Ctrl-Alt-Shift-Down"},readonly:!0},{name:"selectMoreBefore",exec:function(e){e.selectMore(-1)},bindKey:{win:"Ctrl-Alt-Left",mac:"Ctrl-Alt-Left"},readonly:!0},{name:"selectMoreAfter",exec:function(e){e.selectMore(1)},bindKey:{win:"Ctrl-Alt-Right",mac:"Ctrl-Alt-Right"},readonly:!0},{name:"selectNextBefore",exec:function(e){e.selectMore(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Left",mac:"Ctrl-Alt-Shift-Left"},readonly:!0},{name:"selectNextAfter",exec:function(e){e.selectMore(1,!0)
},bindKey:{win:"Ctrl-Alt-Shift-Right",mac:"Ctrl-Alt-Shift-Right"},readonly:!0},{name:"splitIntoLines",exec:function(e){e.multiSelect.splitIntoLines()},bindKey:{win:"Ctrl-Alt-L",mac:"Ctrl-Alt-L"},readonly:!0},{name:"alignCursors",exec:function(e){e.alignCursors()},bindKey:{win:"Ctrl-Alt-A",mac:"Ctrl-Alt-A"}}],t.multiSelectCommands=[{name:"singleSelection",bindKey:"esc",exec:function(e){e.exitMultiSelectMode()},readonly:!0,isAvailable:function(e){return e&&e.inMultiSelectMode}}];var i=e("../keyboard/hash_handler").HashHandler;t.keyboardHandler=new i(t.multiSelectCommands)}),define("ace/worker/worker_client",["require","exports","module","ace/lib/oop","ace/lib/event_emitter","ace/config"],function(e,t){var i=e("../lib/oop"),r=e("../lib/event_emitter").EventEmitter,n=e("../config"),o=function(t,i,r){this.$sendDeltaQueue=this.$sendDeltaQueue.bind(this),this.changeListener=this.changeListener.bind(this),this.onMessage=this.onMessage.bind(this),e.nameToUrl&&!e.toUrl&&(e.toUrl=e.nameToUrl);var o;if(n.get("packaged")||!e.toUrl)o=n.moduleUrl(i,"worker");else{var s=this.$normalizePath;o=s(e.toUrl("ace/worker/worker.js",null,"_"));var a={};t.forEach(function(t){a[t]=s(e.toUrl(t,null,"_").replace(/(\.js)?(\?.*)?$/,""))})}this.$worker=new Worker(o),this.$worker.postMessage({init:!0,tlns:a,module:i,classname:r}),this.callbackId=1,this.callbacks={},this.$worker.onmessage=this.onMessage};(function(){i.implement(this,r),this.onMessage=function(e){var t=e.data;switch(t.type){case"log":window.console&&console.log&&console.log.apply(console,t.data);break;case"event":this._emit(t.name,{data:t.data});break;case"call":var i=this.callbacks[t.id];i&&(i(t.data),delete this.callbacks[t.id])}},this.$normalizePath=function(e){return location.host?(e=e.replace(/^[a-z]+:\/\/[^\/]+/,""),e=location.protocol+"//"+location.host+("/"==e.charAt(0)?"":location.pathname.replace(/\/[^\/]*$/,""))+"/"+e.replace(/^[\/]+/,"")):e},this.terminate=function(){this._emit("terminate",{}),this.deltaQueue=null,this.$worker.terminate(),this.$worker=null,this.$doc.removeEventListener("change",this.changeListener),this.$doc=null},this.send=function(e,t){this.$worker.postMessage({command:e,args:t})},this.call=function(e,t,i){if(i){var r=this.callbackId++;this.callbacks[r]=i,t.push(r)}this.send(e,t)},this.emit=function(e,t){try{this.$worker.postMessage({event:e,data:{data:t.data}})}catch(i){}},this.attachToDocument=function(e){this.$doc&&this.terminate(),this.$doc=e,this.call("setValue",[e.getValue()]),e.on("change",this.changeListener)},this.changeListener=function(e){this.deltaQueue?this.deltaQueue.push(e.data):(this.deltaQueue=[e.data],setTimeout(this.$sendDeltaQueue,0))},this.$sendDeltaQueue=function(){var e=this.deltaQueue;e&&(this.deltaQueue=null,e.length>20&&e.length>this.$doc.getLength()>>1?this.call("setValue",[this.$doc.getValue()]):this.emit("change",{data:e}))}}).call(o.prototype);var s=function(e,t,i){this.$sendDeltaQueue=this.$sendDeltaQueue.bind(this),this.changeListener=this.changeListener.bind(this),this.callbackId=1,this.callbacks={},this.messageBuffer=[];var o=null,s=Object.create(r),a=this;this.$worker={},this.$worker.terminate=function(){},this.$worker.postMessage=function(e){a.messageBuffer.push(e),o&&setTimeout(l)};var l=function(){var e=a.messageBuffer.shift();e.command?o[e.command].apply(o,e.args):e.event&&s._emit(e.event,e.data)};s.postMessage=function(e){a.onMessage({data:e})},s.callback=function(e,t){this.postMessage({type:"call",id:t,data:e})},s.emit=function(e,t){this.postMessage({type:"event",name:e,data:t})},n.loadModule(["worker",t],function(e){for(o=new e[i](s);a.messageBuffer.length;)l()})};s.prototype=o.prototype,t.UIWorkerClient=s,t.WorkerClient=o}),define("ace/placeholder",["require","exports","module","ace/range","ace/lib/event_emitter","ace/lib/oop"],function(e,t){var i=e("./range").Range,r=e("./lib/event_emitter").EventEmitter,n=e("./lib/oop"),o=function(e,t,i,r,n,o){var s=this;this.length=t,this.session=e,this.doc=e.getDocument(),this.mainClass=n,this.othersClass=o,this.$onUpdate=this.onUpdate.bind(this),this.doc.on("change",this.$onUpdate),this.$others=r,this.$onCursorChange=function(){setTimeout(function(){s.onCursorChange()})},this.$pos=i;var a=e.getUndoManager().$undoStack||e.getUndoManager().$undostack||{length:-1};this.$undoStackDepth=a.length,this.setup(),e.selection.on("changeCursor",this.$onCursorChange)};(function(){n.implement(this,r),this.setup=function(){var e=this,t=this.doc,r=this.session,n=this.$pos;this.pos=t.createAnchor(n.row,n.column),this.markerId=r.addMarker(new i(n.row,n.column,n.row,n.column+this.length),this.mainClass,null,!1),this.pos.on("change",function(t){r.removeMarker(e.markerId),e.markerId=r.addMarker(new i(t.value.row,t.value.column,t.value.row,t.value.column+e.length),e.mainClass,null,!1)}),this.others=[],this.$others.forEach(function(i){var r=t.createAnchor(i.row,i.column);e.others.push(r)}),r.setUndoSelect(!1)},this.showOtherMarkers=function(){if(!this.othersActive){var e=this.session,t=this;this.othersActive=!0,this.others.forEach(function(r){r.markerId=e.addMarker(new i(r.row,r.column,r.row,r.column+t.length),t.othersClass,null,!1),r.on("change",function(n){e.removeMarker(r.markerId),r.markerId=e.addMarker(new i(n.value.row,n.value.column,n.value.row,n.value.column+t.length),t.othersClass,null,!1)})})}},this.hideOtherMarkers=function(){if(this.othersActive){this.othersActive=!1;for(var e=0;e<this.others.length;e++)this.session.removeMarker(this.others[e].markerId)}},this.onUpdate=function(e){var t=e.data,r=t.range;if(r.start.row===r.end.row&&r.start.row===this.pos.row&&!this.$updating){this.$updating=!0;var n="insertText"===t.action?r.end.column-r.start.column:r.start.column-r.end.column;if(r.start.column>=this.pos.column&&r.start.column<=this.pos.column+this.length+1){var o=r.start.column-this.pos.column;if(this.length+=n,!this.session.$fromUndo){if("insertText"===t.action)for(var s=this.others.length-1;s>=0;s--){var a=this.others[s],l={row:a.row,column:a.column+o};a.row===r.start.row&&r.start.column<a.column&&(l.column+=n),this.doc.insert(l,t.text)}else if("removeText"===t.action)for(var s=this.others.length-1;s>=0;s--){var a=this.others[s],l={row:a.row,column:a.column+o};a.row===r.start.row&&r.start.column<a.column&&(l.column+=n),this.doc.remove(new i(l.row,l.column,l.row,l.column-n))}r.start.column===this.pos.column&&"insertText"===t.action?setTimeout(function(){this.pos.setPosition(this.pos.row,this.pos.column-n);for(var e=0;e<this.others.length;e++){var t=this.others[e],i={row:t.row,column:t.column-n};t.row===r.start.row&&r.start.column<t.column&&(i.column+=n),t.setPosition(i.row,i.column)}}.bind(this),0):r.start.column===this.pos.column&&"removeText"===t.action&&setTimeout(function(){for(var e=0;e<this.others.length;e++){var t=this.others[e];t.row===r.start.row&&r.start.column<t.column&&t.setPosition(t.row,t.column-n)}}.bind(this),0)}this.pos._emit("change",{value:this.pos});for(var s=0;s<this.others.length;s++)this.others[s]._emit("change",{value:this.others[s]})}this.$updating=!1}},this.onCursorChange=function(e){if(!this.$updating){var t=this.session.selection.getCursor();t.row===this.pos.row&&t.column>=this.pos.column&&t.column<=this.pos.column+this.length?(this.showOtherMarkers(),this._emit("cursorEnter",e)):(this.hideOtherMarkers(),this._emit("cursorLeave",e))}},this.detach=function(){this.session.removeMarker(this.markerId),this.hideOtherMarkers(),this.doc.removeEventListener("change",this.$onUpdate),this.session.selection.removeEventListener("changeCursor",this.$onCursorChange),this.pos.detach();for(var e=0;e<this.others.length;e++)this.others[e].detach();this.session.setUndoSelect(!0)},this.cancel=function(){if(-1===this.$undoStackDepth)throw Error("Canceling placeholders only supported with undo manager attached to session.");for(var e=this.session.getUndoManager(),t=(e.$undoStack||e.$undostack).length-this.$undoStackDepth,i=0;t>i;i++)e.undo(!0)}}).call(o.prototype),t.PlaceHolder=o}),define("ace/mode/folding/fold_mode",["require","exports","module","ace/range"],function(e,t){var i=e("../../range").Range,r=t.FoldMode=function(){};(function(){this.foldingStartMarker=null,this.foldingStopMarker=null,this.getFoldWidget=function(e,t,i){var r=e.getLine(i);return this.foldingStartMarker.test(r)?"start":"markbeginend"==t&&this.foldingStopMarker&&this.foldingStopMarker.test(r)?"end":""},this.getFoldWidgetRange=function(){return null},this.indentationBlock=function(e,t,r){var n=/\S/,o=e.getLine(t),s=o.search(n);if(-1!=s){for(var a=r||o.length,l=e.getLength(),h=t,c=t;++t<l;){var u=e.getLine(t).search(n);if(-1!=u){if(s>=u)break;c=t}}if(c>h){var d=e.getLine(c).length;return new i(h,a,c,d)}}},this.openingBracketBlock=function(e,t,r,n,o){var s={row:r,column:n+1},a=e.$findClosingBracket(t,s,o);if(a){var l=e.foldWidgets[a.row];return null==l&&(l=e.getFoldWidget(a.row)),"start"==l&&a.row>s.row&&(a.row--,a.column=e.getLine(a.row).length),i.fromPoints(s,a)}},this.closingBracketBlock=function(e,t,r,n){var o={row:r,column:n},s=e.$findOpeningBracket(t,o);if(s)return s.column++,o.column--,i.fromPoints(s,o)}}).call(r.prototype)}),define("ace/theme/textmate",["require","exports","module","ace/lib/dom"],function(e,t){t.isDark=!1,t.cssClass="ace-tm",t.cssText='.ace-tm .ace_gutter {background: #f0f0f0;color: #333;}.ace-tm .ace_print-margin {width: 1px;background: #e8e8e8;}.ace-tm .ace_fold {background-color: #6B72E6;}.ace-tm {background-color: #FFFFFF;}.ace-tm .ace_cursor {color: black;}.ace-tm .ace_invisible {color: rgb(191, 191, 191);}.ace-tm .ace_storage,.ace-tm .ace_keyword {color: blue;}.ace-tm .ace_constant {color: rgb(197, 6, 11);}.ace-tm .ace_constant.ace_buildin {color: rgb(88, 72, 246);}.ace-tm .ace_constant.ace_language {color: rgb(88, 92, 246);}.ace-tm .ace_constant.ace_library {color: rgb(6, 150, 14);}.ace-tm .ace_invalid {background-color: rgba(255, 0, 0, 0.1);color: red;}.ace-tm .ace_support.ace_function {color: rgb(60, 76, 114);}.ace-tm .ace_support.ace_constant {color: rgb(6, 150, 14);}.ace-tm .ace_support.ace_type,.ace-tm .ace_support.ace_class {color: rgb(109, 121, 222);}.ace-tm .ace_keyword.ace_operator {color: rgb(104, 118, 135);}.ace-tm .ace_string {color: rgb(3, 106, 7);}.ace-tm .ace_comment {color: rgb(76, 136, 107);}.ace-tm .ace_comment.ace_doc {color: rgb(0, 102, 255);}.ace-tm .ace_comment.ace_doc.ace_tag {color: rgb(128, 159, 191);}.ace-tm .ace_constant.ace_numeric {color: rgb(0, 0, 205);}.ace-tm .ace_variable {color: rgb(49, 132, 149);}.ace-tm .ace_xml-pe {color: rgb(104, 104, 91);}.ace-tm .ace_entity.ace_name.ace_function {color: #0000A2;}.ace-tm .ace_heading {color: rgb(12, 7, 255);}.ace-tm .ace_list {color:rgb(185, 6, 144);}.ace-tm .ace_meta.ace_tag {color:rgb(0, 22, 142);}.ace-tm .ace_string.ace_regex {color: rgb(255, 0, 0)}.ace-tm .ace_marker-layer .ace_selection {background: rgb(181, 213, 255);}.ace-tm.ace_multiselect .ace_selection.ace_start {box-shadow: 0 0 3px 0px white;border-radius: 2px;}.ace-tm .ace_marker-layer .ace_step {background: rgb(252, 255, 0);}.ace-tm .ace_marker-layer .ace_stack {background: rgb(164, 229, 101);}.ace-tm .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid rgb(192, 192, 192);}.ace-tm .ace_marker-layer .ace_active-line {background: rgba(0, 0, 0, 0.07);}.ace-tm .ace_gutter-active-line {background-color : #dcdcdc;}.ace-tm .ace_marker-layer .ace_selected-word {background: rgb(250, 250, 255);border: 1px solid rgb(200, 200, 250);}.ace-tm .ace_indent-guide {background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;}';var i=e("../lib/dom");i.importCssString(t.cssText,t.cssClass)}),define("ace/ext/error_marker",["require","exports","module","ace/line_widgets","ace/lib/dom","ace/range"],function(e,t){function i(e,t,i){for(var r=0,n=e.length-1;n>=r;){var o=r+n>>1,s=i(t,e[o]);if(s>0)r=o+1;else{if(!(0>s))return o;n=o-1}}return-(r+1)}function r(e,t,r){var n=e.getAnnotations().sort(s.comparePoints);if(n.length){var o=i(n,{row:t,column:-1},s.comparePoints);0>o&&(o=-o-1),o>=n.length-1?o=r>0?0:n.length-1:0===o&&0>r&&(o=n.length-1);var a=n[o];if(a&&r){if(a.row===t){do a=n[o+=r];while(a&&a.row===t);if(!a)return n.slice()}var l=[];t=a.row;do l[0>r?"unshift":"push"](a),a=n[o+=r];while(a&&a.row==t);return l.length&&l}}}var n=e("ace/line_widgets").LineWidgets,o=e("ace/lib/dom"),s=e("ace/range").Range;t.showErrorMarker=function(e,t){var i=e.session;i.widgetManager||(i.widgetManager=new n(i),i.widgetManager.attach(e));var s=e.getCursorPosition(),a=s.row,l=i.lineWidgets&&i.lineWidgets[a];l?l.destroy():a-=t;var h,c=r(i,a,t);if(c){var u=c[0];u.pos&&null==u.column&&(s.column=u.pos.sc),s.row=u.row,h=e.renderer.$gutterLayer.$annotations[s.row]}else{if(l)return;h={text:["Looks good!"],className:"ace_ok"}}e.session.unfold(s.row),e.selection.moveCursorToPosition(s),e.selection.clearSelection();var d={row:s.row,fixedWidth:!0,coverGutter:!0,el:o.createElement("div")},f=d.el.appendChild(o.createElement("div")),m=d.el.appendChild(o.createElement("div"));m.className="error_widget_arrow "+h.className;var p=e.renderer.$cursorLayer.getPixelPosition(s).left;m.style.left=p+e.renderer.gutterWidth-5+"px",d.el.className="error_widget_wrapper",f.className="error_widget "+h.className,f.innerHTML=h.text.join("<br>");var g={handleKeyboard:function(e,t,i){return 0===t&&"esc"===i?(d.destroy(),!0):void 0}};d.destroy=function(){e.$mouseHandler.isMousePressed||(e.keyBinding.removeKeyboardHandler(g),i.widgetManager.removeLineWidget(d),e.off("changeSelection",d.destroy),e.off("changeSession",d.destroy),e.off("mouseup",d.destroy),e.off("change",d.destroy))},e.keyBinding.addKeyboardHandler(g),e.on("changeSelection",d.destroy),e.on("changeSession",d.destroy),e.on("mouseup",d.destroy),e.on("change",d.destroy),e.session.widgetManager.addLineWidget(d),d.el.onmousedown=e.focus.bind(e)},o.importCssString("    .error_widget_wrapper {        background: inherit;        color: inherit;        border:none    }    .error_widget {        border-top: solid 2px;        border-bottom: solid 2px;        margin: 5px 0;        padding: 10px 40px;        white-space: pre-wrap;    }    .error_widget.ace_error, .error_widget_arrow.ace_error{        border-color: #ff5a5a    }    .error_widget.ace_warning, .error_widget_arrow.ace_warning{        border-color: #F1D817    }    .error_widget.ace_info, .error_widget_arrow.ace_info{        border-color: #5a5a5a    }    .error_widget.ace_ok, .error_widget_arrow.ace_ok{        border-color: #5aaa5a    }    .error_widget_arrow {        position: absolute;        border: solid 5px;        border-top-color: transparent!important;        border-right-color: transparent!important;        border-left-color: transparent!important;        top: -5px;    }","")}),define("ace/line_widgets",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/range"],function(e,t){function i(e){this.session=e,this.session.widgetManager=this,this.session.getRowLength=this.getRowLength,this.session.$getWidgetScreenLength=this.$getWidgetScreenLength,this.updateOnChange=this.updateOnChange.bind(this),this.renderWidgets=this.renderWidgets.bind(this),this.measureWidgets=this.measureWidgets.bind(this),this.session._changedWidgets=[],this.detach=this.detach.bind(this),this.session.on("change",this.updateOnChange)}{var r=(e("./lib/oop"),e("./lib/dom"));e("./range").Range}(function(){this.getRowLength=function(e){var t;return t=this.lineWidgets?this.lineWidgets[e]&&this.lineWidgets[e].rowCount||0:0,this.$useWrapMode&&this.$wrapData[e]?this.$wrapData[e].length+1+t:1+t},this.$getWidgetScreenLength=function(){var e=0;return this.lineWidgets.forEach(function(t){t&&t.rowCount&&(e+=t.rowCount)}),e},this.attach=function(e){e.widgetManager&&e.widgetManager!=this&&e.widgetManager.detach(),this.editor!=e&&(this.detach(),this.editor=e,this.editor.on("changeSession",this.detach),e.widgetManager=this,e.setOption("enableLineWidgets",!0),e.renderer.on("beforeRender",this.measureWidgets),e.renderer.on("afterRender",this.renderWidgets))},this.detach=function(e){if(!e||e.session!=this.session){var t=this.editor;if(t){t.off("changeSession",this.detach),this.editor=null,t.widgetManager=null,t.renderer.off("beforeRender",this.measureWidgets),t.renderer.off("afterRender",this.renderWidgets);var i=this.session.lineWidgets;i&&i.forEach(function(e){e&&e.el&&e.el.parentNode&&(e._inDocument=!1,e.el.parentNode.removeChild(e.el))})}}},this.updateOnChange=function(e){var t=this.session.lineWidgets;if(t){var i=e.data,r=i.range,n=r.start.row,o=r.end.row-n;if(0!==o)if("removeText"==i.action||"removeLines"==i.action){var s=t.splice(n+1,o);s.forEach(function(e){e&&this.removeLineWidget(e)},this),this.$updateRows()}else{var a=new Array(o);a.unshift(n,0),t.splice.apply(t,a),this.$updateRows()}}},this.$updateRows=function(){var e=this.session.lineWidgets;if(e){var t=!0;e.forEach(function(e,i){e&&(t=!1,e.row=i)}),t&&(this.session.lineWidgets=null)}},this.addLineWidget=function(e){this.session.lineWidgets||(this.session.lineWidgets=new Array(this.session.getLength())),this.session.lineWidgets[e.row]=e;var t=this.editor.renderer;return e.html&&!e.el&&(e.el=r.createElement("div"),e.el.innerHTML=e.html),e.el&&(r.addCssClass(e.el,"ace_lineWidgetContainer"),e.el.style.position="absolute",e.el.style.zIndex=5,t.container.appendChild(e.el),e._inDocument=!0),e.coverGutter||(e.el.style.zIndex=3),e.pixelHeight||(e.pixelHeight=e.el.offsetHeight),null==e.rowCount&&(e.rowCount=e.pixelHeight/t.layerConfig.lineHeight),this.session._emit("changeFold",{data:{start:{row:e.row}}}),this.$updateRows(),this.renderWidgets(null,t),e},this.removeLineWidget=function(e){if(e._inDocument=!1,e.el&&e.el.parentNode&&e.el.parentNode.removeChild(e.el),e.editor&&e.editor.destroy)try{e.editor.destroy()}catch(t){}this.session.lineWidgets&&(this.session.lineWidgets[e.row]=void 0),this.session._emit("changeFold",{data:{start:{row:e.row}}}),this.$updateRows()},this.onWidgetChanged=function(e){this.session._changedWidgets.push(e),this.editor&&this.editor.renderer.updateFull()},this.measureWidgets=function(e,t){var i=this.session._changedWidgets,r=t.layerConfig;if(i&&i.length){for(var n=1/0,o=0;o<i.length;o++){var s=i[o];s._inDocument||(s._inDocument=!0,t.container.appendChild(s.el)),s.h=s.el.offsetHeight,s.fixedWidth||(s.w=s.el.offsetWidth,s.screenWidth=Math.ceil(s.w/r.characterWidth));var a=s.h/r.lineHeight;s.coverLine&&(a-=this.session.getRowLineCount(s.row),0>a&&(a=0)),s.rowCount!=a&&(s.rowCount=a,s.row<n&&(n=s.row))}1/0!=n&&(this.session._emit("changeFold",{data:{start:{row:n}}}),this.session.lineWidgetWidth=null),this.session._changedWidgets=[]}},this.renderWidgets=function(e,t){var i=t.layerConfig,r=this.session.lineWidgets;if(r){for(var n=Math.min(this.firstRow,i.firstRow),o=Math.max(this.lastRow,i.lastRow,r.length);n>0&&!r[n];)n--;this.firstRow=i.firstRow,this.lastRow=i.lastRow,t.$cursorLayer.config=i;for(var s=n;o>=s;s++){var a=r[s];if(a&&a.el){a._inDocument||(a._inDocument=!0,t.container.appendChild(a.el));var l=t.$cursorLayer.getPixelPosition({row:s,column:0},!0).top;a.coverLine||(l+=i.lineHeight*this.session.getRowLineCount(a.row)),a.el.style.top=l-i.offset+"px";var h=a.coverGutter?0:t.gutterWidth;a.fixedWidth||(h-=t.scrollLeft),a.el.style.left=h+"px",a.el.style.right=a.fixedWidth?t.scrollBar.getWidth()+"px":""}}}}}).call(i.prototype),t.LineWidgets=i}),function(){window.require(["ace/ace"],function(e){e&&e.config.init(),window.ace||(window.ace={});for(var t in e)e.hasOwnProperty(t)&&(ace[t]=e[t])})}(),define("ace/snippets/glsl",["require","exports","module"],function(e,t){t.snippetText="",t.scope="glsl"}),define("ace/ext/language_tools",["require","exports","module","ace/snippets","ace/autocomplete","ace/config","ace/autocomplete/text_completer","ace/editor"],function(e,t){var i=e("../snippets").snippetManager,r=e("../autocomplete").Autocomplete,n=e("../config"),o=e("../autocomplete/text_completer"),s={getCompletions:function(e,t,i,r,n){var o=e.session.getState(i.row),s=t.$mode.getCompletions(o,t,i,r);n(null,s)}},a={getCompletions:function(e,t,r,n,o){var s=i.snippetMap,a=[];i.getActiveScopes(e).forEach(function(e){for(var t=s[e]||[],i=t.length;i--;){var r=t[i],n=r.name||r.tabTrigger;n&&a.push({caption:n,snippet:r.content,meta:r.tabTrigger&&!r.name?r.tabTrigger+"⇥ ":"snippet"})}},this),o(null,a)}},l=[a,o,s];t.addCompleter=function(e){l.push(e)};var h={name:"expandSnippet",exec:function(e){var t=i.expandWithTab(e);t||e.execCommand("indent")},bindKey:"tab"},c=function(e,t){u(t.session.$mode)},u=function(e){var t=e.$id;i.files||(i.files={}),d(t),e.modes&&e.modes.forEach(u)},d=function(e){if(e&&!i.files[e]){var t=e.replace("mode","snippets");i.files[e]={},n.loadModule(t,function(t){t&&(i.files[e]=t,t.snippets=i.parseSnippetFile(t.snippetText),i.register(t.snippets,t.scope),t.includeScopes&&(i.snippetMap[t.scope].includeScopes=t.includeScopes,t.includeScopes.forEach(function(e){d("ace/mode/"+e)})))})}},f=e("../editor").Editor;e("../config").defineOptions(f.prototype,"editor",{enableBasicAutocompletion:{set:function(e){e?(this.completers=l,this.commands.addCommand(r.startCommand)):this.commands.removeCommand(r.startCommand)},value:!1},enableSnippets:{set:function(e){e?(this.commands.addCommand(h),this.on("changeMode",c),c(null,this)):(this.commands.removeCommand(h),this.off("changeMode",c))},value:!1}})}),define("ace/snippets",["require","exports","module","ace/lib/lang","ace/range","ace/keyboard/hash_handler","ace/tokenizer","ace/lib/dom"],function(e,t){var i=e("./lib/lang"),r=e("./range").Range,n=e("./keyboard/hash_handler").HashHandler,o=e("./tokenizer").Tokenizer,s=r.comparePoints,a=function(){this.snippetMap={},this.snippetNameMap={}};(function(){this.getTokenizer=function(){function e(e,t,i){return e=e.substr(1),/^\d+$/.test(e)&&!i.inFormatString?[{tabstopId:parseInt(e,10)}]:[{text:e}]}function t(e){return"(?:[^\\\\"+e+"]|\\\\.)"}return a.$tokenizer=new o({start:[{regex:/:/,onMatch:function(e,t,i){return i.length&&i[0].expectIf?(i[0].expectIf=!1,i[0].elseBranch=i[0],[i[0]]):":"}},{regex:/\\./,onMatch:function(e,t,i){var r=e[1];return"}"==r&&i.length?e=r:-1!="`$\\".indexOf(r)?e=r:i.inFormatString&&("n"==r?e="\n":"t"==r?e="\n":-1!="ulULE".indexOf(r)&&(e={changeCase:r,local:r>"a"})),[e]}},{regex:/}/,onMatch:function(e,t,i){return[i.length?i.shift():e]}},{regex:/\$(?:\d+|\w+)/,onMatch:e},{regex:/\$\{[\dA-Z_a-z]+/,onMatch:function(t,i,r){var n=e(t.substr(1),i,r);return r.unshift(n[0]),n},next:"snippetVar"},{regex:/\n/,token:"newline",merge:!1}],snippetVar:[{regex:"\\|"+t("\\|")+"*\\|",onMatch:function(e,t,i){i[0].choices=e.slice(1,-1).split(",")},next:"start"},{regex:"/("+t("/")+"+)/(?:("+t("/")+"*)/)(\\w*):?",onMatch:function(e,t,i){var r=i[0];return r.fmtString=e,e=this.splitRegex.exec(e),r.guard=e[1],r.fmt=e[2],r.flag=e[3],""},next:"start"},{regex:"`"+t("`")+"*`",onMatch:function(e,t,i){return i[0].code=e.splice(1,-1),""},next:"start"},{regex:"\\?",onMatch:function(e,t,i){i[0]&&(i[0].expectIf=!0)},next:"start"},{regex:"([^:}\\\\]|\\\\.)*:?",token:"",next:"start"}],formatString:[{regex:"/("+t("/")+"+)/",token:"regex"},{regex:"",onMatch:function(e,t,i){i.inFormatString=!0},next:"start"}]}),a.prototype.getTokenizer=function(){return a.$tokenizer},a.$tokenizer},this.tokenizeTmSnippet=function(e,t){return this.getTokenizer().getLineTokens(e,t).tokens.map(function(e){return e.value||e})},this.$getDefaultValue=function(e,t){if(/^[A-Z]\d+$/.test(t)){var i=t.substr(1);return(this.variables[t[0]+"__"]||{})[i]}if(/^\d+$/.test(t))return(this.variables.__||{})[t];if(t=t.replace(/^TM_/,""),e){var r=e.session;switch(t){case"CURRENT_WORD":var n=r.getWordRange();case"SELECTION":case"SELECTED_TEXT":return r.getTextRange(n);case"CURRENT_LINE":return r.getLine(e.getCursorPosition().row);case"PREV_LINE":return r.getLine(e.getCursorPosition().row-1);case"LINE_INDEX":return e.getCursorPosition().column;case"LINE_NUMBER":return e.getCursorPosition().row+1;case"SOFT_TABS":return r.getUseSoftTabs()?"YES":"NO";case"TAB_SIZE":return r.getTabSize();case"FILENAME":case"FILEPATH":return"ace.ajax.org";case"FULLNAME":return"Ace"}}},this.variables={},this.getVariableValue=function(e,t){return this.variables.hasOwnProperty(t)?this.variables[t](e,t)||"":this.$getDefaultValue(e,t)||""},this.tmStrFormat=function(e,t,i){var r=t.flag||"",n=t.guard;n=new RegExp(n,r.replace(/[^gi]/,""));var o=this.tokenizeTmSnippet(t.fmt,"formatString"),s=this,a=e.replace(n,function(){s.variables.__=arguments;for(var e=s.resolveVariables(o,i),t="E",r=0;r<e.length;r++){var n=e[r];if("object"==typeof n)if(e[r]="",n.changeCase&&n.local){var a=e[r+1];a&&"string"==typeof a&&(e[r]="u"==n.changeCase?a[0].toUpperCase():a[0].toLowerCase(),e[r+1]=a.substr(1))}else n.changeCase&&(t=n.changeCase);else"U"==t?e[r]=n.toUpperCase():"L"==t&&(e[r]=n.toLowerCase())}return e.join("")});return this.variables.__=null,a},this.resolveVariables=function(e,t){function i(t){var i=e.indexOf(t,n+1);-1!=i&&(n=i)}for(var r=[],n=0;n<e.length;n++){var o=e[n];if("string"==typeof o)r.push(o);else{if("object"!=typeof o)continue;if(o.skip)i(o);else{if(o.processed<n)continue;if(o.text){var s=this.getVariableValue(t,o.text);s&&o.fmtString&&(s=this.tmStrFormat(s,o)),o.processed=n,null==o.expectIf?s&&(r.push(s),i(o)):s?o.skip=o.elseBranch:i(o)}else null!=o.tabstopId?r.push(o):null!=o.changeCase&&r.push(o)}}}return r},this.insertSnippet=function(e,t){function i(e){for(var t=[],i=0;i<e.length;i++){var r=e[i];if("object"==typeof r){if(c[r.tabstopId])continue;var n=e.lastIndexOf(r,i-1);r=t[n]||{tabstopId:r.tabstopId}}t[i]=r}return t}var r=e.getCursorPosition(),n=e.session.getLine(r.row),o=n.match(/^\s*/)[0],s=e.session.getTabString(),a=this.tokenizeTmSnippet(t);a=this.resolveVariables(a,e),a=a.map(function(e){return"\n"==e?e+o:"string"==typeof e?e.replace(/\t/g,s):e});var h=[];a.forEach(function(e,t){if("object"==typeof e){var i=e.tabstopId,r=h[i];if(r||(r=h[i]=[],r.index=i,r.value=""),-1===r.indexOf(e)){r.push(e);var n=a.indexOf(e,t+1);if(-1!==n){var o=a.slice(t+1,n),s=o.some(function(e){return"object"==typeof e});s&&!r.value?r.value=o:o.length&&(!r.value||"string"!=typeof r.value)&&(r.value=o.join(""))}}}}),h.forEach(function(e){e.length=0});for(var c={},u=0;u<a.length;u++){var d=a[u];if("object"==typeof d){var f=d.tabstopId,m=a.indexOf(d,u+1);if(c[f]!=d){var p=h[f],g="string"==typeof p.value?[p.value]:i(p.value);g.unshift(u+1,Math.max(0,m-u)),g.push(d),c[f]=d,a.splice.apply(a,g),-1===p.indexOf(d)&&p.push(d)}else c[f]=null}}var E=0,v=0,y="";a.forEach(function(e){"string"==typeof e?("\n"===e[0]?(v=e.length-1,E++):v+=e.length,y+=e):e.start?e.end={row:E,column:v}:e.start={row:E,column:v}});var x=e.getSelectionRange(),T=e.session.replace(x,y),w=new l(e);w.addTabstops(h,x.start,T),w.tabNext()},this.$getScope=function(e){var t=e.session.$mode.$id||"";if(t=t.split("/").pop(),"html"===t||"php"===t){"php"===t&&(t="html");var i=e.getCursorPosition(),r=e.session.getState(i.row);"object"==typeof r&&(r=r[0]),r.substring&&("js-"==r.substring(0,3)?t="javascript":"css-"==r.substring(0,4)?t="css":"php-"==r.substring(0,4)&&(t="php"))}return t},this.getActiveScopes=function(e){var t=this.$getScope(e),i=[t],r=this.snippetMap;return r[t]&&r[t].includeScopes&&i.push.apply(i,r[t].includeScopes),i.push("_"),i},this.expandWithTab=function(e){var t,i=e.getCursorPosition(),r=e.session.getLine(i.row),n=r.substring(0,i.column),o=r.substr(i.column),s=this.snippetMap;return this.getActiveScopes(e).some(function(e){var i=s[e];return i&&(t=this.findMatchingSnippet(i,n,o)),!!t},this),t?(e.session.doc.removeInLine(i.row,i.column-t.replaceBefore.length,i.column+t.replaceAfter.length),this.variables.M__=t.matchBefore,this.variables.T__=t.matchAfter,this.insertSnippet(e,t.content),this.variables.M__=this.variables.T__=null,!0):!1},this.findMatchingSnippet=function(e,t,i){for(var r=e.length;r--;){var n=e[r];if(!(n.startRe&&!n.startRe.test(t)||n.endRe&&!n.endRe.test(i)||!n.startRe&&!n.endRe))return n.matchBefore=n.startRe?n.startRe.exec(t):[""],n.matchAfter=n.endRe?n.endRe.exec(i):[""],n.replaceBefore=n.triggerRe?n.triggerRe.exec(t)[0]:"",n.replaceAfter=n.endTriggerRe?n.endTriggerRe.exec(i)[0]:"",n}},this.snippetMap={},this.snippetNameMap={},this.register=function(e,t){function r(e){return e&&!/^\^?\(.*\)\$?$|^\\b$/.test(e)&&(e="(?:"+e+")"),e||""}function n(e,t,i){return e=r(e),t=r(t),i?(e=t+e,e&&"$"!=e[e.length-1]&&(e+="$")):(e+=t,e&&"^"!=e[0]&&(e="^"+e)),new RegExp(e)}function o(e){e.scope||(e.scope=t||"_"),t=e.scope,s[t]||(s[t]=[],a[t]={});var r=a[t];if(e.name){var o=r[e.name];o&&l.unregister(o),r[e.name]=e}s[t].push(e),e.tabTrigger&&!e.trigger&&(!e.guard&&/^\w/.test(e.tabTrigger)&&(e.guard="\\b"),e.trigger=i.escapeRegExp(e.tabTrigger)),e.startRe=n(e.trigger,e.guard,!0),e.triggerRe=new RegExp(e.trigger,"",!0),e.endRe=n(e.endTrigger,e.endGuard,!0),e.endTriggerRe=new RegExp(e.endTrigger,"",!0)}var s=this.snippetMap,a=this.snippetNameMap,l=this;e.content?o(e):Array.isArray(e)&&e.forEach(o)},this.unregister=function(e,t){function i(e){var i=n[e.scope||t];if(i&&i[e.name]){delete i[e.name];var o=r[e.scope||t],s=o&&o.indexOf(e);s>=0&&o.splice(s,1)}}var r=this.snippetMap,n=this.snippetNameMap;e.content?i(e):Array.isArray(e)&&e.forEach(i)},this.parseSnippetFile=function(e){e=e.replace(/\r/g,"");for(var t,i=[],r={},n=/^#.*|^({[\s\S]*})\s*$|^(\S+) (.*)$|^((?:\n*\t.*)+)/gm;t=n.exec(e);){if(t[1])try{r=JSON.parse(t[1]),i.push(r)}catch(o){}if(t[4])r.content=t[4].replace(/^\t/gm,""),i.push(r),r={};else{var s=t[2],a=t[3];if("regex"==s){var l=/\/((?:[^\/\\]|\\.)*)|$/g;r.guard=l.exec(a)[1],r.trigger=l.exec(a)[1],r.endTrigger=l.exec(a)[1],r.endGuard=l.exec(a)[1]}else"snippet"==s?(r.tabTrigger=a.match(/^\S*/)[0],r.name||(r.name=a)):r[s]=a}}return i},this.getSnippetByName=function(e,t){var i,r=this.snippetNameMap;return this.getActiveScopes(t).some(function(t){var n=r[t];return n&&(i=n[e]),!!i},this),i}}).call(a.prototype);var l=function(e){return e.tabstopManager?e.tabstopManager:(e.tabstopManager=this,this.$onChange=this.onChange.bind(this),this.$onChangeSelection=i.delayedCall(this.onChangeSelection.bind(this)).schedule,this.$onChangeSession=this.onChangeSession.bind(this),this.$onAfterExec=this.onAfterExec.bind(this),this.attach(e),void 0)};(function(){this.attach=function(e){this.index=-1,this.ranges=[],this.tabstops=[],this.selectedTabstop=null,this.editor=e,this.editor.on("change",this.$onChange),this.editor.on("changeSelection",this.$onChangeSelection),this.editor.on("changeSession",this.$onChangeSession),this.editor.commands.on("afterExec",this.$onAfterExec),this.editor.keyBinding.addKeyboardHandler(this.keyboardHandler)},this.detach=function(){this.tabstops.forEach(this.removeTabstopMarkers,this),this.ranges=null,this.tabstops=null,this.selectedTabstop=null,this.editor.removeListener("change",this.$onChange),this.editor.removeListener("changeSelection",this.$onChangeSelection),this.editor.removeListener("changeSession",this.$onChangeSession),this.editor.commands.removeListener("afterExec",this.$onAfterExec),this.editor.keyBinding.removeKeyboardHandler(this.keyboardHandler),this.editor.tabstopManager=null,this.editor=null},this.onChange=function(e){var t=e.data.range,i="r"==e.data.action[0],r=t.start,n=t.end,o=r.row,a=n.row,l=a-o,h=n.column-r.column;if(i&&(l=-l,h=-h),!this.$inChange&&i){var c=this.selectedTabstop,u=!c.some(function(e){return s(e.start,r)<=0&&s(e.end,n)>=0});if(u)return this.detach()}for(var d=this.ranges,f=0;f<d.length;f++){var m=d[f];m.end.row<r.row||(s(r,m.start)<0&&s(n,m.end)>0?(this.removeRange(m),f--):(m.start.row==o&&m.start.column>r.column&&(m.start.column+=h),m.end.row==o&&m.end.column>=r.column&&(m.end.column+=h),m.start.row>=o&&(m.start.row+=l),m.end.row>=o&&(m.end.row+=l),s(m.start,m.end)>0&&this.removeRange(m)))}d.length||this.detach()},this.updateLinkedFields=function(){var e=this.selectedTabstop;if(e.hasLinkedRanges){this.$inChange=!0;for(var i=this.editor.session,r=i.getTextRange(e.firstNonLinked),n=e.length;n--;){var o=e[n];if(o.linked){var s=t.snippetManager.tmStrFormat(r,o.original);i.replace(o,s)}}this.$inChange=!1}},this.onAfterExec=function(e){e.command&&!e.command.readOnly&&this.updateLinkedFields()},this.onChangeSelection=function(){if(this.editor){for(var e=this.editor.selection.lead,t=this.editor.selection.anchor,i=this.editor.selection.isEmpty(),r=this.ranges.length;r--;)if(!this.ranges[r].linked){var n=this.ranges[r].contains(e.row,e.column),o=i||this.ranges[r].contains(t.row,t.column);if(n&&o)return}this.detach()}},this.onChangeSession=function(){this.detach()},this.tabNext=function(e){var t=this.tabstops.length-1,i=this.index+(e||1);i=Math.min(Math.max(i,0),t),this.selectTabstop(i),i==t&&this.detach()},this.selectTabstop=function(e){var t=this.tabstops[this.index];if(t&&this.addTabstopMarkers(t),this.index=e,t=this.tabstops[this.index],t&&t.length){if(this.selectedTabstop=t,this.editor.inVirtualSelectionMode)this.editor.selection.setRange(t.firstNonLinked);
else{var i=this.editor.multiSelect;i.toSingleRange(t.firstNonLinked.clone());for(var r=t.length;r--;)t.hasLinkedRanges&&t[r].linked||i.addRange(t[r].clone(),!0)}this.editor.keyBinding.addKeyboardHandler(this.keyboardHandler)}},this.addTabstops=function(e,t,i){if(!e[0]){var n=r.fromPoints(i,i);c(n.start,t),c(n.end,t),e[0]=[n],e[0].index=0}{var o=this.index,s=[o,0],a=this.ranges;this.editor}e.forEach(function(e){for(var i=e.length;i--;){var n=e[i],o=r.fromPoints(n.start,n.end||n.start);h(o.start,t),h(o.end,t),o.original=n,o.tabstop=e,a.push(o),e[i]=o,n.fmtString?(o.linked=!0,e.hasLinkedRanges=!0):e.firstNonLinked||(e.firstNonLinked=o)}e.firstNonLinked||(e.hasLinkedRanges=!1),s.push(e),this.addTabstopMarkers(e)},this),s.push(s.splice(2,1)[0]),this.tabstops.splice.apply(this.tabstops,s)},this.addTabstopMarkers=function(e){var t=this.editor.session;e.forEach(function(e){e.markerId||(e.markerId=t.addMarker(e,"ace_snippet-marker","text"))})},this.removeTabstopMarkers=function(e){var t=this.editor.session;e.forEach(function(e){t.removeMarker(e.markerId),e.markerId=null})},this.removeRange=function(e){var t=e.tabstop.indexOf(e);e.tabstop.splice(t,1),t=this.ranges.indexOf(e),this.ranges.splice(t,1),this.editor.session.removeMarker(e.markerId)},this.keyboardHandler=new n,this.keyboardHandler.bindKeys({Tab:function(e){t.snippetManager&&t.snippetManager.expandWithTab(e)||e.tabstopManager.tabNext(1)},"Shift-Tab":function(e){e.tabstopManager.tabNext(-1)},Esc:function(e){e.tabstopManager.detach()},Return:function(){return!1}})}).call(l.prototype);var h=function(e,t){0==e.row&&(e.column+=t.column),e.row+=t.row},c=function(e,t){e.row==t.row&&(e.column-=t.column),e.row-=t.row};e("./lib/dom").importCssString(".ace_snippet-marker {    -moz-box-sizing: border-box;    box-sizing: border-box;    background: rgba(194, 193, 208, 0.09);    border: 1px dotted rgba(211, 208, 235, 0.62);    position: absolute;}"),t.snippetManager=new a}),define("ace/autocomplete",["require","exports","module","ace/keyboard/hash_handler","ace/autocomplete/popup","ace/autocomplete/util","ace/lib/event","ace/lib/lang","ace/snippets"],function(e,t){var i=e("./keyboard/hash_handler").HashHandler,r=e("./autocomplete/popup").AcePopup,n=e("./autocomplete/util"),o=e("./lib/event"),s=e("./lib/lang"),a=e("./snippets").snippetManager,l=function(){this.autoInsert=!0,this.keyboardHandler=new i,this.keyboardHandler.bindKeys(this.commands),this.blurListener=this.blurListener.bind(this),this.changeListener=this.changeListener.bind(this),this.mousedownListener=this.mousedownListener.bind(this),this.mousewheelListener=this.mousewheelListener.bind(this),this.changeTimer=s.delayedCall(function(){this.updateCompletions(!0)}.bind(this))};(function(){this.$init=function(){this.popup=new r(document.body||document.documentElement),this.popup.on("click",function(e){this.insertMatch(),e.stop()}.bind(this))},this.openPopup=function(e,t,i){this.popup||this.$init(),this.popup.setData(this.completions.filtered);var r=e.renderer;if(!i){this.popup.setRow(0),this.popup.setFontSize(e.getFontSize());var n=r.layerConfig.lineHeight,o=r.$cursorLayer.getPixelPosition(this.base,!0);o.left-=this.popup.getTextLeftOffset();var s=e.container.getBoundingClientRect();o.top+=s.top-r.layerConfig.offset,o.left+=s.left-e.renderer.scrollLeft,o.left+=r.$gutterLayer.gutterWidth,this.popup.show(o,n)}},this.detach=function(){this.editor.keyBinding.removeKeyboardHandler(this.keyboardHandler),this.editor.off("changeSelection",this.changeListener),this.editor.off("blur",this.changeListener),this.editor.off("mousedown",this.mousedownListener),this.editor.off("mousewheel",this.mousewheelListener),this.changeTimer.cancel(),this.popup&&this.popup.hide(),this.activated=!1,this.completions=this.base=null},this.changeListener=function(){var e=this.editor.selection.lead;(e.row!=this.base.row||e.column<this.base.column)&&this.detach(),this.activated?this.changeTimer.schedule():this.detach()},this.blurListener=function(){document.activeElement!=this.editor.textInput.getElement()&&this.detach()},this.mousedownListener=function(){this.detach()},this.mousewheelListener=function(){this.detach()},this.goTo=function(e){var t=this.popup.getRow(),i=this.popup.session.getLength()-1;switch(e){case"up":t=0>t?i:t-1;break;case"down":t=t>=i?-1:t+1;break;case"start":t=0;break;case"end":t=i}this.popup.setRow(t)},this.insertMatch=function(e){if(e||(e=this.popup.getData(this.popup.getRow())),!e)return!1;if(e.completer&&e.completer.insertMatch)e.completer.insertMatch(this.editor);else{if(this.completions.filterText)for(var t,i=this.editor.selection.getAllRanges(),r=0;t=i[r];r++)t.start.column-=this.completions.filterText.length,this.editor.session.remove(t);e.snippet?a.insertSnippet(this.editor,e.snippet):this.editor.execCommand("insertstring",e.value||e)}this.detach()},this.commands={Up:function(e){e.completer.goTo("up")},Down:function(e){e.completer.goTo("down")},"Ctrl-Up|Ctrl-Home":function(e){e.completer.goTo("start")},"Ctrl-Down|Ctrl-End":function(e){e.completer.goTo("end")},Esc:function(e){e.completer.detach()},Space:function(e){e.completer.detach(),e.insert(" ")},Return:function(e){e.completer.insertMatch()},"Shift-Return":function(e){e.completer.insertMatch(!0)},Tab:function(e){e.completer.insertMatch()},PageUp:function(e){e.completer.popup.gotoPageUp()},PageDown:function(e){e.completer.popup.gotoPageDown()}},this.gatherCompletions=function(e,t){var i=e.getSession(),r=e.getCursorPosition(),o=i.getLine(r.row),s=n.retrievePrecedingIdentifier(o,r.column);this.base=e.getCursorPosition(),this.base.column-=s.length;var a=[];return n.parForEach(e.completers,function(t,n){t.getCompletions(e,i,r,s,function(e,t){e||(a=a.concat(t)),n()})},function(){t(null,{prefix:s,matches:a})}),!0},this.showPopup=function(e){this.editor&&this.detach(),this.activated=!0,this.editor=e,e.completer!=this&&(e.completer&&e.completer.detach(),e.completer=this),e.keyBinding.addKeyboardHandler(this.keyboardHandler),e.on("changeSelection",this.changeListener),e.on("blur",this.blurListener),e.on("mousedown",this.mousedownListener),e.on("mousewheel",this.mousewheelListener),this.updateCompletions()},this.updateCompletions=function(e){if(e&&this.base&&this.completions){var t=this.editor.getCursorPosition(),i=this.editor.session.getTextRange({start:this.base,end:t});if(i==this.completions.filterText)return;return this.completions.setFilter(i),this.completions.filtered.length?(this.openPopup(this.editor,i,e),void 0):this.detach()}this.gatherCompletions(this.editor,function(t,i){var r=i&&i.matches;if(!r||!r.length)return this.detach();this.completions=new h(r),this.completions.setFilter(i.prefix);var n=this.completions.filtered;return n.length?this.autoInsert&&1==n.length?this.insertMatch(n[0]):(this.openPopup(this.editor,i.prefix,e),void 0):this.detach()}.bind(this))},this.cancelContextMenu=function(){var e=function(t){this.editor.off("nativecontextmenu",e),t&&t.domEvent&&o.stopEvent(t.domEvent)}.bind(this);setTimeout(e,10),this.editor.on("nativecontextmenu",e)}}).call(l.prototype),l.startCommand={name:"startAutocomplete",exec:function(e){e.completer||(e.completer=new l),e.completer.showPopup(e),e.completer.cancelContextMenu()},bindKey:"Ctrl-Space|Ctrl-Shift-Space|Alt-Space"};var h=function(e,t){this.all=e,this.filtered=e,this.filterText=t||""};(function(){this.setFilter=function(e){if(e.length>this.filterText&&0===e.lastIndexOf(this.filterText,0))var t=this.filtered;else var t=this.all;this.filterText=e,t=this.filterCompletions(t,this.filterText),t=t.sort(function(e,t){return t.exactMatch-e.exactMatch||t.score-e.score});var i=null;t=t.filter(function(e){var t=e.value||e.caption||e.snippet;return t===i?!1:(i=t,!0)}),this.filtered=t},this.filterCompletions=function(e,t){var i=[],r=t.toUpperCase(),n=t.toLowerCase();e:for(var o,s=0;o=e[s];s++){var a=o.value||o.caption||o.snippet;if(a){for(var l,h,c=-1,u=0,d=0,f=0;f<t.length;f++){var m=a.indexOf(n[f],c+1),p=a.indexOf(r[f],c+1);if(l=m>=0?0>p||p>m?m:p:p,0>l)continue e;h=l-c-1,h>0&&(-1===c&&(d+=10),d+=h),u|=1<<l,c=l}o.matchMask=u,o.exactMatch=d?0:1,o.score=(o.score||0)-d,i.push(o)}}return i}}).call(h.prototype),t.Autocomplete=l,t.FilteredList=h}),define("ace/autocomplete/popup",["require","exports","module","ace/edit_session","ace/virtual_renderer","ace/editor","ace/range","ace/lib/event","ace/lib/lang","ace/lib/dom"],function(e,t){var i=(e("../edit_session").EditSession,e("../virtual_renderer").VirtualRenderer),r=e("../editor").Editor,n=e("../range").Range,o=e("../lib/event"),s=e("../lib/lang"),a=e("../lib/dom"),l=function(e){var t=new i(e);t.$maxLines=4;var n=new r(t);return n.setHighlightActiveLine(!1),n.setShowPrintMargin(!1),n.renderer.setShowGutter(!1),n.renderer.setHighlightGutterLine(!1),n.$mouseHandler.$focusWaitTimout=0,n},h=function(e){var t=a.createElement("div"),i=new l(t);e&&e.appendChild(t),t.style.display="none",i.renderer.content.style.cursor="default",i.renderer.setStyle("ace_autocomplete"),i.setOption("displayIndentGuides",!1);var r=function(){};i.focus=r,i.$isFocused=!0,i.renderer.$cursorLayer.restartTimer=r,i.renderer.$cursorLayer.element.style.opacity=0,i.renderer.$maxLines=8,i.renderer.$keepTextAreaAtCursor=!1,i.setHighlightActiveLine(!1),i.session.highlight(""),i.session.$searchHighlight.clazz="ace_highlight-marker",i.on("mousedown",function(e){var t=e.getDocumentPosition();i.moveCursorToPosition(t),i.selection.clearSelection(),u.start.row=u.end.row=t.row,e.stop()});var h,c=new n(-1,0,-1,1/0),u=new n(-1,0,-1,1/0);u.id=i.session.addMarker(u,"ace_active-line","fullLine"),i.setSelectOnHover=function(e){e?c.id&&(i.session.removeMarker(c.id),c.id=null):c.id=i.session.addMarker(c,"ace_line-hover","fullLine")},i.setSelectOnHover(!1),i.on("mousemove",function(e){if(!h)return h=e,void 0;if(h.x!=e.x||h.y!=e.y){h=e,h.scrollTop=i.renderer.scrollTop;var t=h.getDocumentPosition().row;c.start.row!=t&&(c.id||i.setRow(t),f(t))}}),i.renderer.on("beforeRender",function(){if(h&&-1!=c.start.row){h.$pos=null;var e=h.getDocumentPosition().row;c.id||i.setRow(e),f(e,!0)}}),i.renderer.on("afterRender",function(){var e=i.getRow(),t=i.renderer.$textLayer,r=t.element.childNodes[e-t.config.firstRow];r!=t.selectedNode&&(t.selectedNode&&a.removeCssClass(t.selectedNode,"ace_selected"),t.selectedNode=r,r&&a.addCssClass(r,"ace_selected"))});var d=function(){f(-1)},f=function(e,t){e!==c.start.row&&(c.start.row=c.end.row=e,t||i.session._emit("changeBackMarker"),i._emit("changeHoverMarker"))};i.getHoveredRow=function(){return c.start.row},o.addListener(i.container,"mouseout",d),i.on("hide",d),i.on("changeSelection",d),i.session.doc.getLength=function(){return i.data.length},i.session.doc.getLine=function(e){var t=i.data[e];return"string"==typeof t?t:t&&t.value||""};var m=i.session.bgTokenizer;return m.$tokenizeRow=function(e){var t=i.data[e],r=[];if(!t)return r;"string"==typeof t&&(t={value:t}),t.caption||(t.caption=t.value);for(var n,o,s=-1,e=0;e<t.caption.length;e++)o=t.caption[e],n=t.matchMask&1<<e?1:0,s!==n?(r.push({type:t.className||""+(n?"completion-highlight":""),value:o}),s=n):r[r.length-1].value+=o;if(t.meta){var a=i.renderer.$size.scrollerWidth/i.renderer.layerConfig.characterWidth;t.meta.length+t.caption.length<a-2&&r.push({type:"rightAlignedText",value:t.meta})}return r},m.$updateOnChange=r,m.start=r,i.session.$computeWidth=function(){return this.screenWidth=0},i.isOpen=!1,i.isTopdown=!1,i.data=[],i.setData=function(e){i.data=e||[],i.setValue(s.stringRepeat("\n",e.length),-1),i.setRow(0)},i.getData=function(e){return i.data[e]},i.getRow=function(){return u.start.row},i.setRow=function(e){e=Math.max(-1,Math.min(this.data.length,e)),u.start.row!=e&&(i.selection.clearSelection(),u.start.row=u.end.row=e||0,i.session._emit("changeBackMarker"),i.moveCursorTo(e||0,0),i.isOpen&&i._signal("select"))},i.on("changeSelection",function(){i.isOpen&&i.setRow(i.selection.lead.row)}),i.hide=function(){this.container.style.display="none",this._signal("hide"),i.isOpen=!1},i.show=function(e,t,r){var n=this.container,o=window.innerHeight,s=window.innerWidth,a=this.renderer,l=a.$maxLines*t*1.4,c=e.top+this.$borderSize;c+l>o-t&&!r?(n.style.top="",n.style.bottom=o-c+"px",i.isTopdown=!1):(c+=t,n.style.top=c+"px",n.style.bottom="",i.isTopdown=!0),n.style.display="",this.renderer.$textLayer.checkForSizeChanges();var u=e.left;u+n.offsetWidth>s&&(u=s-n.offsetWidth),n.style.left=u+"px",this._signal("show"),h=null,i.isOpen=!0},i.getTextLeftOffset=function(){return this.$borderSize+this.renderer.$padding+this.$imageSize},i.$imageSize=0,i.$borderSize=1,i};a.importCssString(".ace_autocomplete.ace-tm .ace_marker-layer .ace_active-line {    background-color: #CAD6FA;    z-index: 1;}.ace_autocomplete.ace-tm .ace_line-hover {    border: 1px solid #abbffe;    margin-top: -1px;    background: rgba(233,233,253,0.4);}.ace_autocomplete .ace_line-hover {    position: absolute;    z-index: 2;}.ace_rightAlignedText {    color: gray;    display: inline-block;    position: absolute;    right: 4px;    text-align: right;    z-index: -1;}.ace_autocomplete .ace_completion-highlight{    color: #000;    text-shadow: 0 0 0.01em;}.ace_autocomplete {    width: 280px;    z-index: 200000;    background: #fbfbfb;    color: #444;    border: 1px lightgray solid;    position: fixed;    box-shadow: 2px 3px 5px rgba(0,0,0,.2);    line-height: 1.4;}"),t.AcePopup=h}),define("ace/autocomplete/util",["require","exports","module"],function(e,t){t.parForEach=function(e,t,i){var r=0,n=e.length;0===n&&i();for(var o=0;n>o;o++)t(e[o],function(e,t){r++,r===n&&i(e,t)})};var i=/[a-zA-Z_0-9\$-]/;t.retrievePrecedingIdentifier=function(e,t,r){r=r||i;for(var n=[],o=t-1;o>=0&&r.test(e[o]);o--)n.push(e[o]);return n.reverse().join("")},t.retrieveFollowingIdentifier=function(e,t,r){r=r||i;for(var n=[],o=t;o<e.length&&r.test(e[o]);o++)n.push(e[o]);return n}}),define("ace/autocomplete/text_completer",["require","exports","module","ace/range"],function(e,t){function i(e,t){var i=e.getTextRange(n.fromPoints({row:0,column:0},t));return i.split(o).length-1}function r(e,t){var r=i(e,t),n=e.getValue().split(o),s=Object.create(null),a=n[r];return n.forEach(function(e,t){if(e&&e!==a){var i=Math.abs(r-t),o=n.length-i;s[e]=s[e]?Math.max(o,s[e]):o}}),s}var n=e("ace/range").Range,o=/[^a-zA-Z_0-9\$\-]+/;t.getCompletions=function(e,t,i,n,o){var s=r(t,i,n),a=Object.keys(s);o(null,a.map(function(e){return{name:e,value:e,score:s[e],meta:"local"}}))}}),define("ace/mode/glsl",["require","exports","module","ace/lib/oop","ace/mode/c_cpp","ace/tokenizer","ace/mode/glsl_highlight_rules","ace/mode/matching_brace_outdent","ace/range","ace/mode/behaviour/cstyle","ace/mode/folding/cstyle"],function(e,t){var i=e("../lib/oop"),r=e("./c_cpp").Mode,n=(e("../tokenizer").Tokenizer,e("./glsl_highlight_rules").glslHighlightRules),o=e("./matching_brace_outdent").MatchingBraceOutdent,s=(e("../range").Range,e("./behaviour/cstyle").CstyleBehaviour),a=e("./folding/cstyle").FoldMode,l=function(){this.HighlightRules=n,this.$outdent=new o,this.$behaviour=new s,this.foldingRules=new a};i.inherits(l,r),t.Mode=l}),define("ace/mode/c_cpp",["require","exports","module","ace/lib/oop","ace/mode/text","ace/tokenizer","ace/mode/c_cpp_highlight_rules","ace/mode/matching_brace_outdent","ace/range","ace/mode/behaviour/cstyle","ace/mode/folding/cstyle"],function(e,t){var i=e("../lib/oop"),r=e("./text").Mode,n=(e("../tokenizer").Tokenizer,e("./c_cpp_highlight_rules").c_cppHighlightRules),o=e("./matching_brace_outdent").MatchingBraceOutdent,s=(e("../range").Range,e("./behaviour/cstyle").CstyleBehaviour),a=e("./folding/cstyle").FoldMode,l=function(){this.HighlightRules=n,this.$outdent=new o,this.$behaviour=new s,this.foldingRules=new a};i.inherits(l,r),function(){this.lineCommentStart="//",this.blockComment={start:"/*",end:"*/"},this.getNextLineIndent=function(e,t,i){var r=this.$getIndent(t),n=this.getTokenizer().getLineTokens(t,e),o=n.tokens,s=n.state;if(o.length&&"comment"==o[o.length-1].type)return r;if("start"==e){var a=t.match(/^.*[\{\(\[]\s*$/);a&&(r+=i)}else if("doc-start"==e){if("start"==s)return"";var a=t.match(/^\s*(\/?)\*/);a&&(a[1]&&(r+=" "),r+="* ")}return r},this.checkOutdent=function(e,t,i){return this.$outdent.checkOutdent(t,i)},this.autoOutdent=function(e,t,i){this.$outdent.autoOutdent(t,i)},this.$id="ace/mode/c_cpp"}.call(l.prototype),t.Mode=l}),define("ace/mode/c_cpp_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/doc_comment_highlight_rules","ace/mode/text_highlight_rules"],function(e,t){var i=e("../lib/oop"),r=e("./doc_comment_highlight_rules").DocCommentHighlightRules,n=e("./text_highlight_rules").TextHighlightRules,o=t.cFunctions="\\s*\\bhypot(?:f|l)?|s(?:scanf|ystem|nprintf|ca(?:nf|lb(?:n(?:f|l)?|ln(?:f|l)?))|i(?:n(?:h(?:f|l)?|f|l)?|gn(?:al|bit))|tr(?:s(?:tr|pn)|nc(?:py|at|mp)|c(?:spn|hr|oll|py|at|mp)|to(?:imax|d|u(?:l(?:l)?|max)|k|f|l(?:d|l)?)|error|pbrk|ftime|len|rchr|xfrm)|printf|et(?:jmp|vbuf|locale|buf)|qrt(?:f|l)?|w(?:scanf|printf)|rand)|n(?:e(?:arbyint(?:f|l)?|xt(?:toward(?:f|l)?|after(?:f|l)?))|an(?:f|l)?)|c(?:s(?:in(?:h(?:f|l)?|f|l)?|qrt(?:f|l)?)|cos(?:h(?:f)?|f|l)?|imag(?:f|l)?|t(?:ime|an(?:h(?:f|l)?|f|l)?)|o(?:s(?:h(?:f|l)?|f|l)?|nj(?:f|l)?|pysign(?:f|l)?)|p(?:ow(?:f|l)?|roj(?:f|l)?)|e(?:il(?:f|l)?|xp(?:f|l)?)|l(?:o(?:ck|g(?:f|l)?)|earerr)|a(?:sin(?:h(?:f|l)?|f|l)?|cos(?:h(?:f|l)?|f|l)?|tan(?:h(?:f|l)?|f|l)?|lloc|rg(?:f|l)?|bs(?:f|l)?)|real(?:f|l)?|brt(?:f|l)?)|t(?:ime|o(?:upper|lower)|an(?:h(?:f|l)?|f|l)?|runc(?:f|l)?|gamma(?:f|l)?|mp(?:nam|file))|i(?:s(?:space|n(?:ormal|an)|cntrl|inf|digit|u(?:nordered|pper)|p(?:unct|rint)|finite|w(?:space|c(?:ntrl|type)|digit|upper|p(?:unct|rint)|lower|al(?:num|pha)|graph|xdigit|blank)|l(?:ower|ess(?:equal|greater)?)|al(?:num|pha)|gr(?:eater(?:equal)?|aph)|xdigit|blank)|logb(?:f|l)?|max(?:div|abs))|di(?:v|fftime)|_Exit|unget(?:c|wc)|p(?:ow(?:f|l)?|ut(?:s|c(?:har)?|wc(?:har)?)|error|rintf)|e(?:rf(?:c(?:f|l)?|f|l)?|x(?:it|p(?:2(?:f|l)?|f|l|m1(?:f|l)?)?))|v(?:s(?:scanf|nprintf|canf|printf|w(?:scanf|printf))|printf|f(?:scanf|printf|w(?:scanf|printf))|w(?:scanf|printf)|a_(?:start|copy|end|arg))|qsort|f(?:s(?:canf|e(?:tpos|ek))|close|tell|open|dim(?:f|l)?|p(?:classify|ut(?:s|c|w(?:s|c))|rintf)|e(?:holdexcept|set(?:e(?:nv|xceptflag)|round)|clearexcept|testexcept|of|updateenv|r(?:aiseexcept|ror)|get(?:e(?:nv|xceptflag)|round))|flush|w(?:scanf|ide|printf|rite)|loor(?:f|l)?|abs(?:f|l)?|get(?:s|c|pos|w(?:s|c))|re(?:open|e|ad|xp(?:f|l)?)|m(?:in(?:f|l)?|od(?:f|l)?|a(?:f|l|x(?:f|l)?)?))|l(?:d(?:iv|exp(?:f|l)?)|o(?:ngjmp|cal(?:time|econv)|g(?:1(?:p(?:f|l)?|0(?:f|l)?)|2(?:f|l)?|f|l|b(?:f|l)?)?)|abs|l(?:div|abs|r(?:int(?:f|l)?|ound(?:f|l)?))|r(?:int(?:f|l)?|ound(?:f|l)?)|gamma(?:f|l)?)|w(?:scanf|c(?:s(?:s(?:tr|pn)|nc(?:py|at|mp)|c(?:spn|hr|oll|py|at|mp)|to(?:imax|d|u(?:l(?:l)?|max)|k|f|l(?:d|l)?|mbs)|pbrk|ftime|len|r(?:chr|tombs)|xfrm)|to(?:b|mb)|rtomb)|printf|mem(?:set|c(?:hr|py|mp)|move))|a(?:s(?:sert|ctime|in(?:h(?:f|l)?|f|l)?)|cos(?:h(?:f|l)?|f|l)?|t(?:o(?:i|f|l(?:l)?)|exit|an(?:h(?:f|l)?|2(?:f|l)?|f|l)?)|b(?:s|ort))|g(?:et(?:s|c(?:har)?|env|wc(?:har)?)|mtime)|r(?:int(?:f|l)?|ound(?:f|l)?|e(?:name|alloc|wind|m(?:ove|quo(?:f|l)?|ainder(?:f|l)?))|a(?:nd|ise))|b(?:search|towc)|m(?:odf(?:f|l)?|em(?:set|c(?:hr|py|mp)|move)|ktime|alloc|b(?:s(?:init|towcs|rtowcs)|towc|len|r(?:towc|len)))\\b",s=function(){var e="break|case|continue|default|do|else|for|goto|if|_Pragma|return|switch|while|catch|operator|try|throw|using",t="asm|__asm__|auto|bool|_Bool|char|_Complex|double|enum|float|_Imaginary|int|long|short|signed|struct|typedef|union|unsigned|void|class|wchar_t|template",i="const|extern|register|restrict|static|volatile|inline|private:|protected:|public:|friend|explicit|virtual|export|mutable|typename",n="and|and_eq|bitand|bitor|compl|not|not_eq|or|or_eq|typeid|xor|xor_eqconst_cast|dynamic_cast|reinterpret_cast|static_cast|sizeof|namespace",s="NULL|true|false|TRUE|FALSE",a=this.$keywords=this.createKeywordMapper({"keyword.control":e,"storage.type":t,"storage.modifier":i,"keyword.operator":n,"variable.language":"this","constant.language":s},"identifier");this.$rules={start:[{token:"comment",regex:"\\/\\/.*$"},r.getStartRule("doc-start"),{token:"comment",regex:"\\/\\*",next:"comment"},{token:"string",regex:'["](?:(?:\\\\.)|(?:[^"\\\\]))*?["]'},{token:"string",regex:'["].*\\\\$',next:"qqstring"},{token:"string",regex:"['](?:(?:\\\\.)|(?:[^'\\\\]))*?[']"},{token:"string",regex:"['].*\\\\$",next:"qstring"},{token:"constant.numeric",regex:"0[xX][0-9a-fA-F]+(L|l|UL|ul|u|U|F|f|ll|LL|ull|ULL)?\\b"},{token:"constant.numeric",regex:"[+-]?\\d+(?:(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)?(L|l|UL|ul|u|U|F|f|ll|LL|ull|ULL)?\\b"},{token:"keyword",regex:"#\\s*(?:include|import|pragma|line|define|undef|if|ifdef|else|elif|ifndef)\\b",next:"directive"},{token:"keyword",regex:"(?:#\\s*endif)\\b"},{token:"support.function.C99.c",regex:o},{token:a,regex:"[a-zA-Z_$][a-zA-Z0-9_$]*\\b"},{token:"keyword.operator",regex:"!|\\$|%|&|\\*|\\-\\-|\\-|\\+\\+|\\+|~|==|=|!=|<=|>=|<<=|>>=|>>>=|<>|<|>|!|&&|\\|\\||\\?\\:|\\*=|%=|\\+=|\\-=|&=|\\^=|\\b(?:in|new|delete|typeof|void)"},{token:"punctuation.operator",regex:"\\?|\\:|\\,|\\;|\\."},{token:"paren.lparen",regex:"[[({]"},{token:"paren.rparen",regex:"[\\])}]"},{token:"text",regex:"\\s+"}],comment:[{token:"comment",regex:".*?\\*\\/",next:"start"},{token:"comment",regex:".+"}],qqstring:[{token:"string",regex:'(?:(?:\\\\.)|(?:[^"\\\\]))*?"',next:"start"},{token:"string",regex:".+"}],qstring:[{token:"string",regex:"(?:(?:\\\\.)|(?:[^'\\\\]))*?'",next:"start"},{token:"string",regex:".+"}],directive:[{token:"constant.other.multiline",regex:/\\/},{token:"constant.other.multiline",regex:/.*\\/},{token:"constant.other",regex:"\\s*<.+?>",next:"start"},{token:"constant.other",regex:'\\s*["](?:(?:\\\\.)|(?:[^"\\\\]))*?["]',next:"start"},{token:"constant.other",regex:"\\s*['](?:(?:\\\\.)|(?:[^'\\\\]))*?[']",next:"start"},{token:"constant.other",regex:/[^\\\/]+/,next:"start"}]},this.embedRules(r,"doc-",[r.getEndRule("start")])};i.inherits(s,n),t.c_cppHighlightRules=s}),define("ace/mode/doc_comment_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/text_highlight_rules"],function(e,t){var i=e("../lib/oop"),r=e("./text_highlight_rules").TextHighlightRules,n=function(){this.$rules={start:[{token:"comment.doc.tag",regex:"@[\\w\\d_]+"},{token:"comment.doc.tag",regex:"\\bTODO\\b"},{defaultToken:"comment.doc"}]}};i.inherits(n,r),n.getStartRule=function(e){return{token:"comment.doc",regex:"\\/\\*(?=\\*)",next:e}},n.getEndRule=function(e){return{token:"comment.doc",regex:"\\*\\/",next:e}},t.DocCommentHighlightRules=n}),define("ace/mode/matching_brace_outdent",["require","exports","module","ace/range"],function(e,t){var i=e("../range").Range,r=function(){};(function(){this.checkOutdent=function(e,t){return/^\s+$/.test(e)?/^\s*\}/.test(t):!1},this.autoOutdent=function(e,t){var r=e.getLine(t),n=r.match(/^(\s*\})/);if(!n)return 0;var o=n[1].length,s=e.findMatchingBracket({row:t,column:o});if(!s||s.row==t)return 0;var a=this.$getIndent(e.getLine(s.row));e.replace(new i(t,0,t,o-1),a)},this.$getIndent=function(e){return e.match(/^\s*/)[0]}}).call(r.prototype),t.MatchingBraceOutdent=r}),define("ace/mode/behaviour/cstyle",["require","exports","module","ace/lib/oop","ace/mode/behaviour","ace/token_iterator","ace/lib/lang"],function(e,t){var i=e("../../lib/oop"),r=e("../behaviour").Behaviour,n=e("../../token_iterator").TokenIterator,o=e("../../lib/lang"),s=["text","paren.rparen","punctuation.operator"],a=["text","paren.rparen","punctuation.operator","comment"],l=0,h=-1,c="",u=0,d=-1,f="",m="",p=function(){p.isSaneInsertion=function(e,t){var i=e.getCursorPosition(),r=new n(t,i.row,i.column);if(!this.$matchTokenType(r.getCurrentToken()||"text",s)){var o=new n(t,i.row,i.column+1);if(!this.$matchTokenType(o.getCurrentToken()||"text",s))return!1}return r.stepForward(),r.getCurrentTokenRow()!==i.row||this.$matchTokenType(r.getCurrentToken()||"text",a)},p.$matchTokenType=function(e,t){return t.indexOf(e.type||e)>-1},p.recordAutoInsert=function(e,t,i){var r=e.getCursorPosition(),n=t.doc.getLine(r.row);this.isAutoInsertedClosing(r,n,c[0])||(l=0),h=r.row,c=i+n.substr(r.column),l++},p.recordMaybeInsert=function(e,t,i){var r=e.getCursorPosition(),n=t.doc.getLine(r.row);this.isMaybeInsertedClosing(r,n)||(u=0),d=r.row,f=n.substr(0,r.column)+i,m=n.substr(r.column),u++},p.isAutoInsertedClosing=function(e,t,i){return l>0&&e.row===h&&i===c[0]&&t.substr(e.column)===c},p.isMaybeInsertedClosing=function(e,t){return u>0&&e.row===d&&t.substr(e.column)===m&&t.substr(0,e.column)==f},p.popAutoInsertedClosing=function(){c=c.substr(1),l--},p.clearMaybeInsertedClosing=function(){u=0,d=-1},this.add("braces","insertion",function(e,t,i,r,n){var s=i.getCursorPosition(),a=r.doc.getLine(s.row);if("{"==n){var l=i.getSelectionRange(),h=r.doc.getTextRange(l);if(""!==h&&"{"!==h&&i.getWrapBehavioursEnabled())return{text:"{"+h+"}",selection:!1};if(p.isSaneInsertion(i,r))return/[\]\}\)]/.test(a[s.column])||i.inMultiSelectMode?(p.recordAutoInsert(i,r,"}"),{text:"{}",selection:[1,1]}):(p.recordMaybeInsert(i,r,"{"),{text:"{",selection:[1,1]})}else if("}"==n){var c=a.substring(s.column,s.column+1);if("}"==c){var d=r.$findOpeningBracket("}",{column:s.column+1,row:s.row});if(null!==d&&p.isAutoInsertedClosing(s,a,n))return p.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}else{if("\n"==n||"\r\n"==n){var f="";p.isMaybeInsertedClosing(s,a)&&(f=o.stringRepeat("}",u),p.clearMaybeInsertedClosing());var c=a.substring(s.column,s.column+1);if("}"===c){var m=r.findMatchingBracket({row:s.row,column:s.column+1},"}");if(!m)return null;var g=this.$getIndent(r.getLine(m.row))}else{if(!f)return;var g=this.$getIndent(a)}var E=g+r.getTabString();return{text:"\n"+E+"\n"+g+f,selection:[1,E.length,1,E.length]}}p.clearMaybeInsertedClosing()}}),this.add("braces","deletion",function(e,t,i,r,n){var o=r.doc.getTextRange(n);if(!n.isMultiLine()&&"{"==o){var s=r.doc.getLine(n.start.row),a=s.substring(n.end.column,n.end.column+1);if("}"==a)return n.end.column++,n;u--}}),this.add("parens","insertion",function(e,t,i,r,n){if("("==n){var o=i.getSelectionRange(),s=r.doc.getTextRange(o);if(""!==s&&i.getWrapBehavioursEnabled())return{text:"("+s+")",selection:!1};if(p.isSaneInsertion(i,r))return p.recordAutoInsert(i,r,")"),{text:"()",selection:[1,1]}}else if(")"==n){var a=i.getCursorPosition(),l=r.doc.getLine(a.row),h=l.substring(a.column,a.column+1);if(")"==h){var c=r.$findOpeningBracket(")",{column:a.column+1,row:a.row});if(null!==c&&p.isAutoInsertedClosing(a,l,n))return p.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}}),this.add("parens","deletion",function(e,t,i,r,n){var o=r.doc.getTextRange(n);if(!n.isMultiLine()&&"("==o){var s=r.doc.getLine(n.start.row),a=s.substring(n.start.column+1,n.start.column+2);if(")"==a)return n.end.column++,n}}),this.add("brackets","insertion",function(e,t,i,r,n){if("["==n){var o=i.getSelectionRange(),s=r.doc.getTextRange(o);if(""!==s&&i.getWrapBehavioursEnabled())return{text:"["+s+"]",selection:!1};if(p.isSaneInsertion(i,r))return p.recordAutoInsert(i,r,"]"),{text:"[]",selection:[1,1]}}else if("]"==n){var a=i.getCursorPosition(),l=r.doc.getLine(a.row),h=l.substring(a.column,a.column+1);if("]"==h){var c=r.$findOpeningBracket("]",{column:a.column+1,row:a.row});if(null!==c&&p.isAutoInsertedClosing(a,l,n))return p.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}}),this.add("brackets","deletion",function(e,t,i,r,n){var o=r.doc.getTextRange(n);if(!n.isMultiLine()&&"["==o){var s=r.doc.getLine(n.start.row),a=s.substring(n.start.column+1,n.start.column+2);if("]"==a)return n.end.column++,n}}),this.add("string_dquotes","insertion",function(e,t,i,r,n){if('"'==n||"'"==n){var o=n,s=i.getSelectionRange(),a=r.doc.getTextRange(s);if(""!==a&&"'"!==a&&'"'!=a&&i.getWrapBehavioursEnabled())return{text:o+a+o,selection:!1};var l=i.getCursorPosition(),h=r.doc.getLine(l.row),c=h.substring(l.column-1,l.column);if("\\"==c)return null;for(var u,d=r.getTokens(s.start.row),f=0,m=-1,g=0;g<d.length&&(u=d[g],"string"==u.type?m=-1:0>m&&(m=u.value.indexOf(o)),!(u.value.length+f>s.start.column));g++)f+=d[g].value.length;if(!u||0>m&&"comment"!==u.type&&("string"!==u.type||s.start.column!==u.value.length+f-1&&u.value.lastIndexOf(o)===u.value.length-1)){if(!p.isSaneInsertion(i,r))return;return{text:o+o,selection:[1,1]}}if(u&&"string"===u.type){var E=h.substring(l.column,l.column+1);if(E==o)return{text:"",selection:[1,1]}}}}),this.add("string_dquotes","deletion",function(e,t,i,r,n){var o=r.doc.getTextRange(n);if(!n.isMultiLine()&&('"'==o||"'"==o)){var s=r.doc.getLine(n.start.row),a=s.substring(n.start.column+1,n.start.column+2);if(a==o)return n.end.column++,n}})};i.inherits(p,r),t.CstyleBehaviour=p}),define("ace/mode/folding/cstyle",["require","exports","module","ace/lib/oop","ace/range","ace/mode/folding/fold_mode"],function(e,t){var i=e("../../lib/oop"),r=e("../../range").Range,n=e("./fold_mode").FoldMode,o=t.FoldMode=function(e){e&&(this.foldingStartMarker=new RegExp(this.foldingStartMarker.source.replace(/\|[^|]*?$/,"|"+e.start)),this.foldingStopMarker=new RegExp(this.foldingStopMarker.source.replace(/\|[^|]*?$/,"|"+e.end)))};i.inherits(o,n),function(){this.foldingStartMarker=/(\{|\[)[^\}\]]*$|^\s*(\/\*)/,this.foldingStopMarker=/^[^\[\{]*(\}|\])|^[\s\*]*(\*\/)/,this.getFoldWidgetRange=function(e,t,i,r){var n=e.getLine(i),o=n.match(this.foldingStartMarker);if(o){var s=o.index;if(o[1])return this.openingBracketBlock(e,o[1],i,s);var a=e.getCommentFoldRange(i,s+o[0].length,1);return a&&!a.isMultiLine()&&(r?a=this.getSectionRange(e,i):"all"!=t&&(a=null)),a}if("markbegin"!==t){var o=n.match(this.foldingStopMarker);if(o){var s=o.index+o[0].length;return o[1]?this.closingBracketBlock(e,o[1],i,s):e.getCommentFoldRange(i,s,-1)}}},this.getSectionRange=function(e,t){var i=e.getLine(t),n=i.search(/\S/),o=t,s=i.length;t+=1;for(var a=t,l=e.getLength();++t<l;){i=e.getLine(t);var h=i.search(/\S/);if(-1!==h){if(n>h)break;var c=this.getFoldWidgetRange(e,"all",t);if(c){if(c.start.row<=o)break;if(c.isMultiLine())t=c.end.row;else if(n==h)break}a=t}}return new r(o,s,a,e.getLine(a).length)}}.call(o.prototype)}),define("ace/mode/glsl_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/c_cpp_highlight_rules"],function(e,t){var i=e("../lib/oop"),r=e("./c_cpp_highlight_rules").c_cppHighlightRules,n=function(){var e="attribute|const|uniform|varying|break|continue|do|for|while|if|else|in|out|inout|float|int|void|bool|true|false|lowp|mediump|highp|precision|invariant|discard|return|mat2|mat3|mat4|vec2|vec3|vec4|ivec2|ivec3|ivec4|bvec2|bvec3|bvec4|sampler2D|samplerCube|struct",t="radians|degrees|sin|cos|tan|asin|acos|atan|pow|exp|log|exp2|log2|sqrt|inversesqrt|abs|sign|floor|ceil|fract|mod|min|max|clamp|mix|step|smoothstep|length|distance|dot|cross|normalize|faceforward|reflect|refract|matrixCompMult|lessThan|lessThanEqual|greaterThan|greaterThanEqual|equal|notEqual|any|all|not|dFdx|dFdy|fwidth|texture2D|texture2DProj|texture2DLod|texture2DProjLod|textureCube|textureCubeLod|gl_MaxVertexAttribs|gl_MaxVertexUniformVectors|gl_MaxVaryingVectors|gl_MaxVertexTextureImageUnits|gl_MaxCombinedTextureImageUnits|gl_MaxTextureImageUnits|gl_MaxFragmentUniformVectors|gl_MaxDrawBuffers|gl_DepthRangeParameters|gl_DepthRange|gl_Position|gl_PointSize|gl_FragCoord|gl_FrontFacing|gl_PointCoord|gl_FragColor|gl_FragData",i=this.createKeywordMapper({"variable.language":"this",keyword:e,"constant.language":t},"identifier");this.$rules=(new r).$rules,this.$rules.start.forEach(function(e){"function"==typeof e.token&&(e.token=i)})};i.inherits(n,r),t.glslHighlightRules=n}),define("ace/theme/vibrant_ink",["require","exports","module","ace/lib/dom"],function(e,t){t.isDark=!0,t.cssClass="ace-vibrant-ink",t.cssText=".ace-vibrant-ink .ace_gutter {background: #1a1a1a;color: #BEBEBE}.ace-vibrant-ink .ace_print-margin {width: 1px;background: #1a1a1a}.ace-vibrant-ink {background-color: #0F0F0F;color: #FFFFFF}.ace-vibrant-ink .ace_cursor {color: #FFFFFF}.ace-vibrant-ink .ace_marker-layer .ace_selection {background: #6699CC}.ace-vibrant-ink.ace_multiselect .ace_selection.ace_start {box-shadow: 0 0 3px 0px #0F0F0F;border-radius: 2px}.ace-vibrant-ink .ace_marker-layer .ace_step {background: rgb(102, 82, 0)}.ace-vibrant-ink .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid #404040}.ace-vibrant-ink .ace_marker-layer .ace_active-line {background: #333333}.ace-vibrant-ink .ace_gutter-active-line {background-color: #333333}.ace-vibrant-ink .ace_marker-layer .ace_selected-word {border: 1px solid #6699CC}.ace-vibrant-ink .ace_invisible {color: #404040}.ace-vibrant-ink .ace_keyword,.ace-vibrant-ink .ace_meta {color: #FF6600}.ace-vibrant-ink .ace_constant,.ace-vibrant-ink .ace_constant.ace_character,.ace-vibrant-ink .ace_constant.ace_character.ace_escape,.ace-vibrant-ink .ace_constant.ace_other {color: #339999}.ace-vibrant-ink .ace_constant.ace_numeric {color: #99CC99}.ace-vibrant-ink .ace_invalid,.ace-vibrant-ink .ace_invalid.ace_deprecated {color: #CCFF33;background-color: #000000}.ace-vibrant-ink .ace_fold {background-color: #FFCC00;border-color: #FFFFFF}.ace-vibrant-ink .ace_entity.ace_name.ace_function,.ace-vibrant-ink .ace_support.ace_function,.ace-vibrant-ink .ace_variable {color: #FFCC00}.ace-vibrant-ink .ace_variable.ace_parameter {font-style: italic}.ace-vibrant-ink .ace_string {color: #66FF00}.ace-vibrant-ink .ace_string.ace_regexp {color: #44B4CC}.ace-vibrant-ink .ace_comment {color: #9933CC}.ace-vibrant-ink .ace_entity.ace_other.ace_attribute-name {font-style: italic;color: #99CC99}.ace-vibrant-ink .ace_indent-guide {background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAEklEQVQImWNgYGBgYNDTc/oPAALPAZ7hxlbYAAAAAElFTkSuQmCC) right repeat-y}";
var i=e("../lib/dom");i.importCssString(t.cssText,t.cssClass)});var THREE={REVISION:"66"};self.console=self.console||{info:function(){},log:function(){},debug:function(){},warn:function(){},error:function(){}},function(){for(var e=0,t=["ms","moz","webkit","o"],i=0;i<t.length&&!self.requestAnimationFrame;++i)self.requestAnimationFrame=self[t[i]+"RequestAnimationFrame"],self.cancelAnimationFrame=self[t[i]+"CancelAnimationFrame"]||self[t[i]+"CancelRequestAnimationFrame"];void 0===self.requestAnimationFrame&&void 0!==self.setTimeout&&(self.requestAnimationFrame=function(t){var i=Date.now(),r=Math.max(0,16-(i-e)),n=self.setTimeout(function(){t(i+r)},r);return e=i+r,n}),void 0===self.cancelAnimationFrame&&void 0!==self.clearTimeout&&(self.cancelAnimationFrame=function(e){self.clearTimeout(e)})}(),THREE.CullFaceNone=0,THREE.CullFaceBack=1,THREE.CullFaceFront=2,THREE.CullFaceFrontBack=3,THREE.FrontFaceDirectionCW=0,THREE.FrontFaceDirectionCCW=1,THREE.BasicShadowMap=0,THREE.PCFShadowMap=1,THREE.PCFSoftShadowMap=2,THREE.FrontSide=0,THREE.BackSide=1,THREE.DoubleSide=2,THREE.NoShading=0,THREE.FlatShading=1,THREE.SmoothShading=2,THREE.NoColors=0,THREE.FaceColors=1,THREE.VertexColors=2,THREE.NoBlending=0,THREE.NormalBlending=1,THREE.AdditiveBlending=2,THREE.SubtractiveBlending=3,THREE.MultiplyBlending=4,THREE.CustomBlending=5,THREE.AddEquation=100,THREE.SubtractEquation=101,THREE.ReverseSubtractEquation=102,THREE.ZeroFactor=200,THREE.OneFactor=201,THREE.SrcColorFactor=202,THREE.OneMinusSrcColorFactor=203,THREE.SrcAlphaFactor=204,THREE.OneMinusSrcAlphaFactor=205,THREE.DstAlphaFactor=206,THREE.OneMinusDstAlphaFactor=207,THREE.DstColorFactor=208,THREE.OneMinusDstColorFactor=209,THREE.SrcAlphaSaturateFactor=210,THREE.MultiplyOperation=0,THREE.MixOperation=1,THREE.AddOperation=2,THREE.UVMapping=function(){},THREE.CubeReflectionMapping=function(){},THREE.CubeRefractionMapping=function(){},THREE.SphericalReflectionMapping=function(){},THREE.SphericalRefractionMapping=function(){},THREE.RepeatWrapping=1e3,THREE.ClampToEdgeWrapping=1001,THREE.MirroredRepeatWrapping=1002,THREE.NearestFilter=1003,THREE.NearestMipMapNearestFilter=1004,THREE.NearestMipMapLinearFilter=1005,THREE.LinearFilter=1006,THREE.LinearMipMapNearestFilter=1007,THREE.LinearMipMapLinearFilter=1008,THREE.UnsignedByteType=1009,THREE.ByteType=1010,THREE.ShortType=1011,THREE.UnsignedShortType=1012,THREE.IntType=1013,THREE.UnsignedIntType=1014,THREE.FloatType=1015,THREE.UnsignedShort4444Type=1016,THREE.UnsignedShort5551Type=1017,THREE.UnsignedShort565Type=1018,THREE.AlphaFormat=1019,THREE.RGBFormat=1020,THREE.RGBAFormat=1021,THREE.LuminanceFormat=1022,THREE.LuminanceAlphaFormat=1023,THREE.RGB_S3TC_DXT1_Format=2001,THREE.RGBA_S3TC_DXT1_Format=2002,THREE.RGBA_S3TC_DXT3_Format=2003,THREE.RGBA_S3TC_DXT5_Format=2004,THREE.Color=function(e){return 3===arguments.length?this.setRGB(arguments[0],arguments[1],arguments[2]):this.set(e)},THREE.Color.prototype={constructor:THREE.Color,r:1,g:1,b:1,set:function(e){return e instanceof THREE.Color?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this},setHex:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this},setRGB:function(e,t,i){return this.r=e,this.g=t,this.b=i,this},setHSL:function(e,t,i){if(0===t)this.r=this.g=this.b=i;else{var r=function(e,t,i){return 0>i&&(i+=1),i>1&&(i-=1),1/6>i?e+6*(t-e)*i:.5>i?t:2/3>i?e+6*(t-e)*(2/3-i):e},n=.5>=i?i*(1+t):i+t-i*t,o=2*i-n;this.r=r(o,n,e+1/3),this.g=r(o,n,e),this.b=r(o,n,e-1/3)}return this},setStyle:function(e){if(/^rgb\((\d+), ?(\d+), ?(\d+)\)$/i.test(e)){var t=/^rgb\((\d+), ?(\d+), ?(\d+)\)$/i.exec(e);return this.r=Math.min(255,parseInt(t[1],10))/255,this.g=Math.min(255,parseInt(t[2],10))/255,this.b=Math.min(255,parseInt(t[3],10))/255,this}if(/^rgb\((\d+)\%, ?(\d+)\%, ?(\d+)\%\)$/i.test(e)){var t=/^rgb\((\d+)\%, ?(\d+)\%, ?(\d+)\%\)$/i.exec(e);return this.r=Math.min(100,parseInt(t[1],10))/100,this.g=Math.min(100,parseInt(t[2],10))/100,this.b=Math.min(100,parseInt(t[3],10))/100,this}if(/^\#([0-9a-f]{6})$/i.test(e)){var t=/^\#([0-9a-f]{6})$/i.exec(e);return this.setHex(parseInt(t[1],16)),this}if(/^\#([0-9a-f])([0-9a-f])([0-9a-f])$/i.test(e)){var t=/^\#([0-9a-f])([0-9a-f])([0-9a-f])$/i.exec(e);return this.setHex(parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3],16)),this}return/^(\w+)$/i.test(e)?(this.setHex(THREE.ColorKeywords[e]),this):void 0},copy:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this},copyGammaToLinear:function(e){return this.r=e.r*e.r,this.g=e.g*e.g,this.b=e.b*e.b,this},copyLinearToGamma:function(e){return this.r=Math.sqrt(e.r),this.g=Math.sqrt(e.g),this.b=Math.sqrt(e.b),this},convertGammaToLinear:function(){var e=this.r,t=this.g,i=this.b;return this.r=e*e,this.g=t*t,this.b=i*i,this},convertLinearToGamma:function(){return this.r=Math.sqrt(this.r),this.g=Math.sqrt(this.g),this.b=Math.sqrt(this.b),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(e){var t,i,r=e||{h:0,s:0,l:0},n=this.r,o=this.g,s=this.b,a=Math.max(n,o,s),l=Math.min(n,o,s),h=(l+a)/2;if(l===a)t=0,i=0;else{var c=a-l;switch(i=.5>=h?c/(a+l):c/(2-a-l),a){case n:t=(o-s)/c+(s>o?6:0);break;case o:t=(s-n)/c+2;break;case s:t=(n-o)/c+4}t/=6}return r.h=t,r.s=i,r.l=h,r},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(e,t,i){var r=this.getHSL();return r.h+=e,r.s+=t,r.l+=i,this.setHSL(r.h,r.s,r.l),this},add:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this},addColors:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this},addScalar:function(e){return this.r+=e,this.g+=e,this.b+=e,this},multiply:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this},multiplyScalar:function(e){return this.r*=e,this.g*=e,this.b*=e,this},lerp:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this},equals:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b},fromArray:function(e){return this.r=e[0],this.g=e[1],this.b=e[2],this},toArray:function(){return[this.r,this.g,this.b]},clone:function(){return(new THREE.Color).setRGB(this.r,this.g,this.b)}},THREE.ColorKeywords={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},THREE.Quaternion=function(e,t,i,r){this._x=e||0,this._y=t||0,this._z=i||0,this._w=void 0!==r?r:1},THREE.Quaternion.prototype={constructor:THREE.Quaternion,_x:0,_y:0,_z:0,_w:0,_euler:void 0,_updateEuler:function(){void 0!==this._euler&&this._euler.setFromQuaternion(this,void 0,!1)},get x(){return this._x},set x(e){this._x=e,this._updateEuler()},get y(){return this._y},set y(e){this._y=e,this._updateEuler()},get z(){return this._z},set z(e){this._z=e,this._updateEuler()},get w(){return this._w},set w(e){this._w=e,this._updateEuler()},set:function(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._updateEuler(),this},copy:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._w=e._w,this._updateEuler(),this},setFromEuler:function(e,t){if(e instanceof THREE.Euler==!1)throw new Error("ERROR: Quaternion's .setFromEuler() now expects a Euler rotation rather than a Vector3 and order.  Please update your code.");var i=Math.cos(e._x/2),r=Math.cos(e._y/2),n=Math.cos(e._z/2),o=Math.sin(e._x/2),s=Math.sin(e._y/2),a=Math.sin(e._z/2);return"XYZ"===e.order?(this._x=o*r*n+i*s*a,this._y=i*s*n-o*r*a,this._z=i*r*a+o*s*n,this._w=i*r*n-o*s*a):"YXZ"===e.order?(this._x=o*r*n+i*s*a,this._y=i*s*n-o*r*a,this._z=i*r*a-o*s*n,this._w=i*r*n+o*s*a):"ZXY"===e.order?(this._x=o*r*n-i*s*a,this._y=i*s*n+o*r*a,this._z=i*r*a+o*s*n,this._w=i*r*n-o*s*a):"ZYX"===e.order?(this._x=o*r*n-i*s*a,this._y=i*s*n+o*r*a,this._z=i*r*a-o*s*n,this._w=i*r*n+o*s*a):"YZX"===e.order?(this._x=o*r*n+i*s*a,this._y=i*s*n+o*r*a,this._z=i*r*a-o*s*n,this._w=i*r*n-o*s*a):"XZY"===e.order&&(this._x=o*r*n-i*s*a,this._y=i*s*n-o*r*a,this._z=i*r*a+o*s*n,this._w=i*r*n+o*s*a),t!==!1&&this._updateEuler(),this},setFromAxisAngle:function(e,t){var i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._updateEuler(),this},setFromRotationMatrix:function(e){var t,i=e.elements,r=i[0],n=i[4],o=i[8],s=i[1],a=i[5],l=i[9],h=i[2],c=i[6],u=i[10],d=r+a+u;return d>0?(t=.5/Math.sqrt(d+1),this._w=.25/t,this._x=(c-l)*t,this._y=(o-h)*t,this._z=(s-n)*t):r>a&&r>u?(t=2*Math.sqrt(1+r-a-u),this._w=(c-l)/t,this._x=.25*t,this._y=(n+s)/t,this._z=(o+h)/t):a>u?(t=2*Math.sqrt(1+a-r-u),this._w=(o-h)/t,this._x=(n+s)/t,this._y=.25*t,this._z=(l+c)/t):(t=2*Math.sqrt(1+u-r-a),this._w=(s-n)/t,this._x=(o+h)/t,this._y=(l+c)/t,this._z=.25*t),this._updateEuler(),this},inverse:function(){return this.conjugate().normalize(),this},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._updateEuler(),this},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this},multiply:function(e,t){return void 0!==t?(console.warn("DEPRECATED: Quaternion's .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)},multiplyQuaternions:function(e,t){var i=e._x,r=e._y,n=e._z,o=e._w,s=t._x,a=t._y,l=t._z,h=t._w;return this._x=i*h+o*s+r*l-n*a,this._y=r*h+o*a+n*s-i*l,this._z=n*h+o*l+i*a-r*s,this._w=o*h-i*s-r*a-n*l,this._updateEuler(),this},multiplyVector3:function(e){return console.warn("DEPRECATED: Quaternion's .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)},slerp:function(e,t){var i=this._x,r=this._y,n=this._z,o=this._w,s=o*e._w+i*e._x+r*e._y+n*e._z;if(0>s?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,s=-s):this.copy(e),s>=1)return this._w=o,this._x=i,this._y=r,this._z=n,this;var a=Math.acos(s),l=Math.sqrt(1-s*s);if(Math.abs(l)<.001)return this._w=.5*(o+this._w),this._x=.5*(i+this._x),this._y=.5*(r+this._y),this._z=.5*(n+this._z),this;var h=Math.sin((1-t)*a)/l,c=Math.sin(t*a)/l;return this._w=o*h+this._w*c,this._x=i*h+this._x*c,this._y=r*h+this._y*c,this._z=n*h+this._z*c,this._updateEuler(),this},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w},fromArray:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],this._w=e[3],this._updateEuler(),this},toArray:function(){return[this._x,this._y,this._z,this._w]},clone:function(){return new THREE.Quaternion(this._x,this._y,this._z,this._w)}},THREE.Quaternion.slerp=function(e,t,i,r){return i.copy(e).slerp(t,r)},THREE.Vector2=function(e,t){this.x=e||0,this.y=t||0},THREE.Vector2.prototype={constructor:THREE.Vector2,set:function(e,t){return this.x=e,this.y=t,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}},copy:function(e){return this.x=e.x,this.y=e.y,this},add:function(e,t){return void 0!==t?(console.warn("DEPRECATED: Vector2's .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this},addScalar:function(e){return this.x+=e,this.y+=e,this},sub:function(e,t){return void 0!==t?(console.warn("DEPRECATED: Vector2's .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this},divideScalar:function(e){if(0!==e){var t=1/e;this.x*=t,this.y*=t}else this.x=0,this.y=0;return this},min:function(e){return this.x>e.x&&(this.x=e.x),this.y>e.y&&(this.y=e.y),this},max:function(e){return this.x<e.x&&(this.x=e.x),this.y<e.y&&(this.y=e.y),this},clamp:function(e,t){return this.x<e.x?this.x=e.x:this.x>t.x&&(this.x=t.x),this.y<e.y?this.y=e.y:this.y>t.y&&(this.y=t.y),this},clampScalar:function(){var e,t;return function(i,r){return void 0===e&&(e=new THREE.Vector2,t=new THREE.Vector2),e.set(i,i),t.set(r,r),this.clamp(e,t)}}(),floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.multiplyScalar(-1)},dot:function(e){return this.x*e.x+this.y*e.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},normalize:function(){return this.divideScalar(this.length())},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,i=this.y-e.y;return t*t+i*i},setLength:function(e){var t=this.length();return 0!==t&&e!==t&&this.multiplyScalar(e/t),this},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this},equals:function(e){return e.x===this.x&&e.y===this.y},fromArray:function(e){return this.x=e[0],this.y=e[1],this},toArray:function(){return[this.x,this.y]},clone:function(){return new THREE.Vector2(this.x,this.y)}},THREE.Vector3=function(e,t,i){this.x=e||0,this.y=t||0,this.z=i||0},THREE.Vector3.prototype={constructor:THREE.Vector3,set:function(e,t,i){return this.x=e,this.y=t,this.z=i,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},add:function(e,t){return void 0!==t?(console.warn("DEPRECATED: Vector3's .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this},sub:function(e,t){return void 0!==t?(console.warn("DEPRECATED: Vector3's .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this},multiply:function(e,t){return void 0!==t?(console.warn("DEPRECATED: Vector3's .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this},multiplyVectors:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this},applyEuler:function(){var e;return function(t){return t instanceof THREE.Euler==!1&&console.error("ERROR: Vector3's .applyEuler() now expects a Euler rotation rather than a Vector3 and order.  Please update your code."),void 0===e&&(e=new THREE.Quaternion),this.applyQuaternion(e.setFromEuler(t)),this}}(),applyAxisAngle:function(){var e;return function(t,i){return void 0===e&&(e=new THREE.Quaternion),this.applyQuaternion(e.setFromAxisAngle(t,i)),this}}(),applyMatrix3:function(e){var t=this.x,i=this.y,r=this.z,n=e.elements;return this.x=n[0]*t+n[3]*i+n[6]*r,this.y=n[1]*t+n[4]*i+n[7]*r,this.z=n[2]*t+n[5]*i+n[8]*r,this},applyMatrix4:function(e){var t=this.x,i=this.y,r=this.z,n=e.elements;return this.x=n[0]*t+n[4]*i+n[8]*r+n[12],this.y=n[1]*t+n[5]*i+n[9]*r+n[13],this.z=n[2]*t+n[6]*i+n[10]*r+n[14],this},applyProjection:function(e){var t=this.x,i=this.y,r=this.z,n=e.elements,o=1/(n[3]*t+n[7]*i+n[11]*r+n[15]);return this.x=(n[0]*t+n[4]*i+n[8]*r+n[12])*o,this.y=(n[1]*t+n[5]*i+n[9]*r+n[13])*o,this.z=(n[2]*t+n[6]*i+n[10]*r+n[14])*o,this},applyQuaternion:function(e){var t=this.x,i=this.y,r=this.z,n=e.x,o=e.y,s=e.z,a=e.w,l=a*t+o*r-s*i,h=a*i+s*t-n*r,c=a*r+n*i-o*t,u=-n*t-o*i-s*r;return this.x=l*a+u*-n+h*-s-c*-o,this.y=h*a+u*-o+c*-n-l*-s,this.z=c*a+u*-s+l*-o-h*-n,this},transformDirection:function(e){var t=this.x,i=this.y,r=this.z,n=e.elements;return this.x=n[0]*t+n[4]*i+n[8]*r,this.y=n[1]*t+n[5]*i+n[9]*r,this.z=n[2]*t+n[6]*i+n[10]*r,this.normalize(),this},divide:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this},divideScalar:function(e){if(0!==e){var t=1/e;this.x*=t,this.y*=t,this.z*=t}else this.x=0,this.y=0,this.z=0;return this},min:function(e){return this.x>e.x&&(this.x=e.x),this.y>e.y&&(this.y=e.y),this.z>e.z&&(this.z=e.z),this},max:function(e){return this.x<e.x&&(this.x=e.x),this.y<e.y&&(this.y=e.y),this.z<e.z&&(this.z=e.z),this},clamp:function(e,t){return this.x<e.x?this.x=e.x:this.x>t.x&&(this.x=t.x),this.y<e.y?this.y=e.y:this.y>t.y&&(this.y=t.y),this.z<e.z?this.z=e.z:this.z>t.z&&(this.z=t.z),this},clampScalar:function(){var e,t;return function(i,r){return void 0===e&&(e=new THREE.Vector3,t=new THREE.Vector3),e.set(i,i,i),t.set(r,r,r),this.clamp(e,t)}}(),floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.multiplyScalar(-1)},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length())},setLength:function(e){var t=this.length();return 0!==t&&e!==t&&this.multiplyScalar(e/t),this},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this},cross:function(e,t){if(void 0!==t)return console.warn("DEPRECATED: Vector3's .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t);var i=this.x,r=this.y,n=this.z;return this.x=r*e.z-n*e.y,this.y=n*e.x-i*e.z,this.z=i*e.y-r*e.x,this},crossVectors:function(e,t){var i=e.x,r=e.y,n=e.z,o=t.x,s=t.y,a=t.z;return this.x=r*a-n*s,this.y=n*o-i*a,this.z=i*s-r*o,this},projectOnVector:function(){var e,t;return function(i){return void 0===e&&(e=new THREE.Vector3),e.copy(i).normalize(),t=this.dot(e),this.copy(e).multiplyScalar(t)}}(),projectOnPlane:function(){var e;return function(t){return void 0===e&&(e=new THREE.Vector3),e.copy(this).projectOnVector(t),this.sub(e)}}(),reflect:function(){var e;return function(t){return void 0===e&&(e=new THREE.Vector3),this.sub(e.copy(t).multiplyScalar(2*this.dot(t)))}}(),angleTo:function(e){var t=this.dot(e)/(this.length()*e.length());return Math.acos(THREE.Math.clamp(t,-1,1))},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r},setEulerFromRotationMatrix:function(){console.error("REMOVED: Vector3's setEulerFromRotationMatrix has been removed in favor of Euler.setFromRotationMatrix(), please update your code.")},setEulerFromQuaternion:function(){console.error("REMOVED: Vector3's setEulerFromQuaternion: has been removed in favor of Euler.setFromQuaternion(), please update your code.")},getPositionFromMatrix:function(e){return console.warn("DEPRECATED: Vector3's .getPositionFromMatrix() has been renamed to .setFromMatrixPosition(). Please update your code."),this.setFromMatrixPosition(e)},getScaleFromMatrix:function(e){return console.warn("DEPRECATED: Vector3's .getScaleFromMatrix() has been renamed to .setFromMatrixScale(). Please update your code."),this.setFromMatrixScale(e)},getColumnFromMatrix:function(e,t){return console.warn("DEPRECATED: Vector3's .getColumnFromMatrix() has been renamed to .setFromMatrixColumn(). Please update your code."),this.setFromMatrixColumn(e,t)},setFromMatrixPosition:function(e){return this.x=e.elements[12],this.y=e.elements[13],this.z=e.elements[14],this},setFromMatrixScale:function(e){var t=this.set(e.elements[0],e.elements[1],e.elements[2]).length(),i=this.set(e.elements[4],e.elements[5],e.elements[6]).length(),r=this.set(e.elements[8],e.elements[9],e.elements[10]).length();return this.x=t,this.y=i,this.z=r,this},setFromMatrixColumn:function(e,t){var i=4*e,r=t.elements;return this.x=r[i],this.y=r[i+1],this.z=r[i+2],this},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z},fromArray:function(e){return this.x=e[0],this.y=e[1],this.z=e[2],this},toArray:function(){return[this.x,this.y,this.z]},clone:function(){return new THREE.Vector3(this.x,this.y,this.z)}},THREE.Vector4=function(e,t,i,r){this.x=e||0,this.y=t||0,this.z=i||0,this.w=void 0!==r?r:1},THREE.Vector4.prototype={constructor:THREE.Vector4,set:function(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setW:function(e){return this.w=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this},add:function(e,t){return void 0!==t?(console.warn("DEPRECATED: Vector4's .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this},sub:function(e,t){return void 0!==t?(console.warn("DEPRECATED: Vector4's .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this},applyMatrix4:function(e){var t=this.x,i=this.y,r=this.z,n=this.w,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*r+o[12]*n,this.y=o[1]*t+o[5]*i+o[9]*r+o[13]*n,this.z=o[2]*t+o[6]*i+o[10]*r+o[14]*n,this.w=o[3]*t+o[7]*i+o[11]*r+o[15]*n,this},divideScalar:function(e){if(0!==e){var t=1/e;this.x*=t,this.y*=t,this.z*=t,this.w*=t}else this.x=0,this.y=0,this.z=0,this.w=1;return this},setAxisAngleFromQuaternion:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return 1e-4>t?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this},setAxisAngleFromRotationMatrix:function(e){var t,i,r,n,o=.01,s=.1,a=e.elements,l=a[0],h=a[4],c=a[8],u=a[1],d=a[5],f=a[9],m=a[2],p=a[6],g=a[10];if(Math.abs(h-u)<o&&Math.abs(c-m)<o&&Math.abs(f-p)<o){if(Math.abs(h+u)<s&&Math.abs(c+m)<s&&Math.abs(f+p)<s&&Math.abs(l+d+g-3)<s)return this.set(1,0,0,0),this;t=Math.PI;var E=(l+1)/2,v=(d+1)/2,y=(g+1)/2,x=(h+u)/4,T=(c+m)/4,w=(f+p)/4;return E>v&&E>y?o>E?(i=0,r=.707106781,n=.707106781):(i=Math.sqrt(E),r=x/i,n=T/i):v>y?o>v?(i=.707106781,r=0,n=.707106781):(r=Math.sqrt(v),i=x/r,n=w/r):o>y?(i=.707106781,r=.707106781,n=0):(n=Math.sqrt(y),i=T/n,r=w/n),this.set(i,r,n,t),this}var A=Math.sqrt((p-f)*(p-f)+(c-m)*(c-m)+(u-h)*(u-h));return Math.abs(A)<.001&&(A=1),this.x=(p-f)/A,this.y=(c-m)/A,this.z=(u-h)/A,this.w=Math.acos((l+d+g-1)/2),this},min:function(e){return this.x>e.x&&(this.x=e.x),this.y>e.y&&(this.y=e.y),this.z>e.z&&(this.z=e.z),this.w>e.w&&(this.w=e.w),this},max:function(e){return this.x<e.x&&(this.x=e.x),this.y<e.y&&(this.y=e.y),this.z<e.z&&(this.z=e.z),this.w<e.w&&(this.w=e.w),this},clamp:function(e,t){return this.x<e.x?this.x=e.x:this.x>t.x&&(this.x=t.x),this.y<e.y?this.y=e.y:this.y>t.y&&(this.y=t.y),this.z<e.z?this.z=e.z:this.z>t.z&&(this.z=t.z),this.w<e.w?this.w=e.w:this.w>t.w&&(this.w=t.w),this},clampScalar:function(){var e,t;return function(i,r){return void 0===e&&(e=new THREE.Vector4,t=new THREE.Vector4),e.set(i,i,i,i),t.set(r,r,r,r),this.clamp(e,t)}}(),floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.multiplyScalar(-1)},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length())},setLength:function(e){var t=this.length();return 0!==t&&e!==t&&this.multiplyScalar(e/t),this},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w},fromArray:function(e){return this.x=e[0],this.y=e[1],this.z=e[2],this.w=e[3],this},toArray:function(){return[this.x,this.y,this.z,this.w]},clone:function(){return new THREE.Vector4(this.x,this.y,this.z,this.w)}},THREE.Euler=function(e,t,i,r){this._x=e||0,this._y=t||0,this._z=i||0,this._order=r||THREE.Euler.DefaultOrder},THREE.Euler.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],THREE.Euler.DefaultOrder="XYZ",THREE.Euler.prototype={constructor:THREE.Euler,_x:0,_y:0,_z:0,_order:THREE.Euler.DefaultOrder,_quaternion:void 0,_updateQuaternion:function(){void 0!==this._quaternion&&this._quaternion.setFromEuler(this,!1)},get x(){return this._x},set x(e){this._x=e,this._updateQuaternion()},get y(){return this._y},set y(e){this._y=e,this._updateQuaternion()},get z(){return this._z},set z(e){this._z=e,this._updateQuaternion()},get order(){return this._order},set order(e){this._order=e,this._updateQuaternion()},set:function(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._order=r||this._order,this._updateQuaternion(),this},copy:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._updateQuaternion(),this},setFromRotationMatrix:function(e,t){function i(e){return Math.min(Math.max(e,-1),1)}var r=e.elements,n=r[0],o=r[4],s=r[8],a=r[1],l=r[5],h=r[9],c=r[2],u=r[6],d=r[10];return t=t||this._order,"XYZ"===t?(this._y=Math.asin(i(s)),Math.abs(s)<.99999?(this._x=Math.atan2(-h,d),this._z=Math.atan2(-o,n)):(this._x=Math.atan2(u,l),this._z=0)):"YXZ"===t?(this._x=Math.asin(-i(h)),Math.abs(h)<.99999?(this._y=Math.atan2(s,d),this._z=Math.atan2(a,l)):(this._y=Math.atan2(-c,n),this._z=0)):"ZXY"===t?(this._x=Math.asin(i(u)),Math.abs(u)<.99999?(this._y=Math.atan2(-c,d),this._z=Math.atan2(-o,l)):(this._y=0,this._z=Math.atan2(a,n))):"ZYX"===t?(this._y=Math.asin(-i(c)),Math.abs(c)<.99999?(this._x=Math.atan2(u,d),this._z=Math.atan2(a,n)):(this._x=0,this._z=Math.atan2(-o,l))):"YZX"===t?(this._z=Math.asin(i(a)),Math.abs(a)<.99999?(this._x=Math.atan2(-h,l),this._y=Math.atan2(-c,n)):(this._x=0,this._y=Math.atan2(s,d))):"XZY"===t?(this._z=Math.asin(-i(o)),Math.abs(o)<.99999?(this._x=Math.atan2(u,l),this._y=Math.atan2(s,n)):(this._x=Math.atan2(-h,d),this._y=0)):console.warn("WARNING: Euler.setFromRotationMatrix() given unsupported order: "+t),this._order=t,this._updateQuaternion(),this},setFromQuaternion:function(e,t,i){function r(e){return Math.min(Math.max(e,-1),1)}var n=e.x*e.x,o=e.y*e.y,s=e.z*e.z,a=e.w*e.w;return t=t||this._order,"XYZ"===t?(this._x=Math.atan2(2*(e.x*e.w-e.y*e.z),a-n-o+s),this._y=Math.asin(r(2*(e.x*e.z+e.y*e.w))),this._z=Math.atan2(2*(e.z*e.w-e.x*e.y),a+n-o-s)):"YXZ"===t?(this._x=Math.asin(r(2*(e.x*e.w-e.y*e.z))),this._y=Math.atan2(2*(e.x*e.z+e.y*e.w),a-n-o+s),this._z=Math.atan2(2*(e.x*e.y+e.z*e.w),a-n+o-s)):"ZXY"===t?(this._x=Math.asin(r(2*(e.x*e.w+e.y*e.z))),this._y=Math.atan2(2*(e.y*e.w-e.z*e.x),a-n-o+s),this._z=Math.atan2(2*(e.z*e.w-e.x*e.y),a-n+o-s)):"ZYX"===t?(this._x=Math.atan2(2*(e.x*e.w+e.z*e.y),a-n-o+s),this._y=Math.asin(r(2*(e.y*e.w-e.x*e.z))),this._z=Math.atan2(2*(e.x*e.y+e.z*e.w),a+n-o-s)):"YZX"===t?(this._x=Math.atan2(2*(e.x*e.w-e.z*e.y),a-n+o-s),this._y=Math.atan2(2*(e.y*e.w-e.x*e.z),a+n-o-s),this._z=Math.asin(r(2*(e.x*e.y+e.z*e.w)))):"XZY"===t?(this._x=Math.atan2(2*(e.x*e.w+e.y*e.z),a-n+o-s),this._y=Math.atan2(2*(e.x*e.z+e.y*e.w),a+n-o-s),this._z=Math.asin(r(2*(e.z*e.w-e.x*e.y)))):console.warn("WARNING: Euler.setFromQuaternion() given unsupported order: "+t),this._order=t,i!==!1&&this._updateQuaternion(),this},reorder:function(){var e=new THREE.Quaternion;
return function(t){e.setFromEuler(this),this.setFromQuaternion(e,t)}}(),fromArray:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._updateQuaternion(),this},toArray:function(){return[this._x,this._y,this._z,this._order]},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order},clone:function(){return new THREE.Euler(this._x,this._y,this._z,this._order)}},THREE.Line3=function(e,t){this.start=void 0!==e?e:new THREE.Vector3,this.end=void 0!==t?t:new THREE.Vector3},THREE.Line3.prototype={constructor:THREE.Line3,set:function(e,t){return this.start.copy(e),this.end.copy(t),this},copy:function(e){return this.start.copy(e.start),this.end.copy(e.end),this},center:function(e){var t=e||new THREE.Vector3;return t.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(e){var t=e||new THREE.Vector3;return t.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(e,t){var i=t||new THREE.Vector3;return this.delta(i).multiplyScalar(e).add(this.start)},closestPointToPointParameter:function(){var e=new THREE.Vector3,t=new THREE.Vector3;return function(i,r){e.subVectors(i,this.start),t.subVectors(this.end,this.start);var n=t.dot(t),o=t.dot(e),s=o/n;return r&&(s=THREE.Math.clamp(s,0,1)),s}}(),closestPointToPoint:function(e,t,i){var r=this.closestPointToPointParameter(e,t),n=i||new THREE.Vector3;return this.delta(n).multiplyScalar(r).add(this.start)},applyMatrix4:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this},equals:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)},clone:function(){return(new THREE.Line3).copy(this)}},THREE.Box2=function(e,t){this.min=void 0!==e?e:new THREE.Vector2(1/0,1/0),this.max=void 0!==t?t:new THREE.Vector2(-1/0,-1/0)},THREE.Box2.prototype={constructor:THREE.Box2,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromPoints:function(e){if(e.length>0){var t=e[0];this.min.copy(t),this.max.copy(t);for(var i=1,r=e.length;r>i;i++)t=e[i],t.x<this.min.x?this.min.x=t.x:t.x>this.max.x&&(this.max.x=t.x),t.y<this.min.y?this.min.y=t.y:t.y>this.max.y&&(this.max.y=t.y)}else this.makeEmpty();return this},setFromCenterAndSize:function(){var e=new THREE.Vector2;return function(t,i){var r=e.copy(i).multiplyScalar(.5);return this.min.copy(t).sub(r),this.max.copy(t).add(r),this}}(),copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},empty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},center:function(e){var t=e||new THREE.Vector2;return t.addVectors(this.min,this.max).multiplyScalar(.5)},size:function(e){var t=e||new THREE.Vector2;return t.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y?!1:!0},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y?!0:!1},getParameter:function(e,t){var i=t||new THREE.Vector2;return i.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))},isIntersectionBox:function(e){return e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y?!1:!0},clampPoint:function(e,t){var i=t||new THREE.Vector2;return i.copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new THREE.Vector2;return function(t){var i=e.copy(t).clamp(this.min,this.max);return i.sub(t).length()}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)},clone:function(){return(new THREE.Box2).copy(this)}},THREE.Box3=function(e,t){this.min=void 0!==e?e:new THREE.Vector3(1/0,1/0,1/0),this.max=void 0!==t?t:new THREE.Vector3(-1/0,-1/0,-1/0)},THREE.Box3.prototype={constructor:THREE.Box3,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},addPoint:function(e){e.x<this.min.x?this.min.x=e.x:e.x>this.max.x&&(this.max.x=e.x),e.y<this.min.y?this.min.y=e.y:e.y>this.max.y&&(this.max.y=e.y),e.z<this.min.z?this.min.z=e.z:e.z>this.max.z&&(this.max.z=e.z)},setFromPoints:function(e){if(e.length>0){var t=e[0];this.min.copy(t),this.max.copy(t);for(var i=1,r=e.length;r>i;i++)this.addPoint(e[i])}else this.makeEmpty();return this},setFromCenterAndSize:function(){var e=new THREE.Vector3;return function(t,i){var r=e.copy(i).multiplyScalar(.5);return this.min.copy(t).sub(r),this.max.copy(t).add(r),this}}(),setFromObject:function(){var e=new THREE.Vector3;return function(t){var i=this;return t.updateMatrixWorld(!0),this.makeEmpty(),t.traverse(function(t){if(void 0!==t.geometry&&void 0!==t.geometry.vertices)for(var r=t.geometry.vertices,n=0,o=r.length;o>n;n++)e.copy(r[n]),e.applyMatrix4(t.matrixWorld),i.expandByPoint(e)}),this}}(),copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},empty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},center:function(e){var t=e||new THREE.Vector3;return t.addVectors(this.min,this.max).multiplyScalar(.5)},size:function(e){var t=e||new THREE.Vector3;return t.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z?!1:!0},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z?!0:!1},getParameter:function(e,t){var i=t||new THREE.Vector3;return i.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))},isIntersectionBox:function(e){return e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z?!1:!0},clampPoint:function(e,t){var i=t||new THREE.Vector3;return i.copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new THREE.Vector3;return function(t){var i=e.copy(t).clamp(this.min,this.max);return i.sub(t).length()}}(),getBoundingSphere:function(){var e=new THREE.Vector3;return function(t){var i=t||new THREE.Sphere;return i.center=this.center(),i.radius=.5*this.size(e).length(),i}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},applyMatrix4:function(){var e=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3];return function(t){return e[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),e[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),e[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),e[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),e[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),e[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),e[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),e[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.makeEmpty(),this.setFromPoints(e),this}}(),translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)},clone:function(){return(new THREE.Box3).copy(this)}},THREE.Matrix3=function(e,t,i,r,n,o,s,a,l){this.elements=new Float32Array(9),this.set(void 0!==e?e:1,t||0,i||0,r||0,void 0!==n?n:1,o||0,s||0,a||0,void 0!==l?l:1)},THREE.Matrix3.prototype={constructor:THREE.Matrix3,set:function(e,t,i,r,n,o,s,a,l){var h=this.elements;return h[0]=e,h[3]=t,h[6]=i,h[1]=r,h[4]=n,h[7]=o,h[2]=s,h[5]=a,h[8]=l,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},copy:function(e){var t=e.elements;return this.set(t[0],t[3],t[6],t[1],t[4],t[7],t[2],t[5],t[8]),this},multiplyVector3:function(e){return console.warn("DEPRECATED: Matrix3's .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},multiplyVector3Array:function(){var e=new THREE.Vector3;return function(t){for(var i=0,r=t.length;r>i;i+=3)e.x=t[i],e.y=t[i+1],e.z=t[i+2],e.applyMatrix3(this),t[i]=e.x,t[i+1]=e.y,t[i+2]=e.z;return t}}(),multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this},determinant:function(){var e=this.elements,t=e[0],i=e[1],r=e[2],n=e[3],o=e[4],s=e[5],a=e[6],l=e[7],h=e[8];return t*o*h-t*s*l-i*n*h+i*s*a+r*n*l-r*o*a},getInverse:function(e,t){var i=e.elements,r=this.elements;r[0]=i[10]*i[5]-i[6]*i[9],r[1]=-i[10]*i[1]+i[2]*i[9],r[2]=i[6]*i[1]-i[2]*i[5],r[3]=-i[10]*i[4]+i[6]*i[8],r[4]=i[10]*i[0]-i[2]*i[8],r[5]=-i[6]*i[0]+i[2]*i[4],r[6]=i[9]*i[4]-i[5]*i[8],r[7]=-i[9]*i[0]+i[1]*i[8],r[8]=i[5]*i[0]-i[1]*i[4];var n=i[0]*r[0]+i[1]*r[3]+i[2]*r[6];if(0===n){var o="Matrix3.getInverse(): can't invert matrix, determinant is 0";if(t)throw new Error(o);return console.warn(o),this.identity(),this}return this.multiplyScalar(1/n),this},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this},getNormalMatrix:function(e){return this.getInverse(e).transpose(),this},transposeIntoArray:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this},fromArray:function(e){return this.elements.set(e),this},toArray:function(){var e=this.elements;return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8]]},clone:function(){var e=this.elements;return new THREE.Matrix3(e[0],e[3],e[6],e[1],e[4],e[7],e[2],e[5],e[8])}},THREE.Matrix4=function(e,t,i,r,n,o,s,a,l,h,c,u,d,f,m,p){this.elements=new Float32Array(16);var g=this.elements;g[0]=void 0!==e?e:1,g[4]=t||0,g[8]=i||0,g[12]=r||0,g[1]=n||0,g[5]=void 0!==o?o:1,g[9]=s||0,g[13]=a||0,g[2]=l||0,g[6]=h||0,g[10]=void 0!==c?c:1,g[14]=u||0,g[3]=d||0,g[7]=f||0,g[11]=m||0,g[15]=void 0!==p?p:1},THREE.Matrix4.prototype={constructor:THREE.Matrix4,set:function(e,t,i,r,n,o,s,a,l,h,c,u,d,f,m,p){var g=this.elements;return g[0]=e,g[4]=t,g[8]=i,g[12]=r,g[1]=n,g[5]=o,g[9]=s,g[13]=a,g[2]=l,g[6]=h,g[10]=c,g[14]=u,g[3]=d,g[7]=f,g[11]=m,g[15]=p,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},copy:function(e){return this.elements.set(e.elements),this},extractPosition:function(e){return console.warn("DEPRECATED: Matrix4's .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},copyPosition:function(e){var t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this},extractRotation:function(){var e=new THREE.Vector3;return function(t){var i=this.elements,r=t.elements,n=1/e.set(r[0],r[1],r[2]).length(),o=1/e.set(r[4],r[5],r[6]).length(),s=1/e.set(r[8],r[9],r[10]).length();return i[0]=r[0]*n,i[1]=r[1]*n,i[2]=r[2]*n,i[4]=r[4]*o,i[5]=r[5]*o,i[6]=r[6]*o,i[8]=r[8]*s,i[9]=r[9]*s,i[10]=r[10]*s,this}}(),makeRotationFromEuler:function(e){e instanceof THREE.Euler==!1&&console.error("ERROR: Matrix's .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.  Please update your code.");var t=this.elements,i=e.x,r=e.y,n=e.z,o=Math.cos(i),s=Math.sin(i),a=Math.cos(r),l=Math.sin(r),h=Math.cos(n),c=Math.sin(n);if("XYZ"===e.order){var u=o*h,d=o*c,f=s*h,m=s*c;t[0]=a*h,t[4]=-a*c,t[8]=l,t[1]=d+f*l,t[5]=u-m*l,t[9]=-s*a,t[2]=m-u*l,t[6]=f+d*l,t[10]=o*a}else if("YXZ"===e.order){var p=a*h,g=a*c,E=l*h,v=l*c;t[0]=p+v*s,t[4]=E*s-g,t[8]=o*l,t[1]=o*c,t[5]=o*h,t[9]=-s,t[2]=g*s-E,t[6]=v+p*s,t[10]=o*a}else if("ZXY"===e.order){var p=a*h,g=a*c,E=l*h,v=l*c;t[0]=p-v*s,t[4]=-o*c,t[8]=E+g*s,t[1]=g+E*s,t[5]=o*h,t[9]=v-p*s,t[2]=-o*l,t[6]=s,t[10]=o*a}else if("ZYX"===e.order){var u=o*h,d=o*c,f=s*h,m=s*c;t[0]=a*h,t[4]=f*l-d,t[8]=u*l+m,t[1]=a*c,t[5]=m*l+u,t[9]=d*l-f,t[2]=-l,t[6]=s*a,t[10]=o*a}else if("YZX"===e.order){var y=o*a,x=o*l,T=s*a,w=s*l;t[0]=a*h,t[4]=w-y*c,t[8]=T*c+x,t[1]=c,t[5]=o*h,t[9]=-s*h,t[2]=-l*h,t[6]=x*c+T,t[10]=y-w*c}else if("XZY"===e.order){var y=o*a,x=o*l,T=s*a,w=s*l;t[0]=a*h,t[4]=-c,t[8]=l*h,t[1]=y*c+w,t[5]=o*h,t[9]=x*c-T,t[2]=T*c-x,t[6]=s*h,t[10]=w*c+y}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},setRotationFromQuaternion:function(e){return console.warn("DEPRECATED: Matrix4's .setRotationFromQuaternion() has been deprecated in favor of makeRotationFromQuaternion.  Please update your code."),this.makeRotationFromQuaternion(e)},makeRotationFromQuaternion:function(e){var t=this.elements,i=e.x,r=e.y,n=e.z,o=e.w,s=i+i,a=r+r,l=n+n,h=i*s,c=i*a,u=i*l,d=r*a,f=r*l,m=n*l,p=o*s,g=o*a,E=o*l;return t[0]=1-(d+m),t[4]=c-E,t[8]=u+g,t[1]=c+E,t[5]=1-(h+m),t[9]=f-p,t[2]=u-g,t[6]=f+p,t[10]=1-(h+d),t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},lookAt:function(){var e=new THREE.Vector3,t=new THREE.Vector3,i=new THREE.Vector3;return function(r,n,o){var s=this.elements;return i.subVectors(r,n).normalize(),0===i.length()&&(i.z=1),e.crossVectors(o,i).normalize(),0===e.length()&&(i.x+=1e-4,e.crossVectors(o,i).normalize()),t.crossVectors(i,e),s[0]=e.x,s[4]=t.x,s[8]=i.x,s[1]=e.y,s[5]=t.y,s[9]=i.y,s[2]=e.z,s[6]=t.z,s[10]=i.z,this}}(),multiply:function(e,t){return void 0!==t?(console.warn("DEPRECATED: Matrix4's .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)},multiplyMatrices:function(e,t){var i=e.elements,r=t.elements,n=this.elements,o=i[0],s=i[4],a=i[8],l=i[12],h=i[1],c=i[5],u=i[9],d=i[13],f=i[2],m=i[6],p=i[10],g=i[14],E=i[3],v=i[7],y=i[11],x=i[15],T=r[0],w=r[4],A=r[8],R=r[12],_=r[1],C=r[5],b=r[9],F=r[13],S=r[2],H=r[6],D=r[10],M=r[14],B=r[3],L=r[7],k=r[11],q=r[15];return n[0]=o*T+s*_+a*S+l*B,n[4]=o*w+s*C+a*H+l*L,n[8]=o*A+s*b+a*D+l*k,n[12]=o*R+s*F+a*M+l*q,n[1]=h*T+c*_+u*S+d*B,n[5]=h*w+c*C+u*H+d*L,n[9]=h*A+c*b+u*D+d*k,n[13]=h*R+c*F+u*M+d*q,n[2]=f*T+m*_+p*S+g*B,n[6]=f*w+m*C+p*H+g*L,n[10]=f*A+m*b+p*D+g*k,n[14]=f*R+m*F+p*M+g*q,n[3]=E*T+v*_+y*S+x*B,n[7]=E*w+v*C+y*H+x*L,n[11]=E*A+v*b+y*D+x*k,n[15]=E*R+v*F+y*M+x*q,this},multiplyToArray:function(e,t,i){var r=this.elements;return this.multiplyMatrices(e,t),i[0]=r[0],i[1]=r[1],i[2]=r[2],i[3]=r[3],i[4]=r[4],i[5]=r[5],i[6]=r[6],i[7]=r[7],i[8]=r[8],i[9]=r[9],i[10]=r[10],i[11]=r[11],i[12]=r[12],i[13]=r[13],i[14]=r[14],i[15]=r[15],this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this},multiplyVector3:function(e){return console.warn("DEPRECATED: Matrix4's .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) or vector.applyProjection( matrix ) instead."),e.applyProjection(this)},multiplyVector4:function(e){return console.warn("DEPRECATED: Matrix4's .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector3Array:function(){var e=new THREE.Vector3;return function(t){for(var i=0,r=t.length;r>i;i+=3)e.x=t[i],e.y=t[i+1],e.z=t[i+2],e.applyProjection(this),t[i]=e.x,t[i+1]=e.y,t[i+2]=e.z;return t}}(),rotateAxis:function(e){console.warn("DEPRECATED: Matrix4's .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},crossVector:function(e){return console.warn("DEPRECATED: Matrix4's .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},determinant:function(){var e=this.elements,t=e[0],i=e[4],r=e[8],n=e[12],o=e[1],s=e[5],a=e[9],l=e[13],h=e[2],c=e[6],u=e[10],d=e[14],f=e[3],m=e[7],p=e[11],g=e[15];return f*(+n*a*c-r*l*c-n*s*u+i*l*u+r*s*d-i*a*d)+m*(+t*a*d-t*l*u+n*o*u-r*o*d+r*l*h-n*a*h)+p*(+t*l*c-t*s*d-n*o*c+i*o*d+n*s*h-i*l*h)+g*(-r*s*h-t*a*c+t*s*u+r*o*c-i*o*u+i*a*h)},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this},flattenToArray:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},flattenToArrayOffset:function(e,t){var i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e},getPosition:function(){var e=new THREE.Vector3;return function(){console.warn("DEPRECATED: Matrix4's .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.");var t=this.elements;return e.set(t[12],t[13],t[14])}}(),setPosition:function(e){var t=this.elements;return t[12]=e.x,t[13]=e.y,t[14]=e.z,this},getInverse:function(e,t){var i=this.elements,r=e.elements,n=r[0],o=r[4],s=r[8],a=r[12],l=r[1],h=r[5],c=r[9],u=r[13],d=r[2],f=r[6],m=r[10],p=r[14],g=r[3],E=r[7],v=r[11],y=r[15];i[0]=c*p*E-u*m*E+u*f*v-h*p*v-c*f*y+h*m*y,i[4]=a*m*E-s*p*E-a*f*v+o*p*v+s*f*y-o*m*y,i[8]=s*u*E-a*c*E+a*h*v-o*u*v-s*h*y+o*c*y,i[12]=a*c*f-s*u*f-a*h*m+o*u*m+s*h*p-o*c*p,i[1]=u*m*g-c*p*g-u*d*v+l*p*v+c*d*y-l*m*y,i[5]=s*p*g-a*m*g+a*d*v-n*p*v-s*d*y+n*m*y,i[9]=a*c*g-s*u*g-a*l*v+n*u*v+s*l*y-n*c*y,i[13]=s*u*d-a*c*d+a*l*m-n*u*m-s*l*p+n*c*p,i[2]=h*p*g-u*f*g+u*d*E-l*p*E-h*d*y+l*f*y,i[6]=a*f*g-o*p*g-a*d*E+n*p*E+o*d*y-n*f*y,i[10]=o*u*g-a*h*g+a*l*E-n*u*E-o*l*y+n*h*y,i[14]=a*h*d-o*u*d-a*l*f+n*u*f+o*l*p-n*h*p,i[3]=c*f*g-h*m*g-c*d*E+l*m*E+h*d*v-l*f*v,i[7]=o*m*g-s*f*g+s*d*E-n*m*E-o*d*v+n*f*v,i[11]=s*h*g-o*c*g-s*l*E+n*c*E+o*l*v-n*h*v,i[15]=o*c*d-s*h*d+s*l*f-n*c*f-o*l*m+n*h*m;var x=n*i[0]+l*i[4]+d*i[8]+g*i[12];if(0==x){var T="Matrix4.getInverse(): can't invert matrix, determinant is 0";if(t)throw new Error(T);return console.warn(T),this.identity(),this}return this.multiplyScalar(1/x),this},translate:function(){console.warn("DEPRECATED: Matrix4's .translate() has been removed.")},rotateX:function(){console.warn("DEPRECATED: Matrix4's .rotateX() has been removed.")},rotateY:function(){console.warn("DEPRECATED: Matrix4's .rotateY() has been removed.")},rotateZ:function(){console.warn("DEPRECATED: Matrix4's .rotateZ() has been removed.")},rotateByAxis:function(){console.warn("DEPRECATED: Matrix4's .rotateByAxis() has been removed.")},scale:function(e){var t=this.elements,i=e.x,r=e.y,n=e.z;return t[0]*=i,t[4]*=r,t[8]*=n,t[1]*=i,t[5]*=r,t[9]*=n,t[2]*=i,t[6]*=r,t[10]*=n,t[3]*=i,t[7]*=r,t[11]*=n,this},getMaxScaleOnAxis:function(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,Math.max(i,r)))},makeTranslation:function(e,t,i){return this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this},makeRotationX:function(e){var t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this},makeRotationY:function(e){var t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this},makeRotationZ:function(e){var t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(e,t){var i=Math.cos(t),r=Math.sin(t),n=1-i,o=e.x,s=e.y,a=e.z,l=n*o,h=n*s;return this.set(l*o+i,l*s-r*a,l*a+r*s,0,l*s+r*a,h*s+i,h*a-r*o,0,l*a-r*s,h*a+r*o,n*a*a+i,0,0,0,0,1),this},makeScale:function(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this},compose:function(e,t,i){return this.makeRotationFromQuaternion(t),this.scale(i),this.setPosition(e),this},decompose:function(){var e=new THREE.Vector3,t=new THREE.Matrix4;return function(i,r,n){var o=this.elements,s=e.set(o[0],o[1],o[2]).length(),a=e.set(o[4],o[5],o[6]).length(),l=e.set(o[8],o[9],o[10]).length(),h=this.determinant();0>h&&(s=-s),i.x=o[12],i.y=o[13],i.z=o[14],t.elements.set(this.elements);var c=1/s,u=1/a,d=1/l;return t.elements[0]*=c,t.elements[1]*=c,t.elements[2]*=c,t.elements[4]*=u,t.elements[5]*=u,t.elements[6]*=u,t.elements[8]*=d,t.elements[9]*=d,t.elements[10]*=d,r.setFromRotationMatrix(t),n.x=s,n.y=a,n.z=l,this}}(),makeFrustum:function(e,t,i,r,n,o){var s=this.elements,a=2*n/(t-e),l=2*n/(r-i),h=(t+e)/(t-e),c=(r+i)/(r-i),u=-(o+n)/(o-n),d=-2*o*n/(o-n);return s[0]=a,s[4]=0,s[8]=h,s[12]=0,s[1]=0,s[5]=l,s[9]=c,s[13]=0,s[2]=0,s[6]=0,s[10]=u,s[14]=d,s[3]=0,s[7]=0,s[11]=-1,s[15]=0,this},makePerspective:function(e,t,i,r){var n=i*Math.tan(THREE.Math.degToRad(.5*e)),o=-n,s=o*t,a=n*t;return this.makeFrustum(s,a,o,n,i,r)},makeOrthographic:function(e,t,i,r,n,o){var s=this.elements,a=t-e,l=i-r,h=o-n,c=(t+e)/a,u=(i+r)/l,d=(o+n)/h;return s[0]=2/a,s[4]=0,s[8]=0,s[12]=-c,s[1]=0,s[5]=2/l,s[9]=0,s[13]=-u,s[2]=0,s[6]=0,s[10]=-2/h,s[14]=-d,s[3]=0,s[7]=0,s[11]=0,s[15]=1,this},fromArray:function(e){return this.elements.set(e),this},toArray:function(){var e=this.elements;return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15]]},clone:function(){var e=this.elements;return new THREE.Matrix4(e[0],e[4],e[8],e[12],e[1],e[5],e[9],e[13],e[2],e[6],e[10],e[14],e[3],e[7],e[11],e[15])}},THREE.Ray=function(e,t){this.origin=void 0!==e?e:new THREE.Vector3,this.direction=void 0!==t?t:new THREE.Vector3},THREE.Ray.prototype={constructor:THREE.Ray,set:function(e,t){return this.origin.copy(e),this.direction.copy(t),this},copy:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this},at:function(e,t){var i=t||new THREE.Vector3;return i.copy(this.direction).multiplyScalar(e).add(this.origin)},recast:function(){var e=new THREE.Vector3;return function(t){return this.origin.copy(this.at(t,e)),this}}(),closestPointToPoint:function(e,t){var i=t||new THREE.Vector3;i.subVectors(e,this.origin);var r=i.dot(this.direction);return 0>r?i.copy(this.origin):i.copy(this.direction).multiplyScalar(r).add(this.origin)},distanceToPoint:function(){var e=new THREE.Vector3;return function(t){var i=e.subVectors(t,this.origin).dot(this.direction);return 0>i?this.origin.distanceTo(t):(e.copy(this.direction).multiplyScalar(i).add(this.origin),e.distanceTo(t))}}(),distanceSqToSegment:function(e,t,i,r){var n,o,s,a,l=e.clone().add(t).multiplyScalar(.5),h=t.clone().sub(e).normalize(),c=.5*e.distanceTo(t),u=this.origin.clone().sub(l),d=-this.direction.dot(h),f=u.dot(this.direction),m=-u.dot(h),p=u.lengthSq(),g=Math.abs(1-d*d);if(g>=0)if(n=d*m-f,o=d*f-m,a=c*g,n>=0)if(o>=-a)if(a>=o){var E=1/g;n*=E,o*=E,s=n*(n+d*o+2*f)+o*(d*n+o+2*m)+p}else o=c,n=Math.max(0,-(d*o+f)),s=-n*n+o*(o+2*m)+p;else o=-c,n=Math.max(0,-(d*o+f)),s=-n*n+o*(o+2*m)+p;else-a>=o?(n=Math.max(0,-(-d*c+f)),o=n>0?-c:Math.min(Math.max(-c,-m),c),s=-n*n+o*(o+2*m)+p):a>=o?(n=0,o=Math.min(Math.max(-c,-m),c),s=o*(o+2*m)+p):(n=Math.max(0,-(d*c+f)),o=n>0?c:Math.min(Math.max(-c,-m),c),s=-n*n+o*(o+2*m)+p);else o=d>0?-c:c,n=Math.max(0,-(d*o+f)),s=-n*n+o*(o+2*m)+p;return i&&i.copy(this.direction.clone().multiplyScalar(n).add(this.origin)),r&&r.copy(h.clone().multiplyScalar(o).add(l)),s},isIntersectionSphere:function(e){return this.distanceToPoint(e.center)<=e.radius},isIntersectionPlane:function(e){var t=e.distanceToPoint(this.origin);if(0===t)return!0;var i=e.normal.dot(this.direction);return 0>i*t?!0:!1},distanceToPlane:function(e){var t=e.normal.dot(this.direction);if(0==t)return 0==e.distanceToPoint(this.origin)?0:null;var i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null},intersectPlane:function(e,t){var i=this.distanceToPlane(e);return null===i?null:this.at(i,t)},isIntersectionBox:function(){var e=new THREE.Vector3;return function(t){return null!==this.intersectBox(t,e)}}(),intersectBox:function(e,t){var i,r,n,o,s,a,l=1/this.direction.x,h=1/this.direction.y,c=1/this.direction.z,u=this.origin;return l>=0?(i=(e.min.x-u.x)*l,r=(e.max.x-u.x)*l):(i=(e.max.x-u.x)*l,r=(e.min.x-u.x)*l),h>=0?(n=(e.min.y-u.y)*h,o=(e.max.y-u.y)*h):(n=(e.max.y-u.y)*h,o=(e.min.y-u.y)*h),i>o||n>r?null:((n>i||i!==i)&&(i=n),(r>o||r!==r)&&(r=o),c>=0?(s=(e.min.z-u.z)*c,a=(e.max.z-u.z)*c):(s=(e.max.z-u.z)*c,a=(e.min.z-u.z)*c),i>a||s>r?null:((s>i||i!==i)&&(i=s),(r>a||r!==r)&&(r=a),0>r?null:this.at(i>=0?i:r,t)))},intersectTriangle:function(){var e=new THREE.Vector3,t=new THREE.Vector3,i=new THREE.Vector3,r=new THREE.Vector3;return function(n,o,s,a,l){t.subVectors(o,n),i.subVectors(s,n),r.crossVectors(t,i);var h,c=this.direction.dot(r);if(c>0){if(a)return null;h=1}else{if(!(0>c))return null;h=-1,c=-c}e.subVectors(this.origin,n);var u=h*this.direction.dot(i.crossVectors(e,i));if(0>u)return null;var d=h*this.direction.dot(t.cross(e));if(0>d)return null;if(u+d>c)return null;var f=-h*e.dot(r);return 0>f?null:this.at(f/c,l)}}(),applyMatrix4:function(e){return this.direction.add(this.origin).applyMatrix4(e),this.origin.applyMatrix4(e),this.direction.sub(this.origin),this.direction.normalize(),this},equals:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)},clone:function(){return(new THREE.Ray).copy(this)}},THREE.Sphere=function(e,t){this.center=void 0!==e?e:new THREE.Vector3,this.radius=void 0!==t?t:0},THREE.Sphere.prototype={constructor:THREE.Sphere,set:function(e,t){return this.center.copy(e),this.radius=t,this},setFromPoints:function(){var e=new THREE.Box3;return function(t,i){var r=this.center;void 0!==i?r.copy(i):e.setFromPoints(t).center(r);for(var n=0,o=0,s=t.length;s>o;o++)n=Math.max(n,r.distanceToSquared(t[o]));return this.radius=Math.sqrt(n),this}}(),copy:function(e){return this.center.copy(e.center),this.radius=e.radius,this},empty:function(){return this.radius<=0},containsPoint:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(e){return e.distanceTo(this.center)-this.radius},intersectsSphere:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t},clampPoint:function(e,t){var i=this.center.distanceToSquared(e),r=t||new THREE.Vector3;return r.copy(e),i>this.radius*this.radius&&(r.sub(this.center).normalize(),r.multiplyScalar(this.radius).add(this.center)),r},getBoundingBox:function(e){var t=e||new THREE.Box3;return t.set(this.center,this.center),t.expandByScalar(this.radius),t},applyMatrix4:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this},translate:function(e){return this.center.add(e),this},equals:function(e){return e.center.equals(this.center)&&e.radius===this.radius},clone:function(){return(new THREE.Sphere).copy(this)}},THREE.Frustum=function(e,t,i,r,n,o){this.planes=[void 0!==e?e:new THREE.Plane,void 0!==t?t:new THREE.Plane,void 0!==i?i:new THREE.Plane,void 0!==r?r:new THREE.Plane,void 0!==n?n:new THREE.Plane,void 0!==o?o:new THREE.Plane]},THREE.Frustum.prototype={constructor:THREE.Frustum,set:function(e,t,i,r,n,o){var s=this.planes;return s[0].copy(e),s[1].copy(t),s[2].copy(i),s[3].copy(r),s[4].copy(n),s[5].copy(o),this},copy:function(e){for(var t=this.planes,i=0;6>i;i++)t[i].copy(e.planes[i]);return this},setFromMatrix:function(e){var t=this.planes,i=e.elements,r=i[0],n=i[1],o=i[2],s=i[3],a=i[4],l=i[5],h=i[6],c=i[7],u=i[8],d=i[9],f=i[10],m=i[11],p=i[12],g=i[13],E=i[14],v=i[15];return t[0].setComponents(s-r,c-a,m-u,v-p).normalize(),t[1].setComponents(s+r,c+a,m+u,v+p).normalize(),t[2].setComponents(s+n,c+l,m+d,v+g).normalize(),t[3].setComponents(s-n,c-l,m-d,v-g).normalize(),t[4].setComponents(s-o,c-h,m-f,v-E).normalize(),t[5].setComponents(s+o,c+h,m+f,v+E).normalize(),this},intersectsObject:function(){var e=new THREE.Sphere;return function(t){var i=t.geometry;return null===i.boundingSphere&&i.computeBoundingSphere(),e.copy(i.boundingSphere),e.applyMatrix4(t.matrixWorld),this.intersectsSphere(e)}}(),intersectsSphere:function(e){for(var t=this.planes,i=e.center,r=-e.radius,n=0;6>n;n++){var o=t[n].distanceToPoint(i);if(r>o)return!1}return!0},intersectsBox:function(){var e=new THREE.Vector3,t=new THREE.Vector3;return function(i){for(var r=this.planes,n=0;6>n;n++){var o=r[n];e.x=o.normal.x>0?i.min.x:i.max.x,t.x=o.normal.x>0?i.max.x:i.min.x,e.y=o.normal.y>0?i.min.y:i.max.y,t.y=o.normal.y>0?i.max.y:i.min.y,e.z=o.normal.z>0?i.min.z:i.max.z,t.z=o.normal.z>0?i.max.z:i.min.z;var s=o.distanceToPoint(e),a=o.distanceToPoint(t);if(0>s&&0>a)return!1}return!0}}(),containsPoint:function(e){for(var t=this.planes,i=0;6>i;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0},clone:function(){return(new THREE.Frustum).copy(this)}},THREE.Plane=function(e,t){this.normal=void 0!==e?e:new THREE.Vector3(1,0,0),this.constant=void 0!==t?t:0},THREE.Plane.prototype={constructor:THREE.Plane,set:function(e,t){return this.normal.copy(e),this.constant=t,this},setComponents:function(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this},setFromNormalAndCoplanarPoint:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this},setFromCoplanarPoints:function(){var e=new THREE.Vector3,t=new THREE.Vector3;return function(i,r,n){var o=e.subVectors(n,r).cross(t.subVectors(i,r)).normalize();return this.setFromNormalAndCoplanarPoint(o,i),this}}(),copy:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this},normalize:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(e){return this.normal.dot(e)+this.constant},distanceToSphere:function(e){return this.distanceToPoint(e.center)-e.radius},projectPoint:function(e,t){return this.orthoPoint(e,t).sub(e).negate()},orthoPoint:function(e,t){var i=this.distanceToPoint(e),r=t||new THREE.Vector3;return r.copy(this.normal).multiplyScalar(i)},isIntersectionLine:function(e){var t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return 0>t&&i>0||0>i&&t>0},intersectLine:function(){var e=new THREE.Vector3;return function(t,i){var r=i||new THREE.Vector3,n=t.delta(e),o=this.normal.dot(n);if(0==o)return 0==this.distanceToPoint(t.start)?r.copy(t.start):void 0;var s=-(t.start.dot(this.normal)+this.constant)/o;return 0>s||s>1?void 0:r.copy(n).multiplyScalar(s).add(t.start)}}(),coplanarPoint:function(e){var t=e||new THREE.Vector3;return t.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var e=new THREE.Vector3,t=new THREE.Vector3,i=new THREE.Matrix3;return function(r,n){var o=n||i.getNormalMatrix(r),s=e.copy(this.normal).applyMatrix3(o),a=this.coplanarPoint(t);return a.applyMatrix4(r),this.setFromNormalAndCoplanarPoint(s,a),this}}(),translate:function(e){return this.constant=this.constant-e.dot(this.normal),this},equals:function(e){return e.normal.equals(this.normal)&&e.constant==this.constant},clone:function(){return(new THREE.Plane).copy(this)}},THREE.Math={PI2:2*Math.PI,generateUUID:function(){var e,t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),i=new Array(36),r=0;return function(){for(var n=0;36>n;n++)8==n||13==n||18==n||23==n?i[n]="-":14==n?i[n]="4":(2>=r&&(r=33554432+16777216*Math.random()|0),e=15&r,r>>=4,i[n]=t[19==n?3&e|8:e]);return i.join("")}}(),clamp:function(e,t,i){return t>e?t:e>i?i:e},clampBottom:function(e,t){return t>e?t:e},mapLinear:function(e,t,i,r,n){return r+(e-t)*(n-r)/(i-t)},smoothstep:function(e,t,i){return t>=e?0:e>=i?1:(e=(e-t)/(i-t),e*e*(3-2*e))},smootherstep:function(e,t,i){return t>=e?0:e>=i?1:(e=(e-t)/(i-t),e*e*e*(e*(6*e-15)+10))},random16:function(){return(65280*Math.random()+255*Math.random())/65535},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},sign:function(e){return 0>e?-1:e>0?1:0},degToRad:function(){var e=Math.PI/180;return function(t){return t*e}}(),radToDeg:function(){var e=180/Math.PI;return function(t){return t*e}}(),isPowerOfTwo:function(e){return 0===(e&e-1)&&0!==e}},THREE.Spline=function(e){function t(e,t,i,r,n,o,s){var a=.5*(i-e),l=.5*(r-t);return(2*(t-i)+a+l)*s+(-3*(t-i)-2*a-l)*o+a*n+t}this.points=e;var i,r,n,o,s,a,l,h,c,u=[],d={x:0,y:0,z:0};this.initFromArray=function(e){this.points=[];for(var t=0;t<e.length;t++)this.points[t]={x:e[t][0],y:e[t][1],z:e[t][2]}},this.getPoint=function(e){return i=(this.points.length-1)*e,r=Math.floor(i),n=i-r,u[0]=0===r?r:r-1,u[1]=r,u[2]=r>this.points.length-2?this.points.length-1:r+1,u[3]=r>this.points.length-3?this.points.length-1:r+2,a=this.points[u[0]],l=this.points[u[1]],h=this.points[u[2]],c=this.points[u[3]],o=n*n,s=n*o,d.x=t(a.x,l.x,h.x,c.x,n,o,s),d.y=t(a.y,l.y,h.y,c.y,n,o,s),d.z=t(a.z,l.z,h.z,c.z,n,o,s),d
},this.getControlPointsArray=function(){var e,t,i=this.points.length,r=[];for(e=0;i>e;e++)t=this.points[e],r[e]=[t.x,t.y,t.z];return r},this.getLength=function(e){var t,i,r,n,o=0,s=0,a=0,l=new THREE.Vector3,h=new THREE.Vector3,c=[],u=0;for(c[0]=0,e||(e=100),r=this.points.length*e,l.copy(this.points[0]),t=1;r>t;t++)i=t/r,n=this.getPoint(i),h.copy(n),u+=h.distanceTo(l),l.copy(n),o=(this.points.length-1)*i,s=Math.floor(o),s!=a&&(c[s]=u,a=s);return c[c.length]=u,{chunks:c,total:u}},this.reparametrizeByArcLength=function(e){var t,i,r,n,o,s,a,l,h=[],c=new THREE.Vector3,u=this.getLength();for(h.push(c.copy(this.points[0]).clone()),t=1;t<this.points.length;t++){for(s=u.chunks[t]-u.chunks[t-1],a=Math.ceil(e*s/u.total),n=(t-1)/(this.points.length-1),o=t/(this.points.length-1),i=1;a-1>i;i++)r=n+i*(1/a)*(o-n),l=this.getPoint(r),h.push(c.copy(l).clone());h.push(c.copy(this.points[t]).clone())}this.points=h}},THREE.Triangle=function(e,t,i){this.a=void 0!==e?e:new THREE.Vector3,this.b=void 0!==t?t:new THREE.Vector3,this.c=void 0!==i?i:new THREE.Vector3},THREE.Triangle.normal=function(){var e=new THREE.Vector3;return function(t,i,r,n){var o=n||new THREE.Vector3;o.subVectors(r,i),e.subVectors(t,i),o.cross(e);var s=o.lengthSq();return s>0?o.multiplyScalar(1/Math.sqrt(s)):o.set(0,0,0)}}(),THREE.Triangle.barycoordFromPoint=function(){var e=new THREE.Vector3,t=new THREE.Vector3,i=new THREE.Vector3;return function(r,n,o,s,a){e.subVectors(s,n),t.subVectors(o,n),i.subVectors(r,n);var l=e.dot(e),h=e.dot(t),c=e.dot(i),u=t.dot(t),d=t.dot(i),f=l*u-h*h,m=a||new THREE.Vector3;if(0==f)return m.set(-2,-1,-1);var p=1/f,g=(u*c-h*d)*p,E=(l*d-h*c)*p;return m.set(1-g-E,E,g)}}(),THREE.Triangle.containsPoint=function(){var e=new THREE.Vector3;return function(t,i,r,n){var o=THREE.Triangle.barycoordFromPoint(t,i,r,n,e);return o.x>=0&&o.y>=0&&o.x+o.y<=1}}(),THREE.Triangle.prototype={constructor:THREE.Triangle,set:function(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this},setFromPointsAndIndices:function(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this},copy:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this},area:function(){var e=new THREE.Vector3,t=new THREE.Vector3;return function(){return e.subVectors(this.c,this.b),t.subVectors(this.a,this.b),.5*e.cross(t).length()}}(),midpoint:function(e){var t=e||new THREE.Vector3;return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(e){return THREE.Triangle.normal(this.a,this.b,this.c,e)},plane:function(e){var t=e||new THREE.Plane;return t.setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(e,t){return THREE.Triangle.barycoordFromPoint(e,this.a,this.b,this.c,t)},containsPoint:function(e){return THREE.Triangle.containsPoint(e,this.a,this.b,this.c)},equals:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)},clone:function(){return(new THREE.Triangle).copy(this)}},THREE.Vertex=function(e){return console.warn("THREE.Vertex has been DEPRECATED. Use THREE.Vector3 instead."),e},THREE.UV=function(e,t){return console.warn("THREE.UV has been DEPRECATED. Use THREE.Vector2 instead."),new THREE.Vector2(e,t)},THREE.Clock=function(e){this.autoStart=void 0!==e?e:!0,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1},THREE.Clock.prototype={constructor:THREE.Clock,start:function(){this.startTime=void 0!==self.performance&&void 0!==self.performance.now?self.performance.now():Date.now(),this.oldTime=this.startTime,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var e=0;if(this.autoStart&&!this.running&&this.start(),this.running){var t=void 0!==self.performance&&void 0!==self.performance.now?self.performance.now():Date.now();e=.001*(t-this.oldTime),this.oldTime=t,this.elapsedTime+=e}return e}},THREE.EventDispatcher=function(){},THREE.EventDispatcher.prototype={constructor:THREE.EventDispatcher,apply:function(e){e.addEventListener=THREE.EventDispatcher.prototype.addEventListener,e.hasEventListener=THREE.EventDispatcher.prototype.hasEventListener,e.removeEventListener=THREE.EventDispatcher.prototype.removeEventListener,e.dispatchEvent=THREE.EventDispatcher.prototype.dispatchEvent},addEventListener:function(e,t){void 0===this._listeners&&(this._listeners={});var i=this._listeners;void 0===i[e]&&(i[e]=[]),-1===i[e].indexOf(t)&&i[e].push(t)},hasEventListener:function(e,t){if(void 0===this._listeners)return!1;var i=this._listeners;return void 0!==i[e]&&-1!==i[e].indexOf(t)?!0:!1},removeEventListener:function(e,t){if(void 0!==this._listeners){var i=this._listeners,r=i[e];if(void 0!==r){var n=r.indexOf(t);-1!==n&&r.splice(n,1)}}},dispatchEvent:function(){var e=[];return function(t){if(void 0!==this._listeners){var i=this._listeners,r=i[t.type];if(void 0!==r){t.target=this;for(var n=r.length,o=0;n>o;o++)e[o]=r[o];for(var o=0;n>o;o++)e[o].call(this,t)}}}}()},function(e){e.Raycaster=function(t,i,r,n){this.ray=new e.Ray(t,i),this.near=r||0,this.far=n||1/0};var t=new e.Sphere,i=new e.Ray,r=(new e.Plane,new e.Vector3,new e.Vector3),n=new e.Matrix4,o=function(e,t){return e.distance-t.distance},s=new e.Vector3,a=new e.Vector3,l=new e.Vector3,h=function(o,c,u){if(o instanceof e.Sprite){r.setFromMatrixPosition(o.matrixWorld);var d=c.ray.distanceToPoint(r);if(d>o.scale.x)return u;u.push({distance:d,point:o.position,face:null,object:o})}else if(o instanceof e.LOD){r.setFromMatrixPosition(o.matrixWorld);var d=c.ray.origin.distanceTo(r);h(o.getObjectForDistance(d),c,u)}else if(o instanceof e.Mesh){var f=o.geometry;if(null===f.boundingSphere&&f.computeBoundingSphere(),t.copy(f.boundingSphere),t.applyMatrix4(o.matrixWorld),c.ray.isIntersectionSphere(t)===!1)return u;if(n.getInverse(o.matrixWorld),i.copy(c.ray).applyMatrix4(n),null!==f.boundingBox&&i.isIntersectionBox(f.boundingBox)===!1)return u;if(f instanceof e.BufferGeometry){var m=o.material;if(void 0===m)return u;var p,g,E,v=f.attributes,y=c.precision;if(void 0!==v.index)for(var x=f.offsets,T=v.index.array,w=v.position.array,A=0,R=x.length;R>A;++A)for(var _=x[A].start,C=x[A].count,b=x[A].index,F=_,S=_+C;S>F;F+=3){if(p=b+T[F],g=b+T[F+1],E=b+T[F+2],s.set(w[3*p],w[3*p+1],w[3*p+2]),a.set(w[3*g],w[3*g+1],w[3*g+2]),l.set(w[3*E],w[3*E+1],w[3*E+2]),m.side===e.BackSide)var H=i.intersectTriangle(l,a,s,!0);else var H=i.intersectTriangle(s,a,l,m.side!==e.DoubleSide);if(null!==H){H.applyMatrix4(o.matrixWorld);var d=c.ray.origin.distanceTo(H);y>d||d<c.near||d>c.far||u.push({distance:d,point:H,indices:[p,g,E],face:null,faceIndex:null,object:o})}}else for(var x=f.offsets,w=v.position.array,F=0,S=v.position.array.length;S>F;F+=3){if(p=F,g=F+1,E=F+2,s.set(w[3*p],w[3*p+1],w[3*p+2]),a.set(w[3*g],w[3*g+1],w[3*g+2]),l.set(w[3*E],w[3*E+1],w[3*E+2]),m.side===e.BackSide)var H=i.intersectTriangle(l,a,s,!0);else var H=i.intersectTriangle(s,a,l,m.side!==e.DoubleSide);if(null!==H){H.applyMatrix4(o.matrixWorld);var d=c.ray.origin.distanceTo(H);y>d||d<c.near||d>c.far||u.push({distance:d,point:H,indices:[p,g,E],face:null,faceIndex:null,object:o})}}}else if(f instanceof e.Geometry)for(var p,g,E,D=o.material instanceof e.MeshFaceMaterial,M=D===!0?o.material.materials:null,y=c.precision,B=f.vertices,L=0,k=f.faces.length;k>L;L++){var q=f.faces[L],m=D===!0?M[q.materialIndex]:o.material;if(void 0!==m){if(p=B[q.a],g=B[q.b],E=B[q.c],m.morphTargets===!0){var P=f.morphTargets,$=o.morphTargetInfluences;s.set(0,0,0),a.set(0,0,0),l.set(0,0,0);for(var O=0,I=P.length;I>O;O++){var z=$[O];if(0!==z){var N=P[O].vertices;s.x+=(N[q.a].x-p.x)*z,s.y+=(N[q.a].y-p.y)*z,s.z+=(N[q.a].z-p.z)*z,a.x+=(N[q.b].x-g.x)*z,a.y+=(N[q.b].y-g.y)*z,a.z+=(N[q.b].z-g.z)*z,l.x+=(N[q.c].x-E.x)*z,l.y+=(N[q.c].y-E.y)*z,l.z+=(N[q.c].z-E.z)*z}}s.add(p),a.add(g),l.add(E),p=s,g=a,E=l}if(m.side===e.BackSide)var H=i.intersectTriangle(E,g,p,!0);else var H=i.intersectTriangle(p,g,E,m.side!==e.DoubleSide);if(null!==H){H.applyMatrix4(o.matrixWorld);var d=c.ray.origin.distanceTo(H);y>d||d<c.near||d>c.far||u.push({distance:d,point:H,face:q,faceIndex:L,object:o})}}}}else if(o instanceof e.Line){var y=c.linePrecision,V=y*y,f=o.geometry;if(null===f.boundingSphere&&f.computeBoundingSphere(),t.copy(f.boundingSphere),t.applyMatrix4(o.matrixWorld),c.ray.isIntersectionSphere(t)===!1)return u;if(n.getInverse(o.matrixWorld),i.copy(c.ray).applyMatrix4(n),f instanceof e.Geometry)for(var B=f.vertices,U=B.length,W=new e.Vector3,G=new e.Vector3,j=o.type===e.LineStrip?1:2,F=0;U-1>F;F+=j){var X=i.distanceSqToSegment(B[F],B[F+1],G,W);if(!(X>V)){var d=i.origin.distanceTo(G);d<c.near||d>c.far||u.push({distance:d,point:W.clone().applyMatrix4(o.matrixWorld),face:null,faceIndex:null,object:o})}}}},c=function(e,t,i){for(var r=e.getDescendants(),n=0,o=r.length;o>n;n++)h(r[n],t,i)};e.Raycaster.prototype.precision=1e-4,e.Raycaster.prototype.linePrecision=1,e.Raycaster.prototype.set=function(e,t){this.ray.set(e,t)},e.Raycaster.prototype.intersectObject=function(e,t){var i=[];return t===!0&&c(e,this,i),h(e,this,i),i.sort(o),i},e.Raycaster.prototype.intersectObjects=function(e,t){for(var i=[],r=0,n=e.length;n>r;r++)h(e[r],this,i),t===!0&&c(e[r],this,i);return i.sort(o),i}}(THREE),THREE.Object3D=function(){this.id=THREE.Object3DIdCount++,this.uuid=THREE.Math.generateUUID(),this.name="",this.parent=void 0,this.children=[],this.up=new THREE.Vector3(0,1,0),this.position=new THREE.Vector3,this._rotation=new THREE.Euler,this._quaternion=new THREE.Quaternion,this.scale=new THREE.Vector3(1,1,1),this._rotation._quaternion=this.quaternion,this._quaternion._euler=this.rotation,this.renderDepth=null,this.rotationAutoUpdate=!0,this.matrix=new THREE.Matrix4,this.matrixWorld=new THREE.Matrix4,this.matrixAutoUpdate=!0,this.matrixWorldNeedsUpdate=!0,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.userData={}},THREE.Object3D.prototype={constructor:THREE.Object3D,get rotation(){return this._rotation},set rotation(e){this._rotation=e,this._rotation._quaternion=this._quaternion,this._quaternion._euler=this._rotation,this._rotation._updateQuaternion()},get quaternion(){return this._quaternion},set quaternion(e){this._quaternion=e,this._quaternion._euler=this._rotation,this._rotation._quaternion=this._quaternion,this._quaternion._updateEuler()},get eulerOrder(){return console.warn("DEPRECATED: Object3D's .eulerOrder has been moved to Object3D's .rotation.order."),this.rotation.order},set eulerOrder(e){console.warn("DEPRECATED: Object3D's .eulerOrder has been moved to Object3D's .rotation.order."),this.rotation.order=e},get useQuaternion(){console.warn("DEPRECATED: Object3D's .useQuaternion has been removed. The library now uses quaternions by default.")},set useQuaternion(e){console.warn("DEPRECATED: Object3D's .useQuaternion has been removed. The library now uses quaternions by default.")},applyMatrix:function(e){this.matrix.multiplyMatrices(e,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},setRotationFromAxisAngle:function(e,t){this.quaternion.setFromAxisAngle(e,t)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,!0)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:function(){var e=new THREE.Quaternion;return function(t,i){return e.setFromAxisAngle(t,i),this.quaternion.multiply(e),this}}(),rotateX:function(){var e=new THREE.Vector3(1,0,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateY:function(){var e=new THREE.Vector3(0,1,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateZ:function(){var e=new THREE.Vector3(0,0,1);return function(t){return this.rotateOnAxis(e,t)}}(),translateOnAxis:function(){var e=new THREE.Vector3;return function(t,i){return e.copy(t),e.applyQuaternion(this.quaternion),this.position.add(e.multiplyScalar(i)),this}}(),translate:function(e,t){return console.warn("DEPRECATED: Object3D's .translate() has been removed. Use .translateOnAxis( axis, distance ) instead. Note args have been changed."),this.translateOnAxis(t,e)},translateX:function(){var e=new THREE.Vector3(1,0,0);return function(t){return this.translateOnAxis(e,t)}}(),translateY:function(){var e=new THREE.Vector3(0,1,0);return function(t){return this.translateOnAxis(e,t)}}(),translateZ:function(){var e=new THREE.Vector3(0,0,1);return function(t){return this.translateOnAxis(e,t)}}(),localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var e=new THREE.Matrix4;return function(t){return t.applyMatrix4(e.getInverse(this.matrixWorld))}}(),lookAt:function(){var e=new THREE.Matrix4;return function(t){e.lookAt(t,this.position,this.up),this.quaternion.setFromRotationMatrix(e)}}(),add:function(e){if(e===this)return console.warn("THREE.Object3D.add: An object can't be added as a child of itself."),void 0;if(e instanceof THREE.Object3D){void 0!==e.parent&&e.parent.remove(e),e.parent=this,e.dispatchEvent({type:"added"}),this.children.push(e);for(var t=this;void 0!==t.parent;)t=t.parent;void 0!==t&&t instanceof THREE.Scene&&t.__addObject(e)}},remove:function(e){var t=this.children.indexOf(e);if(-1!==t){e.parent=void 0,e.dispatchEvent({type:"removed"}),this.children.splice(t,1);for(var i=this;void 0!==i.parent;)i=i.parent;void 0!==i&&i instanceof THREE.Scene&&i.__removeObject(e)}},traverse:function(e){e(this);for(var t=0,i=this.children.length;i>t;t++)this.children[t].traverse(e)},getObjectById:function(e,t){for(var i=0,r=this.children.length;r>i;i++){var n=this.children[i];if(n.id===e)return n;if(t===!0&&(n=n.getObjectById(e,t),void 0!==n))return n}return void 0},getObjectByName:function(e,t){for(var i=0,r=this.children.length;r>i;i++){var n=this.children[i];if(n.name===e)return n;if(t===!0&&(n=n.getObjectByName(e,t),void 0!==n))return n}return void 0},getChildByName:function(e,t){return console.warn("DEPRECATED: Object3D's .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e,t)},getDescendants:function(e){void 0===e&&(e=[]),Array.prototype.push.apply(e,this.children);for(var t=0,i=this.children.length;i>t;t++)this.children[t].getDescendants(e);return e},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){this.matrixAutoUpdate===!0&&this.updateMatrix(),(this.matrixWorldNeedsUpdate===!0||e===!0)&&(void 0===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var t=0,i=this.children.length;i>t;t++)this.children[t].updateMatrixWorld(e)},clone:function(e,t){if(void 0===e&&(e=new THREE.Object3D),void 0===t&&(t=!0),e.name=this.name,e.up.copy(this.up),e.position.copy(this.position),e.quaternion.copy(this.quaternion),e.scale.copy(this.scale),e.renderDepth=this.renderDepth,e.rotationAutoUpdate=this.rotationAutoUpdate,e.matrix.copy(this.matrix),e.matrixWorld.copy(this.matrixWorld),e.matrixAutoUpdate=this.matrixAutoUpdate,e.matrixWorldNeedsUpdate=this.matrixWorldNeedsUpdate,e.visible=this.visible,e.castShadow=this.castShadow,e.receiveShadow=this.receiveShadow,e.frustumCulled=this.frustumCulled,e.userData=JSON.parse(JSON.stringify(this.userData)),t===!0)for(var i=0;i<this.children.length;i++){var r=this.children[i];e.add(r.clone())}return e}},THREE.EventDispatcher.prototype.apply(THREE.Object3D.prototype),THREE.Object3DIdCount=0,THREE.Projector=function(){function e(){if(l===y){var e=new THREE.RenderableObject;return v.push(e),y++,l++,e}return v[l++]}function t(){if(c===T){var e=new THREE.RenderableVertex;return x.push(e),T++,c++,e}return x[c++]}function i(){if(d===A){var e=new THREE.RenderableFace;return w.push(e),A++,d++,e}return w[d++]}function r(){if(m===_){var e=new THREE.RenderableLine;return R.push(e),_++,m++,e}return R[m++]}function n(){if(g===b){var e=new THREE.RenderableSprite;return C.push(e),b++,g++,e}return C[g++]}function o(e,t){return e.z!==t.z?t.z-e.z:e.id!==t.id?e.id-t.id:0}function s(e,t){var i=0,r=1,n=e.z+e.w,o=t.z+t.w,s=-e.z+e.w,a=-t.z+t.w;return n>=0&&o>=0&&s>=0&&a>=0?!0:0>n&&0>o||0>s&&0>a?!1:(0>n?i=Math.max(i,n/(n-o)):0>o&&(r=Math.min(r,n/(n-o))),0>s?i=Math.max(i,s/(s-a)):0>a&&(r=Math.min(r,s/(s-a))),i>r?!1:(e.lerp(t,i),t.lerp(e,1-r),!0))}var a,l,h,c,u,d,f,m,p,g,E,v=[],y=0,x=[],T=0,w=[],A=0,R=[],_=0,C=[],b=0,F={objects:[],lights:[],elements:[]},S=new THREE.Vector3,H=new THREE.Vector3,D=new THREE.Vector3,M=new THREE.Vector3,B=new THREE.Vector4,L=new THREE.Box3(new THREE.Vector3(-1,-1,-1),new THREE.Vector3(1,1,1)),k=new THREE.Box3,q=new Array(3),P=(new Array(4),new THREE.Matrix4),$=new THREE.Matrix4,O=new THREE.Matrix4,I=new THREE.Matrix3,z=new THREE.Frustum,N=new THREE.Vector4,V=new THREE.Vector4;this.projectVector=function(e,t){return t.matrixWorldInverse.getInverse(t.matrixWorld),$.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),e.applyProjection($)},this.unprojectVector=function(){var e=new THREE.Matrix4;return function(t,i){return e.getInverse(i.projectionMatrix),$.multiplyMatrices(i.matrixWorld,e),t.applyProjection($)}}(),this.pickingRay=function(e,t){e.z=-1;var i=new THREE.Vector3(e.x,e.y,1);return this.unprojectVector(e,t),this.unprojectVector(i,t),i.sub(e).normalize(),new THREE.Raycaster(e,i)};var U=function(t){if(t.visible!==!1){t instanceof THREE.Light?F.lights.push(t):(t instanceof THREE.Mesh||t instanceof THREE.Line||t instanceof THREE.Sprite)&&(t.frustumCulled===!1||z.intersectsObject(t)===!0)&&(a=e(),a.id=t.id,a.object=t,null!==t.renderDepth?a.z=t.renderDepth:(M.setFromMatrixPosition(t.matrixWorld),M.applyProjection($),a.z=M.z),F.objects.push(a));for(var i=0,r=t.children.length;r>i;i++)U(t.children[i])}},W=function(e,t){l=0,F.objects.length=0,F.lights.length=0,U(e),t===!0&&F.objects.sort(o)},G=function(){var e=[],n=null,o=new THREE.Matrix3,s=function(t){n=t,o.getNormalMatrix(n.matrixWorld),e.length=0},a=function(e){var t=e.position,i=e.positionWorld,r=e.positionScreen;i.copy(t).applyMatrix4(E),r.copy(i).applyMatrix4($);var n=1/r.w;r.x*=n,r.y*=n,r.z*=n,e.visible=r.x>=-1&&r.x<=1&&r.y>=-1&&r.y<=1&&r.z>=-1&&r.z<=1},l=function(e,i,r){h=t(),h.position.set(e,i,r),a(h)},c=function(t,i,r){e.push(t,i,r)},d=function(e,t,i){return q[0]=e.positionScreen,q[1]=t.positionScreen,q[2]=i.positionScreen,e.visible===!0||t.visible===!0||i.visible===!0||L.isIntersectionBox(k.setFromPoints(q))?(i.positionScreen.x-e.positionScreen.x)*(t.positionScreen.y-e.positionScreen.y)-(i.positionScreen.y-e.positionScreen.y)*(t.positionScreen.x-e.positionScreen.x)<0:!1},m=function(e,t){var i=x[e],o=x[t];f=r(),f.id=n.id,f.v1.copy(i),f.v2.copy(o),f.z=(i.positionScreen.z+o.positionScreen.z)/2,f.material=n.material,F.elements.push(f)},p=function(t,r,s){var a=x[t],l=x[r],h=x[s];if(d(a,l,h)===!0){u=i(),u.id=n.id,u.v1.copy(a),u.v2.copy(l),u.v3.copy(h),u.z=(a.positionScreen.z+l.positionScreen.z+h.positionScreen.z)/3;for(var c=0;3>c;c++){var f=3*arguments[c],m=u.vertexNormalsModel[c];m.set(e[f+0],e[f+1],e[f+2]),m.applyMatrix3(o).normalize()}u.vertexNormalsLength=3,u.material=n.material,F.elements.push(u)}};return{setObject:s,projectVertex:a,checkTriangleVisibility:d,pushVertex:l,pushNormal:c,pushLine:m,pushTriangle:p}},j=new G;this.projectScene=function(e,a,l,h){var v,y,T,w,A,R,_,C,b,M;d=0,m=0,g=0,F.elements.length=0,e.autoUpdate===!0&&e.updateMatrixWorld(),void 0===a.parent&&a.updateMatrixWorld(),P.copy(a.matrixWorldInverse.getInverse(a.matrixWorld)),$.multiplyMatrices(a.projectionMatrix,P),z.setFromMatrix($),W(e,l);for(var L=0,k=F.objects.length;k>L;L++)if(v=F.objects[L].object,y=v.geometry,j.setObject(v),E=v.matrixWorld,c=0,v instanceof THREE.Mesh){if(y instanceof THREE.BufferGeometry){var q=y.attributes,U=y.offsets;if(void 0===q.position)continue;for(var G=q.position.array,X=0,Y=G.length;Y>X;X+=3)j.pushVertex(G[X],G[X+1],G[X+2]);for(var K=q.normal.array,X=0,Y=K.length;Y>X;X+=3)j.pushNormal(K[X],K[X+1],K[X+2]);if(void 0!==q.index){var Z=q.index.array;if(U.length>0)for(var L=0;L<U.length;L++)for(var Q=U[L],J=Q.index,X=Q.start,Y=Q.start+Q.count;Y>X;X+=3)j.pushTriangle(Z[X]+J,Z[X+1]+J,Z[X+2]+J);else for(var X=0,Y=Z.length;Y>X;X+=3)j.pushTriangle(Z[X],Z[X+1],Z[X+2])}else for(var X=0,Y=G.length/3;Y>X;X+=3)j.pushTriangle(X,X+1,X+2)}else if(y instanceof THREE.Geometry2){T=y.vertices;for(var X=0,et=0,Y=T.length;Y>X;X+=9,et+=3)j.pushVertex(T[X+0],T[X+1],T[X+2]),j.pushVertex(T[X+3],T[X+4],T[X+5]),j.pushVertex(T[X+6],T[X+7],T[X+8]),j.pushTriangle(et+0,et+1,et+2)}else if(y instanceof THREE.Geometry){T=y.vertices,w=y.faces,_=y.faceVertexUvs,I.getNormalMatrix(E),b=v.material instanceof THREE.MeshFaceMaterial,M=b===!0?v.material:null;for(var tt=0,it=T.length;it>tt;tt++){var rt=T[tt];j.pushVertex(rt.x,rt.y,rt.z)}for(var nt=0,ot=w.length;ot>nt;nt++){A=w[nt];var st=b===!0?M.materials[A.materialIndex]:v.material;if(void 0!==st){var at=st.side,lt=x[A.a],ht=x[A.b],ct=x[A.c];if(st.morphTargets===!0){var ut=y.morphTargets,dt=v.morphTargetInfluences,ft=lt.position,mt=ht.position,pt=ct.position;S.set(0,0,0),H.set(0,0,0),D.set(0,0,0);for(var gt=0,Et=ut.length;Et>gt;gt++){var vt=dt[gt];if(0!==vt){var yt=ut[gt].vertices;S.x+=(yt[A.a].x-ft.x)*vt,S.y+=(yt[A.a].y-ft.y)*vt,S.z+=(yt[A.a].z-ft.z)*vt,H.x+=(yt[A.b].x-mt.x)*vt,H.y+=(yt[A.b].y-mt.y)*vt,H.z+=(yt[A.b].z-mt.z)*vt,D.x+=(yt[A.c].x-pt.x)*vt,D.y+=(yt[A.c].y-pt.y)*vt,D.z+=(yt[A.c].z-pt.z)*vt}}lt.position.add(S),ht.position.add(H),ct.position.add(D),j.projectVertex(lt),j.projectVertex(ht),j.projectVertex(ct)}var xt=j.checkTriangleVisibility(lt,ht,ct);if(xt!==(at===THREE.BackSide)){u=i(),u.id=v.id,u.v1.copy(lt),u.v2.copy(ht),u.v3.copy(ct),u.normalModel.copy(A.normal),xt!==!1||at!==THREE.BackSide&&at!==THREE.DoubleSide||u.normalModel.negate(),u.normalModel.applyMatrix3(I).normalize(),u.centroidModel.copy(A.centroid).applyMatrix4(E),R=A.vertexNormals;for(var Tt=0,wt=Math.min(R.length,3);wt>Tt;Tt++){var At=u.vertexNormalsModel[Tt];At.copy(R[Tt]),xt!==!1||at!==THREE.BackSide&&at!==THREE.DoubleSide||At.negate(),At.applyMatrix3(I).normalize()}u.vertexNormalsLength=R.length;for(var Rt=0,_t=Math.min(_.length,3);_t>Rt;Rt++)if(C=_[Rt][nt],void 0!==C)for(var Ct=0,bt=C.length;bt>Ct;Ct++)u.uvs[Rt][Ct]=C[Ct];u.color=A.color,u.material=st,u.z=(lt.positionScreen.z+ht.positionScreen.z+ct.positionScreen.z)/3,F.elements.push(u)}}}}}else if(v instanceof THREE.Line){if(y instanceof THREE.BufferGeometry){var q=y.attributes;if(void 0!==q.position){for(var G=q.position.array,X=0,Y=G.length;Y>X;X+=3)j.pushVertex(G[X],G[X+1],G[X+2]);if(void 0!==q.index)for(var Z=q.index.array,X=0,Y=Z.length;Y>X;X+=2)j.pushLine(Z[X],Z[X+1]);else for(var X=0,Y=G.length/3-1;Y>X;X++)j.pushLine(X,X+1)}}else if(y instanceof THREE.Geometry){if(O.multiplyMatrices($,E),T=v.geometry.vertices,0===T.length)continue;lt=t(),lt.positionScreen.copy(T[0]).applyMatrix4(O);for(var Ft=v.type===THREE.LinePieces?2:1,tt=1,it=T.length;it>tt;tt++)lt=t(),lt.positionScreen.copy(T[tt]).applyMatrix4(O),(tt+1)%Ft>0||(ht=x[c-2],N.copy(lt.positionScreen),V.copy(ht.positionScreen),s(N,V)===!0&&(N.multiplyScalar(1/N.w),V.multiplyScalar(1/V.w),f=r(),f.id=v.id,f.v1.positionScreen.copy(N),f.v2.positionScreen.copy(V),f.z=Math.max(N.z,V.z),f.material=v.material,v.material.vertexColors===THREE.VertexColors&&(f.vertexColors[0].copy(v.geometry.colors[tt]),f.vertexColors[1].copy(v.geometry.colors[tt-1])),F.elements.push(f)))}}else if(v instanceof THREE.Sprite){B.set(E.elements[12],E.elements[13],E.elements[14],1),B.applyMatrix4($);var St=1/B.w;B.z*=St,B.z>=-1&&B.z<=1&&(p=n(),p.id=v.id,p.x=B.x*St,p.y=B.y*St,p.z=B.z,p.object=v,p.rotation=v.rotation,p.scale.x=v.scale.x*Math.abs(p.x-(B.x+a.projectionMatrix.elements[0])/(B.w+a.projectionMatrix.elements[12])),p.scale.y=v.scale.y*Math.abs(p.y-(B.y+a.projectionMatrix.elements[5])/(B.w+a.projectionMatrix.elements[13])),p.material=v.material,F.elements.push(p))}return h===!0&&F.elements.sort(o),F}},THREE.Face3=function(e,t,i,r,n,o){this.a=e,this.b=t,this.c=i,this.normal=r instanceof THREE.Vector3?r:new THREE.Vector3,this.vertexNormals=r instanceof Array?r:[],this.color=n instanceof THREE.Color?n:new THREE.Color,this.vertexColors=n instanceof Array?n:[],this.vertexTangents=[],this.materialIndex=void 0!==o?o:0,this.centroid=new THREE.Vector3},THREE.Face3.prototype={constructor:THREE.Face3,clone:function(){var e=new THREE.Face3(this.a,this.b,this.c);e.normal.copy(this.normal),e.color.copy(this.color),e.centroid.copy(this.centroid),e.materialIndex=this.materialIndex;var t,i;for(t=0,i=this.vertexNormals.length;i>t;t++)e.vertexNormals[t]=this.vertexNormals[t].clone();for(t=0,i=this.vertexColors.length;i>t;t++)e.vertexColors[t]=this.vertexColors[t].clone();for(t=0,i=this.vertexTangents.length;i>t;t++)e.vertexTangents[t]=this.vertexTangents[t].clone();return e}},THREE.Face4=function(e,t,i,r,n,o,s){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new THREE.Face3(e,t,i,n,o,s)},THREE.Geometry=function(){this.id=THREE.GeometryIdCount++,this.uuid=THREE.Math.generateUUID(),this.name="",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphColors=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.hasTangents=!1,this.dynamic=!0,this.verticesNeedUpdate=!1,this.elementsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.tangentsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.buffersNeedUpdate=!1},THREE.Geometry.prototype={constructor:THREE.Geometry,applyMatrix:function(e){for(var t=(new THREE.Matrix3).getNormalMatrix(e),i=0,r=this.vertices.length;r>i;i++){var n=this.vertices[i];n.applyMatrix4(e)}for(var i=0,r=this.faces.length;r>i;i++){var o=this.faces[i];o.normal.applyMatrix3(t).normalize();for(var s=0,a=o.vertexNormals.length;a>s;s++)o.vertexNormals[s].applyMatrix3(t).normalize();o.centroid.applyMatrix4(e)}this.boundingBox instanceof THREE.Box3&&this.computeBoundingBox(),this.boundingSphere instanceof THREE.Sphere&&this.computeBoundingSphere()},computeCentroids:function(){var e,t,i;for(e=0,t=this.faces.length;t>e;e++)i=this.faces[e],i.centroid.set(0,0,0),i.centroid.add(this.vertices[i.a]),i.centroid.add(this.vertices[i.b]),i.centroid.add(this.vertices[i.c]),i.centroid.divideScalar(3)},computeFaceNormals:function(){for(var e=new THREE.Vector3,t=new THREE.Vector3,i=0,r=this.faces.length;r>i;i++){var n=this.faces[i],o=this.vertices[n.a],s=this.vertices[n.b],a=this.vertices[n.c];e.subVectors(a,s),t.subVectors(o,s),e.cross(t),e.normalize(),n.normal.copy(e)}},computeVertexNormals:function(e){var t,i,r,n,o,s;for(s=new Array(this.vertices.length),t=0,i=this.vertices.length;i>t;t++)s[t]=new THREE.Vector3;if(e){{var a,l,h,c=new THREE.Vector3,u=new THREE.Vector3;new THREE.Vector3,new THREE.Vector3,new THREE.Vector3}for(r=0,n=this.faces.length;n>r;r++)o=this.faces[r],a=this.vertices[o.a],l=this.vertices[o.b],h=this.vertices[o.c],c.subVectors(h,l),u.subVectors(a,l),c.cross(u),s[o.a].add(c),s[o.b].add(c),s[o.c].add(c)}else for(r=0,n=this.faces.length;n>r;r++)o=this.faces[r],s[o.a].add(o.normal),s[o.b].add(o.normal),s[o.c].add(o.normal);for(t=0,i=this.vertices.length;i>t;t++)s[t].normalize();for(r=0,n=this.faces.length;n>r;r++)o=this.faces[r],o.vertexNormals[0]=s[o.a].clone(),o.vertexNormals[1]=s[o.b].clone(),o.vertexNormals[2]=s[o.c].clone()},computeMorphNormals:function(){var e,t,i,r,n;for(i=0,r=this.faces.length;r>i;i++)for(n=this.faces[i],n.__originalFaceNormal?n.__originalFaceNormal.copy(n.normal):n.__originalFaceNormal=n.normal.clone(),n.__originalVertexNormals||(n.__originalVertexNormals=[]),e=0,t=n.vertexNormals.length;t>e;e++)n.__originalVertexNormals[e]?n.__originalVertexNormals[e].copy(n.vertexNormals[e]):n.__originalVertexNormals[e]=n.vertexNormals[e].clone();var o=new THREE.Geometry;for(o.faces=this.faces,e=0,t=this.morphTargets.length;t>e;e++){if(!this.morphNormals[e]){this.morphNormals[e]={},this.morphNormals[e].faceNormals=[],this.morphNormals[e].vertexNormals=[];var s,a,l=this.morphNormals[e].faceNormals,h=this.morphNormals[e].vertexNormals;for(i=0,r=this.faces.length;r>i;i++)n=this.faces[i],s=new THREE.Vector3,a={a:new THREE.Vector3,b:new THREE.Vector3,c:new THREE.Vector3},l.push(s),h.push(a)}var c=this.morphNormals[e];o.vertices=this.morphTargets[e].vertices,o.computeFaceNormals(),o.computeVertexNormals();var s,a;for(i=0,r=this.faces.length;r>i;i++)n=this.faces[i],s=c.faceNormals[i],a=c.vertexNormals[i],s.copy(n.normal),a.a.copy(n.vertexNormals[0]),a.b.copy(n.vertexNormals[1]),a.c.copy(n.vertexNormals[2])}for(i=0,r=this.faces.length;r>i;i++)n=this.faces[i],n.normal=n.__originalFaceNormal,n.vertexNormals=n.__originalVertexNormals},computeTangents:function(){function e(e,t,i,r,n,o,s){h=e.vertices[t],c=e.vertices[i],u=e.vertices[r],d=l[n],f=l[o],m=l[s],p=c.x-h.x,g=u.x-h.x,E=c.y-h.y,v=u.y-h.y,y=c.z-h.z,x=u.z-h.z,T=f.x-d.x,w=m.x-d.x,A=f.y-d.y,R=m.y-d.y,_=1/(T*R-w*A),D.set((R*p-A*g)*_,(R*E-A*v)*_,(R*y-A*x)*_),M.set((T*g-w*p)*_,(T*v-w*E)*_,(T*x-w*y)*_),S[t].add(D),S[i].add(D),S[r].add(D),H[t].add(M),H[i].add(M),H[r].add(M)}var t,i,r,n,o,s,a,l,h,c,u,d,f,m,p,g,E,v,y,x,T,w,A,R,_,C,b,F,S=[],H=[],D=new THREE.Vector3,M=new THREE.Vector3,B=new THREE.Vector3,L=new THREE.Vector3,k=new THREE.Vector3;for(r=0,n=this.vertices.length;n>r;r++)S[r]=new THREE.Vector3,H[r]=new THREE.Vector3;for(t=0,i=this.faces.length;i>t;t++)a=this.faces[t],l=this.faceVertexUvs[0][t],e(this,a.a,a.b,a.c,0,1,2);var q=["a","b","c","d"];for(t=0,i=this.faces.length;i>t;t++)for(a=this.faces[t],o=0;o<Math.min(a.vertexNormals.length,3);o++)k.copy(a.vertexNormals[o]),s=a[q[o]],C=S[s],B.copy(C),B.sub(k.multiplyScalar(k.dot(C))).normalize(),L.crossVectors(a.vertexNormals[o],C),b=L.dot(H[s]),F=0>b?-1:1,a.vertexTangents[o]=new THREE.Vector4(B.x,B.y,B.z,F);this.hasTangents=!0},computeLineDistances:function(){for(var e=0,t=this.vertices,i=0,r=t.length;r>i;i++)i>0&&(e+=t[i].distanceTo(t[i-1])),this.lineDistances[i]=e},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new THREE.Box3),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new THREE.Sphere),this.boundingSphere.setFromPoints(this.vertices)},mergeVertices:function(){var e,t,i,r,n,o,s,a,l={},h=[],c=[],u=4,d=Math.pow(10,u);for(i=0,r=this.vertices.length;r>i;i++)e=this.vertices[i],t=Math.round(e.x*d)+"_"+Math.round(e.y*d)+"_"+Math.round(e.z*d),void 0===l[t]?(l[t]=i,h.push(this.vertices[i]),c[i]=h.length-1):c[i]=c[l[t]];var f=[];for(i=0,r=this.faces.length;r>i;i++){n=this.faces[i],n.a=c[n.a],n.b=c[n.b],n.c=c[n.c],o=[n.a,n.b,n.c];for(var m=-1,p=0;3>p;p++)if(o[p]==o[(p+1)%3]){m=p,f.push(i);break}}for(i=f.length-1;i>=0;i--){var g=f[i];for(this.faces.splice(g,1),s=0,a=this.faceVertexUvs.length;a>s;s++)this.faceVertexUvs[s].splice(g,1)}var E=this.vertices.length-h.length;return this.vertices=h,E},makeGroups:function(){var e=0;return function(t){var i,r,n,o,s,a={},l=this.morphTargets.length,h=this.morphNormals.length;for(this.geometryGroups={},i=0,r=this.faces.length;r>i;i++)n=this.faces[i],o=t?n.materialIndex:0,o in a||(a[o]={hash:o,counter:0}),s=a[o].hash+"_"+a[o].counter,s in this.geometryGroups||(this.geometryGroups[s]={faces3:[],materialIndex:o,vertices:0,numMorphTargets:l,numMorphNormals:h}),this.geometryGroups[s].vertices+3>65535&&(a[o].counter+=1,s=a[o].hash+"_"+a[o].counter,s in this.geometryGroups||(this.geometryGroups[s]={faces3:[],materialIndex:o,vertices:0,numMorphTargets:l,numMorphNormals:h})),this.geometryGroups[s].faces3.push(i),this.geometryGroups[s].vertices+=3;this.geometryGroupsList=[];for(var c in this.geometryGroups)this.geometryGroups[c].id=e++,this.geometryGroupsList.push(this.geometryGroups[c])}}(),clone:function(){for(var e=new THREE.Geometry,t=this.vertices,i=0,r=t.length;r>i;i++)e.vertices.push(t[i].clone());for(var n=this.faces,i=0,r=n.length;r>i;i++)e.faces.push(n[i].clone());for(var o=this.faceVertexUvs[0],i=0,r=o.length;r>i;i++){for(var s=o[i],a=[],l=0,h=s.length;h>l;l++)a.push(new THREE.Vector2(s[l].x,s[l].y));e.faceVertexUvs[0].push(a)}return e},dispose:function(){this.dispatchEvent({type:"dispose"})}},THREE.EventDispatcher.prototype.apply(THREE.Geometry.prototype),THREE.GeometryIdCount=0,THREE.Geometry2=function(e){this.id=THREE.GeometryIdCount++,this.uuid=THREE.Math.generateUUID(),this.name="",this.vertices=void 0!==e?new Float32Array(3*e):[],this.normals=void 0!==e?new Float32Array(3*e):[],this.uvs=void 0!==e?new Float32Array(2*e):[],this.boundingBox=null,this.boundingSphere=null},THREE.Geometry2.prototype={constructor:THREE.Geometry2,applyMatrix:function(e){e.multiplyVector3Array(this.vertices)},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new THREE.Box3);
var e=this.vertices,t=this.boundingBox;e.length>=3&&(t.min.x=t.max.x=e[0],t.min.y=t.max.y=e[1],t.min.z=t.max.z=e[2]);for(var i=3,r=e.length;r>i;i+=3){var n=e[i],o=e[i+1],s=e[i+2];n<t.min.x?t.min.x=n:n>t.max.x&&(t.max.x=n),o<t.min.y?t.min.y=o:o>t.max.y&&(t.max.y=o),s<t.min.z?t.min.z=s:s>t.max.z&&(t.max.z=s)}},computeBoundingSphere:function(){var e=new THREE.Box3,t=new THREE.Vector3;return function(){null===this.boundingSphere&&(this.boundingSphere=new THREE.Sphere),e.makeEmpty();for(var i=this.vertices,r=this.boundingSphere.center,n=0,o=i.length;o>n;n+=3)t.set(i[n],i[n+1],i[n+2]),e.addPoint(t);e.center(r);for(var s=0,n=0,o=i.length;o>n;n+=3)t.set(i[n],i[n+1],i[n+2]),s=Math.max(s,r.distanceToSquared(t));this.boundingSphere.radius=Math.sqrt(s)}}(),dispose:function(){this.dispatchEvent({type:"dispose"})}},THREE.EventDispatcher.prototype.apply(THREE.Geometry2.prototype),THREE.BufferGeometry=function(){this.id=THREE.GeometryIdCount++,this.uuid=THREE.Math.generateUUID(),this.name="",this.attributes={},this.offsets=[],this.boundingBox=null,this.boundingSphere=null},THREE.BufferGeometry.prototype={constructor:THREE.BufferGeometry,addAttribute:function(e,t,i,r){this.attributes[e]={itemSize:r,array:new t(i*r)}},applyMatrix:function(e){var t=this.attributes.position;void 0!==t&&(e.multiplyVector3Array(t.array),t.needsUpdate=!0);var i=this.attributes.normal;if(void 0!==i){var r=(new THREE.Matrix3).getNormalMatrix(e);r.multiplyVector3Array(i.array),i.needsUpdate=!0}},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new THREE.Box3);var e=this.attributes.position.array;if(e){var t=this.boundingBox;e.length>=3&&(t.min.x=t.max.x=e[0],t.min.y=t.max.y=e[1],t.min.z=t.max.z=e[2]);for(var i=3,r=e.length;r>i;i+=3){var n=e[i],o=e[i+1],s=e[i+2];n<t.min.x?t.min.x=n:n>t.max.x&&(t.max.x=n),o<t.min.y?t.min.y=o:o>t.max.y&&(t.max.y=o),s<t.min.z?t.min.z=s:s>t.max.z&&(t.max.z=s)}}(void 0===e||0===e.length)&&(this.boundingBox.min.set(0,0,0),this.boundingBox.max.set(0,0,0))},computeBoundingSphere:function(){var e=new THREE.Box3,t=new THREE.Vector3;return function(){null===this.boundingSphere&&(this.boundingSphere=new THREE.Sphere);var i=this.attributes.position.array;if(i){e.makeEmpty();for(var r=this.boundingSphere.center,n=0,o=i.length;o>n;n+=3)t.set(i[n],i[n+1],i[n+2]),e.addPoint(t);e.center(r);for(var s=0,n=0,o=i.length;o>n;n+=3)t.set(i[n],i[n+1],i[n+2]),s=Math.max(s,r.distanceToSquared(t));this.boundingSphere.radius=Math.sqrt(s)}}}(),computeVertexNormals:function(){if(this.attributes.position){var e,t,i,r,n=this.attributes.position.array.length;if(void 0===this.attributes.normal)this.attributes.normal={itemSize:3,array:new Float32Array(n)};else for(e=0,t=this.attributes.normal.array.length;t>e;e++)this.attributes.normal.array[e]=0;var o,s,a,l,h,c,u=this.attributes.position.array,d=this.attributes.normal.array,f=new THREE.Vector3,m=new THREE.Vector3,p=new THREE.Vector3,g=new THREE.Vector3,E=new THREE.Vector3;if(this.attributes.index){var v=this.attributes.index.array,y=this.offsets;for(i=0,r=y.length;r>i;++i){var x=y[i].start,T=y[i].count,w=y[i].index;for(e=x,t=x+T;t>e;e+=3)o=w+v[e],s=w+v[e+1],a=w+v[e+2],l=u[3*o],h=u[3*o+1],c=u[3*o+2],f.set(l,h,c),l=u[3*s],h=u[3*s+1],c=u[3*s+2],m.set(l,h,c),l=u[3*a],h=u[3*a+1],c=u[3*a+2],p.set(l,h,c),g.subVectors(p,m),E.subVectors(f,m),g.cross(E),d[3*o]+=g.x,d[3*o+1]+=g.y,d[3*o+2]+=g.z,d[3*s]+=g.x,d[3*s+1]+=g.y,d[3*s+2]+=g.z,d[3*a]+=g.x,d[3*a+1]+=g.y,d[3*a+2]+=g.z}}else for(e=0,t=u.length;t>e;e+=9)l=u[e],h=u[e+1],c=u[e+2],f.set(l,h,c),l=u[e+3],h=u[e+4],c=u[e+5],m.set(l,h,c),l=u[e+6],h=u[e+7],c=u[e+8],p.set(l,h,c),g.subVectors(p,m),E.subVectors(f,m),g.cross(E),d[e]=g.x,d[e+1]=g.y,d[e+2]=g.z,d[e+3]=g.x,d[e+4]=g.y,d[e+5]=g.z,d[e+6]=g.x,d[e+7]=g.y,d[e+8]=g.z;this.normalizeNormals(),this.normalsNeedUpdate=!0}},normalizeNormals:function(){for(var e,t,i,r,n=this.attributes.normal.array,o=0,s=n.length;s>o;o+=3)e=n[o],t=n[o+1],i=n[o+2],r=1/Math.sqrt(e*e+t*t+i*i),n[o]*=r,n[o+1]*=r,n[o+2]*=r},computeTangents:function(){function e(e,t,i){d=r[3*e],f=r[3*e+1],m=r[3*e+2],p=r[3*t],g=r[3*t+1],E=r[3*t+2],v=r[3*i],y=r[3*i+1],x=r[3*i+2],T=o[2*e],w=o[2*e+1],A=o[2*t],R=o[2*t+1],_=o[2*i],C=o[2*i+1],b=p-d,F=v-d,S=g-f,H=y-f,D=E-m,M=x-m,B=A-T,L=_-T,k=R-w,q=C-w,P=1/(B*q-L*k),W.set((q*b-k*F)*P,(q*S-k*H)*P,(q*D-k*M)*P),G.set((B*F-L*b)*P,(B*H-L*S)*P,(B*M-L*D)*P),h[e].add(W),h[t].add(W),h[i].add(W),c[e].add(G),c[t].add(G),c[i].add(G)}function t(e){it.x=n[3*e],it.y=n[3*e+1],it.z=n[3*e+2],rt.copy(it),Q=h[e],et.copy(Q),et.sub(it.multiplyScalar(it.dot(Q))).normalize(),tt.crossVectors(rt,Q),J=tt.dot(c[e]),Z=0>J?-1:1,l[4*e]=et.x,l[4*e+1]=et.y,l[4*e+2]=et.z,l[4*e+3]=Z}if(void 0===this.attributes.index||void 0===this.attributes.position||void 0===this.attributes.normal||void 0===this.attributes.uv)return console.warn("Missing required attributes (index, position, normal or uv) in BufferGeometry.computeTangents()"),void 0;var i=this.attributes.index.array,r=this.attributes.position.array,n=this.attributes.normal.array,o=this.attributes.uv.array,s=r.length/3;if(void 0===this.attributes.tangent){var a=4*s;this.attributes.tangent={itemSize:4,array:new Float32Array(a)}}for(var l=this.attributes.tangent.array,h=[],c=[],u=0;s>u;u++)h[u]=new THREE.Vector3,c[u]=new THREE.Vector3;var d,f,m,p,g,E,v,y,x,T,w,A,R,_,C,b,F,S,H,D,M,B,L,k,q,P,$,O,I,z,N,V,U,W=new THREE.Vector3,G=new THREE.Vector3,j=this.offsets;for(I=0,z=j.length;z>I;++I){var X=j[I].start,Y=j[I].count,K=j[I].index;for($=X,O=X+Y;O>$;$+=3)N=K+i[$],V=K+i[$+1],U=K+i[$+2],e(N,V,U)}var Z,Q,J,et=new THREE.Vector3,tt=new THREE.Vector3,it=new THREE.Vector3,rt=new THREE.Vector3;for(I=0,z=j.length;z>I;++I){var X=j[I].start,Y=j[I].count,K=j[I].index;for($=X,O=X+Y;O>$;$+=3)N=K+i[$],V=K+i[$+1],U=K+i[$+2],t(N),t(V),t(U)}},computeOffsets:function(e){var t=e;void 0===e&&(t=65535);for(var i=(Date.now(),this.attributes.index.array),r=this.attributes.position.array,n=(r.length/3,i.length/3),o=new Uint16Array(i.length),s=0,a=0,l=[{start:0,count:0,index:0}],h=l[0],c=0,u=0,d=new Int32Array(6),f=new Int32Array(r.length),m=new Int32Array(r.length),p=0;p<r.length;p++)f[p]=-1,m[p]=-1;for(var g=0;n>g;g++){u=0;for(var E=0;3>E;E++){var v=i[3*g+E];-1==f[v]?(d[2*E]=v,d[2*E+1]=-1,u++):f[v]<h.index?(d[2*E]=v,d[2*E+1]=-1,c++):(d[2*E]=v,d[2*E+1]=f[v])}var y=a+u;if(y>h.index+t){var x={start:s,count:0,index:a};l.push(x),h=x;for(var T=0;6>T;T+=2){var w=d[T+1];w>-1&&w<h.index&&(d[T+1]=-1)}}for(var T=0;6>T;T+=2){var v=d[T],w=d[T+1];-1===w&&(w=a++),f[v]=w,m[w]=v,o[s++]=w-h.index,h.count++}}return this.reorderBuffers(o,m,a),this.offsets=l,l},reorderBuffers:function(e,t,i){var r={},n=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];for(var o in this.attributes)if("index"!=o)for(var s=this.attributes[o].array,a=0,l=n.length;l>a;a++){var h=n[a];if(s instanceof h){r[o]=new h(this.attributes[o].itemSize*i);break}}for(var c=0;i>c;c++){var u=t[c];for(var o in this.attributes)if("index"!=o)for(var d=this.attributes[o].array,f=this.attributes[o].itemSize,m=r[o],p=0;f>p;p++)m[c*f+p]=d[u*f+p]}this.attributes.index.array=e;for(var o in this.attributes)"index"!=o&&(this.attributes[o].array=r[o],this.attributes[o].numItems=this.attributes[o].itemSize*i)},clone:function(){var e=new THREE.BufferGeometry,t=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];for(var i in this.attributes){for(var r=this.attributes[i],n=r.array,o={itemSize:r.itemSize,array:null},s=0,a=t.length;a>s;s++){var l=t[s];if(n instanceof l){o.array=new l(n);break}}e.attributes[i]=o}for(var s=0,a=this.offsets.length;a>s;s++){var h=this.offsets[s];e.offsets.push({start:h.start,index:h.index,count:h.count})}return e},dispose:function(){this.dispatchEvent({type:"dispose"})}},THREE.EventDispatcher.prototype.apply(THREE.BufferGeometry.prototype),THREE.Camera=function(){THREE.Object3D.call(this),this.matrixWorldInverse=new THREE.Matrix4,this.projectionMatrix=new THREE.Matrix4},THREE.Camera.prototype=Object.create(THREE.Object3D.prototype),THREE.Camera.prototype.lookAt=function(){var e=new THREE.Matrix4;return function(t){e.lookAt(this.position,t,this.up),this.quaternion.setFromRotationMatrix(e)}}(),THREE.Camera.prototype.clone=function(e){return void 0===e&&(e=new THREE.Camera),THREE.Object3D.prototype.clone.call(this,e),e.matrixWorldInverse.copy(this.matrixWorldInverse),e.projectionMatrix.copy(this.projectionMatrix),e},THREE.OrthographicCamera=function(e,t,i,r,n,o){THREE.Camera.call(this),this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=void 0!==n?n:.1,this.far=void 0!==o?o:2e3,this.updateProjectionMatrix()},THREE.OrthographicCamera.prototype=Object.create(THREE.Camera.prototype),THREE.OrthographicCamera.prototype.updateProjectionMatrix=function(){this.projectionMatrix.makeOrthographic(this.left,this.right,this.top,this.bottom,this.near,this.far)},THREE.OrthographicCamera.prototype.clone=function(){var e=new THREE.OrthographicCamera;return THREE.Camera.prototype.clone.call(this,e),e.left=this.left,e.right=this.right,e.top=this.top,e.bottom=this.bottom,e.near=this.near,e.far=this.far,e},THREE.PerspectiveCamera=function(e,t,i,r){THREE.Camera.call(this),this.fov=void 0!==e?e:50,this.aspect=void 0!==t?t:1,this.near=void 0!==i?i:.1,this.far=void 0!==r?r:2e3,this.updateProjectionMatrix()},THREE.PerspectiveCamera.prototype=Object.create(THREE.Camera.prototype),THREE.PerspectiveCamera.prototype.setLens=function(e,t){void 0===t&&(t=24),this.fov=2*THREE.Math.radToDeg(Math.atan(t/(2*e))),this.updateProjectionMatrix()},THREE.PerspectiveCamera.prototype.setViewOffset=function(e,t,i,r,n,o){this.fullWidth=e,this.fullHeight=t,this.x=i,this.y=r,this.width=n,this.height=o,this.updateProjectionMatrix()},THREE.PerspectiveCamera.prototype.updateProjectionMatrix=function(){if(this.fullWidth){var e=this.fullWidth/this.fullHeight,t=Math.tan(THREE.Math.degToRad(.5*this.fov))*this.near,i=-t,r=e*i,n=e*t,o=Math.abs(n-r),s=Math.abs(t-i);this.projectionMatrix.makeFrustum(r+this.x*o/this.fullWidth,r+(this.x+this.width)*o/this.fullWidth,t-(this.y+this.height)*s/this.fullHeight,t-this.y*s/this.fullHeight,this.near,this.far)}else this.projectionMatrix.makePerspective(this.fov,this.aspect,this.near,this.far)},THREE.PerspectiveCamera.prototype.clone=function(){var e=new THREE.PerspectiveCamera;return THREE.Camera.prototype.clone.call(this,e),e.fov=this.fov,e.aspect=this.aspect,e.near=this.near,e.far=this.far,e},THREE.Light=function(e){THREE.Object3D.call(this),this.color=new THREE.Color(e)},THREE.Light.prototype=Object.create(THREE.Object3D.prototype),THREE.Light.prototype.clone=function(e){return void 0===e&&(e=new THREE.Light),THREE.Object3D.prototype.clone.call(this,e),e.color.copy(this.color),e},THREE.AmbientLight=function(e){THREE.Light.call(this,e)},THREE.AmbientLight.prototype=Object.create(THREE.Light.prototype),THREE.AmbientLight.prototype.clone=function(){var e=new THREE.AmbientLight;return THREE.Light.prototype.clone.call(this,e),e},THREE.AreaLight=function(e,t){THREE.Light.call(this,e),this.normal=new THREE.Vector3(0,-1,0),this.right=new THREE.Vector3(1,0,0),this.intensity=void 0!==t?t:1,this.width=1,this.height=1,this.constantAttenuation=1.5,this.linearAttenuation=.5,this.quadraticAttenuation=.1},THREE.AreaLight.prototype=Object.create(THREE.Light.prototype),THREE.DirectionalLight=function(e,t){THREE.Light.call(this,e),this.position.set(0,1,0),this.target=new THREE.Object3D,this.intensity=void 0!==t?t:1,this.castShadow=!1,this.onlyShadow=!1,this.shadowCameraNear=50,this.shadowCameraFar=5e3,this.shadowCameraLeft=-500,this.shadowCameraRight=500,this.shadowCameraTop=500,this.shadowCameraBottom=-500,this.shadowCameraVisible=!1,this.shadowBias=0,this.shadowDarkness=.5,this.shadowMapWidth=512,this.shadowMapHeight=512,this.shadowCascade=!1,this.shadowCascadeOffset=new THREE.Vector3(0,0,-1e3),this.shadowCascadeCount=2,this.shadowCascadeBias=[0,0,0],this.shadowCascadeWidth=[512,512,512],this.shadowCascadeHeight=[512,512,512],this.shadowCascadeNearZ=[-1,.99,.998],this.shadowCascadeFarZ=[.99,.998,1],this.shadowCascadeArray=[],this.shadowMap=null,this.shadowMapSize=null,this.shadowCamera=null,this.shadowMatrix=null},THREE.DirectionalLight.prototype=Object.create(THREE.Light.prototype),THREE.DirectionalLight.prototype.clone=function(){var e=new THREE.DirectionalLight;return THREE.Light.prototype.clone.call(this,e),e.target=this.target.clone(),e.intensity=this.intensity,e.castShadow=this.castShadow,e.onlyShadow=this.onlyShadow,e},THREE.HemisphereLight=function(e,t,i){THREE.Light.call(this,e),this.position.set(0,100,0),this.groundColor=new THREE.Color(t),this.intensity=void 0!==i?i:1},THREE.HemisphereLight.prototype=Object.create(THREE.Light.prototype),THREE.HemisphereLight.prototype.clone=function(){var e=new THREE.HemisphereLight;return THREE.Light.prototype.clone.call(this,e),e.groundColor.copy(this.groundColor),e.intensity=this.intensity,e},THREE.PointLight=function(e,t,i){THREE.Light.call(this,e),this.intensity=void 0!==t?t:1,this.distance=void 0!==i?i:0},THREE.PointLight.prototype=Object.create(THREE.Light.prototype),THREE.PointLight.prototype.clone=function(){var e=new THREE.PointLight;return THREE.Light.prototype.clone.call(this,e),e.intensity=this.intensity,e.distance=this.distance,e},THREE.SpotLight=function(e,t,i,r,n){THREE.Light.call(this,e),this.position.set(0,1,0),this.target=new THREE.Object3D,this.intensity=void 0!==t?t:1,this.distance=void 0!==i?i:0,this.angle=void 0!==r?r:Math.PI/3,this.exponent=void 0!==n?n:10,this.castShadow=!1,this.onlyShadow=!1,this.shadowCameraNear=50,this.shadowCameraFar=5e3,this.shadowCameraFov=50,this.shadowCameraVisible=!1,this.shadowBias=0,this.shadowDarkness=.5,this.shadowMapWidth=512,this.shadowMapHeight=512,this.shadowMap=null,this.shadowMapSize=null,this.shadowCamera=null,this.shadowMatrix=null},THREE.SpotLight.prototype=Object.create(THREE.Light.prototype),THREE.SpotLight.prototype.clone=function(){var e=new THREE.SpotLight;return THREE.Light.prototype.clone.call(this,e),e.target=this.target.clone(),e.intensity=this.intensity,e.distance=this.distance,e.angle=this.angle,e.exponent=this.exponent,e.castShadow=this.castShadow,e.onlyShadow=this.onlyShadow,e},THREE.Loader=function(e){this.showStatus=e,this.statusDomElement=e?THREE.Loader.prototype.addStatusElement():null,this.onLoadStart=function(){},this.onLoadProgress=function(){},this.onLoadComplete=function(){}},THREE.Loader.prototype={constructor:THREE.Loader,crossOrigin:void 0,addStatusElement:function(){var e=document.createElement("div");return e.style.position="absolute",e.style.right="0px",e.style.top="0px",e.style.fontSize="0.8em",e.style.textAlign="left",e.style.background="rgba(0,0,0,0.25)",e.style.color="#fff",e.style.width="120px",e.style.padding="0.5em 0.5em 0.5em 0.5em",e.style.zIndex=1e3,e.innerHTML="Loading ...",e},updateProgress:function(e){var t="Loaded ";t+=e.total?(100*e.loaded/e.total).toFixed(0)+"%":(e.loaded/1e3).toFixed(2)+" KB",this.statusDomElement.innerHTML=t},extractUrlBase:function(e){var t=e.split("/");return 1===t.length?"./":(t.pop(),t.join("/")+"/")},initMaterials:function(e,t){for(var i=[],r=0;r<e.length;++r)i[r]=THREE.Loader.prototype.createMaterial(e[r],t);return i},needsTangents:function(e){for(var t=0,i=e.length;i>t;t++){var r=e[t];if(r instanceof THREE.ShaderMaterial)return!0}return!1},createMaterial:function(e,t){function i(e){var t=Math.log(e)/Math.LN2;return Math.floor(t)==t}function r(e){var t=Math.log(e)/Math.LN2;return Math.pow(2,Math.round(t))}function n(e,t){var n=new Image;n.onload=function(){if(i(this.width)&&i(this.height))e.image=this;else{var t=r(this.width),n=r(this.height);e.image.width=t,e.image.height=n,e.image.getContext("2d").drawImage(this,0,0,t,n)}e.needsUpdate=!0},void 0!==a.crossOrigin&&(n.crossOrigin=a.crossOrigin),n.src=t}function o(e,i,r,o,s,a,l){var h=/\.dds$/i.test(r),c=t+r;if(h){var u=THREE.ImageUtils.loadCompressedTexture(c);e[i]=u}else{var u=document.createElement("canvas");e[i]=new THREE.Texture(u)}if(e[i].sourceFile=r,o&&(e[i].repeat.set(o[0],o[1]),1!==o[0]&&(e[i].wrapS=THREE.RepeatWrapping),1!==o[1]&&(e[i].wrapT=THREE.RepeatWrapping)),s&&e[i].offset.set(s[0],s[1]),a){var d={repeat:THREE.RepeatWrapping,mirror:THREE.MirroredRepeatWrapping};void 0!==d[a[0]]&&(e[i].wrapS=d[a[0]]),void 0!==d[a[1]]&&(e[i].wrapT=d[a[1]])}l&&(e[i].anisotropy=l),h||n(e[i],c)}function s(e){return(255*e[0]<<16)+(255*e[1]<<8)+255*e[2]}var a=this,l="MeshLambertMaterial",h={color:15658734,opacity:1,map:null,lightMap:null,normalMap:null,bumpMap:null,wireframe:!1};if(e.shading){var c=e.shading.toLowerCase();"phong"===c?l="MeshPhongMaterial":"basic"===c&&(l="MeshBasicMaterial")}if(void 0!==e.blending&&void 0!==THREE[e.blending]&&(h.blending=THREE[e.blending]),(void 0!==e.transparent||e.opacity<1)&&(h.transparent=e.transparent),void 0!==e.depthTest&&(h.depthTest=e.depthTest),void 0!==e.depthWrite&&(h.depthWrite=e.depthWrite),void 0!==e.visible&&(h.visible=e.visible),void 0!==e.flipSided&&(h.side=THREE.BackSide),void 0!==e.doubleSided&&(h.side=THREE.DoubleSide),void 0!==e.wireframe&&(h.wireframe=e.wireframe),void 0!==e.vertexColors&&("face"===e.vertexColors?h.vertexColors=THREE.FaceColors:e.vertexColors&&(h.vertexColors=THREE.VertexColors)),e.colorDiffuse?h.color=s(e.colorDiffuse):e.DbgColor&&(h.color=e.DbgColor),e.colorSpecular&&(h.specular=s(e.colorSpecular)),e.colorAmbient&&(h.ambient=s(e.colorAmbient)),e.transparency&&(h.opacity=e.transparency),e.specularCoef&&(h.shininess=e.specularCoef),e.mapDiffuse&&t&&o(h,"map",e.mapDiffuse,e.mapDiffuseRepeat,e.mapDiffuseOffset,e.mapDiffuseWrap,e.mapDiffuseAnisotropy),e.mapLight&&t&&o(h,"lightMap",e.mapLight,e.mapLightRepeat,e.mapLightOffset,e.mapLightWrap,e.mapLightAnisotropy),e.mapBump&&t&&o(h,"bumpMap",e.mapBump,e.mapBumpRepeat,e.mapBumpOffset,e.mapBumpWrap,e.mapBumpAnisotropy),e.mapNormal&&t&&o(h,"normalMap",e.mapNormal,e.mapNormalRepeat,e.mapNormalOffset,e.mapNormalWrap,e.mapNormalAnisotropy),e.mapSpecular&&t&&o(h,"specularMap",e.mapSpecular,e.mapSpecularRepeat,e.mapSpecularOffset,e.mapSpecularWrap,e.mapSpecularAnisotropy),e.mapBumpScale&&(h.bumpScale=e.mapBumpScale),e.mapNormal){var u=THREE.ShaderLib.normalmap,d=THREE.UniformsUtils.clone(u.uniforms);d.tNormal.value=h.normalMap,e.mapNormalFactor&&d.uNormalScale.value.set(e.mapNormalFactor,e.mapNormalFactor),h.map&&(d.tDiffuse.value=h.map,d.enableDiffuse.value=!0),h.specularMap&&(d.tSpecular.value=h.specularMap,d.enableSpecular.value=!0),h.lightMap&&(d.tAO.value=h.lightMap,d.enableAO.value=!0),d.diffuse.value.setHex(h.color),d.specular.value.setHex(h.specular),d.ambient.value.setHex(h.ambient),d.shininess.value=h.shininess,void 0!==h.opacity&&(d.opacity.value=h.opacity);var f={fragmentShader:u.fragmentShader,vertexShader:u.vertexShader,uniforms:d,lights:!0,fog:!0},m=new THREE.ShaderMaterial(f);h.transparent&&(m.transparent=!0)}else var m=new THREE[l](h);return void 0!==e.DbgName&&(m.name=e.DbgName),m}},THREE.XHRLoader=function(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager},THREE.XHRLoader.prototype={constructor:THREE.XHRLoader,load:function(e,t,i,r){var n=this,o=new XMLHttpRequest;void 0!==t&&o.addEventListener("load",function(i){t(i.target.responseText),n.manager.itemEnd(e)},!1),void 0!==i&&o.addEventListener("progress",function(e){i(e)},!1),void 0!==r&&o.addEventListener("error",function(e){r(e)},!1),void 0!==this.crossOrigin&&(o.crossOrigin=this.crossOrigin),o.open("GET",e,!0),o.send(null),n.manager.itemStart(e)},setCrossOrigin:function(e){this.crossOrigin=e}},THREE.ImageLoader=function(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager},THREE.ImageLoader.prototype={constructor:THREE.ImageLoader,load:function(e,t,i,r){var n=this,o=document.createElement("img");return void 0!==t&&o.addEventListener("load",function(){n.manager.itemEnd(e),t(this)},!1),void 0!==i&&o.addEventListener("progress",function(e){i(e)},!1),void 0!==r&&o.addEventListener("error",function(e){r(e)},!1),void 0!==this.crossOrigin&&(o.crossOrigin=this.crossOrigin),o.src=e,n.manager.itemStart(e),o},setCrossOrigin:function(e){this.crossOrigin=e}},THREE.JSONLoader=function(e){THREE.Loader.call(this,e),this.withCredentials=!1},THREE.JSONLoader.prototype=Object.create(THREE.Loader.prototype),THREE.JSONLoader.prototype.load=function(e,t,i){i=i&&"string"==typeof i?i:this.extractUrlBase(e),this.onLoadStart(),this.loadAjaxJSON(this,e,t,i)},THREE.JSONLoader.prototype.loadAjaxJSON=function(e,t,i,r,n){var o=new XMLHttpRequest,s=0;o.onreadystatechange=function(){if(o.readyState===o.DONE)if(200===o.status||0===o.status){if(o.responseText){var a=JSON.parse(o.responseText);if("scene"===a.metadata.type)return console.error('THREE.JSONLoader: "'+t+'" seems to be a Scene. Use THREE.SceneLoader instead.'),void 0;var l=e.parse(a,r);i(l.geometry,l.materials)}else console.error('THREE.JSONLoader: "'+t+'" seems to be unreachable or the file is empty.');e.onLoadComplete()}else console.error("THREE.JSONLoader: Couldn't load \""+t+'" ('+o.status+")");else o.readyState===o.LOADING?n&&(0===s&&(s=o.getResponseHeader("Content-Length")),n({total:s,loaded:o.responseText.length})):o.readyState===o.HEADERS_RECEIVED&&void 0!==n&&(s=o.getResponseHeader("Content-Length"))},o.open("GET",t,!0),o.withCredentials=this.withCredentials,o.send(null)},THREE.JSONLoader.prototype.parse=function(e,t){function i(t){function i(e,t){return e&1<<t}var r,n,s,a,l,h,c,u,d,f,m,p,g,E,v,y,x,T,w,A,R,_,C,b,F,S,H,D=e.faces,M=e.vertices,B=e.normals,L=e.colors,k=0;if(void 0!==e.uvs){for(r=0;r<e.uvs.length;r++)e.uvs[r].length&&k++;for(r=0;k>r;r++)o.faceVertexUvs[r]=[]}for(a=0,l=M.length;l>a;)T=new THREE.Vector3,T.x=M[a++]*t,T.y=M[a++]*t,T.z=M[a++]*t,o.vertices.push(T);for(a=0,l=D.length;l>a;)if(f=D[a++],m=i(f,0),p=i(f,1),g=i(f,3),E=i(f,4),v=i(f,5),y=i(f,6),x=i(f,7),m){if(A=new THREE.Face3,A.a=D[a],A.b=D[a+1],A.c=D[a+3],R=new THREE.Face3,R.a=D[a+1],R.b=D[a+2],R.c=D[a+3],a+=4,p&&(d=D[a++],A.materialIndex=d,R.materialIndex=d),s=o.faces.length,g)for(r=0;k>r;r++)for(b=e.uvs[r],o.faceVertexUvs[r][s]=[],o.faceVertexUvs[r][s+1]=[],n=0;4>n;n++)u=D[a++],S=b[2*u],H=b[2*u+1],F=new THREE.Vector2(S,H),2!==n&&o.faceVertexUvs[r][s].push(F),0!==n&&o.faceVertexUvs[r][s+1].push(F);if(E&&(c=3*D[a++],A.normal.set(B[c++],B[c++],B[c]),R.normal.copy(A.normal)),v)for(r=0;4>r;r++)c=3*D[a++],C=new THREE.Vector3(B[c++],B[c++],B[c]),2!==r&&A.vertexNormals.push(C),0!==r&&R.vertexNormals.push(C);if(y&&(h=D[a++],_=L[h],A.color.setHex(_),R.color.setHex(_)),x)for(r=0;4>r;r++)h=D[a++],_=L[h],2!==r&&A.vertexColors.push(new THREE.Color(_)),0!==r&&R.vertexColors.push(new THREE.Color(_));o.faces.push(A),o.faces.push(R)}else{if(w=new THREE.Face3,w.a=D[a++],w.b=D[a++],w.c=D[a++],p&&(d=D[a++],w.materialIndex=d),s=o.faces.length,g)for(r=0;k>r;r++)for(b=e.uvs[r],o.faceVertexUvs[r][s]=[],n=0;3>n;n++)u=D[a++],S=b[2*u],H=b[2*u+1],F=new THREE.Vector2(S,H),o.faceVertexUvs[r][s].push(F);if(E&&(c=3*D[a++],w.normal.set(B[c++],B[c++],B[c])),v)for(r=0;3>r;r++)c=3*D[a++],C=new THREE.Vector3(B[c++],B[c++],B[c]),w.vertexNormals.push(C);if(y&&(h=D[a++],w.color.setHex(L[h])),x)for(r=0;3>r;r++)h=D[a++],w.vertexColors.push(new THREE.Color(L[h]));o.faces.push(w)}}function r(){if(e.skinWeights)for(var t=0,i=e.skinWeights.length;i>t;t+=2){var r=e.skinWeights[t],n=e.skinWeights[t+1],s=0,a=0;o.skinWeights.push(new THREE.Vector4(r,n,s,a))}if(e.skinIndices)for(var t=0,i=e.skinIndices.length;i>t;t+=2){var l=e.skinIndices[t],h=e.skinIndices[t+1],c=0,u=0;o.skinIndices.push(new THREE.Vector4(l,h,c,u))}o.bones=e.bones,o.bones&&o.bones.length>0&&(o.skinWeights.length!==o.skinIndices.length||o.skinIndices.length!==o.vertices.length)&&console.warn("When skinning, number of vertices ("+o.vertices.length+"), skinIndices ("+o.skinIndices.length+"), and skinWeights ("+o.skinWeights.length+") should match."),o.animation=e.animation,o.animations=e.animations}function n(t){if(void 0!==e.morphTargets){var i,r,n,s,a,l;for(i=0,r=e.morphTargets.length;r>i;i++)for(o.morphTargets[i]={},o.morphTargets[i].name=e.morphTargets[i].name,o.morphTargets[i].vertices=[],a=o.morphTargets[i].vertices,l=e.morphTargets[i].vertices,n=0,s=l.length;s>n;n+=3){var h=new THREE.Vector3;h.x=l[n]*t,h.y=l[n+1]*t,h.z=l[n+2]*t,a.push(h)}}if(void 0!==e.morphColors){var i,r,c,u,d,f,m;for(i=0,r=e.morphColors.length;r>i;i++)for(o.morphColors[i]={},o.morphColors[i].name=e.morphColors[i].name,o.morphColors[i].colors=[],d=o.morphColors[i].colors,f=e.morphColors[i].colors,c=0,u=f.length;u>c;c+=3)m=new THREE.Color(16755200),m.setRGB(f[c],f[c+1],f[c+2]),d.push(m)}}var o=new THREE.Geometry,s=void 0!==e.scale?1/e.scale:1;if(i(s),r(),n(s),o.computeCentroids(),o.computeFaceNormals(),o.computeBoundingSphere(),void 0===e.materials)return{geometry:o};var a=this.initMaterials(e.materials,t);return this.needsTangents(a)&&o.computeTangents(),{geometry:o,materials:a}},THREE.LoadingManager=function(e,t,i){var r=this,n=0,o=0;this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(){o++},this.itemEnd=function(e){n++,void 0!==r.onProgress&&r.onProgress(e,n,o),n===o&&void 0!==r.onLoad&&r.onLoad()}},THREE.DefaultLoadingManager=new THREE.LoadingManager,THREE.BufferGeometryLoader=function(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager},THREE.BufferGeometryLoader.prototype={constructor:THREE.BufferGeometryLoader,load:function(e,t){var i=this,r=new THREE.XHRLoader;r.setCrossOrigin(this.crossOrigin),r.load(e,function(e){t(i.parse(JSON.parse(e)))})},setCrossOrigin:function(e){this.crossOrigin=e},parse:function(e){var t=new THREE.BufferGeometry,i=e.attributes,r=e.offsets,n=e.boundingSphere;for(var o in i){var s=i[o];t.attributes[o]={itemSize:s.itemSize,array:new self[s.type](s.array)}}return void 0!==r&&(t.offsets=JSON.parse(JSON.stringify(r))),void 0!==n&&(t.boundingSphere=new THREE.Sphere((new THREE.Vector3).fromArray(void 0!==n.center?n.center:[0,0,0]),n.radius)),t}},THREE.Geometry2Loader=function(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager},THREE.Geometry2Loader.prototype={constructor:THREE.Geometry2Loader,load:function(e,t){var i=this,r=new THREE.XHRLoader;r.setCrossOrigin(this.crossOrigin),r.load(e,function(e){t(i.parse(JSON.parse(e)))})},setCrossOrigin:function(e){this.crossOrigin=e},parse:function(e){var t=new THREE.Geometry2(e.vertices.length/3),i=["vertices","normals","uvs"],r=e.boundingSphere;for(var n in i){var o=i[n];t[o].set(e[o])}return void 0!==r&&(t.boundingSphere=new THREE.Sphere((new THREE.Vector3).fromArray(void 0!==r.center?r.center:[0,0,0]),r.radius)),t}},THREE.MaterialLoader=function(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager},THREE.MaterialLoader.prototype={constructor:THREE.MaterialLoader,load:function(e,t){var i=this,r=new THREE.XHRLoader;r.setCrossOrigin(this.crossOrigin),r.load(e,function(e){t(i.parse(JSON.parse(e)))})},setCrossOrigin:function(e){this.crossOrigin=e},parse:function(e){var t=new THREE[e.type];if(void 0!==e.color&&t.color.setHex(e.color),void 0!==e.ambient&&t.ambient.setHex(e.ambient),void 0!==e.emissive&&t.emissive.setHex(e.emissive),void 0!==e.specular&&t.specular.setHex(e.specular),void 0!==e.shininess&&(t.shininess=e.shininess),void 0!==e.vertexColors&&(t.vertexColors=e.vertexColors),void 0!==e.blending&&(t.blending=e.blending),void 0!==e.side&&(t.side=e.side),void 0!==e.opacity&&(t.opacity=e.opacity),void 0!==e.transparent&&(t.transparent=e.transparent),void 0!==e.wireframe&&(t.wireframe=e.wireframe),void 0!==e.materials)for(var i=0,r=e.materials.length;r>i;i++)t.materials.push(this.parse(e.materials[i]));return t}},THREE.ObjectLoader=function(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager},THREE.ObjectLoader.prototype={constructor:THREE.ObjectLoader,load:function(e,t){var i=this,r=new THREE.XHRLoader(i.manager);r.setCrossOrigin(this.crossOrigin),r.load(e,function(e){t(i.parse(JSON.parse(e)))})},setCrossOrigin:function(e){this.crossOrigin=e},parse:function(e){var t=this.parseGeometries(e.geometries),i=this.parseMaterials(e.materials),r=this.parseObject(e.object,t,i);return r},parseGeometries:function(e){var t={};if(void 0!==e)for(var i=new THREE.JSONLoader,r=new THREE.Geometry2Loader,n=new THREE.BufferGeometryLoader,o=0,s=e.length;s>o;o++){var a,l=e[o];switch(l.type){case"PlaneGeometry":a=new THREE.PlaneGeometry(l.width,l.height,l.widthSegments,l.heightSegments);break;case"BoxGeometry":case"CubeGeometry":a=new THREE.BoxGeometry(l.width,l.height,l.depth,l.widthSegments,l.heightSegments,l.depthSegments);break;case"CircleGeometry":a=new THREE.CircleGeometry(l.radius,l.segments);break;case"CylinderGeometry":a=new THREE.CylinderGeometry(l.radiusTop,l.radiusBottom,l.height,l.radialSegments,l.heightSegments,l.openEnded);break;case"SphereGeometry":a=new THREE.SphereGeometry(l.radius,l.widthSegments,l.heightSegments,l.phiStart,l.phiLength,l.thetaStart,l.thetaLength);break;case"IcosahedronGeometry":a=new THREE.IcosahedronGeometry(l.radius,l.detail);break;case"TorusGeometry":a=new THREE.TorusGeometry(l.radius,l.tube,l.radialSegments,l.tubularSegments,l.arc);break;case"TorusKnotGeometry":a=new THREE.TorusKnotGeometry(l.radius,l.tube,l.radialSegments,l.tubularSegments,l.p,l.q,l.heightScale);break;case"BufferGeometry":a=n.parse(l.data);break;case"Geometry2":a=r.parse(l.data);break;case"Geometry":a=i.parse(l.data).geometry}a.uuid=l.uuid,void 0!==l.name&&(a.name=l.name),t[l.uuid]=a}return t},parseMaterials:function(e){var t={};if(void 0!==e)for(var i=new THREE.MaterialLoader,r=0,n=e.length;n>r;r++){var o=e[r],s=i.parse(o);s.uuid=o.uuid,void 0!==o.name&&(s.name=o.name),t[o.uuid]=s}return t},parseObject:function(){var e=new THREE.Matrix4;return function(t,i,r){var n;switch(t.type){case"Scene":n=new THREE.Scene;break;case"PerspectiveCamera":n=new THREE.PerspectiveCamera(t.fov,t.aspect,t.near,t.far);break;case"OrthographicCamera":n=new THREE.OrthographicCamera(t.left,t.right,t.top,t.bottom,t.near,t.far);break;case"AmbientLight":n=new THREE.AmbientLight(t.color);break;case"DirectionalLight":n=new THREE.DirectionalLight(t.color,t.intensity);break;case"PointLight":n=new THREE.PointLight(t.color,t.intensity,t.distance);break;case"SpotLight":n=new THREE.SpotLight(t.color,t.intensity,t.distance,t.angle,t.exponent);break;case"HemisphereLight":n=new THREE.HemisphereLight(t.color,t.groundColor,t.intensity);break;case"Mesh":var o=i[t.geometry],s=r[t.material];void 0===o&&console.error("THREE.ObjectLoader: Undefined geometry "+t.geometry),void 0===s&&console.error("THREE.ObjectLoader: Undefined material "+t.material),n=new THREE.Mesh(o,s);break;case"Sprite":var s=r[t.material];void 0===s&&console.error("THREE.ObjectLoader: Undefined material "+t.material),n=new THREE.Sprite(s);break;default:n=new THREE.Object3D}if(n.uuid=t.uuid,void 0!==t.name&&(n.name=t.name),void 0!==t.matrix?(e.fromArray(t.matrix),e.decompose(n.position,n.quaternion,n.scale)):(void 0!==t.position&&n.position.fromArray(t.position),void 0!==t.rotation&&n.rotation.fromArray(t.rotation),void 0!==t.scale&&n.scale.fromArray(t.scale)),void 0!==t.visible&&(n.visible=t.visible),void 0!==t.userData&&(n.userData=t.userData),void 0!==t.children)for(var a in t.children)n.add(this.parseObject(t.children[a],i,r));return n}}()},THREE.SceneLoader=function(){this.onLoadStart=function(){},this.onLoadProgress=function(){},this.onLoadComplete=function(){},this.callbackSync=function(){},this.callbackProgress=function(){},this.geometryHandlers={},this.hierarchyHandlers={},this.addGeometryHandler("ascii",THREE.JSONLoader)},THREE.SceneLoader.prototype={constructor:THREE.SceneLoader,load:function(e,t){var i=this,r=new THREE.XHRLoader(i.manager);r.setCrossOrigin(this.crossOrigin),r.load(e,function(r){i.parse(JSON.parse(r),t,e)})},setCrossOrigin:function(e){this.crossOrigin=e},addGeometryHandler:function(e,t){this.geometryHandlers[e]={loaderClass:t}},addHierarchyHandler:function(e,t){this.hierarchyHandlers[e]={loaderClass:t}},parse:function(e,t,i){function r(e,t){return"relativeToHTML"==t?e:b+e}function n(){o(_.scene,S.objects)}function o(e,t){var i,n,s,a,l;for(var c in t){var u=_.objects[c],d=t[c];if(void 0===u){if(d.type&&d.type in C.hierarchyHandlers){if(void 0===d.loading){var f={type:1,url:1,material:1,position:1,rotation:1,scale:1,visible:1,children:1,userData:1,skin:1,morph:1,mirroredLoop:1,duration:1},E={};for(var v in d)v in f||(E[v]=d[v]);p=_.materials[d.material],d.loading=!0;var y=C.hierarchyHandlers[d.type].loaderObject;y.options?y.load(r(d.url,S.urlBaseType),h(c,e,p,d)):y.load(r(d.url,S.urlBaseType),h(c,e,p,d),E)}}else if(void 0!==d.geometry){if(m=_.geometries[d.geometry]){var T=!1;if(p=_.materials[d.material],T=p instanceof THREE.ShaderMaterial,n=d.position,s=d.rotation,a=d.scale,i=d.matrix,l=d.quaternion,d.material||(p=new THREE.MeshFaceMaterial(_.face_materials[d.geometry])),p instanceof THREE.MeshFaceMaterial&&0===p.materials.length&&(p=new THREE.MeshFaceMaterial(_.face_materials[d.geometry])),p instanceof THREE.MeshFaceMaterial)for(var w=0;w<p.materials.length;w++)T=T||p.materials[w]instanceof THREE.ShaderMaterial;
T&&m.computeTangents(),d.skin?u=new THREE.SkinnedMesh(m,p):d.morph?(u=new THREE.MorphAnimMesh(m,p),void 0!==d.duration&&(u.duration=d.duration),void 0!==d.time&&(u.time=d.time),void 0!==d.mirroredLoop&&(u.mirroredLoop=d.mirroredLoop),p.morphNormals&&m.computeMorphNormals()):u=new THREE.Mesh(m,p),u.name=c,i?(u.matrixAutoUpdate=!1,u.matrix.set(i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7],i[8],i[9],i[10],i[11],i[12],i[13],i[14],i[15])):(u.position.fromArray(n),l?u.quaternion.fromArray(l):u.rotation.fromArray(s),u.scale.fromArray(a)),u.visible=d.visible,u.castShadow=d.castShadow,u.receiveShadow=d.receiveShadow,e.add(u),_.objects[c]=u}}else if("AmbientLight"===d.type||"PointLight"===d.type||"DirectionalLight"===d.type||"SpotLight"===d.type||"HemisphereLight"===d.type||"AreaLight"===d.type){var A=d.color,R=d.intensity,b=d.distance,F=d.position,H=d.rotation;switch(d.type){case"AmbientLight":x=new THREE.AmbientLight(A);break;case"PointLight":x=new THREE.PointLight(A,R,b),x.position.fromArray(F);break;case"DirectionalLight":x=new THREE.DirectionalLight(A,R),x.position.fromArray(d.direction);break;case"SpotLight":x=new THREE.SpotLight(A,R,b,1),x.angle=d.angle,x.position.fromArray(F),x.target.set(F[0],F[1]-b,F[2]),x.target.applyEuler(new THREE.Euler(H[0],H[1],H[2],"XYZ"));break;case"HemisphereLight":x=new THREE.DirectionalLight(A,R,b),x.target.set(F[0],F[1]-b,F[2]),x.target.applyEuler(new THREE.Euler(H[0],H[1],H[2],"XYZ"));break;case"AreaLight":x=new THREE.AreaLight(A,R),x.position.fromArray(F),x.width=d.size,x.height=d.size_y}e.add(x),x.name=c,_.lights[c]=x,_.objects[c]=x}else"PerspectiveCamera"===d.type||"OrthographicCamera"===d.type?(n=d.position,s=d.rotation,l=d.quaternion,"PerspectiveCamera"===d.type?g=new THREE.PerspectiveCamera(d.fov,d.aspect,d.near,d.far):"OrthographicCamera"===d.type&&(g=new THREE.OrthographicCamera(d.left,d.right,d.top,d.bottom,d.near,d.far)),g.name=c,g.position.fromArray(n),void 0!==l?g.quaternion.fromArray(l):void 0!==s&&g.rotation.fromArray(s),e.add(g),_.cameras[c]=g,_.objects[c]=g):(n=d.position,s=d.rotation,a=d.scale,l=d.quaternion,u=new THREE.Object3D,u.name=c,u.position.fromArray(n),l?u.quaternion.fromArray(l):u.rotation.fromArray(s),u.scale.fromArray(a),u.visible=void 0!==d.visible?d.visible:!1,e.add(u),_.objects[c]=u,_.empties[c]=u);if(u){if(void 0!==d.userData)for(var D in d.userData){var M=d.userData[D];u.userData[D]=M}if(void 0!==d.groups)for(var w=0;w<d.groups.length;w++){var B=d.groups[w];void 0===_.groups[B]&&(_.groups[B]=[]),_.groups[B].push(c)}}}void 0!==u&&void 0!==d.children&&o(u,d.children)}}function s(e,t,i){_.geometries[i]=e,_.face_materials[i]=t,n()}function a(e,t,i,r,o){var s=o.position,a=o.rotation,l=o.quaternion,h=o.scale;e.position.fromArray(s),l?e.quaternion.fromArray(l):e.rotation.fromArray(a),e.scale.fromArray(h),r&&e.traverse(function(e){e.material=r});var c=void 0!==o.visible?o.visible:!0;e.traverse(function(e){e.visible=c}),i.add(e),e.name=t,_.objects[t]=e,n()}function l(e){return function(t,i){t.name=e,s(t,i,e),T-=1,C.onLoadComplete(),u()}}function h(e,t,i,r){return function(n){var o;o=n.content?n.content:n.dae?n.scene:n,a(o,e,t,i,r),T-=1,C.onLoadComplete(),u()}}function c(e){return function(t,i){t.name=e,_.geometries[e]=t,_.face_materials[e]=i}}function u(){var e={totalModels:A,totalTextures:R,loadedModels:A-T,loadedTextures:R-w};C.callbackProgress(e,_),C.onLoadProgress(),0===T&&0===w&&(d(),t(_))}function d(){for(var e=0;e<F.length;e++){var t=F[e],i=_.objects[t.targetName];i?t.object.target=i:(t.object.target=new THREE.Object3D,_.scene.add(t.object.target)),t.object.target.userData.targetInverse=t.object}}function f(e,t){if(t(e),void 0!==e.children)for(var i in e.children)f(e.children[i],t)}var m,p,g,E,v,y,x,T,w,A,R,_,C=this,b=THREE.Loader.prototype.extractUrlBase(i),F=[],S=e;for(var H in this.geometryHandlers){var D=this.geometryHandlers[H].loaderClass;this.geometryHandlers[H].loaderObject=new D}for(var H in this.hierarchyHandlers){var D=this.hierarchyHandlers[H].loaderClass;this.hierarchyHandlers[H].loaderObject=new D}if(T=0,w=0,_={scene:new THREE.Scene,geometries:{},face_materials:{},materials:{},textures:{},objects:{},cameras:{},lights:{},fogs:{},empties:{},groups:{}},S.transform){var M=S.transform.position,B=S.transform.rotation,L=S.transform.scale;M&&_.scene.position.fromArray(M),B&&_.scene.rotation.fromArray(B),L&&_.scene.scale.fromArray(L),(M||B||L)&&(_.scene.updateMatrix(),_.scene.updateMatrixWorld())}var k,q,P=function(e){w-=e,u(),C.onLoadComplete()},$=function(e){return function(){P(e)}};for(k in S.fogs)q=S.fogs[k],"linear"===q.type?E=new THREE.Fog(0,q.near,q.far):"exp2"===q.type&&(E=new THREE.FogExp2(0,q.density)),y=q.color,E.color.setRGB(y[0],y[1],y[2]),_.fogs[k]=E;var O,I;for(O in S.geometries)I=S.geometries[O],I.type in this.geometryHandlers&&(T+=1,C.onLoadStart());for(var z in S.objects)f(S.objects[z],function(e){e.type&&e.type in C.hierarchyHandlers&&(T+=1,C.onLoadStart())});A=T;for(O in S.geometries)if(I=S.geometries[O],"cube"===I.type)m=new THREE.BoxGeometry(I.width,I.height,I.depth,I.widthSegments,I.heightSegments,I.depthSegments),m.name=O,_.geometries[O]=m;else if("plane"===I.type)m=new THREE.PlaneGeometry(I.width,I.height,I.widthSegments,I.heightSegments),m.name=O,_.geometries[O]=m;else if("sphere"===I.type)m=new THREE.SphereGeometry(I.radius,I.widthSegments,I.heightSegments),m.name=O,_.geometries[O]=m;else if("cylinder"===I.type)m=new THREE.CylinderGeometry(I.topRad,I.botRad,I.height,I.radSegs,I.heightSegs),m.name=O,_.geometries[O]=m;else if("torus"===I.type)m=new THREE.TorusGeometry(I.radius,I.tube,I.segmentsR,I.segmentsT),m.name=O,_.geometries[O]=m;else if("icosahedron"===I.type)m=new THREE.IcosahedronGeometry(I.radius,I.subdivisions),m.name=O,_.geometries[O]=m;else if(I.type in this.geometryHandlers){var N={};for(var V in I)"type"!==V&&"url"!==V&&(N[V]=I[V]);var U=this.geometryHandlers[I.type].loaderObject;U.load(r(I.url,S.urlBaseType),l(O),N)}else if("embedded"===I.type){var W=S.embeds[I.id],G="";if(W.metadata=S.metadata,W){var j=this.geometryHandlers.ascii.loaderObject,X=j.parse(W,G);c(O)(X.geometry,X.materials)}}var Y,K;for(Y in S.textures)if(K=S.textures[Y],K.url instanceof Array){w+=K.url.length;for(var Z=0;Z<K.url.length;Z++)C.onLoadStart()}else w+=1,C.onLoadStart();R=w;for(Y in S.textures){if(K=S.textures[Y],void 0!==K.mapping&&void 0!==THREE[K.mapping]&&(K.mapping=new THREE[K.mapping]),K.url instanceof Array){for(var Q=K.url.length,J=[],et=0;Q>et;et++)J[et]=r(K.url[et],S.urlBaseType);var tt=/\.dds$/i.test(J[0]);v=tt?THREE.ImageUtils.loadCompressedTextureCube(J,K.mapping,$(Q)):THREE.ImageUtils.loadTextureCube(J,K.mapping,$(Q))}else{var tt=/\.dds$/i.test(K.url),it=r(K.url,S.urlBaseType),rt=$(1);if(v=tt?THREE.ImageUtils.loadCompressedTexture(it,K.mapping,rt):THREE.ImageUtils.loadTexture(it,K.mapping,rt),void 0!==THREE[K.minFilter]&&(v.minFilter=THREE[K.minFilter]),void 0!==THREE[K.magFilter]&&(v.magFilter=THREE[K.magFilter]),K.anisotropy&&(v.anisotropy=K.anisotropy),K.repeat&&(v.repeat.set(K.repeat[0],K.repeat[1]),1!==K.repeat[0]&&(v.wrapS=THREE.RepeatWrapping),1!==K.repeat[1]&&(v.wrapT=THREE.RepeatWrapping)),K.offset&&v.offset.set(K.offset[0],K.offset[1]),K.wrap){var nt={repeat:THREE.RepeatWrapping,mirror:THREE.MirroredRepeatWrapping};void 0!==nt[K.wrap[0]]&&(v.wrapS=nt[K.wrap[0]]),void 0!==nt[K.wrap[1]]&&(v.wrapT=nt[K.wrap[1]])}}_.textures[Y]=v}var ot,st,at;for(ot in S.materials){st=S.materials[ot];for(at in st.parameters)if("envMap"===at||"map"===at||"lightMap"===at||"bumpMap"===at)st.parameters[at]=_.textures[st.parameters[at]];else if("shading"===at)st.parameters[at]="flat"===st.parameters[at]?THREE.FlatShading:THREE.SmoothShading;else if("side"===at)st.parameters[at]="double"==st.parameters[at]?THREE.DoubleSide:"back"==st.parameters[at]?THREE.BackSide:THREE.FrontSide;else if("blending"===at)st.parameters[at]=st.parameters[at]in THREE?THREE[st.parameters[at]]:THREE.NormalBlending;else if("combine"===at)st.parameters[at]=st.parameters[at]in THREE?THREE[st.parameters[at]]:THREE.MultiplyOperation;else if("vertexColors"===at)"face"==st.parameters[at]?st.parameters[at]=THREE.FaceColors:st.parameters[at]&&(st.parameters[at]=THREE.VertexColors);else if("wrapRGB"===at){var lt=st.parameters[at];st.parameters[at]=new THREE.Vector3(lt[0],lt[1],lt[2])}if(void 0!==st.parameters.opacity&&st.parameters.opacity<1&&(st.parameters.transparent=!0),st.parameters.normalMap){var ht=THREE.ShaderLib.normalmap,ct=THREE.UniformsUtils.clone(ht.uniforms),ut=st.parameters.color,dt=st.parameters.specular,ft=st.parameters.ambient,mt=st.parameters.shininess;ct.tNormal.value=_.textures[st.parameters.normalMap],st.parameters.normalScale&&ct.uNormalScale.value.set(st.parameters.normalScale[0],st.parameters.normalScale[1]),st.parameters.map&&(ct.tDiffuse.value=st.parameters.map,ct.enableDiffuse.value=!0),st.parameters.envMap&&(ct.tCube.value=st.parameters.envMap,ct.enableReflection.value=!0,ct.reflectivity.value=st.parameters.reflectivity),st.parameters.lightMap&&(ct.tAO.value=st.parameters.lightMap,ct.enableAO.value=!0),st.parameters.specularMap&&(ct.tSpecular.value=_.textures[st.parameters.specularMap],ct.enableSpecular.value=!0),st.parameters.displacementMap&&(ct.tDisplacement.value=_.textures[st.parameters.displacementMap],ct.enableDisplacement.value=!0,ct.uDisplacementBias.value=st.parameters.displacementBias,ct.uDisplacementScale.value=st.parameters.displacementScale),ct.diffuse.value.setHex(ut),ct.specular.value.setHex(dt),ct.ambient.value.setHex(ft),ct.shininess.value=mt,st.parameters.opacity&&(ct.opacity.value=st.parameters.opacity);var pt={fragmentShader:ht.fragmentShader,vertexShader:ht.vertexShader,uniforms:ct,lights:!0,fog:!0};p=new THREE.ShaderMaterial(pt)}else p=new THREE[st.type](st.parameters);p.name=ot,_.materials[ot]=p}for(ot in S.materials)if(st=S.materials[ot],st.parameters.materials){for(var gt=[],et=0;et<st.parameters.materials.length;et++){var Et=st.parameters.materials[et];gt.push(_.materials[Et])}_.materials[ot].materials=gt}n(),_.cameras&&S.defaults.camera&&(_.currentCamera=_.cameras[S.defaults.camera]),_.fogs&&S.defaults.fog&&(_.scene.fog=_.fogs[S.defaults.fog]),C.callbackSync(_),u()}},THREE.TextureLoader=function(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager},THREE.TextureLoader.prototype={constructor:THREE.TextureLoader,load:function(e,t){var i=this,r=new THREE.ImageLoader(i.manager);r.setCrossOrigin(this.crossOrigin),r.load(e,function(e){var i=new THREE.Texture(e);i.needsUpdate=!0,void 0!==t&&t(i)})},setCrossOrigin:function(e){this.crossOrigin=e}},THREE.Material=function(){this.id=THREE.MaterialIdCount++,this.uuid=THREE.Math.generateUUID(),this.name="",this.side=THREE.FrontSide,this.opacity=1,this.transparent=!1,this.blending=THREE.NormalBlending,this.blendSrc=THREE.SrcAlphaFactor,this.blendDst=THREE.OneMinusSrcAlphaFactor,this.blendEquation=THREE.AddEquation,this.depthTest=!0,this.depthWrite=!0,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.alphaTest=0,this.overdraw=0,this.visible=!0,this.needsUpdate=!0},THREE.Material.prototype={constructor:THREE.Material,setValues:function(e){if(void 0!==e)for(var t in e){var i=e[t];if(void 0!==i){if(t in this){var r=this[t];r instanceof THREE.Color?r.set(i):r instanceof THREE.Vector3&&i instanceof THREE.Vector3?r.copy(i):this[t]="overdraw"==t?Number(i):i}}else console.warn("THREE.Material: '"+t+"' parameter is undefined.")}},clone:function(e){return void 0===e&&(e=new THREE.Material),e.name=this.name,e.side=this.side,e.opacity=this.opacity,e.transparent=this.transparent,e.blending=this.blending,e.blendSrc=this.blendSrc,e.blendDst=this.blendDst,e.blendEquation=this.blendEquation,e.depthTest=this.depthTest,e.depthWrite=this.depthWrite,e.polygonOffset=this.polygonOffset,e.polygonOffsetFactor=this.polygonOffsetFactor,e.polygonOffsetUnits=this.polygonOffsetUnits,e.alphaTest=this.alphaTest,e.overdraw=this.overdraw,e.visible=this.visible,e},dispose:function(){this.dispatchEvent({type:"dispose"})}},THREE.EventDispatcher.prototype.apply(THREE.Material.prototype),THREE.MaterialIdCount=0,THREE.LineBasicMaterial=function(e){THREE.Material.call(this),this.color=new THREE.Color(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.vertexColors=!1,this.fog=!0,this.setValues(e)},THREE.LineBasicMaterial.prototype=Object.create(THREE.Material.prototype),THREE.LineBasicMaterial.prototype.clone=function(){var e=new THREE.LineBasicMaterial;return THREE.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.linewidth=this.linewidth,e.linecap=this.linecap,e.linejoin=this.linejoin,e.vertexColors=this.vertexColors,e.fog=this.fog,e},THREE.LineDashedMaterial=function(e){THREE.Material.call(this),this.color=new THREE.Color(16777215),this.linewidth=1,this.scale=1,this.dashSize=3,this.gapSize=1,this.vertexColors=!1,this.fog=!0,this.setValues(e)},THREE.LineDashedMaterial.prototype=Object.create(THREE.Material.prototype),THREE.LineDashedMaterial.prototype.clone=function(){var e=new THREE.LineDashedMaterial;return THREE.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.linewidth=this.linewidth,e.scale=this.scale,e.dashSize=this.dashSize,e.gapSize=this.gapSize,e.vertexColors=this.vertexColors,e.fog=this.fog,e},THREE.MeshBasicMaterial=function(e){THREE.Material.call(this),this.color=new THREE.Color(16777215),this.map=null,this.lightMap=null,this.specularMap=null,this.envMap=null,this.combine=THREE.MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.shading=THREE.SmoothShading,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.vertexColors=THREE.NoColors,this.skinning=!1,this.morphTargets=!1,this.setValues(e)},THREE.MeshBasicMaterial.prototype=Object.create(THREE.Material.prototype),THREE.MeshBasicMaterial.prototype.clone=function(){var e=new THREE.MeshBasicMaterial;return THREE.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.map=this.map,e.lightMap=this.lightMap,e.specularMap=this.specularMap,e.envMap=this.envMap,e.combine=this.combine,e.reflectivity=this.reflectivity,e.refractionRatio=this.refractionRatio,e.fog=this.fog,e.shading=this.shading,e.wireframe=this.wireframe,e.wireframeLinewidth=this.wireframeLinewidth,e.wireframeLinecap=this.wireframeLinecap,e.wireframeLinejoin=this.wireframeLinejoin,e.vertexColors=this.vertexColors,e.skinning=this.skinning,e.morphTargets=this.morphTargets,e},THREE.MeshLambertMaterial=function(e){THREE.Material.call(this),this.color=new THREE.Color(16777215),this.ambient=new THREE.Color(16777215),this.emissive=new THREE.Color(0),this.wrapAround=!1,this.wrapRGB=new THREE.Vector3(1,1,1),this.map=null,this.lightMap=null,this.specularMap=null,this.envMap=null,this.combine=THREE.MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.shading=THREE.SmoothShading,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.vertexColors=THREE.NoColors,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)},THREE.MeshLambertMaterial.prototype=Object.create(THREE.Material.prototype),THREE.MeshLambertMaterial.prototype.clone=function(){var e=new THREE.MeshLambertMaterial;return THREE.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.ambient.copy(this.ambient),e.emissive.copy(this.emissive),e.wrapAround=this.wrapAround,e.wrapRGB.copy(this.wrapRGB),e.map=this.map,e.lightMap=this.lightMap,e.specularMap=this.specularMap,e.envMap=this.envMap,e.combine=this.combine,e.reflectivity=this.reflectivity,e.refractionRatio=this.refractionRatio,e.fog=this.fog,e.shading=this.shading,e.wireframe=this.wireframe,e.wireframeLinewidth=this.wireframeLinewidth,e.wireframeLinecap=this.wireframeLinecap,e.wireframeLinejoin=this.wireframeLinejoin,e.vertexColors=this.vertexColors,e.skinning=this.skinning,e.morphTargets=this.morphTargets,e.morphNormals=this.morphNormals,e},THREE.MeshPhongMaterial=function(e){THREE.Material.call(this),this.color=new THREE.Color(16777215),this.ambient=new THREE.Color(16777215),this.emissive=new THREE.Color(0),this.specular=new THREE.Color(1118481),this.shininess=30,this.metal=!1,this.wrapAround=!1,this.wrapRGB=new THREE.Vector3(1,1,1),this.map=null,this.lightMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new THREE.Vector2(1,1),this.specularMap=null,this.envMap=null,this.combine=THREE.MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.shading=THREE.SmoothShading,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.vertexColors=THREE.NoColors,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)},THREE.MeshPhongMaterial.prototype=Object.create(THREE.Material.prototype),THREE.MeshPhongMaterial.prototype.clone=function(){var e=new THREE.MeshPhongMaterial;return THREE.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.ambient.copy(this.ambient),e.emissive.copy(this.emissive),e.specular.copy(this.specular),e.shininess=this.shininess,e.metal=this.metal,e.wrapAround=this.wrapAround,e.wrapRGB.copy(this.wrapRGB),e.map=this.map,e.lightMap=this.lightMap,e.bumpMap=this.bumpMap,e.bumpScale=this.bumpScale,e.normalMap=this.normalMap,e.normalScale.copy(this.normalScale),e.specularMap=this.specularMap,e.envMap=this.envMap,e.combine=this.combine,e.reflectivity=this.reflectivity,e.refractionRatio=this.refractionRatio,e.fog=this.fog,e.shading=this.shading,e.wireframe=this.wireframe,e.wireframeLinewidth=this.wireframeLinewidth,e.wireframeLinecap=this.wireframeLinecap,e.wireframeLinejoin=this.wireframeLinejoin,e.vertexColors=this.vertexColors,e.skinning=this.skinning,e.morphTargets=this.morphTargets,e.morphNormals=this.morphNormals,e},THREE.MeshDepthMaterial=function(e){THREE.Material.call(this),this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)},THREE.MeshDepthMaterial.prototype=Object.create(THREE.Material.prototype),THREE.MeshDepthMaterial.prototype.clone=function(){var e=new THREE.MeshDepthMaterial;return THREE.Material.prototype.clone.call(this,e),e.wireframe=this.wireframe,e.wireframeLinewidth=this.wireframeLinewidth,e},THREE.MeshNormalMaterial=function(e){THREE.Material.call(this,e),this.shading=THREE.FlatShading,this.wireframe=!1,this.wireframeLinewidth=1,this.morphTargets=!1,this.setValues(e)},THREE.MeshNormalMaterial.prototype=Object.create(THREE.Material.prototype),THREE.MeshNormalMaterial.prototype.clone=function(){var e=new THREE.MeshNormalMaterial;return THREE.Material.prototype.clone.call(this,e),e.shading=this.shading,e.wireframe=this.wireframe,e.wireframeLinewidth=this.wireframeLinewidth,e},THREE.MeshFaceMaterial=function(e){this.materials=e instanceof Array?e:[]},THREE.MeshFaceMaterial.prototype.clone=function(){for(var e=new THREE.MeshFaceMaterial,t=0;t<this.materials.length;t++)e.materials.push(this.materials[t].clone());return e},THREE.ParticleSystemMaterial=function(e){THREE.Material.call(this),this.color=new THREE.Color(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.vertexColors=!1,this.fog=!0,this.setValues(e)},THREE.ParticleSystemMaterial.prototype=Object.create(THREE.Material.prototype),THREE.ParticleSystemMaterial.prototype.clone=function(){var e=new THREE.ParticleSystemMaterial;return THREE.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.map=this.map,e.size=this.size,e.sizeAttenuation=this.sizeAttenuation,e.vertexColors=this.vertexColors,e.fog=this.fog,e},THREE.ParticleBasicMaterial=THREE.ParticleSystemMaterial,THREE.ShaderMaterial=function(e){THREE.Material.call(this),this.fragmentShader="void main() {}",this.vertexShader="void main() {}",this.uniforms={},this.defines={},this.attributes=null,this.shading=THREE.SmoothShading,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.vertexColors=THREE.NoColors,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName="position",this.setValues(e)},THREE.ShaderMaterial.prototype=Object.create(THREE.Material.prototype),THREE.ShaderMaterial.prototype.clone=function(){var e=new THREE.ShaderMaterial;return THREE.Material.prototype.clone.call(this,e),e.fragmentShader=this.fragmentShader,e.vertexShader=this.vertexShader,e.uniforms=THREE.UniformsUtils.clone(this.uniforms),e.attributes=this.attributes,e.defines=this.defines,e.shading=this.shading,e.wireframe=this.wireframe,e.wireframeLinewidth=this.wireframeLinewidth,e.fog=this.fog,e.lights=this.lights,e.vertexColors=this.vertexColors,e.skinning=this.skinning,e.morphTargets=this.morphTargets,e.morphNormals=this.morphNormals,e},THREE.SpriteMaterial=function(e){THREE.Material.call(this),this.color=new THREE.Color(16777215),this.map=null,this.rotation=0,this.fog=!1,this.setValues(e)},THREE.SpriteMaterial.prototype=Object.create(THREE.Material.prototype),THREE.SpriteMaterial.prototype.clone=function(){var e=new THREE.SpriteMaterial;return THREE.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.map=this.map,e.rotation=this.rotation,e.fog=this.fog,e},THREE.SpriteCanvasMaterial=function(e){THREE.Material.call(this),this.color=new THREE.Color(16777215),this.program=function(){},this.setValues(e)},THREE.SpriteCanvasMaterial.prototype=Object.create(THREE.Material.prototype),THREE.SpriteCanvasMaterial.prototype.clone=function(){var e=new THREE.SpriteCanvasMaterial;return THREE.Material.prototype.clone.call(this,e),e.color.copy(this.color),e.program=this.program,e},THREE.ParticleCanvasMaterial=THREE.SpriteCanvasMaterial,THREE.Texture=function(e,t,i,r,n,o,s,a,l){this.id=THREE.TextureIdCount++,this.uuid=THREE.Math.generateUUID(),this.name="",this.image=e,this.mipmaps=[],this.mapping=void 0!==t?t:new THREE.UVMapping,this.wrapS=void 0!==i?i:THREE.ClampToEdgeWrapping,this.wrapT=void 0!==r?r:THREE.ClampToEdgeWrapping,this.magFilter=void 0!==n?n:THREE.LinearFilter,this.minFilter=void 0!==o?o:THREE.LinearMipMapLinearFilter,this.anisotropy=void 0!==l?l:1,this.format=void 0!==s?s:THREE.RGBAFormat,this.type=void 0!==a?a:THREE.UnsignedByteType,this.offset=new THREE.Vector2(0,0),this.repeat=new THREE.Vector2(1,1),this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this._needsUpdate=!1,this.onUpdate=null},THREE.Texture.prototype={constructor:THREE.Texture,get needsUpdate(){return this._needsUpdate},set needsUpdate(e){e===!0&&this.update(),this._needsUpdate=e},clone:function(e){return void 0===e&&(e=new THREE.Texture),e.image=this.image,e.mipmaps=this.mipmaps.slice(0),e.mapping=this.mapping,e.wrapS=this.wrapS,e.wrapT=this.wrapT,e.magFilter=this.magFilter,e.minFilter=this.minFilter,e.anisotropy=this.anisotropy,e.format=this.format,e.type=this.type,e.offset.copy(this.offset),e.repeat.copy(this.repeat),e.generateMipmaps=this.generateMipmaps,e.premultiplyAlpha=this.premultiplyAlpha,e.flipY=this.flipY,e.unpackAlignment=this.unpackAlignment,e},update:function(){this.dispatchEvent({type:"update"})},dispose:function(){this.dispatchEvent({type:"dispose"})}},THREE.EventDispatcher.prototype.apply(THREE.Texture.prototype),THREE.TextureIdCount=0,THREE.CompressedTexture=function(e,t,i,r,n,o,s,a,l,h,c){THREE.Texture.call(this,null,o,s,a,l,h,r,n,c),this.image={width:t,height:i},this.mipmaps=e,this.generateMipmaps=!1},THREE.CompressedTexture.prototype=Object.create(THREE.Texture.prototype),THREE.CompressedTexture.prototype.clone=function(){var e=new THREE.CompressedTexture;return THREE.Texture.prototype.clone.call(this,e),e},THREE.DataTexture=function(e,t,i,r,n,o,s,a,l,h,c){THREE.Texture.call(this,null,o,s,a,l,h,r,n,c),this.image={data:e,width:t,height:i}},THREE.DataTexture.prototype=Object.create(THREE.Texture.prototype),THREE.DataTexture.prototype.clone=function(){var e=new THREE.DataTexture;return THREE.Texture.prototype.clone.call(this,e),e},THREE.ParticleSystem=function(e,t){THREE.Object3D.call(this),this.geometry=void 0!==e?e:new THREE.Geometry,this.material=void 0!==t?t:new THREE.ParticleSystemMaterial({color:16777215*Math.random()}),this.sortParticles=!1,this.frustumCulled=!1},THREE.ParticleSystem.prototype=Object.create(THREE.Object3D.prototype),THREE.ParticleSystem.prototype.clone=function(e){return void 0===e&&(e=new THREE.ParticleSystem(this.geometry,this.material)),e.sortParticles=this.sortParticles,THREE.Object3D.prototype.clone.call(this,e),e},THREE.Line=function(e,t,i){THREE.Object3D.call(this),this.geometry=void 0!==e?e:new THREE.Geometry,this.material=void 0!==t?t:new THREE.LineBasicMaterial({color:16777215*Math.random()}),this.type=void 0!==i?i:THREE.LineStrip},THREE.LineStrip=0,THREE.LinePieces=1,THREE.Line.prototype=Object.create(THREE.Object3D.prototype),THREE.Line.prototype.clone=function(e){return void 0===e&&(e=new THREE.Line(this.geometry,this.material,this.type)),THREE.Object3D.prototype.clone.call(this,e),e},THREE.Mesh=function(e,t){THREE.Object3D.call(this),this.geometry=void 0!==e?e:new THREE.Geometry,this.material=void 0!==t?t:new THREE.MeshBasicMaterial({color:16777215*Math.random()}),this.updateMorphTargets()},THREE.Mesh.prototype=Object.create(THREE.Object3D.prototype),THREE.Mesh.prototype.updateMorphTargets=function(){if(void 0!==this.geometry.morphTargets&&this.geometry.morphTargets.length>0){this.morphTargetBase=-1,this.morphTargetForcedOrder=[],this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var e=0,t=this.geometry.morphTargets.length;t>e;e++)this.morphTargetInfluences.push(0),this.morphTargetDictionary[this.geometry.morphTargets[e].name]=e}},THREE.Mesh.prototype.getMorphTargetIndexByName=function(e){return void 0!==this.morphTargetDictionary[e]?this.morphTargetDictionary[e]:(console.log("THREE.Mesh.getMorphTargetIndexByName: morph target "+e+" does not exist. Returning 0."),0)},THREE.Mesh.prototype.clone=function(e){return void 0===e&&(e=new THREE.Mesh(this.geometry,this.material)),THREE.Object3D.prototype.clone.call(this,e),e},THREE.Bone=function(e){THREE.Object3D.call(this),this.skin=e,this.skinMatrix=new THREE.Matrix4},THREE.Bone.prototype=Object.create(THREE.Object3D.prototype),THREE.Bone.prototype.update=function(e,t){this.matrixAutoUpdate&&(t|=this.updateMatrix()),(t||this.matrixWorldNeedsUpdate)&&(e?this.skinMatrix.multiplyMatrices(e,this.matrix):this.skinMatrix.copy(this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);var i,r=this.children.length;for(i=0;r>i;i++)this.children[i].update(this.skinMatrix,t)},THREE.SkinnedMesh=function(e,t,i){THREE.Mesh.call(this,e,t),this.useVertexTexture=void 0!==i?i:!0,this.identityMatrix=new THREE.Matrix4,this.bones=[],this.boneMatrices=[];var r,n,o,s,a,l;if(this.geometry&&void 0!==this.geometry.bones){for(r=0;r<this.geometry.bones.length;r++)o=this.geometry.bones[r],s=o.pos,a=o.rotq,l=o.scl,n=this.addBone(),n.name=o.name,n.position.set(s[0],s[1],s[2]),n.quaternion.set(a[0],a[1],a[2],a[3]),void 0!==l?n.scale.set(l[0],l[1],l[2]):n.scale.set(1,1,1);for(r=0;r<this.bones.length;r++)o=this.geometry.bones[r],n=this.bones[r],-1===o.parent?this.add(n):this.bones[o.parent].add(n);var h=this.bones.length;if(this.useVertexTexture){var c;c=h>256?64:h>64?32:h>16?16:8,this.boneTextureWidth=c,this.boneTextureHeight=c,this.boneMatrices=new Float32Array(this.boneTextureWidth*this.boneTextureHeight*4),this.boneTexture=new THREE.DataTexture(this.boneMatrices,this.boneTextureWidth,this.boneTextureHeight,THREE.RGBAFormat,THREE.FloatType),this.boneTexture.minFilter=THREE.NearestFilter,this.boneTexture.magFilter=THREE.NearestFilter,this.boneTexture.generateMipmaps=!1,this.boneTexture.flipY=!1}else this.boneMatrices=new Float32Array(16*h);this.pose()}},THREE.SkinnedMesh.prototype=Object.create(THREE.Mesh.prototype),THREE.SkinnedMesh.prototype.addBone=function(e){return void 0===e&&(e=new THREE.Bone(this)),this.bones.push(e),e},THREE.SkinnedMesh.prototype.updateMatrixWorld=function(){var e=new THREE.Matrix4;return function(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(this.parent?this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix):this.matrixWorld.copy(this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);for(var i=0,r=this.children.length;r>i;i++){var n=this.children[i];n instanceof THREE.Bone?n.update(this.identityMatrix,!1):n.updateMatrixWorld(!0)}if(void 0==this.boneInverses){this.boneInverses=[];for(var o=0,s=this.bones.length;s>o;o++){var a=new THREE.Matrix4;a.getInverse(this.bones[o].skinMatrix),this.boneInverses.push(a)}}for(var o=0,s=this.bones.length;s>o;o++)e.multiplyMatrices(this.bones[o].skinMatrix,this.boneInverses[o]),e.flattenToArrayOffset(this.boneMatrices,16*o);this.useVertexTexture&&(this.boneTexture.needsUpdate=!0)}}(),THREE.SkinnedMesh.prototype.pose=function(){this.updateMatrixWorld(!0),this.normalizeSkinWeights()},THREE.SkinnedMesh.prototype.normalizeSkinWeights=function(){if(this.geometry instanceof THREE.Geometry)for(var e=0;e<this.geometry.skinIndices.length;e++){var t=this.geometry.skinWeights[e],i=1/t.lengthManhattan();1/0!==i?t.multiplyScalar(i):t.set(1)}},THREE.SkinnedMesh.prototype.clone=function(e){return void 0===e&&(e=new THREE.SkinnedMesh(this.geometry,this.material,this.useVertexTexture)),THREE.Mesh.prototype.clone.call(this,e),e},THREE.MorphAnimMesh=function(e,t){THREE.Mesh.call(this,e,t),this.duration=1e3,this.mirroredLoop=!1,this.time=0,this.lastKeyframe=0,this.currentKeyframe=0,this.direction=1,this.directionBackwards=!1,this.setFrameRange(0,this.geometry.morphTargets.length-1)},THREE.MorphAnimMesh.prototype=Object.create(THREE.Mesh.prototype),THREE.MorphAnimMesh.prototype.setFrameRange=function(e,t){this.startKeyframe=e,this.endKeyframe=t,this.length=this.endKeyframe-this.startKeyframe+1},THREE.MorphAnimMesh.prototype.setDirectionForward=function(){this.direction=1,this.directionBackwards=!1},THREE.MorphAnimMesh.prototype.setDirectionBackward=function(){this.direction=-1,this.directionBackwards=!0},THREE.MorphAnimMesh.prototype.parseAnimations=function(){var e=this.geometry;e.animations||(e.animations={});for(var t,i=e.animations,r=/([a-z]+)(\d+)/,n=0,o=e.morphTargets.length;o>n;n++){var s=e.morphTargets[n],a=s.name.match(r);if(a&&a.length>1){{var l=a[1];a[2]}i[l]||(i[l]={start:1/0,end:-1/0});var h=i[l];n<h.start&&(h.start=n),n>h.end&&(h.end=n),t||(t=l)}}e.firstAnimation=t},THREE.MorphAnimMesh.prototype.setAnimationLabel=function(e,t,i){this.geometry.animations||(this.geometry.animations={}),this.geometry.animations[e]={start:t,end:i}},THREE.MorphAnimMesh.prototype.playAnimation=function(e,t){var i=this.geometry.animations[e];i?(this.setFrameRange(i.start,i.end),this.duration=1e3*((i.end-i.start)/t),this.time=0):console.warn("animation["+e+"] undefined")},THREE.MorphAnimMesh.prototype.updateAnimation=function(e){var t=this.duration/this.length;this.time+=this.direction*e,this.mirroredLoop?(this.time>this.duration||this.time<0)&&(this.direction*=-1,this.time>this.duration&&(this.time=this.duration,this.directionBackwards=!0),this.time<0&&(this.time=0,this.directionBackwards=!1)):(this.time=this.time%this.duration,this.time<0&&(this.time+=this.duration));var i=this.startKeyframe+THREE.Math.clamp(Math.floor(this.time/t),0,this.length-1);i!==this.currentKeyframe&&(this.morphTargetInfluences[this.lastKeyframe]=0,this.morphTargetInfluences[this.currentKeyframe]=1,this.morphTargetInfluences[i]=0,this.lastKeyframe=this.currentKeyframe,this.currentKeyframe=i);var r=this.time%t/t;this.directionBackwards&&(r=1-r),this.morphTargetInfluences[this.currentKeyframe]=r,this.morphTargetInfluences[this.lastKeyframe]=1-r},THREE.MorphAnimMesh.prototype.clone=function(e){return void 0===e&&(e=new THREE.MorphAnimMesh(this.geometry,this.material)),e.duration=this.duration,e.mirroredLoop=this.mirroredLoop,e.time=this.time,e.lastKeyframe=this.lastKeyframe,e.currentKeyframe=this.currentKeyframe,e.direction=this.direction,e.directionBackwards=this.directionBackwards,THREE.Mesh.prototype.clone.call(this,e),e},THREE.LOD=function(){THREE.Object3D.call(this),this.objects=[]},THREE.LOD.prototype=Object.create(THREE.Object3D.prototype),THREE.LOD.prototype.addLevel=function(e,t){void 0===t&&(t=0),t=Math.abs(t);for(var i=0;i<this.objects.length&&!(t<this.objects[i].distance);i++);this.objects.splice(i,0,{distance:t,object:e}),this.add(e)},THREE.LOD.prototype.getObjectForDistance=function(e){for(var t=1,i=this.objects.length;i>t&&!(e<this.objects[t].distance);t++);return this.objects[t-1].object},THREE.LOD.prototype.update=function(){var e=new THREE.Vector3,t=new THREE.Vector3;return function(i){if(this.objects.length>1){e.setFromMatrixPosition(i.matrixWorld),t.setFromMatrixPosition(this.matrixWorld);var r=e.distanceTo(t);this.objects[0].object.visible=!0;for(var n=1,o=this.objects.length;o>n&&r>=this.objects[n].distance;n++)this.objects[n-1].object.visible=!1,this.objects[n].object.visible=!0;
for(;o>n;n++)this.objects[n].object.visible=!1}}}(),THREE.LOD.prototype.clone=function(e){void 0===e&&(e=new THREE.LOD),THREE.Object3D.prototype.clone.call(this,e);for(var t=0,i=this.objects.length;i>t;t++){var r=this.objects[t].object.clone();r.visible=0===t,e.addLevel(r,this.objects[t].distance)}return e},THREE.Sprite=function(){var e=new THREE.Geometry2(3);return e.vertices.set([-.5,-.5,0,.5,-.5,0,.5,.5,0]),function(t){THREE.Object3D.call(this),this.geometry=e,this.material=void 0!==t?t:new THREE.SpriteMaterial}}(),THREE.Sprite.prototype=Object.create(THREE.Object3D.prototype),THREE.Sprite.prototype.updateMatrix=function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},THREE.Sprite.prototype.clone=function(e){return void 0===e&&(e=new THREE.Sprite(this.material)),THREE.Object3D.prototype.clone.call(this,e),e},THREE.Particle=THREE.Sprite,THREE.Scene=function(){THREE.Object3D.call(this),this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,this.matrixAutoUpdate=!1,this.__lights=[],this.__objectsAdded=[],this.__objectsRemoved=[]},THREE.Scene.prototype=Object.create(THREE.Object3D.prototype),THREE.Scene.prototype.__addObject=function(e){if(e instanceof THREE.Light)-1===this.__lights.indexOf(e)&&this.__lights.push(e),e.target&&void 0===e.target.parent&&this.add(e.target);else if(!(e instanceof THREE.Camera||e instanceof THREE.Bone)){this.__objectsAdded.push(e);var t=this.__objectsRemoved.indexOf(e);-1!==t&&this.__objectsRemoved.splice(t,1)}this.dispatchEvent({type:"objectAdded",object:e}),e.dispatchEvent({type:"addedToScene",scene:this});for(var i=0;i<e.children.length;i++)this.__addObject(e.children[i])},THREE.Scene.prototype.__removeObject=function(e){if(e instanceof THREE.Light){var t=this.__lights.indexOf(e);if(-1!==t&&this.__lights.splice(t,1),e.shadowCascadeArray)for(var i=0;i<e.shadowCascadeArray.length;i++)this.__removeObject(e.shadowCascadeArray[i])}else if(!(e instanceof THREE.Camera)){this.__objectsRemoved.push(e);var t=this.__objectsAdded.indexOf(e);-1!==t&&this.__objectsAdded.splice(t,1)}this.dispatchEvent({type:"objectRemoved",object:e}),e.dispatchEvent({type:"removedFromScene",scene:this});for(var r=0;r<e.children.length;r++)this.__removeObject(e.children[r])},THREE.Scene.prototype.clone=function(e){return void 0===e&&(e=new THREE.Scene),THREE.Object3D.prototype.clone.call(this,e),null!==this.fog&&(e.fog=this.fog.clone()),null!==this.overrideMaterial&&(e.overrideMaterial=this.overrideMaterial.clone()),e.autoUpdate=this.autoUpdate,e.matrixAutoUpdate=this.matrixAutoUpdate,e},THREE.Fog=function(e,t,i){this.name="",this.color=new THREE.Color(e),this.near=void 0!==t?t:1,this.far=void 0!==i?i:1e3},THREE.Fog.prototype.clone=function(){return new THREE.Fog(this.color.getHex(),this.near,this.far)},THREE.FogExp2=function(e,t){this.name="",this.color=new THREE.Color(e),this.density=void 0!==t?t:25e-5},THREE.FogExp2.prototype.clone=function(){return new THREE.FogExp2(this.color.getHex(),this.density)},THREE.CanvasRenderer=function(e){function t(){Ht.setRGB(0,0,0),Dt.setRGB(0,0,0),Mt.setRGB(0,0,0);for(var e=0,t=C.length;t>e;e++){var i=C[e],r=i.color;i instanceof THREE.AmbientLight?Ht.add(r):i instanceof THREE.DirectionalLight?Dt.add(r):i instanceof THREE.PointLight&&Mt.add(r)}}function i(e,t,i){for(var r=0,n=C.length;n>r;r++){var o=C[r];if(_t.copy(o.color),o instanceof THREE.DirectionalLight){var s=Bt.setFromMatrixPosition(o.matrixWorld).normalize(),a=t.dot(s);if(0>=a)continue;a*=o.intensity,i.add(_t.multiplyScalar(a))}else if(o instanceof THREE.PointLight){var s=Bt.setFromMatrixPosition(o.matrixWorld),a=t.dot(Bt.subVectors(s,e).normalize());if(0>=a)continue;if(a*=0==o.distance?1:1-Math.min(e.distanceTo(s)/o.distance,1),0==a)continue;a*=o.intensity,i.add(_t.multiplyScalar(a))}}}function r(e,t,i){p(i.opacity),g(i.blending);var r=t.scale.x*nt,n=t.scale.y*ot,o=.5*Math.sqrt(r*r+n*n);if(St.min.set(e.x-o,e.y-o),St.max.set(e.x+o,e.y+o),i instanceof THREE.SpriteMaterial||i instanceof THREE.ParticleSystemMaterial){var s=i.map;if(null!==s){s.hasEventListener("update",h)===!1&&(void 0!==s.image&&s.image.width>0&&c(s),s.addEventListener("update",h));var a=Ct[s.id];void 0!==a?T(a):T("rgba( 0, 0, 0, 1 )");var l=s.image,u=l.width*s.offset.x,d=l.height*s.offset.y,f=l.width*s.repeat.x,m=l.height*s.repeat.y,E=r/f,v=n/m;st.save(),st.translate(e.x,e.y),0!==i.rotation&&st.rotate(i.rotation),st.translate(-r/2,-n/2),st.scale(E,v),st.translate(-u,-d),st.fillRect(u,d,f,m),st.restore()}else T(i.color.getStyle()),st.save(),st.translate(e.x,e.y),0!==i.rotation&&st.rotate(i.rotation),st.scale(r,-n),st.fillRect(-.5,-.5,1,1),st.restore()}else i instanceof THREE.SpriteCanvasMaterial&&(x(i.color.getStyle()),T(i.color.getStyle()),st.save(),st.translate(e.x,e.y),0!==i.rotation&&st.rotate(i.rotation),st.scale(r,n),i.program(st),st.restore())}function n(e,t,i,r){if(p(r.opacity),g(r.blending),st.beginPath(),st.moveTo(e.positionScreen.x,e.positionScreen.y),st.lineTo(t.positionScreen.x,t.positionScreen.y),r instanceof THREE.LineBasicMaterial){if(E(r.linewidth),v(r.linecap),y(r.linejoin),r.vertexColors!==THREE.VertexColors)x(r.color.getStyle());else{var n=i.vertexColors[0].getStyle(),o=i.vertexColors[1].getStyle();if(n===o)x(n);else{try{var s=st.createLinearGradient(e.positionScreen.x,e.positionScreen.y,t.positionScreen.x,t.positionScreen.y);s.addColorStop(0,n),s.addColorStop(1,o)}catch(a){s=n}x(s)}}st.stroke(),St.expandByScalar(2*r.linewidth)}else r instanceof THREE.LineDashedMaterial&&(E(r.linewidth),v(r.linecap),y(r.linejoin),x(r.color.getStyle()),w(r.dashSize,r.gapSize),st.stroke(),St.expandByScalar(2*r.linewidth),w(null,null))}function o(e,t,r,n,o,h,c,m){J.info.render.vertices+=3,J.info.render.faces++,p(m.opacity),g(m.blending),D=e.positionScreen.x,M=e.positionScreen.y,B=t.positionScreen.x,L=t.positionScreen.y,k=r.positionScreen.x,q=r.positionScreen.y,s(D,M,B,L,k,q),(m instanceof THREE.MeshLambertMaterial||m instanceof THREE.MeshPhongMaterial)&&null===m.map?(At.copy(m.color),Rt.copy(m.emissive),m.vertexColors===THREE.FaceColors&&At.multiply(c.color),m.wireframe===!1&&m.shading===THREE.SmoothShading&&3===c.vertexNormalsLength?(yt.copy(Ht),xt.copy(Ht),Tt.copy(Ht),i(c.v1.positionWorld,c.vertexNormalsModel[0],yt),i(c.v2.positionWorld,c.vertexNormalsModel[1],xt),i(c.v3.positionWorld,c.vertexNormalsModel[2],Tt),yt.multiply(At).add(Rt),xt.multiply(At).add(Rt),Tt.multiply(At).add(Rt),wt.addColors(xt,Tt).multiplyScalar(.5),O=f(yt,xt,Tt,wt),d(D,M,B,L,k,q,0,0,1,0,0,1,O)):(vt.copy(Ht),i(c.centroidModel,c.normalModel,vt),vt.multiply(At).add(Rt),m.wireframe===!0?a(vt,m.wireframeLinewidth,m.wireframeLinecap,m.wireframeLinejoin):l(vt))):m instanceof THREE.MeshBasicMaterial||m instanceof THREE.MeshLambertMaterial||m instanceof THREE.MeshPhongMaterial?null!==m.map?m.map.mapping instanceof THREE.UVMapping&&(I=c.uvs[0],u(D,M,B,L,k,q,I[n].x,I[n].y,I[o].x,I[o].y,I[h].x,I[h].y,m.map)):null!==m.envMap?m.envMap.mapping instanceof THREE.SphericalReflectionMapping&&(Lt.copy(c.vertexNormalsModel[n]).applyMatrix3(kt),z=.5*Lt.x+.5,N=.5*Lt.y+.5,Lt.copy(c.vertexNormalsModel[o]).applyMatrix3(kt),V=.5*Lt.x+.5,U=.5*Lt.y+.5,Lt.copy(c.vertexNormalsModel[h]).applyMatrix3(kt),W=.5*Lt.x+.5,G=.5*Lt.y+.5,u(D,M,B,L,k,q,z,N,V,U,W,G,m.envMap)):(vt.copy(m.color),m.vertexColors===THREE.FaceColors&&vt.multiply(c.color),m.wireframe===!0?a(vt,m.wireframeLinewidth,m.wireframeLinecap,m.wireframeLinejoin):l(vt)):m instanceof THREE.MeshDepthMaterial?(P=b.near,$=b.far,yt.r=yt.g=yt.b=1-A(e.positionScreen.z*e.positionScreen.w,P,$),xt.r=xt.g=xt.b=1-A(t.positionScreen.z*t.positionScreen.w,P,$),Tt.r=Tt.g=Tt.b=1-A(r.positionScreen.z*r.positionScreen.w,P,$),wt.addColors(xt,Tt).multiplyScalar(.5),O=f(yt,xt,Tt,wt),d(D,M,B,L,k,q,0,0,1,0,0,1,O)):m instanceof THREE.MeshNormalMaterial&&(m.shading===THREE.FlatShading?(Lt.copy(c.normalModel).applyMatrix3(kt),vt.setRGB(Lt.x,Lt.y,Lt.z).multiplyScalar(.5).addScalar(.5),m.wireframe===!0?a(vt,m.wireframeLinewidth,m.wireframeLinecap,m.wireframeLinejoin):l(vt)):m.shading===THREE.SmoothShading&&(Lt.copy(c.vertexNormalsModel[n]).applyMatrix3(kt),yt.setRGB(Lt.x,Lt.y,Lt.z).multiplyScalar(.5).addScalar(.5),Lt.copy(c.vertexNormalsModel[o]).applyMatrix3(kt),xt.setRGB(Lt.x,Lt.y,Lt.z).multiplyScalar(.5).addScalar(.5),Lt.copy(c.vertexNormalsModel[h]).applyMatrix3(kt),Tt.setRGB(Lt.x,Lt.y,Lt.z).multiplyScalar(.5).addScalar(.5),wt.addColors(xt,Tt).multiplyScalar(.5),O=f(yt,xt,Tt,wt),d(D,M,B,L,k,q,0,0,1,0,0,1,O)))}function s(e,t,i,r,n,o){st.beginPath(),st.moveTo(e,t),st.lineTo(i,r),st.lineTo(n,o),st.closePath()}function a(e,t,i,r){E(t),v(i),y(r),x(e.getStyle()),st.stroke(),St.expandByScalar(2*t)}function l(e){T(e.getStyle()),st.fill()}function h(e){c(e.target)}function c(e){var t=e.wrapS===THREE.RepeatWrapping,i=e.wrapT===THREE.RepeatWrapping,r=e.image,n=document.createElement("canvas");n.width=r.width,n.height=r.height;var o=n.getContext("2d");o.setTransform(1,0,0,-1,0,r.height),o.drawImage(r,0,0),Ct[e.id]=st.createPattern(n,t===!0&&i===!0?"repeat":t===!0&&i===!1?"repeat-x":t===!1&&i===!0?"repeat-y":"no-repeat")}function u(e,t,i,r,n,o,s,a,l,u,d,f,m){if(!(m instanceof THREE.DataTexture)){m.hasEventListener("update",h)===!1&&(void 0!==m.image&&m.image.width>0&&c(m),m.addEventListener("update",h));var p=Ct[m.id];if(void 0===p)return T("rgba(0,0,0,1)"),st.fill(),void 0;T(p);var g,E,v,y,x,w,A,R,_=m.offset.x/m.repeat.x,C=m.offset.y/m.repeat.y,b=m.image.width*m.repeat.x,F=m.image.height*m.repeat.y;s=(s+_)*b,a=(a+C)*F,l=(l+_)*b,u=(u+C)*F,d=(d+_)*b,f=(f+C)*F,i-=e,r-=t,n-=e,o-=t,l-=s,u-=a,d-=s,f-=a,A=l*f-d*u,0!==A&&(R=1/A,g=(f*i-u*n)*R,E=(f*r-u*o)*R,v=(l*n-d*i)*R,y=(l*o-d*r)*R,x=e-g*s-v*a,w=t-E*s-y*a,st.save(),st.transform(g,E,v,y,x,w),st.fill(),st.restore())}}function d(e,t,i,r,n,o,s,a,l,h,c,u,d){var f,m,p,g,E,v,y,x,T=d.width-1,w=d.height-1;s*=T,a*=w,l*=T,h*=w,c*=T,u*=w,i-=e,r-=t,n-=e,o-=t,l-=s,h-=a,c-=s,u-=a,y=l*u-c*h,x=1/y,f=(u*i-h*n)*x,m=(u*r-h*o)*x,p=(l*n-c*i)*x,g=(l*o-c*r)*x,E=e-f*s-p*a,v=t-m*s-g*a,st.save(),st.transform(f,m,p,g,E,v),st.clip(),st.drawImage(d,0,0),st.restore()}function f(e,t,i,r){return K[0]=255*e.r|0,K[1]=255*e.g|0,K[2]=255*e.b|0,K[4]=255*t.r|0,K[5]=255*t.g|0,K[6]=255*t.b|0,K[8]=255*i.r|0,K[9]=255*i.g|0,K[10]=255*i.b|0,K[12]=255*r.r|0,K[13]=255*r.g|0,K[14]=255*r.b|0,X.putImageData(Y,0,0),Q.drawImage(j,0,0),Z}function m(e,t,i){var r,n=t.x-e.x,o=t.y-e.y,s=n*n+o*o;0!==s&&(r=i/Math.sqrt(s),n*=r,o*=r,t.x+=n,t.y+=o,e.x-=n,e.y-=o)}function p(e){ht!==e&&(st.globalAlpha=e,ht=e)}function g(e){ct!==e&&(e===THREE.NormalBlending?st.globalCompositeOperation="source-over":e===THREE.AdditiveBlending?st.globalCompositeOperation="lighter":e===THREE.SubtractiveBlending&&(st.globalCompositeOperation="darker"),ct=e)}function E(e){ft!==e&&(st.lineWidth=e,ft=e)}function v(e){mt!==e&&(st.lineCap=e,mt=e)}function y(e){pt!==e&&(st.lineJoin=e,pt=e)}function x(e){ut!==e&&(st.strokeStyle=e,ut=e)}function T(e){dt!==e&&(st.fillStyle=e,dt=e)}function w(e,t){(gt!==e||Et!==t)&&(st.setLineDash([e,t]),gt=e,Et=t)}console.log("THREE.CanvasRenderer",THREE.REVISION);var A=THREE.Math.smoothstep;e=e||{};var R,_,C,b,F,S,H,D,M,B,L,k,q,P,$,O,I,z,N,V,U,W,G,j,X,Y,K,Z,Q,J=this,et=new THREE.Projector,tt=void 0!==e.canvas?e.canvas:document.createElement("canvas"),it=tt.width,rt=tt.height,nt=Math.floor(it/2),ot=Math.floor(rt/2),st=tt.getContext("2d"),at=new THREE.Color(0),lt=0,ht=1,ct=0,ut=null,dt=null,ft=null,mt=null,pt=null,gt=null,Et=0,vt=(new THREE.RenderableVertex,new THREE.RenderableVertex,new THREE.Color),yt=new THREE.Color,xt=new THREE.Color,Tt=new THREE.Color,wt=new THREE.Color,At=new THREE.Color,Rt=new THREE.Color,_t=new THREE.Color,Ct={},bt=new THREE.Box2,Ft=new THREE.Box2,St=new THREE.Box2,Ht=new THREE.Color,Dt=new THREE.Color,Mt=new THREE.Color,Bt=new THREE.Vector3,Lt=new THREE.Vector3,kt=new THREE.Matrix3,qt=16;j=document.createElement("canvas"),j.width=j.height=2,X=j.getContext("2d"),X.fillStyle="rgba(0,0,0,1)",X.fillRect(0,0,2,2),Y=X.getImageData(0,0,2,2),K=Y.data,Z=document.createElement("canvas"),Z.width=Z.height=qt,Q=Z.getContext("2d"),Q.translate(-qt/2,-qt/2),Q.scale(qt,qt),qt--,void 0===st.setLineDash&&(st.setLineDash=void 0!==st.mozDash?function(e){st.mozDash=null!==e[0]?e:null}:function(){}),this.domElement=tt,this.devicePixelRatio=void 0!==e.devicePixelRatio?e.devicePixelRatio:void 0!==self.devicePixelRatio?self.devicePixelRatio:1,this.autoClear=!0,this.sortObjects=!0,this.sortElements=!0,this.info={render:{vertices:0,faces:0}},this.supportsVertexTextures=function(){},this.setFaceCulling=function(){},this.setSize=function(e,t,i){it=e*this.devicePixelRatio,rt=t*this.devicePixelRatio,nt=Math.floor(it/2),ot=Math.floor(rt/2),tt.width=it,tt.height=rt,1!==this.devicePixelRatio&&i!==!1&&(tt.style.width=e+"px",tt.style.height=t+"px"),bt.min.set(-nt,-ot),bt.max.set(nt,ot),Ft.min.set(-nt,-ot),Ft.max.set(nt,ot),ht=1,ct=0,ut=null,dt=null,ft=null,mt=null,pt=null},this.setClearColor=function(e,t){at.set(e),lt=void 0!==t?t:1,Ft.min.set(-nt,-ot),Ft.max.set(nt,ot)},this.setClearColorHex=function(e,t){console.warn("DEPRECATED: .setClearColorHex() is being removed. Use .setClearColor() instead."),this.setClearColor(e,t)},this.getMaxAnisotropy=function(){return 0},this.clear=function(){st.setTransform(1,0,0,-1,nt,ot),Ft.empty()===!1&&(Ft.intersect(bt),Ft.expandByScalar(2),1>lt&&st.clearRect(0|Ft.min.x,0|Ft.min.y,Ft.max.x-Ft.min.x|0,Ft.max.y-Ft.min.y|0),lt>0&&(g(THREE.NormalBlending),p(1),T("rgba("+Math.floor(255*at.r)+","+Math.floor(255*at.g)+","+Math.floor(255*at.b)+","+lt+")"),st.fillRect(0|Ft.min.x,0|Ft.min.y,Ft.max.x-Ft.min.x|0,Ft.max.y-Ft.min.y|0)),Ft.makeEmpty())},this.clearColor=function(){},this.clearDepth=function(){},this.clearStencil=function(){},this.render=function(e,i){if(i instanceof THREE.Camera==!1)return console.error("THREE.CanvasRenderer.render: camera is not an instance of THREE.Camera."),void 0;this.autoClear===!0&&this.clear(),st.setTransform(1,0,0,-1,nt,ot),J.info.render.vertices=0,J.info.render.faces=0,R=et.projectScene(e,i,this.sortObjects,this.sortElements),_=R.elements,C=R.lights,b=i,kt.getNormalMatrix(i.matrixWorldInverse),t();for(var s=0,a=_.length;a>s;s++){var l=_[s],h=l.material;if(void 0!==h&&h.visible!==!1){if(St.makeEmpty(),l instanceof THREE.RenderableSprite)F=l,F.x*=nt,F.y*=ot,r(F,l,h);else if(l instanceof THREE.RenderableLine)F=l.v1,S=l.v2,F.positionScreen.x*=nt,F.positionScreen.y*=ot,S.positionScreen.x*=nt,S.positionScreen.y*=ot,St.setFromPoints([F.positionScreen,S.positionScreen]),bt.isIntersectionBox(St)===!0&&n(F,S,l,h);else if(l instanceof THREE.RenderableFace){if(F=l.v1,S=l.v2,H=l.v3,F.positionScreen.z<-1||F.positionScreen.z>1)continue;if(S.positionScreen.z<-1||S.positionScreen.z>1)continue;if(H.positionScreen.z<-1||H.positionScreen.z>1)continue;F.positionScreen.x*=nt,F.positionScreen.y*=ot,S.positionScreen.x*=nt,S.positionScreen.y*=ot,H.positionScreen.x*=nt,H.positionScreen.y*=ot,h.overdraw>0&&(m(F.positionScreen,S.positionScreen,h.overdraw),m(S.positionScreen,H.positionScreen,h.overdraw),m(H.positionScreen,F.positionScreen,h.overdraw)),St.setFromPoints([F.positionScreen,S.positionScreen,H.positionScreen]),bt.isIntersectionBox(St)===!0&&o(F,S,H,0,1,2,l,h)}Ft.union(St)}}st.setTransform(1,0,0,1,0,0)}},THREE.ShaderChunk={fog_pars_fragment:["#ifdef USE_FOG","uniform vec3 fogColor;","#ifdef FOG_EXP2","uniform float fogDensity;","#else","uniform float fogNear;","uniform float fogFar;","#endif","#endif"].join("\n"),fog_fragment:["#ifdef USE_FOG","float depth = gl_FragCoord.z / gl_FragCoord.w;","#ifdef FOG_EXP2","const float LOG2 = 1.442695;","float fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );","fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );","#else","float fogFactor = smoothstep( fogNear, fogFar, depth );","#endif","gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );","#endif"].join("\n"),envmap_pars_fragment:["#ifdef USE_ENVMAP","uniform float reflectivity;","uniform samplerCube envMap;","uniform float flipEnvMap;","uniform int combine;","#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )","uniform bool useRefract;","uniform float refractionRatio;","#else","varying vec3 vReflect;","#endif","#endif"].join("\n"),envmap_fragment:["#ifdef USE_ENVMAP","vec3 reflectVec;","#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )","vec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );","if ( useRefract ) {","reflectVec = refract( cameraToVertex, normal, refractionRatio );","} else { ","reflectVec = reflect( cameraToVertex, normal );","}","#else","reflectVec = vReflect;","#endif","#ifdef DOUBLE_SIDED","float flipNormal = ( -1.0 + 2.0 * float( gl_FrontFacing ) );","vec4 cubeColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );","#else","vec4 cubeColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );","#endif","#ifdef GAMMA_INPUT","cubeColor.xyz *= cubeColor.xyz;","#endif","if ( combine == 1 ) {","gl_FragColor.xyz = mix( gl_FragColor.xyz, cubeColor.xyz, specularStrength * reflectivity );","} else if ( combine == 2 ) {","gl_FragColor.xyz += cubeColor.xyz * specularStrength * reflectivity;","} else {","gl_FragColor.xyz = mix( gl_FragColor.xyz, gl_FragColor.xyz * cubeColor.xyz, specularStrength * reflectivity );","}","#endif"].join("\n"),envmap_pars_vertex:["#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP )","varying vec3 vReflect;","uniform float refractionRatio;","uniform bool useRefract;","#endif"].join("\n"),worldpos_vertex:["#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )","#ifdef USE_SKINNING","vec4 worldPosition = modelMatrix * skinned;","#endif","#if defined( USE_MORPHTARGETS ) && ! defined( USE_SKINNING )","vec4 worldPosition = modelMatrix * vec4( morphed, 1.0 );","#endif","#if ! defined( USE_MORPHTARGETS ) && ! defined( USE_SKINNING )","vec4 worldPosition = modelMatrix * vec4( position, 1.0 );","#endif","#endif"].join("\n"),envmap_vertex:["#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP )","vec3 worldNormal = mat3( modelMatrix[ 0 ].xyz, modelMatrix[ 1 ].xyz, modelMatrix[ 2 ].xyz ) * objectNormal;","worldNormal = normalize( worldNormal );","vec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );","if ( useRefract ) {","vReflect = refract( cameraToVertex, worldNormal, refractionRatio );","} else {","vReflect = reflect( cameraToVertex, worldNormal );","}","#endif"].join("\n"),map_particle_pars_fragment:["#ifdef USE_MAP","uniform sampler2D map;","#endif"].join("\n"),map_particle_fragment:["#ifdef USE_MAP","gl_FragColor = gl_FragColor * texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) );","#endif"].join("\n"),map_pars_vertex:["#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP )","varying vec2 vUv;","uniform vec4 offsetRepeat;","#endif"].join("\n"),map_pars_fragment:["#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP )","varying vec2 vUv;","#endif","#ifdef USE_MAP","uniform sampler2D map;","#endif"].join("\n"),map_vertex:["#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP )","vUv = uv * offsetRepeat.zw + offsetRepeat.xy;","#endif"].join("\n"),map_fragment:["#ifdef USE_MAP","vec4 texelColor = texture2D( map, vUv );","#ifdef GAMMA_INPUT","texelColor.xyz *= texelColor.xyz;","#endif","gl_FragColor = gl_FragColor * texelColor;","#endif"].join("\n"),lightmap_pars_fragment:["#ifdef USE_LIGHTMAP","varying vec2 vUv2;","uniform sampler2D lightMap;","#endif"].join("\n"),lightmap_pars_vertex:["#ifdef USE_LIGHTMAP","varying vec2 vUv2;","#endif"].join("\n"),lightmap_fragment:["#ifdef USE_LIGHTMAP","gl_FragColor = gl_FragColor * texture2D( lightMap, vUv2 );","#endif"].join("\n"),lightmap_vertex:["#ifdef USE_LIGHTMAP","vUv2 = uv2;","#endif"].join("\n"),bumpmap_pars_fragment:["#ifdef USE_BUMPMAP","uniform sampler2D bumpMap;","uniform float bumpScale;","vec2 dHdxy_fwd() {","vec2 dSTdx = dFdx( vUv );","vec2 dSTdy = dFdy( vUv );","float Hll = bumpScale * texture2D( bumpMap, vUv ).x;","float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;","float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;","return vec2( dBx, dBy );","}","vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {","vec3 vSigmaX = dFdx( surf_pos );","vec3 vSigmaY = dFdy( surf_pos );","vec3 vN = surf_norm;","vec3 R1 = cross( vSigmaY, vN );","vec3 R2 = cross( vN, vSigmaX );","float fDet = dot( vSigmaX, R1 );","vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );","return normalize( abs( fDet ) * surf_norm - vGrad );","}","#endif"].join("\n"),normalmap_pars_fragment:["#ifdef USE_NORMALMAP","uniform sampler2D normalMap;","uniform vec2 normalScale;","vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {","vec3 q0 = dFdx( eye_pos.xyz );","vec3 q1 = dFdy( eye_pos.xyz );","vec2 st0 = dFdx( vUv.st );","vec2 st1 = dFdy( vUv.st );","vec3 S = normalize(  q0 * st1.t - q1 * st0.t );","vec3 T = normalize( -q0 * st1.s + q1 * st0.s );","vec3 N = normalize( surf_norm );","vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;","mapN.xy = normalScale * mapN.xy;","mat3 tsn = mat3( S, T, N );","return normalize( tsn * mapN );","}","#endif"].join("\n"),specularmap_pars_fragment:["#ifdef USE_SPECULARMAP","uniform sampler2D specularMap;","#endif"].join("\n"),specularmap_fragment:["float specularStrength;","#ifdef USE_SPECULARMAP","vec4 texelSpecular = texture2D( specularMap, vUv );","specularStrength = texelSpecular.r;","#else","specularStrength = 1.0;","#endif"].join("\n"),lights_lambert_pars_vertex:["uniform vec3 ambient;","uniform vec3 diffuse;","uniform vec3 emissive;","uniform vec3 ambientLightColor;","#if MAX_DIR_LIGHTS > 0","uniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];","uniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];","#endif","#if MAX_HEMI_LIGHTS > 0","uniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];","uniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];","uniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];","#endif","#if MAX_POINT_LIGHTS > 0","uniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];","uniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];","uniform float pointLightDistance[ MAX_POINT_LIGHTS ];","#endif","#if MAX_SPOT_LIGHTS > 0","uniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];","uniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];","uniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];","uniform float spotLightDistance[ MAX_SPOT_LIGHTS ];","uniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];","uniform float spotLightExponent[ MAX_SPOT_LIGHTS ];","#endif","#ifdef WRAP_AROUND","uniform vec3 wrapRGB;","#endif"].join("\n"),lights_lambert_vertex:["vLightFront = vec3( 0.0 );","#ifdef DOUBLE_SIDED","vLightBack = vec3( 0.0 );","#endif","transformedNormal = normalize( transformedNormal );","#if MAX_DIR_LIGHTS > 0","for( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {","vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );","vec3 dirVector = normalize( lDirection.xyz );","float dotProduct = dot( transformedNormal, dirVector );","vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );","#ifdef DOUBLE_SIDED","vec3 directionalLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );","#ifdef WRAP_AROUND","vec3 directionalLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );","#endif","#endif","#ifdef WRAP_AROUND","vec3 directionalLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );","directionalLightWeighting = mix( directionalLightWeighting, directionalLightWeightingHalf, wrapRGB );","#ifdef DOUBLE_SIDED","directionalLightWeightingBack = mix( directionalLightWeightingBack, directionalLightWeightingHalfBack, wrapRGB );","#endif","#endif","vLightFront += directionalLightColor[ i ] * directionalLightWeighting;","#ifdef DOUBLE_SIDED","vLightBack += directionalLightColor[ i ] * directionalLightWeightingBack;","#endif","}","#endif","#if MAX_POINT_LIGHTS > 0","for( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {","vec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );","vec3 lVector = lPosition.xyz - mvPosition.xyz;","float lDistance = 1.0;","if ( pointLightDistance[ i ] > 0.0 )","lDistance = 1.0 - min( ( length( lVector ) / pointLightDistance[ i ] ), 1.0 );","lVector = normalize( lVector );","float dotProduct = dot( transformedNormal, lVector );","vec3 pointLightWeighting = vec3( max( dotProduct, 0.0 ) );","#ifdef DOUBLE_SIDED","vec3 pointLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );","#ifdef WRAP_AROUND","vec3 pointLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );","#endif","#endif","#ifdef WRAP_AROUND","vec3 pointLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );","pointLightWeighting = mix( pointLightWeighting, pointLightWeightingHalf, wrapRGB );","#ifdef DOUBLE_SIDED","pointLightWeightingBack = mix( pointLightWeightingBack, pointLightWeightingHalfBack, wrapRGB );","#endif","#endif","vLightFront += pointLightColor[ i ] * pointLightWeighting * lDistance;","#ifdef DOUBLE_SIDED","vLightBack += pointLightColor[ i ] * pointLightWeightingBack * lDistance;","#endif","}","#endif","#if MAX_SPOT_LIGHTS > 0","for( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {","vec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );","vec3 lVector = lPosition.xyz - mvPosition.xyz;","float spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - worldPosition.xyz ) );","if ( spotEffect > spotLightAngleCos[ i ] ) {","spotEffect = max( pow( spotEffect, spotLightExponent[ i ] ), 0.0 );","float lDistance = 1.0;","if ( spotLightDistance[ i ] > 0.0 )","lDistance = 1.0 - min( ( length( lVector ) / spotLightDistance[ i ] ), 1.0 );","lVector = normalize( lVector );","float dotProduct = dot( transformedNormal, lVector );","vec3 spotLightWeighting = vec3( max( dotProduct, 0.0 ) );","#ifdef DOUBLE_SIDED","vec3 spotLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );","#ifdef WRAP_AROUND","vec3 spotLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );","#endif","#endif","#ifdef WRAP_AROUND","vec3 spotLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );","spotLightWeighting = mix( spotLightWeighting, spotLightWeightingHalf, wrapRGB );","#ifdef DOUBLE_SIDED","spotLightWeightingBack = mix( spotLightWeightingBack, spotLightWeightingHalfBack, wrapRGB );","#endif","#endif","vLightFront += spotLightColor[ i ] * spotLightWeighting * lDistance * spotEffect;","#ifdef DOUBLE_SIDED","vLightBack += spotLightColor[ i ] * spotLightWeightingBack * lDistance * spotEffect;","#endif","}","}","#endif","#if MAX_HEMI_LIGHTS > 0","for( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {","vec4 lDirection = viewMatrix * vec4( hemisphereLightDirection[ i ], 0.0 );","vec3 lVector = normalize( lDirection.xyz );","float dotProduct = dot( transformedNormal, lVector );","float hemiDiffuseWeight = 0.5 * dotProduct + 0.5;","float hemiDiffuseWeightBack = -0.5 * dotProduct + 0.5;","vLightFront += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );","#ifdef DOUBLE_SIDED","vLightBack += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeightBack );","#endif","}","#endif","vLightFront = vLightFront * diffuse + ambient * ambientLightColor + emissive;","#ifdef DOUBLE_SIDED","vLightBack = vLightBack * diffuse + ambient * ambientLightColor + emissive;","#endif"].join("\n"),lights_phong_pars_vertex:["#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP )","varying vec3 vWorldPosition;","#endif"].join("\n"),lights_phong_vertex:["#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP )","vWorldPosition = worldPosition.xyz;","#endif"].join("\n"),lights_phong_pars_fragment:["uniform vec3 ambientLightColor;","#if MAX_DIR_LIGHTS > 0","uniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];","uniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];","#endif","#if MAX_HEMI_LIGHTS > 0","uniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];","uniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];","uniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];","#endif","#if MAX_POINT_LIGHTS > 0","uniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];","uniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];","uniform float pointLightDistance[ MAX_POINT_LIGHTS ];","#endif","#if MAX_SPOT_LIGHTS > 0","uniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];","uniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];","uniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];","uniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];","uniform float spotLightExponent[ MAX_SPOT_LIGHTS ];","uniform float spotLightDistance[ MAX_SPOT_LIGHTS ];","#endif","#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP )","varying vec3 vWorldPosition;","#endif","#ifdef WRAP_AROUND","uniform vec3 wrapRGB;","#endif","varying vec3 vViewPosition;","varying vec3 vNormal;"].join("\n"),lights_phong_fragment:["vec3 normal = normalize( vNormal );","vec3 viewPosition = normalize( vViewPosition );","#ifdef DOUBLE_SIDED","normal = normal * ( -1.0 + 2.0 * float( gl_FrontFacing ) );","#endif","#ifdef USE_NORMALMAP","normal = perturbNormal2Arb( -vViewPosition, normal );","#elif defined( USE_BUMPMAP )","normal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );","#endif","#if MAX_POINT_LIGHTS > 0","vec3 pointDiffuse  = vec3( 0.0 );","vec3 pointSpecular = vec3( 0.0 );","for ( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {","vec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );","vec3 lVector = lPosition.xyz + vViewPosition.xyz;","float lDistance = 1.0;","if ( pointLightDistance[ i ] > 0.0 )","lDistance = 1.0 - min( ( length( lVector ) / pointLightDistance[ i ] ), 1.0 );","lVector = normalize( lVector );","float dotProduct = dot( normal, lVector );","#ifdef WRAP_AROUND","float pointDiffuseWeightFull = max( dotProduct, 0.0 );","float pointDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );","vec3 pointDiffuseWeight = mix( vec3 ( pointDiffuseWeightFull ), vec3( pointDiffuseWeightHalf ), wrapRGB );","#else","float pointDiffuseWeight = max( dotProduct, 0.0 );","#endif","pointDiffuse  += diffuse * pointLightColor[ i ] * pointDiffuseWeight * lDistance;","vec3 pointHalfVector = normalize( lVector + viewPosition );","float pointDotNormalHalf = max( dot( normal, pointHalfVector ), 0.0 );","float pointSpecularWeight = specularStrength * max( pow( pointDotNormalHalf, shininess ), 0.0 );","float specularNormalization = ( shininess + 2.0001 ) / 8.0;","vec3 schlick = specular + vec3( 1.0 - specular ) * pow( 1.0 - dot( lVector, pointHalfVector ), 5.0 );","pointSpecular += schlick * pointLightColor[ i ] * pointSpecularWeight * pointDiffuseWeight * lDistance * specularNormalization;","}","#endif","#if MAX_SPOT_LIGHTS > 0","vec3 spotDiffuse  = vec3( 0.0 );","vec3 spotSpecular = vec3( 0.0 );","for ( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {","vec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );","vec3 lVector = lPosition.xyz + vViewPosition.xyz;","float lDistance = 1.0;","if ( spotLightDistance[ i ] > 0.0 )","lDistance = 1.0 - min( ( length( lVector ) / spotLightDistance[ i ] ), 1.0 );","lVector = normalize( lVector );","float spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - vWorldPosition ) );","if ( spotEffect > spotLightAngleCos[ i ] ) {","spotEffect = max( pow( spotEffect, spotLightExponent[ i ] ), 0.0 );","float dotProduct = dot( normal, lVector );","#ifdef WRAP_AROUND","float spotDiffuseWeightFull = max( dotProduct, 0.0 );","float spotDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );","vec3 spotDiffuseWeight = mix( vec3 ( spotDiffuseWeightFull ), vec3( spotDiffuseWeightHalf ), wrapRGB );","#else","float spotDiffuseWeight = max( dotProduct, 0.0 );","#endif","spotDiffuse += diffuse * spotLightColor[ i ] * spotDiffuseWeight * lDistance * spotEffect;","vec3 spotHalfVector = normalize( lVector + viewPosition );","float spotDotNormalHalf = max( dot( normal, spotHalfVector ), 0.0 );","float spotSpecularWeight = specularStrength * max( pow( spotDotNormalHalf, shininess ), 0.0 );","float specularNormalization = ( shininess + 2.0001 ) / 8.0;","vec3 schlick = specular + vec3( 1.0 - specular ) * pow( 1.0 - dot( lVector, spotHalfVector ), 5.0 );","spotSpecular += schlick * spotLightColor[ i ] * spotSpecularWeight * spotDiffuseWeight * lDistance * specularNormalization * spotEffect;","}","}","#endif","#if MAX_DIR_LIGHTS > 0","vec3 dirDiffuse  = vec3( 0.0 );","vec3 dirSpecular = vec3( 0.0 );","for( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {","vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );","vec3 dirVector = normalize( lDirection.xyz );","float dotProduct = dot( normal, dirVector );","#ifdef WRAP_AROUND","float dirDiffuseWeightFull = max( dotProduct, 0.0 );","float dirDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );","vec3 dirDiffuseWeight = mix( vec3( dirDiffuseWeightFull ), vec3( dirDiffuseWeightHalf ), wrapRGB );","#else","float dirDiffuseWeight = max( dotProduct, 0.0 );","#endif","dirDiffuse  += diffuse * directionalLightColor[ i ] * dirDiffuseWeight;","vec3 dirHalfVector = normalize( dirVector + viewPosition );","float dirDotNormalHalf = max( dot( normal, dirHalfVector ), 0.0 );","float dirSpecularWeight = specularStrength * max( pow( dirDotNormalHalf, shininess ), 0.0 );","float specularNormalization = ( shininess + 2.0001 ) / 8.0;","vec3 schlick = specular + vec3( 1.0 - specular ) * pow( 1.0 - dot( dirVector, dirHalfVector ), 5.0 );","dirSpecular += schlick * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight * specularNormalization;","}","#endif","#if MAX_HEMI_LIGHTS > 0","vec3 hemiDiffuse  = vec3( 0.0 );","vec3 hemiSpecular = vec3( 0.0 );","for( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {","vec4 lDirection = viewMatrix * vec4( hemisphereLightDirection[ i ], 0.0 );","vec3 lVector = normalize( lDirection.xyz );","float dotProduct = dot( normal, lVector );","float hemiDiffuseWeight = 0.5 * dotProduct + 0.5;","vec3 hemiColor = mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );","hemiDiffuse += diffuse * hemiColor;","vec3 hemiHalfVectorSky = normalize( lVector + viewPosition );","float hemiDotNormalHalfSky = 0.5 * dot( normal, hemiHalfVectorSky ) + 0.5;","float hemiSpecularWeightSky = specularStrength * max( pow( hemiDotNormalHalfSky, shininess ), 0.0 );","vec3 lVectorGround = -lVector;","vec3 hemiHalfVectorGround = normalize( lVectorGround + viewPosition );","float hemiDotNormalHalfGround = 0.5 * dot( normal, hemiHalfVectorGround ) + 0.5;","float hemiSpecularWeightGround = specularStrength * max( pow( hemiDotNormalHalfGround, shininess ), 0.0 );","float dotProductGround = dot( normal, lVectorGround );","float specularNormalization = ( shininess + 2.0001 ) / 8.0;","vec3 schlickSky = specular + vec3( 1.0 - specular ) * pow( 1.0 - dot( lVector, hemiHalfVectorSky ), 5.0 );","vec3 schlickGround = specular + vec3( 1.0 - specular ) * pow( 1.0 - dot( lVectorGround, hemiHalfVectorGround ), 5.0 );","hemiSpecular += hemiColor * specularNormalization * ( schlickSky * hemiSpecularWeightSky * max( dotProduct, 0.0 ) + schlickGround * hemiSpecularWeightGround * max( dotProductGround, 0.0 ) );","}","#endif","vec3 totalDiffuse = vec3( 0.0 );","vec3 totalSpecular = vec3( 0.0 );","#if MAX_DIR_LIGHTS > 0","totalDiffuse += dirDiffuse;","totalSpecular += dirSpecular;","#endif","#if MAX_HEMI_LIGHTS > 0","totalDiffuse += hemiDiffuse;","totalSpecular += hemiSpecular;","#endif","#if MAX_POINT_LIGHTS > 0","totalDiffuse += pointDiffuse;","totalSpecular += pointSpecular;","#endif","#if MAX_SPOT_LIGHTS > 0","totalDiffuse += spotDiffuse;","totalSpecular += spotSpecular;","#endif","#ifdef METAL","gl_FragColor.xyz = gl_FragColor.xyz * ( emissive + totalDiffuse + ambientLightColor * ambient + totalSpecular );","#else","gl_FragColor.xyz = gl_FragColor.xyz * ( emissive + totalDiffuse + ambientLightColor * ambient ) + totalSpecular;","#endif"].join("\n"),color_pars_fragment:["#ifdef USE_COLOR","varying vec3 vColor;","#endif"].join("\n"),color_fragment:["#ifdef USE_COLOR","gl_FragColor = gl_FragColor * vec4( vColor, 1.0 );","#endif"].join("\n"),color_pars_vertex:["#ifdef USE_COLOR","varying vec3 vColor;","#endif"].join("\n"),color_vertex:["#ifdef USE_COLOR","#ifdef GAMMA_INPUT","vColor = color * color;","#else","vColor = color;","#endif","#endif"].join("\n"),skinning_pars_vertex:["#ifdef USE_SKINNING","#ifdef BONE_TEXTURE","uniform sampler2D boneTexture;","uniform int boneTextureWidth;","uniform int boneTextureHeight;","mat4 getBoneMatrix( const in float i ) {","float j = i * 4.0;","float x = mod( j, float( boneTextureWidth ) );","float y = floor( j / float( boneTextureWidth ) );","float dx = 1.0 / float( boneTextureWidth );","float dy = 1.0 / float( boneTextureHeight );","y = dy * ( y + 0.5 );","vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );","vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );","vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );","vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );","mat4 bone = mat4( v1, v2, v3, v4 );","return bone;","}","#else","uniform mat4 boneGlobalMatrices[ MAX_BONES ];","mat4 getBoneMatrix( const in float i ) {","mat4 bone = boneGlobalMatrices[ int(i) ];","return bone;","}","#endif","#endif"].join("\n"),skinbase_vertex:["#ifdef USE_SKINNING","mat4 boneMatX = getBoneMatrix( skinIndex.x );","mat4 boneMatY = getBoneMatrix( skinIndex.y );","mat4 boneMatZ = getBoneMatrix( skinIndex.z );","mat4 boneMatW = getBoneMatrix( skinIndex.w );","#endif"].join("\n"),skinning_vertex:["#ifdef USE_SKINNING","#ifdef USE_MORPHTARGETS","vec4 skinVertex = vec4( morphed, 1.0 );","#else","vec4 skinVertex = vec4( position, 1.0 );","#endif","vec4 skinned  = boneMatX * skinVertex * skinWeight.x;","skinned      += boneMatY * skinVertex * skinWeight.y;","skinned      += boneMatZ * skinVertex * skinWeight.z;","skinned      += boneMatW * skinVertex * skinWeight.w;","#endif"].join("\n"),morphtarget_pars_vertex:["#ifdef USE_MORPHTARGETS","#ifndef USE_MORPHNORMALS","uniform float morphTargetInfluences[ 8 ];","#else","uniform float morphTargetInfluences[ 4 ];","#endif","#endif"].join("\n"),morphtarget_vertex:["#ifdef USE_MORPHTARGETS","vec3 morphed = vec3( 0.0 );","morphed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];","morphed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];","morphed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];","morphed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];","#ifndef USE_MORPHNORMALS","morphed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];","morphed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];","morphed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];","morphed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];","#endif","morphed += position;","#endif"].join("\n"),default_vertex:["vec4 mvPosition;","#ifdef USE_SKINNING","mvPosition = modelViewMatrix * skinned;","#endif","#if !defined( USE_SKINNING ) && defined( USE_MORPHTARGETS )","mvPosition = modelViewMatrix * vec4( morphed, 1.0 );","#endif","#if !defined( USE_SKINNING ) && ! defined( USE_MORPHTARGETS )","mvPosition = modelViewMatrix * vec4( position, 1.0 );","#endif","gl_Position = projectionMatrix * mvPosition;"].join("\n"),morphnormal_vertex:["#ifdef USE_MORPHNORMALS","vec3 morphedNormal = vec3( 0.0 );","morphedNormal +=  ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];","morphedNormal +=  ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];","morphedNormal +=  ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];","morphedNormal +=  ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];","morphedNormal += normal;","#endif"].join("\n"),skinnormal_vertex:["#ifdef USE_SKINNING","mat4 skinMatrix = skinWeight.x * boneMatX;","skinMatrix 	+= skinWeight.y * boneMatY;","#ifdef USE_MORPHNORMALS","vec4 skinnedNormal = skinMatrix * vec4( morphedNormal, 0.0 );","#else","vec4 skinnedNormal = skinMatrix * vec4( normal, 0.0 );","#endif","#endif"].join("\n"),defaultnormal_vertex:["vec3 objectNormal;","#ifdef USE_SKINNING","objectNormal = skinnedNormal.xyz;","#endif","#if !defined( USE_SKINNING ) && defined( USE_MORPHNORMALS )","objectNormal = morphedNormal;","#endif","#if !defined( USE_SKINNING ) && ! defined( USE_MORPHNORMALS )","objectNormal = normal;","#endif","#ifdef FLIP_SIDED","objectNormal = -objectNormal;","#endif","vec3 transformedNormal = normalMatrix * objectNormal;"].join("\n"),shadowmap_pars_fragment:["#ifdef USE_SHADOWMAP","uniform sampler2D shadowMap[ MAX_SHADOWS ];","uniform vec2 shadowMapSize[ MAX_SHADOWS ];","uniform float shadowDarkness[ MAX_SHADOWS ];","uniform float shadowBias[ MAX_SHADOWS ];","varying vec4 vShadowCoord[ MAX_SHADOWS ];","float unpackDepth( const in vec4 rgba_depth ) {","const vec4 bit_shift = vec4( 1.0 / ( 256.0 * 256.0 * 256.0 ), 1.0 / ( 256.0 * 256.0 ), 1.0 / 256.0, 1.0 );","float depth = dot( rgba_depth, bit_shift );","return depth;","}","#endif"].join("\n"),shadowmap_fragment:["#ifdef USE_SHADOWMAP","#ifdef SHADOWMAP_DEBUG","vec3 frustumColors[3];","frustumColors[0] = vec3( 1.0, 0.5, 0.0 );","frustumColors[1] = vec3( 0.0, 1.0, 0.8 );","frustumColors[2] = vec3( 0.0, 0.5, 1.0 );","#endif","#ifdef SHADOWMAP_CASCADE","int inFrustumCount = 0;","#endif","float fDepth;","vec3 shadowColor = vec3( 1.0 );","for( int i = 0; i < MAX_SHADOWS; i ++ ) {","vec3 shadowCoord = vShadowCoord[ i ].xyz / vShadowCoord[ i ].w;","bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );","bool inFrustum = all( inFrustumVec );","#ifdef SHADOWMAP_CASCADE","inFrustumCount += int( inFrustum );","bvec3 frustumTestVec = bvec3( inFrustum, inFrustumCount == 1, shadowCoord.z <= 1.0 );","#else","bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );","#endif","bool frustumTest = all( frustumTestVec );","if ( frustumTest ) {","shadowCoord.z += shadowBias[ i ];","#if defined( SHADOWMAP_TYPE_PCF )","float shadow = 0.0;","const float shadowDelta = 1.0 / 9.0;","float xPixelOffset = 1.0 / shadowMapSize[ i ].x;","float yPixelOffset = 1.0 / shadowMapSize[ i ].y;","float dx0 = -1.25 * xPixelOffset;","float dy0 = -1.25 * yPixelOffset;","float dx1 = 1.25 * xPixelOffset;","float dy1 = 1.25 * yPixelOffset;","fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );","if ( fDepth < shadowCoord.z ) shadow += shadowDelta;","fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );","if ( fDepth < shadowCoord.z ) shadow += shadowDelta;","fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );","if ( fDepth < shadowCoord.z ) shadow += shadowDelta;","fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );","if ( fDepth < shadowCoord.z ) shadow += shadowDelta;","fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );","if ( fDepth < shadowCoord.z ) shadow += shadowDelta;","fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );","if ( fDepth < shadowCoord.z ) shadow += shadowDelta;","fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );","if ( fDepth < shadowCoord.z ) shadow += shadowDelta;","fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );","if ( fDepth < shadowCoord.z ) shadow += shadowDelta;","fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );","if ( fDepth < shadowCoord.z ) shadow += shadowDelta;","shadowColor = shadowColor * vec3( ( 1.0 - shadowDarkness[ i ] * shadow ) );","#elif defined( SHADOWMAP_TYPE_PCF_SOFT )","float shadow = 0.0;","float xPixelOffset = 1.0 / shadowMapSize[ i ].x;","float yPixelOffset = 1.0 / shadowMapSize[ i ].y;","float dx0 = -1.0 * xPixelOffset;","float dy0 = -1.0 * yPixelOffset;","float dx1 = 1.0 * xPixelOffset;","float dy1 = 1.0 * yPixelOffset;","mat3 shadowKernel;","mat3 depthKernel;","depthKernel[0][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );","depthKernel[0][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );","depthKernel[0][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );","depthKernel[1][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );","depthKernel[1][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );","depthKernel[1][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );","depthKernel[2][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );","depthKernel[2][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );","depthKernel[2][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );","vec3 shadowZ = vec3( shadowCoord.z );","shadowKernel[0] = vec3(lessThan(depthKernel[0], shadowZ ));","shadowKernel[0] *= vec3(0.25);","shadowKernel[1] = vec3(lessThan(depthKernel[1], shadowZ ));","shadowKernel[1] *= vec3(0.25);","shadowKernel[2] = vec3(lessThan(depthKernel[2], shadowZ ));","shadowKernel[2] *= vec3(0.25);","vec2 fractionalCoord = 1.0 - fract( shadowCoord.xy * shadowMapSize[i].xy );","shadowKernel[0] = mix( shadowKernel[1], shadowKernel[0], fractionalCoord.x );","shadowKernel[1] = mix( shadowKernel[2], shadowKernel[1], fractionalCoord.x );","vec4 shadowValues;","shadowValues.x = mix( shadowKernel[0][1], shadowKernel[0][0], fractionalCoord.y );","shadowValues.y = mix( shadowKernel[0][2], shadowKernel[0][1], fractionalCoord.y );","shadowValues.z = mix( shadowKernel[1][1], shadowKernel[1][0], fractionalCoord.y );","shadowValues.w = mix( shadowKernel[1][2], shadowKernel[1][1], fractionalCoord.y );","shadow = dot( shadowValues, vec4( 1.0 ) );","shadowColor = shadowColor * vec3( ( 1.0 - shadowDarkness[ i ] * shadow ) );","#else","vec4 rgbaDepth = texture2D( shadowMap[ i ], shadowCoord.xy );","float fDepth = unpackDepth( rgbaDepth );","if ( fDepth < shadowCoord.z )","shadowColor = shadowColor * vec3( 1.0 - shadowDarkness[ i ] );","#endif","}","#ifdef SHADOWMAP_DEBUG","#ifdef SHADOWMAP_CASCADE","if ( inFrustum && inFrustumCount == 1 ) gl_FragColor.xyz *= frustumColors[ i ];","#else","if ( inFrustum ) gl_FragColor.xyz *= frustumColors[ i ];","#endif","#endif","}","#ifdef GAMMA_OUTPUT","shadowColor *= shadowColor;","#endif","gl_FragColor.xyz = gl_FragColor.xyz * shadowColor;","#endif"].join("\n"),shadowmap_pars_vertex:["#ifdef USE_SHADOWMAP","varying vec4 vShadowCoord[ MAX_SHADOWS ];","uniform mat4 shadowMatrix[ MAX_SHADOWS ];","#endif"].join("\n"),shadowmap_vertex:["#ifdef USE_SHADOWMAP","for( int i = 0; i < MAX_SHADOWS; i ++ ) {","vShadowCoord[ i ] = shadowMatrix[ i ] * worldPosition;","}","#endif"].join("\n"),alphatest_fragment:["#ifdef ALPHATEST","if ( gl_FragColor.a < ALPHATEST ) discard;","#endif"].join("\n"),linear_to_gamma_fragment:["#ifdef GAMMA_OUTPUT","gl_FragColor.xyz = sqrt( gl_FragColor.xyz );","#endif"].join("\n")},THREE.UniformsUtils={merge:function(e){var t,i,r,n={};
for(t=0;t<e.length;t++){r=this.clone(e[t]);for(i in r)n[i]=r[i]}return n},clone:function(e){var t,i,r,n={};for(t in e){n[t]={};for(i in e[t])r=e[t][i],n[t][i]=r instanceof THREE.Color||r instanceof THREE.Vector2||r instanceof THREE.Vector3||r instanceof THREE.Vector4||r instanceof THREE.Matrix4||r instanceof THREE.Texture?r.clone():r instanceof Array?r.slice():r}return n}},THREE.UniformsLib={common:{diffuse:{type:"c",value:new THREE.Color(15658734)},opacity:{type:"f",value:1},map:{type:"t",value:null},offsetRepeat:{type:"v4",value:new THREE.Vector4(0,0,1,1)},lightMap:{type:"t",value:null},specularMap:{type:"t",value:null},envMap:{type:"t",value:null},flipEnvMap:{type:"f",value:-1},useRefract:{type:"i",value:0},reflectivity:{type:"f",value:1},refractionRatio:{type:"f",value:.98},combine:{type:"i",value:0},morphTargetInfluences:{type:"f",value:0}},bump:{bumpMap:{type:"t",value:null},bumpScale:{type:"f",value:1}},normalmap:{normalMap:{type:"t",value:null},normalScale:{type:"v2",value:new THREE.Vector2(1,1)}},fog:{fogDensity:{type:"f",value:25e-5},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},fogColor:{type:"c",value:new THREE.Color(16777215)}},lights:{ambientLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]},directionalLightColor:{type:"fv",value:[]},hemisphereLightDirection:{type:"fv",value:[]},hemisphereLightSkyColor:{type:"fv",value:[]},hemisphereLightGroundColor:{type:"fv",value:[]},pointLightColor:{type:"fv",value:[]},pointLightPosition:{type:"fv",value:[]},pointLightDistance:{type:"fv1",value:[]},spotLightColor:{type:"fv",value:[]},spotLightPosition:{type:"fv",value:[]},spotLightDirection:{type:"fv",value:[]},spotLightDistance:{type:"fv1",value:[]},spotLightAngleCos:{type:"fv1",value:[]},spotLightExponent:{type:"fv1",value:[]}},particle:{psColor:{type:"c",value:new THREE.Color(15658734)},opacity:{type:"f",value:1},size:{type:"f",value:1},scale:{type:"f",value:1},map:{type:"t",value:null},fogDensity:{type:"f",value:25e-5},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},fogColor:{type:"c",value:new THREE.Color(16777215)}},shadowmap:{shadowMap:{type:"tv",value:[]},shadowMapSize:{type:"v2v",value:[]},shadowBias:{type:"fv1",value:[]},shadowDarkness:{type:"fv1",value:[]},shadowMatrix:{type:"m4v",value:[]}}},THREE.ShaderLib={basic:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.fog,THREE.UniformsLib.shadowmap]),vertexShader:[THREE.ShaderChunk.map_pars_vertex,THREE.ShaderChunk.lightmap_pars_vertex,THREE.ShaderChunk.envmap_pars_vertex,THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,"void main() {",THREE.ShaderChunk.map_vertex,THREE.ShaderChunk.lightmap_vertex,THREE.ShaderChunk.color_vertex,THREE.ShaderChunk.skinbase_vertex,"#ifdef USE_ENVMAP",THREE.ShaderChunk.morphnormal_vertex,THREE.ShaderChunk.skinnormal_vertex,THREE.ShaderChunk.defaultnormal_vertex,"#endif",THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.default_vertex,THREE.ShaderChunk.worldpos_vertex,THREE.ShaderChunk.envmap_vertex,THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 diffuse;","uniform float opacity;",THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.map_pars_fragment,THREE.ShaderChunk.lightmap_pars_fragment,THREE.ShaderChunk.envmap_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,THREE.ShaderChunk.specularmap_pars_fragment,"void main() {","gl_FragColor = vec4( diffuse, opacity );",THREE.ShaderChunk.map_fragment,THREE.ShaderChunk.alphatest_fragment,THREE.ShaderChunk.specularmap_fragment,THREE.ShaderChunk.lightmap_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.envmap_fragment,THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.linear_to_gamma_fragment,THREE.ShaderChunk.fog_fragment,"}"].join("\n")},lambert:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.fog,THREE.UniformsLib.lights,THREE.UniformsLib.shadowmap,{ambient:{type:"c",value:new THREE.Color(16777215)},emissive:{type:"c",value:new THREE.Color(0)},wrapRGB:{type:"v3",value:new THREE.Vector3(1,1,1)}}]),vertexShader:["#define LAMBERT","varying vec3 vLightFront;","#ifdef DOUBLE_SIDED","varying vec3 vLightBack;","#endif",THREE.ShaderChunk.map_pars_vertex,THREE.ShaderChunk.lightmap_pars_vertex,THREE.ShaderChunk.envmap_pars_vertex,THREE.ShaderChunk.lights_lambert_pars_vertex,THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,"void main() {",THREE.ShaderChunk.map_vertex,THREE.ShaderChunk.lightmap_vertex,THREE.ShaderChunk.color_vertex,THREE.ShaderChunk.morphnormal_vertex,THREE.ShaderChunk.skinbase_vertex,THREE.ShaderChunk.skinnormal_vertex,THREE.ShaderChunk.defaultnormal_vertex,THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.default_vertex,THREE.ShaderChunk.worldpos_vertex,THREE.ShaderChunk.envmap_vertex,THREE.ShaderChunk.lights_lambert_vertex,THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform float opacity;","varying vec3 vLightFront;","#ifdef DOUBLE_SIDED","varying vec3 vLightBack;","#endif",THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.map_pars_fragment,THREE.ShaderChunk.lightmap_pars_fragment,THREE.ShaderChunk.envmap_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,THREE.ShaderChunk.specularmap_pars_fragment,"void main() {","gl_FragColor = vec4( vec3 ( 1.0 ), opacity );",THREE.ShaderChunk.map_fragment,THREE.ShaderChunk.alphatest_fragment,THREE.ShaderChunk.specularmap_fragment,"#ifdef DOUBLE_SIDED","if ( gl_FrontFacing )","gl_FragColor.xyz *= vLightFront;","else","gl_FragColor.xyz *= vLightBack;","#else","gl_FragColor.xyz *= vLightFront;","#endif",THREE.ShaderChunk.lightmap_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.envmap_fragment,THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.linear_to_gamma_fragment,THREE.ShaderChunk.fog_fragment,"}"].join("\n")},phong:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.bump,THREE.UniformsLib.normalmap,THREE.UniformsLib.fog,THREE.UniformsLib.lights,THREE.UniformsLib.shadowmap,{ambient:{type:"c",value:new THREE.Color(16777215)},emissive:{type:"c",value:new THREE.Color(0)},specular:{type:"c",value:new THREE.Color(1118481)},shininess:{type:"f",value:30},wrapRGB:{type:"v3",value:new THREE.Vector3(1,1,1)}}]),vertexShader:["#define PHONG","varying vec3 vViewPosition;","varying vec3 vNormal;",THREE.ShaderChunk.map_pars_vertex,THREE.ShaderChunk.lightmap_pars_vertex,THREE.ShaderChunk.envmap_pars_vertex,THREE.ShaderChunk.lights_phong_pars_vertex,THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,"void main() {",THREE.ShaderChunk.map_vertex,THREE.ShaderChunk.lightmap_vertex,THREE.ShaderChunk.color_vertex,THREE.ShaderChunk.morphnormal_vertex,THREE.ShaderChunk.skinbase_vertex,THREE.ShaderChunk.skinnormal_vertex,THREE.ShaderChunk.defaultnormal_vertex,"vNormal = normalize( transformedNormal );",THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.default_vertex,"vViewPosition = -mvPosition.xyz;",THREE.ShaderChunk.worldpos_vertex,THREE.ShaderChunk.envmap_vertex,THREE.ShaderChunk.lights_phong_vertex,THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 diffuse;","uniform float opacity;","uniform vec3 ambient;","uniform vec3 emissive;","uniform vec3 specular;","uniform float shininess;",THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.map_pars_fragment,THREE.ShaderChunk.lightmap_pars_fragment,THREE.ShaderChunk.envmap_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.lights_phong_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,THREE.ShaderChunk.bumpmap_pars_fragment,THREE.ShaderChunk.normalmap_pars_fragment,THREE.ShaderChunk.specularmap_pars_fragment,"void main() {","gl_FragColor = vec4( vec3 ( 1.0 ), opacity );",THREE.ShaderChunk.map_fragment,THREE.ShaderChunk.alphatest_fragment,THREE.ShaderChunk.specularmap_fragment,THREE.ShaderChunk.lights_phong_fragment,THREE.ShaderChunk.lightmap_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.envmap_fragment,THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.linear_to_gamma_fragment,THREE.ShaderChunk.fog_fragment,"}"].join("\n")},particle_basic:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.particle,THREE.UniformsLib.shadowmap]),vertexShader:["uniform float size;","uniform float scale;",THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,"void main() {",THREE.ShaderChunk.color_vertex,"vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );","#ifdef USE_SIZEATTENUATION","gl_PointSize = size * ( scale / length( mvPosition.xyz ) );","#else","gl_PointSize = size;","#endif","gl_Position = projectionMatrix * mvPosition;",THREE.ShaderChunk.worldpos_vertex,THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 psColor;","uniform float opacity;",THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.map_particle_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,"void main() {","gl_FragColor = vec4( psColor, opacity );",THREE.ShaderChunk.map_particle_fragment,THREE.ShaderChunk.alphatest_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.fog_fragment,"}"].join("\n")},dashed:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.fog,{scale:{type:"f",value:1},dashSize:{type:"f",value:1},totalSize:{type:"f",value:2}}]),vertexShader:["uniform float scale;","attribute float lineDistance;","varying float vLineDistance;",THREE.ShaderChunk.color_pars_vertex,"void main() {",THREE.ShaderChunk.color_vertex,"vLineDistance = scale * lineDistance;","vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );","gl_Position = projectionMatrix * mvPosition;","}"].join("\n"),fragmentShader:["uniform vec3 diffuse;","uniform float opacity;","uniform float dashSize;","uniform float totalSize;","varying float vLineDistance;",THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,"void main() {","if ( mod( vLineDistance, totalSize ) > dashSize ) {","discard;","}","gl_FragColor = vec4( diffuse, opacity );",THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.fog_fragment,"}"].join("\n")},depth:{uniforms:{mNear:{type:"f",value:1},mFar:{type:"f",value:2e3},opacity:{type:"f",value:1}},vertexShader:["void main() {","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float mNear;","uniform float mFar;","uniform float opacity;","void main() {","float depth = gl_FragCoord.z / gl_FragCoord.w;","float color = 1.0 - smoothstep( mNear, mFar, depth );","gl_FragColor = vec4( vec3( color ), opacity );","}"].join("\n")},normal:{uniforms:{opacity:{type:"f",value:1}},vertexShader:["varying vec3 vNormal;",THREE.ShaderChunk.morphtarget_pars_vertex,"void main() {","vNormal = normalize( normalMatrix * normal );",THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.default_vertex,"}"].join("\n"),fragmentShader:["uniform float opacity;","varying vec3 vNormal;","void main() {","gl_FragColor = vec4( 0.5 * normalize( vNormal ) + 0.5, opacity );","}"].join("\n")},normalmap:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.fog,THREE.UniformsLib.lights,THREE.UniformsLib.shadowmap,{enableAO:{type:"i",value:0},enableDiffuse:{type:"i",value:0},enableSpecular:{type:"i",value:0},enableReflection:{type:"i",value:0},enableDisplacement:{type:"i",value:0},tDisplacement:{type:"t",value:null},tDiffuse:{type:"t",value:null},tCube:{type:"t",value:null},tNormal:{type:"t",value:null},tSpecular:{type:"t",value:null},tAO:{type:"t",value:null},uNormalScale:{type:"v2",value:new THREE.Vector2(1,1)},uDisplacementBias:{type:"f",value:0},uDisplacementScale:{type:"f",value:1},diffuse:{type:"c",value:new THREE.Color(16777215)},specular:{type:"c",value:new THREE.Color(1118481)},ambient:{type:"c",value:new THREE.Color(16777215)},shininess:{type:"f",value:30},opacity:{type:"f",value:1},useRefract:{type:"i",value:0},refractionRatio:{type:"f",value:.98},reflectivity:{type:"f",value:.5},uOffset:{type:"v2",value:new THREE.Vector2(0,0)},uRepeat:{type:"v2",value:new THREE.Vector2(1,1)},wrapRGB:{type:"v3",value:new THREE.Vector3(1,1,1)}}]),fragmentShader:["uniform vec3 ambient;","uniform vec3 diffuse;","uniform vec3 specular;","uniform float shininess;","uniform float opacity;","uniform bool enableDiffuse;","uniform bool enableSpecular;","uniform bool enableAO;","uniform bool enableReflection;","uniform sampler2D tDiffuse;","uniform sampler2D tNormal;","uniform sampler2D tSpecular;","uniform sampler2D tAO;","uniform samplerCube tCube;","uniform vec2 uNormalScale;","uniform bool useRefract;","uniform float refractionRatio;","uniform float reflectivity;","varying vec3 vTangent;","varying vec3 vBinormal;","varying vec3 vNormal;","varying vec2 vUv;","uniform vec3 ambientLightColor;","#if MAX_DIR_LIGHTS > 0","uniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];","uniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];","#endif","#if MAX_HEMI_LIGHTS > 0","uniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];","uniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];","uniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];","#endif","#if MAX_POINT_LIGHTS > 0","uniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];","uniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];","uniform float pointLightDistance[ MAX_POINT_LIGHTS ];","#endif","#if MAX_SPOT_LIGHTS > 0","uniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];","uniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];","uniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];","uniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];","uniform float spotLightExponent[ MAX_SPOT_LIGHTS ];","uniform float spotLightDistance[ MAX_SPOT_LIGHTS ];","#endif","#ifdef WRAP_AROUND","uniform vec3 wrapRGB;","#endif","varying vec3 vWorldPosition;","varying vec3 vViewPosition;",THREE.ShaderChunk.shadowmap_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,"void main() {","gl_FragColor = vec4( vec3( 1.0 ), opacity );","vec3 specularTex = vec3( 1.0 );","vec3 normalTex = texture2D( tNormal, vUv ).xyz * 2.0 - 1.0;","normalTex.xy *= uNormalScale;","normalTex = normalize( normalTex );","if( enableDiffuse ) {","#ifdef GAMMA_INPUT","vec4 texelColor = texture2D( tDiffuse, vUv );","texelColor.xyz *= texelColor.xyz;","gl_FragColor = gl_FragColor * texelColor;","#else","gl_FragColor = gl_FragColor * texture2D( tDiffuse, vUv );","#endif","}","if( enableAO ) {","#ifdef GAMMA_INPUT","vec4 aoColor = texture2D( tAO, vUv );","aoColor.xyz *= aoColor.xyz;","gl_FragColor.xyz = gl_FragColor.xyz * aoColor.xyz;","#else","gl_FragColor.xyz = gl_FragColor.xyz * texture2D( tAO, vUv ).xyz;","#endif","}","if( enableSpecular )","specularTex = texture2D( tSpecular, vUv ).xyz;","mat3 tsb = mat3( normalize( vTangent ), normalize( vBinormal ), normalize( vNormal ) );","vec3 finalNormal = tsb * normalTex;","#ifdef FLIP_SIDED","finalNormal = -finalNormal;","#endif","vec3 normal = normalize( finalNormal );","vec3 viewPosition = normalize( vViewPosition );","#if MAX_POINT_LIGHTS > 0","vec3 pointDiffuse = vec3( 0.0 );","vec3 pointSpecular = vec3( 0.0 );","for ( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {","vec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );","vec3 pointVector = lPosition.xyz + vViewPosition.xyz;","float pointDistance = 1.0;","if ( pointLightDistance[ i ] > 0.0 )","pointDistance = 1.0 - min( ( length( pointVector ) / pointLightDistance[ i ] ), 1.0 );","pointVector = normalize( pointVector );","#ifdef WRAP_AROUND","float pointDiffuseWeightFull = max( dot( normal, pointVector ), 0.0 );","float pointDiffuseWeightHalf = max( 0.5 * dot( normal, pointVector ) + 0.5, 0.0 );","vec3 pointDiffuseWeight = mix( vec3 ( pointDiffuseWeightFull ), vec3( pointDiffuseWeightHalf ), wrapRGB );","#else","float pointDiffuseWeight = max( dot( normal, pointVector ), 0.0 );","#endif","pointDiffuse += pointDistance * pointLightColor[ i ] * diffuse * pointDiffuseWeight;","vec3 pointHalfVector = normalize( pointVector + viewPosition );","float pointDotNormalHalf = max( dot( normal, pointHalfVector ), 0.0 );","float pointSpecularWeight = specularTex.r * max( pow( pointDotNormalHalf, shininess ), 0.0 );","float specularNormalization = ( shininess + 2.0001 ) / 8.0;","vec3 schlick = specular + vec3( 1.0 - specular ) * pow( 1.0 - dot( pointVector, pointHalfVector ), 5.0 );","pointSpecular += schlick * pointLightColor[ i ] * pointSpecularWeight * pointDiffuseWeight * pointDistance * specularNormalization;","}","#endif","#if MAX_SPOT_LIGHTS > 0","vec3 spotDiffuse = vec3( 0.0 );","vec3 spotSpecular = vec3( 0.0 );","for ( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {","vec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );","vec3 spotVector = lPosition.xyz + vViewPosition.xyz;","float spotDistance = 1.0;","if ( spotLightDistance[ i ] > 0.0 )","spotDistance = 1.0 - min( ( length( spotVector ) / spotLightDistance[ i ] ), 1.0 );","spotVector = normalize( spotVector );","float spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - vWorldPosition ) );","if ( spotEffect > spotLightAngleCos[ i ] ) {","spotEffect = max( pow( spotEffect, spotLightExponent[ i ] ), 0.0 );","#ifdef WRAP_AROUND","float spotDiffuseWeightFull = max( dot( normal, spotVector ), 0.0 );","float spotDiffuseWeightHalf = max( 0.5 * dot( normal, spotVector ) + 0.5, 0.0 );","vec3 spotDiffuseWeight = mix( vec3 ( spotDiffuseWeightFull ), vec3( spotDiffuseWeightHalf ), wrapRGB );","#else","float spotDiffuseWeight = max( dot( normal, spotVector ), 0.0 );","#endif","spotDiffuse += spotDistance * spotLightColor[ i ] * diffuse * spotDiffuseWeight * spotEffect;","vec3 spotHalfVector = normalize( spotVector + viewPosition );","float spotDotNormalHalf = max( dot( normal, spotHalfVector ), 0.0 );","float spotSpecularWeight = specularTex.r * max( pow( spotDotNormalHalf, shininess ), 0.0 );","float specularNormalization = ( shininess + 2.0001 ) / 8.0;","vec3 schlick = specular + vec3( 1.0 - specular ) * pow( 1.0 - dot( spotVector, spotHalfVector ), 5.0 );","spotSpecular += schlick * spotLightColor[ i ] * spotSpecularWeight * spotDiffuseWeight * spotDistance * specularNormalization * spotEffect;","}","}","#endif","#if MAX_DIR_LIGHTS > 0","vec3 dirDiffuse = vec3( 0.0 );","vec3 dirSpecular = vec3( 0.0 );","for( int i = 0; i < MAX_DIR_LIGHTS; i++ ) {","vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );","vec3 dirVector = normalize( lDirection.xyz );","#ifdef WRAP_AROUND","float directionalLightWeightingFull = max( dot( normal, dirVector ), 0.0 );","float directionalLightWeightingHalf = max( 0.5 * dot( normal, dirVector ) + 0.5, 0.0 );","vec3 dirDiffuseWeight = mix( vec3( directionalLightWeightingFull ), vec3( directionalLightWeightingHalf ), wrapRGB );","#else","float dirDiffuseWeight = max( dot( normal, dirVector ), 0.0 );","#endif","dirDiffuse += directionalLightColor[ i ] * diffuse * dirDiffuseWeight;","vec3 dirHalfVector = normalize( dirVector + viewPosition );","float dirDotNormalHalf = max( dot( normal, dirHalfVector ), 0.0 );","float dirSpecularWeight = specularTex.r * max( pow( dirDotNormalHalf, shininess ), 0.0 );","float specularNormalization = ( shininess + 2.0001 ) / 8.0;","vec3 schlick = specular + vec3( 1.0 - specular ) * pow( 1.0 - dot( dirVector, dirHalfVector ), 5.0 );","dirSpecular += schlick * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight * specularNormalization;","}","#endif","#if MAX_HEMI_LIGHTS > 0","vec3 hemiDiffuse  = vec3( 0.0 );","vec3 hemiSpecular = vec3( 0.0 );","for( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {","vec4 lDirection = viewMatrix * vec4( hemisphereLightDirection[ i ], 0.0 );","vec3 lVector = normalize( lDirection.xyz );","float dotProduct = dot( normal, lVector );","float hemiDiffuseWeight = 0.5 * dotProduct + 0.5;","vec3 hemiColor = mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );","hemiDiffuse += diffuse * hemiColor;","vec3 hemiHalfVectorSky = normalize( lVector + viewPosition );","float hemiDotNormalHalfSky = 0.5 * dot( normal, hemiHalfVectorSky ) + 0.5;","float hemiSpecularWeightSky = specularTex.r * max( pow( hemiDotNormalHalfSky, shininess ), 0.0 );","vec3 lVectorGround = -lVector;","vec3 hemiHalfVectorGround = normalize( lVectorGround + viewPosition );","float hemiDotNormalHalfGround = 0.5 * dot( normal, hemiHalfVectorGround ) + 0.5;","float hemiSpecularWeightGround = specularTex.r * max( pow( hemiDotNormalHalfGround, shininess ), 0.0 );","float dotProductGround = dot( normal, lVectorGround );","float specularNormalization = ( shininess + 2.0001 ) / 8.0;","vec3 schlickSky = specular + vec3( 1.0 - specular ) * pow( 1.0 - dot( lVector, hemiHalfVectorSky ), 5.0 );","vec3 schlickGround = specular + vec3( 1.0 - specular ) * pow( 1.0 - dot( lVectorGround, hemiHalfVectorGround ), 5.0 );","hemiSpecular += hemiColor * specularNormalization * ( schlickSky * hemiSpecularWeightSky * max( dotProduct, 0.0 ) + schlickGround * hemiSpecularWeightGround * max( dotProductGround, 0.0 ) );","}","#endif","vec3 totalDiffuse = vec3( 0.0 );","vec3 totalSpecular = vec3( 0.0 );","#if MAX_DIR_LIGHTS > 0","totalDiffuse += dirDiffuse;","totalSpecular += dirSpecular;","#endif","#if MAX_HEMI_LIGHTS > 0","totalDiffuse += hemiDiffuse;","totalSpecular += hemiSpecular;","#endif","#if MAX_POINT_LIGHTS > 0","totalDiffuse += pointDiffuse;","totalSpecular += pointSpecular;","#endif","#if MAX_SPOT_LIGHTS > 0","totalDiffuse += spotDiffuse;","totalSpecular += spotSpecular;","#endif","#ifdef METAL","gl_FragColor.xyz = gl_FragColor.xyz * ( totalDiffuse + ambientLightColor * ambient + totalSpecular );","#else","gl_FragColor.xyz = gl_FragColor.xyz * ( totalDiffuse + ambientLightColor * ambient ) + totalSpecular;","#endif","if ( enableReflection ) {","vec3 vReflect;","vec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );","if ( useRefract ) {","vReflect = refract( cameraToVertex, normal, refractionRatio );","} else {","vReflect = reflect( cameraToVertex, normal );","}","vec4 cubeColor = textureCube( tCube, vec3( -vReflect.x, vReflect.yz ) );","#ifdef GAMMA_INPUT","cubeColor.xyz *= cubeColor.xyz;","#endif","gl_FragColor.xyz = mix( gl_FragColor.xyz, cubeColor.xyz, specularTex.r * reflectivity );","}",THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.linear_to_gamma_fragment,THREE.ShaderChunk.fog_fragment,"}"].join("\n"),vertexShader:["attribute vec4 tangent;","uniform vec2 uOffset;","uniform vec2 uRepeat;","uniform bool enableDisplacement;","#ifdef VERTEX_TEXTURES","uniform sampler2D tDisplacement;","uniform float uDisplacementScale;","uniform float uDisplacementBias;","#endif","varying vec3 vTangent;","varying vec3 vBinormal;","varying vec3 vNormal;","varying vec2 vUv;","varying vec3 vWorldPosition;","varying vec3 vViewPosition;",THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,"void main() {",THREE.ShaderChunk.skinbase_vertex,THREE.ShaderChunk.skinnormal_vertex,"#ifdef USE_SKINNING","vNormal = normalize( normalMatrix * skinnedNormal.xyz );","vec4 skinnedTangent = skinMatrix * vec4( tangent.xyz, 0.0 );","vTangent = normalize( normalMatrix * skinnedTangent.xyz );","#else","vNormal = normalize( normalMatrix * normal );","vTangent = normalize( normalMatrix * tangent.xyz );","#endif","vBinormal = normalize( cross( vNormal, vTangent ) * tangent.w );","vUv = uv * uRepeat + uOffset;","vec3 displacedPosition;","#ifdef VERTEX_TEXTURES","if ( enableDisplacement ) {","vec3 dv = texture2D( tDisplacement, uv ).xyz;","float df = uDisplacementScale * dv.x + uDisplacementBias;","displacedPosition = position + normalize( normal ) * df;","} else {","#ifdef USE_SKINNING","vec4 skinVertex = vec4( position, 1.0 );","vec4 skinned  = boneMatX * skinVertex * skinWeight.x;","skinned 	  += boneMatY * skinVertex * skinWeight.y;","displacedPosition  = skinned.xyz;","#else","displacedPosition = position;","#endif","}","#else","#ifdef USE_SKINNING","vec4 skinVertex = vec4( position, 1.0 );","vec4 skinned  = boneMatX * skinVertex * skinWeight.x;","skinned 	  += boneMatY * skinVertex * skinWeight.y;","displacedPosition  = skinned.xyz;","#else","displacedPosition = position;","#endif","#endif","vec4 mvPosition = modelViewMatrix * vec4( displacedPosition, 1.0 );","vec4 worldPosition = modelMatrix * vec4( displacedPosition, 1.0 );","gl_Position = projectionMatrix * mvPosition;","vWorldPosition = worldPosition.xyz;","vViewPosition = -mvPosition.xyz;","#ifdef USE_SHADOWMAP","for( int i = 0; i < MAX_SHADOWS; i ++ ) {","vShadowCoord[ i ] = shadowMatrix[ i ] * worldPosition;","}","#endif","}"].join("\n")},cube:{uniforms:{tCube:{type:"t",value:null},tFlip:{type:"f",value:-1}},vertexShader:["varying vec3 vWorldPosition;","void main() {","vec4 worldPosition = modelMatrix * vec4( position, 1.0 );","vWorldPosition = worldPosition.xyz;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform samplerCube tCube;","uniform float tFlip;","varying vec3 vWorldPosition;","void main() {","gl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );","}"].join("\n")},depthRGBA:{uniforms:{},vertexShader:[THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,"void main() {",THREE.ShaderChunk.skinbase_vertex,THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.default_vertex,"}"].join("\n"),fragmentShader:["vec4 pack_depth( const in float depth ) {","const vec4 bit_shift = vec4( 256.0 * 256.0 * 256.0, 256.0 * 256.0, 256.0, 1.0 );","const vec4 bit_mask  = vec4( 0.0, 1.0 / 256.0, 1.0 / 256.0, 1.0 / 256.0 );","vec4 res = fract( depth * bit_shift );","res -= res.xxyz * bit_mask;","return res;","}","void main() {","gl_FragData[ 0 ] = pack_depth( gl_FragCoord.z );","}"].join("\n")}},THREE.WebGLRenderer=function(e){function t(e){e.__webglVertexBuffer=Pt.createBuffer(),e.__webglColorBuffer=Pt.createBuffer(),Vt.info.memory.geometries++}function i(e){e.__webglVertexBuffer=Pt.createBuffer(),e.__webglColorBuffer=Pt.createBuffer(),e.__webglLineDistanceBuffer=Pt.createBuffer(),Vt.info.memory.geometries++}function r(e){e.__webglVertexBuffer=Pt.createBuffer(),e.__webglNormalBuffer=Pt.createBuffer(),e.__webglTangentBuffer=Pt.createBuffer(),e.__webglColorBuffer=Pt.createBuffer(),e.__webglUVBuffer=Pt.createBuffer(),e.__webglUV2Buffer=Pt.createBuffer(),e.__webglSkinIndicesBuffer=Pt.createBuffer(),e.__webglSkinWeightsBuffer=Pt.createBuffer(),e.__webglFaceBuffer=Pt.createBuffer(),e.__webglLineBuffer=Pt.createBuffer();var t,i;if(e.numMorphTargets)for(e.__webglMorphTargetsBuffers=[],t=0,i=e.numMorphTargets;i>t;t++)e.__webglMorphTargetsBuffers.push(Pt.createBuffer());if(e.numMorphNormals)for(e.__webglMorphNormalsBuffers=[],t=0,i=e.numMorphNormals;i>t;t++)e.__webglMorphNormalsBuffers.push(Pt.createBuffer());Vt.info.memory.geometries++}function n(e,t){var i=e.vertices.length,r=t.material;if(r.attributes){void 0===e.__webglCustomAttributesList&&(e.__webglCustomAttributesList=[]);for(var n in r.attributes){var o=r.attributes[n];if(!o.__webglInitialized||o.createUniqueBuffers){o.__webglInitialized=!0;var s=1;"v2"===o.type?s=2:"v3"===o.type?s=3:"v4"===o.type?s=4:"c"===o.type&&(s=3),o.size=s,o.array=new Float32Array(i*s),o.buffer=Pt.createBuffer(),o.buffer.belongsToAttribute=n,o.needsUpdate=!0}e.__webglCustomAttributesList.push(o)}}}function o(e,t){var i=e.vertices.length;e.__vertexArray=new Float32Array(3*i),e.__colorArray=new Float32Array(3*i),e.__sortArray=[],e.__webglParticleCount=i,n(e,t)}function s(e,t){var i=e.vertices.length;e.__vertexArray=new Float32Array(3*i),e.__colorArray=new Float32Array(3*i),e.__lineDistanceArray=new Float32Array(1*i),e.__webglLineCount=i,n(e,t)}function a(e,t){var i=t.geometry,r=e.faces3,n=3*r.length,o=1*r.length,s=3*r.length,a=l(t,e),h=d(a),f=c(a),m=u(a);e.__vertexArray=new Float32Array(3*n),f&&(e.__normalArray=new Float32Array(3*n)),i.hasTangents&&(e.__tangentArray=new Float32Array(4*n)),m&&(e.__colorArray=new Float32Array(3*n)),h&&(i.faceVertexUvs.length>0&&(e.__uvArray=new Float32Array(2*n)),i.faceVertexUvs.length>1&&(e.__uv2Array=new Float32Array(2*n))),t.geometry.skinWeights.length&&t.geometry.skinIndices.length&&(e.__skinIndexArray=new Float32Array(4*n),e.__skinWeightArray=new Float32Array(4*n)),e.__faceArray=new Uint16Array(3*o),e.__lineArray=new Uint16Array(2*s);var p,g;if(e.numMorphTargets)for(e.__morphTargetsArrays=[],p=0,g=e.numMorphTargets;g>p;p++)e.__morphTargetsArrays.push(new Float32Array(3*n));if(e.numMorphNormals)for(e.__morphNormalsArrays=[],p=0,g=e.numMorphNormals;g>p;p++)e.__morphNormalsArrays.push(new Float32Array(3*n));if(e.__webglFaceCount=3*o,e.__webglLineCount=2*s,a.attributes){void 0===e.__webglCustomAttributesList&&(e.__webglCustomAttributesList=[]);for(var E in a.attributes){var v=a.attributes[E],y={};for(var x in v)y[x]=v[x];if(!y.__webglInitialized||y.createUniqueBuffers){y.__webglInitialized=!0;var T=1;"v2"===y.type?T=2:"v3"===y.type?T=3:"v4"===y.type?T=4:"c"===y.type&&(T=3),y.size=T,y.array=new Float32Array(n*T),y.buffer=Pt.createBuffer(),y.buffer.belongsToAttribute=E,v.needsUpdate=!0,y.__original=v}e.__webglCustomAttributesList.push(y)}}e.__inittedArrays=!0}function l(e,t){return e.material instanceof THREE.MeshFaceMaterial?e.material.materials[t.materialIndex]:e.material}function h(e){return e&&void 0!==e.shading&&e.shading===THREE.SmoothShading}function c(e){return e instanceof THREE.MeshBasicMaterial&&!e.envMap||e instanceof THREE.MeshDepthMaterial?!1:h(e)?THREE.SmoothShading:THREE.FlatShading}function u(e){return e.vertexColors?e.vertexColors:!1}function d(e){return e.map||e.lightMap||e.bumpMap||e.normalMap||e.specularMap||e instanceof THREE.ShaderMaterial?!0:!1}function f(e){var t,i,r;for(t in e.attributes)r="index"===t?Pt.ELEMENT_ARRAY_BUFFER:Pt.ARRAY_BUFFER,i=e.attributes[t],i.buffer=Pt.createBuffer(),Pt.bindBuffer(r,i.buffer),Pt.bufferData(r,i.array,Pt.STATIC_DRAW)}function m(e){var t={},i=["vertices","normals","uvs"];for(var r in i){var n=e[i[r]],o=Pt.createBuffer();Pt.bindBuffer(Pt.ARRAY_BUFFER,o),Pt.bufferData(Pt.ARRAY_BUFFER,n,Pt.STATIC_DRAW),t[i[r]]=o}St[e.id]=t}function p(e,t,i){var r,n,o,s,a,l,h,c,u,d,f,m,p=e.vertices,g=p.length,E=e.colors,v=E.length,y=e.__vertexArray,x=e.__colorArray,T=e.__sortArray,w=e.verticesNeedUpdate,A=(e.elementsNeedUpdate,e.colorsNeedUpdate),R=e.__webglCustomAttributesList;if(i.sortParticles){for(yi.copy(vi),yi.multiply(i.matrixWorld),r=0;g>r;r++)o=p[r],xi.copy(o),xi.applyProjection(yi),T[r]=[xi.z,r];for(T.sort(_),r=0;g>r;r++)o=p[T[r][1]],s=3*r,y[s]=o.x,y[s+1]=o.y,y[s+2]=o.z;for(n=0;v>n;n++)s=3*n,l=E[T[n][1]],x[s]=l.r,x[s+1]=l.g,x[s+2]=l.b;if(R)for(h=0,c=R.length;c>h;h++)if(m=R[h],void 0===m.boundTo||"vertices"===m.boundTo)if(s=0,d=m.value.length,1===m.size)for(u=0;d>u;u++)a=T[u][1],m.array[u]=m.value[a];else if(2===m.size)for(u=0;d>u;u++)a=T[u][1],f=m.value[a],m.array[s]=f.x,m.array[s+1]=f.y,s+=2;else if(3===m.size)if("c"===m.type)for(u=0;d>u;u++)a=T[u][1],f=m.value[a],m.array[s]=f.r,m.array[s+1]=f.g,m.array[s+2]=f.b,s+=3;else for(u=0;d>u;u++)a=T[u][1],f=m.value[a],m.array[s]=f.x,m.array[s+1]=f.y,m.array[s+2]=f.z,s+=3;else if(4===m.size)for(u=0;d>u;u++)a=T[u][1],f=m.value[a],m.array[s]=f.x,m.array[s+1]=f.y,m.array[s+2]=f.z,m.array[s+3]=f.w,s+=4}else{if(w)for(r=0;g>r;r++)o=p[r],s=3*r,y[s]=o.x,y[s+1]=o.y,y[s+2]=o.z;if(A)for(n=0;v>n;n++)l=E[n],s=3*n,x[s]=l.r,x[s+1]=l.g,x[s+2]=l.b;if(R)for(h=0,c=R.length;c>h;h++)if(m=R[h],m.needsUpdate&&(void 0===m.boundTo||"vertices"===m.boundTo))if(d=m.value.length,s=0,1===m.size)for(u=0;d>u;u++)m.array[u]=m.value[u];else if(2===m.size)for(u=0;d>u;u++)f=m.value[u],m.array[s]=f.x,m.array[s+1]=f.y,s+=2;else if(3===m.size)if("c"===m.type)for(u=0;d>u;u++)f=m.value[u],m.array[s]=f.r,m.array[s+1]=f.g,m.array[s+2]=f.b,s+=3;else for(u=0;d>u;u++)f=m.value[u],m.array[s]=f.x,m.array[s+1]=f.y,m.array[s+2]=f.z,s+=3;else if(4===m.size)for(u=0;d>u;u++)f=m.value[u],m.array[s]=f.x,m.array[s+1]=f.y,m.array[s+2]=f.z,m.array[s+3]=f.w,s+=4}if((w||i.sortParticles)&&(Pt.bindBuffer(Pt.ARRAY_BUFFER,e.__webglVertexBuffer),Pt.bufferData(Pt.ARRAY_BUFFER,y,t)),(A||i.sortParticles)&&(Pt.bindBuffer(Pt.ARRAY_BUFFER,e.__webglColorBuffer),Pt.bufferData(Pt.ARRAY_BUFFER,x,t)),R)for(h=0,c=R.length;c>h;h++)m=R[h],(m.needsUpdate||i.sortParticles)&&(Pt.bindBuffer(Pt.ARRAY_BUFFER,m.buffer),Pt.bufferData(Pt.ARRAY_BUFFER,m.array,t))
}function g(e,t){var i,r,n,o,s,a,l,h,c,u,d,f,m=e.vertices,p=e.colors,g=e.lineDistances,E=m.length,v=p.length,y=g.length,x=e.__vertexArray,T=e.__colorArray,w=e.__lineDistanceArray,A=e.verticesNeedUpdate,R=e.colorsNeedUpdate,_=e.lineDistancesNeedUpdate,C=e.__webglCustomAttributesList;if(A){for(i=0;E>i;i++)o=m[i],s=3*i,x[s]=o.x,x[s+1]=o.y,x[s+2]=o.z;Pt.bindBuffer(Pt.ARRAY_BUFFER,e.__webglVertexBuffer),Pt.bufferData(Pt.ARRAY_BUFFER,x,t)}if(R){for(r=0;v>r;r++)a=p[r],s=3*r,T[s]=a.r,T[s+1]=a.g,T[s+2]=a.b;Pt.bindBuffer(Pt.ARRAY_BUFFER,e.__webglColorBuffer),Pt.bufferData(Pt.ARRAY_BUFFER,T,t)}if(_){for(n=0;y>n;n++)w[n]=g[n];Pt.bindBuffer(Pt.ARRAY_BUFFER,e.__webglLineDistanceBuffer),Pt.bufferData(Pt.ARRAY_BUFFER,w,t)}if(C)for(l=0,h=C.length;h>l;l++)if(f=C[l],f.needsUpdate&&(void 0===f.boundTo||"vertices"===f.boundTo)){if(s=0,u=f.value.length,1===f.size)for(c=0;u>c;c++)f.array[c]=f.value[c];else if(2===f.size)for(c=0;u>c;c++)d=f.value[c],f.array[s]=d.x,f.array[s+1]=d.y,s+=2;else if(3===f.size)if("c"===f.type)for(c=0;u>c;c++)d=f.value[c],f.array[s]=d.r,f.array[s+1]=d.g,f.array[s+2]=d.b,s+=3;else for(c=0;u>c;c++)d=f.value[c],f.array[s]=d.x,f.array[s+1]=d.y,f.array[s+2]=d.z,s+=3;else if(4===f.size)for(c=0;u>c;c++)d=f.value[c],f.array[s]=d.x,f.array[s+1]=d.y,f.array[s+2]=d.z,f.array[s+3]=d.w,s+=4;Pt.bindBuffer(Pt.ARRAY_BUFFER,f.buffer),Pt.bufferData(Pt.ARRAY_BUFFER,f.array,t)}}function E(e,t,i,r,n){if(e.__inittedArrays){var o,s,a,l,h,f,m,p,g,E,v,y,x,T,w,A,R,_,C,b,F,S,H,D,M,B,L,k,q,P,$,O,I,z,N,V,U,W,G,j,X,Y,K=c(n),Z=u(n),Q=d(n),J=K===THREE.SmoothShading,et=0,tt=0,it=0,rt=0,nt=0,ot=0,st=0,at=0,lt=0,ht=0,ct=0,ut=0,dt=0,ft=e.__vertexArray,mt=e.__uvArray,pt=e.__uv2Array,gt=e.__normalArray,Et=e.__tangentArray,vt=e.__colorArray,yt=e.__skinIndexArray,xt=e.__skinWeightArray,Tt=e.__morphTargetsArrays,wt=e.__morphNormalsArrays,At=e.__webglCustomAttributesList,Rt=e.__faceArray,_t=e.__lineArray,Ct=t.geometry,bt=Ct.verticesNeedUpdate,Ft=Ct.elementsNeedUpdate,St=Ct.uvsNeedUpdate,Ht=Ct.normalsNeedUpdate,Dt=Ct.tangentsNeedUpdate,Mt=Ct.colorsNeedUpdate,Bt=Ct.morphTargetsNeedUpdate,Lt=Ct.vertices,kt=e.faces3,qt=Ct.faces,$t=Ct.faceVertexUvs[0],Ot=Ct.faceVertexUvs[1],It=(Ct.colors,Ct.skinIndices),zt=Ct.skinWeights,Nt=Ct.morphTargets,Vt=Ct.morphNormals;if(bt){for(o=0,s=kt.length;s>o;o++)l=qt[kt[o]],y=Lt[l.a],x=Lt[l.b],T=Lt[l.c],ft[tt]=y.x,ft[tt+1]=y.y,ft[tt+2]=y.z,ft[tt+3]=x.x,ft[tt+4]=x.y,ft[tt+5]=x.z,ft[tt+6]=T.x,ft[tt+7]=T.y,ft[tt+8]=T.z,tt+=9;Pt.bindBuffer(Pt.ARRAY_BUFFER,e.__webglVertexBuffer),Pt.bufferData(Pt.ARRAY_BUFFER,ft,i)}if(Bt)for(N=0,V=Nt.length;V>N;N++){for(ct=0,o=0,s=kt.length;s>o;o++)G=kt[o],l=qt[G],y=Nt[N].vertices[l.a],x=Nt[N].vertices[l.b],T=Nt[N].vertices[l.c],U=Tt[N],U[ct]=y.x,U[ct+1]=y.y,U[ct+2]=y.z,U[ct+3]=x.x,U[ct+4]=x.y,U[ct+5]=x.z,U[ct+6]=T.x,U[ct+7]=T.y,U[ct+8]=T.z,n.morphNormals&&(J?(j=Vt[N].vertexNormals[G],_=j.a,C=j.b,b=j.c):(_=Vt[N].faceNormals[G],C=_,b=_),W=wt[N],W[ct]=_.x,W[ct+1]=_.y,W[ct+2]=_.z,W[ct+3]=C.x,W[ct+4]=C.y,W[ct+5]=C.z,W[ct+6]=b.x,W[ct+7]=b.y,W[ct+8]=b.z),ct+=9;Pt.bindBuffer(Pt.ARRAY_BUFFER,e.__webglMorphTargetsBuffers[N]),Pt.bufferData(Pt.ARRAY_BUFFER,Tt[N],i),n.morphNormals&&(Pt.bindBuffer(Pt.ARRAY_BUFFER,e.__webglMorphNormalsBuffers[N]),Pt.bufferData(Pt.ARRAY_BUFFER,wt[N],i))}if(zt.length){for(o=0,s=kt.length;s>o;o++)l=qt[kt[o]],D=zt[l.a],M=zt[l.b],B=zt[l.c],xt[ht]=D.x,xt[ht+1]=D.y,xt[ht+2]=D.z,xt[ht+3]=D.w,xt[ht+4]=M.x,xt[ht+5]=M.y,xt[ht+6]=M.z,xt[ht+7]=M.w,xt[ht+8]=B.x,xt[ht+9]=B.y,xt[ht+10]=B.z,xt[ht+11]=B.w,L=It[l.a],k=It[l.b],q=It[l.c],yt[ht]=L.x,yt[ht+1]=L.y,yt[ht+2]=L.z,yt[ht+3]=L.w,yt[ht+4]=k.x,yt[ht+5]=k.y,yt[ht+6]=k.z,yt[ht+7]=k.w,yt[ht+8]=q.x,yt[ht+9]=q.y,yt[ht+10]=q.z,yt[ht+11]=q.w,ht+=12;ht>0&&(Pt.bindBuffer(Pt.ARRAY_BUFFER,e.__webglSkinIndicesBuffer),Pt.bufferData(Pt.ARRAY_BUFFER,yt,i),Pt.bindBuffer(Pt.ARRAY_BUFFER,e.__webglSkinWeightsBuffer),Pt.bufferData(Pt.ARRAY_BUFFER,xt,i))}if(Mt&&Z){for(o=0,s=kt.length;s>o;o++)l=qt[kt[o]],m=l.vertexColors,p=l.color,3===m.length&&Z===THREE.VertexColors?(F=m[0],S=m[1],H=m[2]):(F=p,S=p,H=p),vt[lt]=F.r,vt[lt+1]=F.g,vt[lt+2]=F.b,vt[lt+3]=S.r,vt[lt+4]=S.g,vt[lt+5]=S.b,vt[lt+6]=H.r,vt[lt+7]=H.g,vt[lt+8]=H.b,lt+=9;lt>0&&(Pt.bindBuffer(Pt.ARRAY_BUFFER,e.__webglColorBuffer),Pt.bufferData(Pt.ARRAY_BUFFER,vt,i))}if(Dt&&Ct.hasTangents){for(o=0,s=kt.length;s>o;o++)l=qt[kt[o]],g=l.vertexTangents,w=g[0],A=g[1],R=g[2],Et[st]=w.x,Et[st+1]=w.y,Et[st+2]=w.z,Et[st+3]=w.w,Et[st+4]=A.x,Et[st+5]=A.y,Et[st+6]=A.z,Et[st+7]=A.w,Et[st+8]=R.x,Et[st+9]=R.y,Et[st+10]=R.z,Et[st+11]=R.w,st+=12;Pt.bindBuffer(Pt.ARRAY_BUFFER,e.__webglTangentBuffer),Pt.bufferData(Pt.ARRAY_BUFFER,Et,i)}if(Ht&&K){for(o=0,s=kt.length;s>o;o++)if(l=qt[kt[o]],h=l.vertexNormals,f=l.normal,3===h.length&&J)for(P=0;3>P;P++)O=h[P],gt[ot]=O.x,gt[ot+1]=O.y,gt[ot+2]=O.z,ot+=3;else for(P=0;3>P;P++)gt[ot]=f.x,gt[ot+1]=f.y,gt[ot+2]=f.z,ot+=3;Pt.bindBuffer(Pt.ARRAY_BUFFER,e.__webglNormalBuffer),Pt.bufferData(Pt.ARRAY_BUFFER,gt,i)}if(St&&$t&&Q){for(o=0,s=kt.length;s>o;o++)if(a=kt[o],E=$t[a],void 0!==E)for(P=0;3>P;P++)I=E[P],mt[it]=I.x,mt[it+1]=I.y,it+=2;it>0&&(Pt.bindBuffer(Pt.ARRAY_BUFFER,e.__webglUVBuffer),Pt.bufferData(Pt.ARRAY_BUFFER,mt,i))}if(St&&Ot&&Q){for(o=0,s=kt.length;s>o;o++)if(a=kt[o],v=Ot[a],void 0!==v)for(P=0;3>P;P++)z=v[P],pt[rt]=z.x,pt[rt+1]=z.y,rt+=2;rt>0&&(Pt.bindBuffer(Pt.ARRAY_BUFFER,e.__webglUV2Buffer),Pt.bufferData(Pt.ARRAY_BUFFER,pt,i))}if(Ft){for(o=0,s=kt.length;s>o;o++)Rt[nt]=et,Rt[nt+1]=et+1,Rt[nt+2]=et+2,nt+=3,_t[at]=et,_t[at+1]=et+1,_t[at+2]=et,_t[at+3]=et+2,_t[at+4]=et+1,_t[at+5]=et+2,at+=6,et+=3;Pt.bindBuffer(Pt.ELEMENT_ARRAY_BUFFER,e.__webglFaceBuffer),Pt.bufferData(Pt.ELEMENT_ARRAY_BUFFER,Rt,i),Pt.bindBuffer(Pt.ELEMENT_ARRAY_BUFFER,e.__webglLineBuffer),Pt.bufferData(Pt.ELEMENT_ARRAY_BUFFER,_t,i)}if(At)for(P=0,$=At.length;$>P;P++)if(Y=At[P],Y.__original.needsUpdate){if(ut=0,dt=0,1===Y.size){if(void 0===Y.boundTo||"vertices"===Y.boundTo)for(o=0,s=kt.length;s>o;o++)l=qt[kt[o]],Y.array[ut]=Y.value[l.a],Y.array[ut+1]=Y.value[l.b],Y.array[ut+2]=Y.value[l.c],ut+=3;else if("faces"===Y.boundTo)for(o=0,s=kt.length;s>o;o++)X=Y.value[kt[o]],Y.array[ut]=X,Y.array[ut+1]=X,Y.array[ut+2]=X,ut+=3}else if(2===Y.size){if(void 0===Y.boundTo||"vertices"===Y.boundTo)for(o=0,s=kt.length;s>o;o++)l=qt[kt[o]],y=Y.value[l.a],x=Y.value[l.b],T=Y.value[l.c],Y.array[ut]=y.x,Y.array[ut+1]=y.y,Y.array[ut+2]=x.x,Y.array[ut+3]=x.y,Y.array[ut+4]=T.x,Y.array[ut+5]=T.y,ut+=6;else if("faces"===Y.boundTo)for(o=0,s=kt.length;s>o;o++)X=Y.value[kt[o]],y=X,x=X,T=X,Y.array[ut]=y.x,Y.array[ut+1]=y.y,Y.array[ut+2]=x.x,Y.array[ut+3]=x.y,Y.array[ut+4]=T.x,Y.array[ut+5]=T.y,ut+=6}else if(3===Y.size){var Ut;if(Ut="c"===Y.type?["r","g","b"]:["x","y","z"],void 0===Y.boundTo||"vertices"===Y.boundTo)for(o=0,s=kt.length;s>o;o++)l=qt[kt[o]],y=Y.value[l.a],x=Y.value[l.b],T=Y.value[l.c],Y.array[ut]=y[Ut[0]],Y.array[ut+1]=y[Ut[1]],Y.array[ut+2]=y[Ut[2]],Y.array[ut+3]=x[Ut[0]],Y.array[ut+4]=x[Ut[1]],Y.array[ut+5]=x[Ut[2]],Y.array[ut+6]=T[Ut[0]],Y.array[ut+7]=T[Ut[1]],Y.array[ut+8]=T[Ut[2]],ut+=9;else if("faces"===Y.boundTo)for(o=0,s=kt.length;s>o;o++)X=Y.value[kt[o]],y=X,x=X,T=X,Y.array[ut]=y[Ut[0]],Y.array[ut+1]=y[Ut[1]],Y.array[ut+2]=y[Ut[2]],Y.array[ut+3]=x[Ut[0]],Y.array[ut+4]=x[Ut[1]],Y.array[ut+5]=x[Ut[2]],Y.array[ut+6]=T[Ut[0]],Y.array[ut+7]=T[Ut[1]],Y.array[ut+8]=T[Ut[2]],ut+=9;else if("faceVertices"===Y.boundTo)for(o=0,s=kt.length;s>o;o++)X=Y.value[kt[o]],y=X[0],x=X[1],T=X[2],Y.array[ut]=y[Ut[0]],Y.array[ut+1]=y[Ut[1]],Y.array[ut+2]=y[Ut[2]],Y.array[ut+3]=x[Ut[0]],Y.array[ut+4]=x[Ut[1]],Y.array[ut+5]=x[Ut[2]],Y.array[ut+6]=T[Ut[0]],Y.array[ut+7]=T[Ut[1]],Y.array[ut+8]=T[Ut[2]],ut+=9}else if(4===Y.size)if(void 0===Y.boundTo||"vertices"===Y.boundTo)for(o=0,s=kt.length;s>o;o++)l=qt[kt[o]],y=Y.value[l.a],x=Y.value[l.b],T=Y.value[l.c],Y.array[ut]=y.x,Y.array[ut+1]=y.y,Y.array[ut+2]=y.z,Y.array[ut+3]=y.w,Y.array[ut+4]=x.x,Y.array[ut+5]=x.y,Y.array[ut+6]=x.z,Y.array[ut+7]=x.w,Y.array[ut+8]=T.x,Y.array[ut+9]=T.y,Y.array[ut+10]=T.z,Y.array[ut+11]=T.w,ut+=12;else if("faces"===Y.boundTo)for(o=0,s=kt.length;s>o;o++)X=Y.value[kt[o]],y=X,x=X,T=X,Y.array[ut]=y.x,Y.array[ut+1]=y.y,Y.array[ut+2]=y.z,Y.array[ut+3]=y.w,Y.array[ut+4]=x.x,Y.array[ut+5]=x.y,Y.array[ut+6]=x.z,Y.array[ut+7]=x.w,Y.array[ut+8]=T.x,Y.array[ut+9]=T.y,Y.array[ut+10]=T.z,Y.array[ut+11]=T.w,ut+=12;else if("faceVertices"===Y.boundTo)for(o=0,s=kt.length;s>o;o++)X=Y.value[kt[o]],y=X[0],x=X[1],T=X[2],Y.array[ut]=y.x,Y.array[ut+1]=y.y,Y.array[ut+2]=y.z,Y.array[ut+3]=y.w,Y.array[ut+4]=x.x,Y.array[ut+5]=x.y,Y.array[ut+6]=x.z,Y.array[ut+7]=x.w,Y.array[ut+8]=T.x,Y.array[ut+9]=T.y,Y.array[ut+10]=T.z,Y.array[ut+11]=T.w,ut+=12;Pt.bindBuffer(Pt.ARRAY_BUFFER,Y.buffer),Pt.bufferData(Pt.ARRAY_BUFFER,Y.array,i)}r&&(delete e.__inittedArrays,delete e.__colorArray,delete e.__normalArray,delete e.__tangentArray,delete e.__uvArray,delete e.__uv2Array,delete e.__faceArray,delete e.__vertexArray,delete e.__lineArray,delete e.__skinIndexArray,delete e.__skinWeightArray)}}function v(e,t,i,r){var n,o,s,a;for(o in t)s=t[o],n=i[o],s>=0&&(n?(a=n.itemSize,Pt.bindBuffer(Pt.ARRAY_BUFFER,n.buffer),T(s),Pt.vertexAttribPointer(s,a,Pt.FLOAT,!1,0,r*a*4)):e.defaultAttributeValues&&(2===e.defaultAttributeValues[o].length?Pt.vertexAttrib2fv(s,e.defaultAttributeValues[o]):3===e.defaultAttributeValues[o].length&&Pt.vertexAttrib3fv(s,e.defaultAttributeValues[o])))}function y(e,t){var i,r,n=e.attributes;for(i in n)r=n[i],r.needsUpdate&&("index"===i?(Pt.bindBuffer(Pt.ELEMENT_ARRAY_BUFFER,r.buffer),Pt.bufferData(Pt.ELEMENT_ARRAY_BUFFER,r.array,t)):(Pt.bindBuffer(Pt.ARRAY_BUFFER,r.buffer),Pt.bufferData(Pt.ARRAY_BUFFER,r.array,t)),r.needsUpdate=!1)}function x(e,t){if(e.needsUpdate!==!1){var i=["vertices","normals","uvs"],r=St[e.id];for(var n in i){var o=e[i[n]],s=r[i[n]];Pt.bindBuffer(Pt.ARRAY_BUFFER,s),Pt.bufferData(Pt.ARRAY_BUFFER,o,t)}e.needsUpdate=!1}}function T(e){0===gi[e]&&(Pt.enableVertexAttribArray(e),gi[e]=1)}function w(){for(var e in gi)1===gi[e]&&(Pt.disableVertexAttribArray(e),gi[e]=0)}function A(e,t,i){var r=e.program.attributes;if(-1!==i.morphTargetBase&&r.position>=0?(Pt.bindBuffer(Pt.ARRAY_BUFFER,t.__webglMorphTargetsBuffers[i.morphTargetBase]),T(r.position),Pt.vertexAttribPointer(r.position,3,Pt.FLOAT,!1,0,0)):r.position>=0&&(Pt.bindBuffer(Pt.ARRAY_BUFFER,t.__webglVertexBuffer),T(r.position),Pt.vertexAttribPointer(r.position,3,Pt.FLOAT,!1,0,0)),i.morphTargetForcedOrder.length)for(var n=0,o=i.morphTargetForcedOrder,s=i.morphTargetInfluences;n<e.numSupportedMorphTargets&&n<o.length;)r["morphTarget"+n]>=0&&(Pt.bindBuffer(Pt.ARRAY_BUFFER,t.__webglMorphTargetsBuffers[o[n]]),T(r["morphTarget"+n]),Pt.vertexAttribPointer(r["morphTarget"+n],3,Pt.FLOAT,!1,0,0)),r["morphNormal"+n]>=0&&e.morphNormals&&(Pt.bindBuffer(Pt.ARRAY_BUFFER,t.__webglMorphNormalsBuffers[o[n]]),T(r["morphNormal"+n]),Pt.vertexAttribPointer(r["morphNormal"+n],3,Pt.FLOAT,!1,0,0)),i.__webglMorphTargetInfluences[n]=s[o[n]],n++;else{var a,l,h=[],s=i.morphTargetInfluences,c=s.length;for(l=0;c>l;l++)a=s[l],a>0&&h.push([a,l]);h.length>e.numSupportedMorphTargets?(h.sort(_),h.length=e.numSupportedMorphTargets):h.length>e.numSupportedMorphNormals?h.sort(_):0===h.length&&h.push([0,0]);for(var u,n=0;n<e.numSupportedMorphTargets;)h[n]?(u=h[n][1],r["morphTarget"+n]>=0&&(Pt.bindBuffer(Pt.ARRAY_BUFFER,t.__webglMorphTargetsBuffers[u]),T(r["morphTarget"+n]),Pt.vertexAttribPointer(r["morphTarget"+n],3,Pt.FLOAT,!1,0,0)),r["morphNormal"+n]>=0&&e.morphNormals&&(Pt.bindBuffer(Pt.ARRAY_BUFFER,t.__webglMorphNormalsBuffers[u]),T(r["morphNormal"+n]),Pt.vertexAttribPointer(r["morphNormal"+n],3,Pt.FLOAT,!1,0,0)),i.__webglMorphTargetInfluences[n]=s[u]):i.__webglMorphTargetInfluences[n]=0,n++}null!==e.program.uniforms.morphTargetInfluences&&Pt.uniform1fv(e.program.uniforms.morphTargetInfluences,i.__webglMorphTargetInfluences)}function R(e,t){return e.z!==t.z?t.z-e.z:e.id-t.id}function _(e,t){return t[0]-e[0]}function C(e,t,i){if(e.length)for(var r=0,n=e.length;n>r;r++)Gt=null,Kt=null,ei=-1,ni=-1,oi=-1,Qt=-1,Jt=-1,Yt=-1,Xt=-1,wi=!0,e[r].render(t,i,mi,pi),Gt=null,Kt=null,ei=-1,ni=-1,oi=-1,Qt=-1,Jt=-1,Yt=-1,Xt=-1,wi=!0}function b(e,t,i,r,n,o,s,a){var l,h,c,u,d,f,m;t?(d=e.length-1,f=-1,m=-1):(d=0,f=e.length,m=1);for(var p=d;p!==f;p+=m)if(l=e[p],l.render){if(h=l.object,c=l.buffer,a)u=a;else{if(u=l[i],!u)continue;s&&Vt.setBlending(u.blending,u.blendEquation,u.blendSrc,u.blendDst),Vt.setDepthTest(u.depthTest),Vt.setDepthWrite(u.depthWrite),ot(u.polygonOffset,u.polygonOffsetFactor,u.polygonOffsetUnits)}Vt.setMaterialFaces(u),c instanceof THREE.BufferGeometry?Vt.renderBufferDirect(r,n,o,u,c,h):c instanceof THREE.Geometry2?Vt.renderBufferGeometry2(r,n,o,u,c,h):Vt.renderBuffer(r,n,o,u,c,h)}}function F(e,t,i,r,n,o,s){for(var a,l,h,c=0,u=e.length;u>c;c++)if(a=e[c],l=a.object,l.visible){if(s)h=s;else{if(h=a[t],!h)continue;o&&Vt.setBlending(h.blending,h.blendEquation,h.blendSrc,h.blendDst),Vt.setDepthTest(h.depthTest),Vt.setDepthWrite(h.depthWrite),ot(h.polygonOffset,h.polygonOffsetFactor,h.polygonOffsetUnits)}Vt.renderImmediateObject(i,r,n,h,l)}}function S(e){var t=e.object,i=t.material;i.transparent?(e.transparent=i,e.opaque=null):(e.opaque=i,e.transparent=null)}function H(e){var t=e.object,i=e.buffer,r=t.geometry,n=t.material;if(n instanceof THREE.MeshFaceMaterial){var o=r instanceof THREE.BufferGeometry?0:i.materialIndex;n=n.materials[o],n.transparent?(e.transparent=n,e.opaque=null):(e.opaque=n,e.transparent=null)}else n&&(n.transparent?(e.transparent=n,e.opaque=null):(e.opaque=n,e.transparent=null))}function D(e,n){var l,h,c,u;if(void 0===e.__webglInit)if(e.__webglInit=!0,e._modelViewMatrix=new THREE.Matrix4,e._normalMatrix=new THREE.Matrix3,void 0!==e.geometry&&void 0===e.geometry.__webglInit&&(e.geometry.__webglInit=!0,e.geometry.addEventListener("dispose",qi)),h=e.geometry,void 0===h);else if(h instanceof THREE.BufferGeometry)f(h);else if(h instanceof THREE.Geometry2)m(h);else if(e instanceof THREE.Mesh){c=e.material,void 0===h.geometryGroups&&h.makeGroups(c instanceof THREE.MeshFaceMaterial);for(l in h.geometryGroups)u=h.geometryGroups[l],u.__webglVertexBuffer||(r(u),a(u,e),h.verticesNeedUpdate=!0,h.morphTargetsNeedUpdate=!0,h.elementsNeedUpdate=!0,h.uvsNeedUpdate=!0,h.normalsNeedUpdate=!0,h.tangentsNeedUpdate=!0,h.colorsNeedUpdate=!0)}else e instanceof THREE.Line?h.__webglVertexBuffer||(i(h),s(h,e),h.verticesNeedUpdate=!0,h.colorsNeedUpdate=!0,h.lineDistancesNeedUpdate=!0):e instanceof THREE.ParticleSystem&&(h.__webglVertexBuffer||(t(h),o(h,e),h.verticesNeedUpdate=!0,h.colorsNeedUpdate=!0));if(void 0===e.__webglActive){if(e instanceof THREE.Mesh){if(h=e.geometry,h instanceof THREE.BufferGeometry)M(n.__webglObjects,h,e);else if(h instanceof THREE.Geometry2)M(n.__webglObjects,h,e);else if(h instanceof THREE.Geometry)for(l in h.geometryGroups)u=h.geometryGroups[l],M(n.__webglObjects,u,e)}else e instanceof THREE.Line||e instanceof THREE.ParticleSystem?(h=e.geometry,M(n.__webglObjects,h,e)):e instanceof THREE.ImmediateRenderObject||e.immediateRenderCallback?B(n.__webglObjectsImmediate,e):e instanceof THREE.Sprite?n.__webglSprites.push(e):e instanceof THREE.LensFlare&&n.__webglFlares.push(e);e.__webglActive=!0}}function M(e,t,i){e.push({id:null,buffer:t,object:i,opaque:null,transparent:null,z:0})}function B(e,t){e.push({id:null,object:t,opaque:null,transparent:null,z:0})}function L(e){var t,i,r,n=e.geometry;if(n instanceof THREE.BufferGeometry)y(n,Pt.DYNAMIC_DRAW);else if(n instanceof THREE.Geometry2)x(n,Pt.DYNAMIC_DRAW);else if(e instanceof THREE.Mesh){for(var o=0,s=n.geometryGroupsList.length;s>o;o++)t=n.geometryGroupsList[o],r=l(e,t),n.buffersNeedUpdate&&a(t,e),i=r.attributes&&k(r),(n.verticesNeedUpdate||n.morphTargetsNeedUpdate||n.elementsNeedUpdate||n.uvsNeedUpdate||n.normalsNeedUpdate||n.colorsNeedUpdate||n.tangentsNeedUpdate||i)&&E(t,e,Pt.DYNAMIC_DRAW,!n.dynamic,r);n.verticesNeedUpdate=!1,n.morphTargetsNeedUpdate=!1,n.elementsNeedUpdate=!1,n.uvsNeedUpdate=!1,n.normalsNeedUpdate=!1,n.colorsNeedUpdate=!1,n.tangentsNeedUpdate=!1,n.buffersNeedUpdate=!1,r.attributes&&q(r)}else e instanceof THREE.Line?(r=l(e,n),i=r.attributes&&k(r),(n.verticesNeedUpdate||n.colorsNeedUpdate||n.lineDistancesNeedUpdate||i)&&g(n,Pt.DYNAMIC_DRAW),n.verticesNeedUpdate=!1,n.colorsNeedUpdate=!1,n.lineDistancesNeedUpdate=!1,r.attributes&&q(r)):e instanceof THREE.ParticleSystem&&(r=l(e,n),i=r.attributes&&k(r),(n.verticesNeedUpdate||n.colorsNeedUpdate||e.sortParticles||i)&&p(n,Pt.DYNAMIC_DRAW,e),n.verticesNeedUpdate=!1,n.colorsNeedUpdate=!1,r.attributes&&q(r))}function k(e){for(var t in e.attributes)if(e.attributes[t].needsUpdate)return!0;return!1}function q(e){for(var t in e.attributes)e.attributes[t].needsUpdate=!1}function P(e,t){e instanceof THREE.Mesh||e instanceof THREE.ParticleSystem||e instanceof THREE.Line?$(t.__webglObjects,e):e instanceof THREE.Sprite?O(t.__webglSprites,e):e instanceof THREE.LensFlare?O(t.__webglFlares,e):(e instanceof THREE.ImmediateRenderObject||e.immediateRenderCallback)&&$(t.__webglObjectsImmediate,e),delete e.__webglActive}function $(e,t){for(var i=e.length-1;i>=0;i--)e[i].object===t&&e.splice(i,1)}function O(e,t){for(var i=e.length-1;i>=0;i--)e[i]===t&&e.splice(i,1)}function I(e,t){e.uniforms=THREE.UniformsUtils.clone(t.uniforms),e.vertexShader=t.vertexShader,e.fragmentShader=t.fragmentShader}function z(e,t,i,r,n){Zt=0,r.needsUpdate&&(r.program&&Ui(r),Vt.initMaterial(r,t,i,n),r.needsUpdate=!1),r.morphTargets&&(n.__webglMorphTargetInfluences||(n.__webglMorphTargetInfluences=new Float32Array(Vt.maxMorphTargets)));var o=!1,s=r.program,a=s.uniforms,l=r.uniforms;if(s!==Gt&&(Pt.useProgram(s),Gt=s,o=!0),r.id!==Xt&&(Xt=r.id,o=!0),(o||e!==Kt)&&(Pt.uniformMatrix4fv(a.projectionMatrix,!1,e.projectionMatrix.elements),e!==Kt&&(Kt=e)),r.skinning)if(Si&&n.useVertexTexture){if(null!==a.boneTexture){var h=Q();Pt.uniform1i(a.boneTexture,h),Vt.setTexture(n.boneTexture,h)}null!==a.boneTextureWidth&&Pt.uniform1i(a.boneTextureWidth,n.boneTextureWidth),null!==a.boneTextureHeight&&Pt.uniform1i(a.boneTextureHeight,n.boneTextureHeight)}else null!==a.boneGlobalMatrices&&Pt.uniformMatrix4fv(a.boneGlobalMatrices,!1,n.boneMatrices);return o&&(i&&r.fog&&G(l,i),(r instanceof THREE.MeshPhongMaterial||r instanceof THREE.MeshLambertMaterial||r.lights)&&(wi&&(rt(s,t),wi=!1),Y(l,Ai)),(r instanceof THREE.MeshBasicMaterial||r instanceof THREE.MeshLambertMaterial||r instanceof THREE.MeshPhongMaterial)&&N(l,r),r instanceof THREE.LineBasicMaterial?V(l,r):r instanceof THREE.LineDashedMaterial?(V(l,r),U(l,r)):r instanceof THREE.ParticleSystemMaterial?W(l,r):r instanceof THREE.MeshPhongMaterial?j(l,r):r instanceof THREE.MeshLambertMaterial?X(l,r):r instanceof THREE.MeshDepthMaterial?(l.mNear.value=e.near,l.mFar.value=e.far,l.opacity.value=r.opacity):r instanceof THREE.MeshNormalMaterial&&(l.opacity.value=r.opacity),n.receiveShadow&&!r._shadowPass&&K(l,t),J(s,r.uniformsList),(r instanceof THREE.ShaderMaterial||r instanceof THREE.MeshPhongMaterial||r.envMap)&&null!==a.cameraPosition&&(xi.setFromMatrixPosition(e.matrixWorld),Pt.uniform3f(a.cameraPosition,xi.x,xi.y,xi.z)),(r instanceof THREE.MeshPhongMaterial||r instanceof THREE.MeshLambertMaterial||r instanceof THREE.ShaderMaterial||r.skinning)&&null!==a.viewMatrix&&Pt.uniformMatrix4fv(a.viewMatrix,!1,e.matrixWorldInverse.elements)),Z(a,n),null!==a.modelMatrix&&Pt.uniformMatrix4fv(a.modelMatrix,!1,n.matrixWorld.elements),s}function N(e,t){e.opacity.value=t.opacity,Vt.gammaInput?e.diffuse.value.copyGammaToLinear(t.color):e.diffuse.value=t.color,e.map.value=t.map,e.lightMap.value=t.lightMap,e.specularMap.value=t.specularMap,t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale));var i;if(t.map?i=t.map:t.specularMap?i=t.specularMap:t.normalMap?i=t.normalMap:t.bumpMap&&(i=t.bumpMap),void 0!==i){var r=i.offset,n=i.repeat;e.offsetRepeat.value.set(r.x,r.y,n.x,n.y)}e.envMap.value=t.envMap,e.flipEnvMap.value=t.envMap instanceof THREE.WebGLRenderTargetCube?1:-1,e.reflectivity.value=Vt.gammaInput?t.reflectivity:t.reflectivity,e.refractionRatio.value=t.refractionRatio,e.combine.value=t.combine,e.useRefract.value=t.envMap&&t.envMap.mapping instanceof THREE.CubeRefractionMapping}function V(e,t){e.diffuse.value=t.color,e.opacity.value=t.opacity}function U(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}function W(e,t){e.psColor.value=t.color,e.opacity.value=t.opacity,e.size.value=t.size,e.scale.value=Ct.height/2,e.map.value=t.map}function G(e,t){e.fogColor.value=t.color,t instanceof THREE.Fog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t instanceof THREE.FogExp2&&(e.fogDensity.value=t.density)}function j(e,t){e.shininess.value=t.shininess,Vt.gammaInput?(e.ambient.value.copyGammaToLinear(t.ambient),e.emissive.value.copyGammaToLinear(t.emissive),e.specular.value.copyGammaToLinear(t.specular)):(e.ambient.value=t.ambient,e.emissive.value=t.emissive,e.specular.value=t.specular),t.wrapAround&&e.wrapRGB.value.copy(t.wrapRGB)}function X(e,t){Vt.gammaInput?(e.ambient.value.copyGammaToLinear(t.ambient),e.emissive.value.copyGammaToLinear(t.emissive)):(e.ambient.value=t.ambient,e.emissive.value=t.emissive),t.wrapAround&&e.wrapRGB.value.copy(t.wrapRGB)}function Y(e,t){e.ambientLightColor.value=t.ambient,e.directionalLightColor.value=t.directional.colors,e.directionalLightDirection.value=t.directional.positions,e.pointLightColor.value=t.point.colors,e.pointLightPosition.value=t.point.positions,e.pointLightDistance.value=t.point.distances,e.spotLightColor.value=t.spot.colors,e.spotLightPosition.value=t.spot.positions,e.spotLightDistance.value=t.spot.distances,e.spotLightDirection.value=t.spot.directions,e.spotLightAngleCos.value=t.spot.anglesCos,e.spotLightExponent.value=t.spot.exponents,e.hemisphereLightSkyColor.value=t.hemi.skyColors,e.hemisphereLightGroundColor.value=t.hemi.groundColors,e.hemisphereLightDirection.value=t.hemi.positions}function K(e,t){if(e.shadowMatrix)for(var i=0,r=0,n=t.length;n>r;r++){var o=t[r];o.castShadow&&(o instanceof THREE.SpotLight||o instanceof THREE.DirectionalLight&&!o.shadowCascade)&&(e.shadowMap.value[i]=o.shadowMap,e.shadowMapSize.value[i]=o.shadowMapSize,e.shadowMatrix.value[i]=o.shadowMatrix,e.shadowDarkness.value[i]=o.shadowDarkness,e.shadowBias.value[i]=o.shadowBias,i++)}}function Z(e,t){Pt.uniformMatrix4fv(e.modelViewMatrix,!1,t._modelViewMatrix.elements),e.normalMatrix&&Pt.uniformMatrix3fv(e.normalMatrix,!1,t._normalMatrix.elements)}function Q(){var e=Zt;return e>=Ri&&console.warn("WebGLRenderer: trying to use "+e+" texture units while this GPU supports only "+Ri),Zt+=1,e}function J(e,t){var i,r,n,o,s,a,l,h,c,u,d;for(c=0,u=t.length;u>c;c++)if(o=e.uniforms[t[c][1]])if(i=t[c][0],n=i.type,r=i.value,"i"===n)Pt.uniform1i(o,r);else if("f"===n)Pt.uniform1f(o,r);else if("v2"===n)Pt.uniform2f(o,r.x,r.y);else if("v3"===n)Pt.uniform3f(o,r.x,r.y,r.z);else if("v4"===n)Pt.uniform4f(o,r.x,r.y,r.z,r.w);else if("c"===n)Pt.uniform3f(o,r.r,r.g,r.b);else if("iv1"===n)Pt.uniform1iv(o,r);else if("iv"===n)Pt.uniform3iv(o,r);else if("fv1"===n)Pt.uniform1fv(o,r);else if("fv"===n)Pt.uniform3fv(o,r);else if("v2v"===n){for(void 0===i._array&&(i._array=new Float32Array(2*r.length)),l=0,h=r.length;h>l;l++)d=2*l,i._array[d]=r[l].x,i._array[d+1]=r[l].y;Pt.uniform2fv(o,i._array)}else if("v3v"===n){for(void 0===i._array&&(i._array=new Float32Array(3*r.length)),l=0,h=r.length;h>l;l++)d=3*l,i._array[d]=r[l].x,i._array[d+1]=r[l].y,i._array[d+2]=r[l].z;Pt.uniform3fv(o,i._array)}else if("v4v"===n){for(void 0===i._array&&(i._array=new Float32Array(4*r.length)),l=0,h=r.length;h>l;l++)d=4*l,i._array[d]=r[l].x,i._array[d+1]=r[l].y,i._array[d+2]=r[l].z,i._array[d+3]=r[l].w;Pt.uniform4fv(o,i._array)}else if("m4"===n)void 0===i._array&&(i._array=new Float32Array(16)),r.flattenToArray(i._array),Pt.uniformMatrix4fv(o,!1,i._array);else if("m4v"===n){for(void 0===i._array&&(i._array=new Float32Array(16*r.length)),l=0,h=r.length;h>l;l++)r[l].flattenToArrayOffset(i._array,16*l);Pt.uniformMatrix4fv(o,!1,i._array)}else if("t"===n){if(s=r,a=Q(),Pt.uniform1i(o,a),!s)continue;s.image instanceof Array&&6===s.image.length?mt(s,a):s instanceof THREE.WebGLRenderTargetCube?pt(s,a):Vt.setTexture(s,a)}else if("tv"===n){for(void 0===i._array&&(i._array=[]),l=0,h=i.value.length;h>l;l++)i._array[l]=Q();for(Pt.uniform1iv(o,i._array),l=0,h=i.value.length;h>l;l++)s=i.value[l],a=i._array[l],s&&Vt.setTexture(s,a)}else console.warn("THREE.WebGLRenderer: Unknown uniform type: "+n)}function et(e,t){e._modelViewMatrix.multiplyMatrices(t.matrixWorldInverse,e.matrixWorld),e._normalMatrix.getNormalMatrix(e._modelViewMatrix)}function tt(e,t,i,r){e[t]=i.r*i.r*r,e[t+1]=i.g*i.g*r,e[t+2]=i.b*i.b*r}function it(e,t,i,r){e[t]=i.r*r,e[t+1]=i.g*r,e[t+2]=i.b*r}function rt(e,t){var i,r,n,o,s,a,l,h,c,u=0,d=0,f=0,m=Ai,p=m.directional.colors,g=m.directional.positions,E=m.point.colors,v=m.point.positions,y=m.point.distances,x=m.spot.colors,T=m.spot.positions,w=m.spot.distances,A=m.spot.directions,R=m.spot.anglesCos,_=m.spot.exponents,C=m.hemi.skyColors,b=m.hemi.groundColors,F=m.hemi.positions,S=0,H=0,D=0,M=0,B=0,L=0,k=0,q=0,P=0,$=0,O=0,I=0;for(i=0,r=t.length;r>i;i++)if(n=t[i],!n.onlyShadow)if(o=n.color,l=n.intensity,c=n.distance,n instanceof THREE.AmbientLight){if(!n.visible)continue;Vt.gammaInput?(u+=o.r*o.r,d+=o.g*o.g,f+=o.b*o.b):(u+=o.r,d+=o.g,f+=o.b)}else if(n instanceof THREE.DirectionalLight){if(B+=1,!n.visible)continue;if(Ti.setFromMatrixPosition(n.matrixWorld),xi.setFromMatrixPosition(n.target.matrixWorld),Ti.sub(xi),Ti.normalize(),0===Ti.x&&0===Ti.y&&0===Ti.z)continue;P=3*S,g[P]=Ti.x,g[P+1]=Ti.y,g[P+2]=Ti.z,Vt.gammaInput?tt(p,P,o,l*l):it(p,P,o,l),S+=1}else if(n instanceof THREE.PointLight){if(L+=1,!n.visible)continue;$=3*H,Vt.gammaInput?tt(E,$,o,l*l):it(E,$,o,l),xi.setFromMatrixPosition(n.matrixWorld),v[$]=xi.x,v[$+1]=xi.y,v[$+2]=xi.z,y[H]=c,H+=1}else if(n instanceof THREE.SpotLight){if(k+=1,!n.visible)continue;O=3*D,Vt.gammaInput?tt(x,O,o,l*l):it(x,O,o,l),xi.setFromMatrixPosition(n.matrixWorld),T[O]=xi.x,T[O+1]=xi.y,T[O+2]=xi.z,w[D]=c,Ti.copy(xi),xi.setFromMatrixPosition(n.target.matrixWorld),Ti.sub(xi),Ti.normalize(),A[O]=Ti.x,A[O+1]=Ti.y,A[O+2]=Ti.z,R[D]=Math.cos(n.angle),_[D]=n.exponent,D+=1}else if(n instanceof THREE.HemisphereLight){if(q+=1,!n.visible)continue;if(Ti.setFromMatrixPosition(n.matrixWorld),Ti.normalize(),0===Ti.x&&0===Ti.y&&0===Ti.z)continue;I=3*M,F[I]=Ti.x,F[I+1]=Ti.y,F[I+2]=Ti.z,s=n.color,a=n.groundColor,Vt.gammaInput?(h=l*l,tt(C,I,s,h),tt(b,I,a,h)):(it(C,I,s,l),it(b,I,a,l)),M+=1}for(i=3*S,r=Math.max(p.length,3*B);r>i;i++)p[i]=0;for(i=3*H,r=Math.max(E.length,3*L);r>i;i++)E[i]=0;for(i=3*D,r=Math.max(x.length,3*k);r>i;i++)x[i]=0;for(i=3*M,r=Math.max(C.length,3*q);r>i;i++)C[i]=0;for(i=3*M,r=Math.max(b.length,3*q);r>i;i++)b[i]=0;m.directional.length=S,m.point.length=H,m.spot.length=D,m.hemi.length=M,m.ambient[0]=u,m.ambient[1]=d,m.ambient[2]=f}function nt(e){e!==hi&&(Pt.lineWidth(e),hi=e)}function ot(e,t,i){si!==e&&(e?Pt.enable(Pt.POLYGON_OFFSET_FILL):Pt.disable(Pt.POLYGON_OFFSET_FILL),si=e),!e||ai===t&&li===i||(Pt.polygonOffset(t,i),ai=t,li=i)}function st(e){var t,i,r=[];for(var n in e)t=e[n],t!==!1&&(i="#define "+n+" "+t,r.push(i));return r.join("\n")}function at(e,t,i,r,n,o,s,a){var l,h,c,u,d,f=[];e?f.push(e):(f.push(t),f.push(i));for(c in o)f.push(c),f.push(o[c]);for(l in s)f.push(l),f.push(s[l]);for(d=f.join(),l=0,h=Ut.length;h>l;l++){var m=Ut[l];if(m.code===d)return m.usedTimes++,m.program}var p="SHADOWMAP_TYPE_BASIC";s.shadowMapType===THREE.PCFShadowMap?p="SHADOWMAP_TYPE_PCF":s.shadowMapType===THREE.PCFSoftShadowMap&&(p="SHADOWMAP_TYPE_PCF_SOFT");var g=st(o);u=Pt.createProgram();var E=["precision "+Ft+" float;","precision "+Ft+" int;",g,Fi?"#define VERTEX_TEXTURES":"",Vt.gammaInput?"#define GAMMA_INPUT":"",Vt.gammaOutput?"#define GAMMA_OUTPUT":"","#define MAX_DIR_LIGHTS "+s.maxDirLights,"#define MAX_POINT_LIGHTS "+s.maxPointLights,"#define MAX_SPOT_LIGHTS "+s.maxSpotLights,"#define MAX_HEMI_LIGHTS "+s.maxHemiLights,"#define MAX_SHADOWS "+s.maxShadows,"#define MAX_BONES "+s.maxBones,s.map?"#define USE_MAP":"",s.envMap?"#define USE_ENVMAP":"",s.lightMap?"#define USE_LIGHTMAP":"",s.bumpMap?"#define USE_BUMPMAP":"",s.normalMap?"#define USE_NORMALMAP":"",s.specularMap?"#define USE_SPECULARMAP":"",s.vertexColors?"#define USE_COLOR":"",s.skinning?"#define USE_SKINNING":"",s.useVertexTexture?"#define BONE_TEXTURE":"",s.morphTargets?"#define USE_MORPHTARGETS":"",s.morphNormals?"#define USE_MORPHNORMALS":"",s.wrapAround?"#define WRAP_AROUND":"",s.doubleSided?"#define DOUBLE_SIDED":"",s.flipSided?"#define FLIP_SIDED":"",s.shadowMapEnabled?"#define USE_SHADOWMAP":"",s.shadowMapEnabled?"#define "+p:"",s.shadowMapDebug?"#define SHADOWMAP_DEBUG":"",s.shadowMapCascade?"#define SHADOWMAP_CASCADE":"",s.sizeAttenuation?"#define USE_SIZEATTENUATION":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","attribute vec2 uv2;","#ifdef USE_COLOR","attribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","attribute vec3 morphTarget0;","attribute vec3 morphTarget1;","attribute vec3 morphTarget2;","attribute vec3 morphTarget3;","#ifdef USE_MORPHNORMALS","attribute vec3 morphNormal0;","attribute vec3 morphNormal1;","attribute vec3 morphNormal2;","attribute vec3 morphNormal3;","#else","attribute vec3 morphTarget4;","attribute vec3 morphTarget5;","attribute vec3 morphTarget6;","attribute vec3 morphTarget7;","#endif","#endif","#ifdef USE_SKINNING","attribute vec4 skinIndex;","attribute vec4 skinWeight;","#endif",""].join("\n"),v=["precision "+Ft+" float;","precision "+Ft+" int;",s.bumpMap||s.normalMap?"#extension GL_OES_standard_derivatives : enable":"",g,"#define MAX_DIR_LIGHTS "+s.maxDirLights,"#define MAX_POINT_LIGHTS "+s.maxPointLights,"#define MAX_SPOT_LIGHTS "+s.maxSpotLights,"#define MAX_HEMI_LIGHTS "+s.maxHemiLights,"#define MAX_SHADOWS "+s.maxShadows,s.alphaTest?"#define ALPHATEST "+s.alphaTest:"",Vt.gammaInput?"#define GAMMA_INPUT":"",Vt.gammaOutput?"#define GAMMA_OUTPUT":"",s.useFog&&s.fog?"#define USE_FOG":"",s.useFog&&s.fogExp?"#define FOG_EXP2":"",s.map?"#define USE_MAP":"",s.envMap?"#define USE_ENVMAP":"",s.lightMap?"#define USE_LIGHTMAP":"",s.bumpMap?"#define USE_BUMPMAP":"",s.normalMap?"#define USE_NORMALMAP":"",s.specularMap?"#define USE_SPECULARMAP":"",s.vertexColors?"#define USE_COLOR":"",s.metal?"#define METAL":"",s.wrapAround?"#define WRAP_AROUND":"",s.doubleSided?"#define DOUBLE_SIDED":"",s.flipSided?"#define FLIP_SIDED":"",s.shadowMapEnabled?"#define USE_SHADOWMAP":"",s.shadowMapEnabled?"#define "+p:"",s.shadowMapDebug?"#define SHADOWMAP_DEBUG":"",s.shadowMapCascade?"#define SHADOWMAP_CASCADE":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",""].join("\n"),y=ut("vertex",E+i),x=ut("fragment",v+t);Pt.attachShader(u,y),Pt.attachShader(u,x),void 0!==a?Pt.bindAttribLocation(u,0,a):Pt.bindAttribLocation(u,0,"position"),Pt.linkProgram(u),Pt.getProgramParameter(u,Pt.LINK_STATUS)||(console.error("Could not initialise shader\nVALIDATE_STATUS: "+Pt.getProgramParameter(u,Pt.VALIDATE_STATUS)+", gl error ["+Pt.getError()+"]"),console.error("Program Info Log: "+Pt.getProgramInfoLog(u))),Pt.deleteShader(x),Pt.deleteShader(y),u.uniforms={},u.attributes={};var T,w,A,R;T=["viewMatrix","modelViewMatrix","projectionMatrix","normalMatrix","modelMatrix","cameraPosition","morphTargetInfluences"],s.useVertexTexture?(T.push("boneTexture"),T.push("boneTextureWidth"),T.push("boneTextureHeight")):T.push("boneGlobalMatrices");for(w in r)T.push(w);for(lt(u,T),T=["position","normal","uv","uv2","tangent","color","skinIndex","skinWeight","lineDistance"],R=0;R<s.maxMorphTargets;R++)T.push("morphTarget"+R);for(R=0;R<s.maxMorphNormals;R++)T.push("morphNormal"+R);for(A in n)T.push(A);return ht(u,T),u.id=Wt++,Ut.push({program:u,code:d,usedTimes:1}),Vt.info.memory.programs=Ut.length,u}function lt(e,t){var i,r,n;for(i=0,r=t.length;r>i;i++)n=t[i],e.uniforms[n]=Pt.getUniformLocation(e,n)}function ht(e,t){var i,r,n;for(i=0,r=t.length;r>i;i++)n=t[i],e.attributes[n]=Pt.getAttribLocation(e,n)}function ct(e){for(var t=e.split("\n"),i=0,r=t.length;r>i;i++)t[i]=i+1+": "+t[i];return t.join("\n")}function ut(e,t){var i;return"fragment"===e?i=Pt.createShader(Pt.FRAGMENT_SHADER):"vertex"===e&&(i=Pt.createShader(Pt.VERTEX_SHADER)),Pt.shaderSource(i,t),Pt.compileShader(i),Pt.getShaderParameter(i,Pt.COMPILE_STATUS)?i:(console.error(Pt.getShaderInfoLog(i)),console.error(ct(t)),null)}function dt(e,t,i){i?(Pt.texParameteri(e,Pt.TEXTURE_WRAP_S,xt(t.wrapS)),Pt.texParameteri(e,Pt.TEXTURE_WRAP_T,xt(t.wrapT)),Pt.texParameteri(e,Pt.TEXTURE_MAG_FILTER,xt(t.magFilter)),Pt.texParameteri(e,Pt.TEXTURE_MIN_FILTER,xt(t.minFilter))):(Pt.texParameteri(e,Pt.TEXTURE_WRAP_S,Pt.CLAMP_TO_EDGE),Pt.texParameteri(e,Pt.TEXTURE_WRAP_T,Pt.CLAMP_TO_EDGE),Pt.texParameteri(e,Pt.TEXTURE_MAG_FILTER,yt(t.magFilter)),Pt.texParameteri(e,Pt.TEXTURE_MIN_FILTER,yt(t.minFilter))),zt&&t.type!==THREE.FloatType&&(t.anisotropy>1||t.__oldAnisotropy)&&(Pt.texParameterf(e,zt.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(t.anisotropy,bi)),t.__oldAnisotropy=t.anisotropy)
}function ft(e,t){if(e.width<=t&&e.height<=t)return e;var i=Math.max(e.width,e.height),r=Math.floor(e.width*t/i),n=Math.floor(e.height*t/i),o=document.createElement("canvas");o.width=r,o.height=n;var s=o.getContext("2d");return s.drawImage(e,0,0,e.width,e.height,0,0,r,n),o}function mt(e,t){if(6===e.image.length)if(e.needsUpdate){e.image.__webglTextureCube||(e.addEventListener("dispose",Pi),e.image.__webglTextureCube=Pt.createTexture(),Vt.info.memory.textures++),Pt.activeTexture(Pt.TEXTURE0+t),Pt.bindTexture(Pt.TEXTURE_CUBE_MAP,e.image.__webglTextureCube),Pt.pixelStorei(Pt.UNPACK_FLIP_Y_WEBGL,e.flipY);for(var i=e instanceof THREE.CompressedTexture,r=[],n=0;6>n;n++)r[n]=Vt.autoScaleCubemaps&&!i?ft(e.image[n],Ci):e.image[n];var o=r[0],s=THREE.Math.isPowerOfTwo(o.width)&&THREE.Math.isPowerOfTwo(o.height),a=xt(e.format),l=xt(e.type);dt(Pt.TEXTURE_CUBE_MAP,e,s);for(var n=0;6>n;n++)if(i)for(var h,c=r[n].mipmaps,u=0,d=c.length;d>u;u++)h=c[u],e.format!==THREE.RGBAFormat?Pt.compressedTexImage2D(Pt.TEXTURE_CUBE_MAP_POSITIVE_X+n,u,a,h.width,h.height,0,h.data):Pt.texImage2D(Pt.TEXTURE_CUBE_MAP_POSITIVE_X+n,u,a,h.width,h.height,0,a,l,h.data);else Pt.texImage2D(Pt.TEXTURE_CUBE_MAP_POSITIVE_X+n,0,a,a,l,r[n]);e.generateMipmaps&&s&&Pt.generateMipmap(Pt.TEXTURE_CUBE_MAP),e.needsUpdate=!1,e.onUpdate&&e.onUpdate()}else Pt.activeTexture(Pt.TEXTURE0+t),Pt.bindTexture(Pt.TEXTURE_CUBE_MAP,e.image.__webglTextureCube)}function pt(e,t){Pt.activeTexture(Pt.TEXTURE0+t),Pt.bindTexture(Pt.TEXTURE_CUBE_MAP,e.__webglTexture)}function gt(e,t,i){Pt.bindFramebuffer(Pt.FRAMEBUFFER,e),Pt.framebufferTexture2D(Pt.FRAMEBUFFER,Pt.COLOR_ATTACHMENT0,i,t.__webglTexture,0)}function Et(e,t){Pt.bindRenderbuffer(Pt.RENDERBUFFER,e),t.depthBuffer&&!t.stencilBuffer?(Pt.renderbufferStorage(Pt.RENDERBUFFER,Pt.DEPTH_COMPONENT16,t.width,t.height),Pt.framebufferRenderbuffer(Pt.FRAMEBUFFER,Pt.DEPTH_ATTACHMENT,Pt.RENDERBUFFER,e)):t.depthBuffer&&t.stencilBuffer?(Pt.renderbufferStorage(Pt.RENDERBUFFER,Pt.DEPTH_STENCIL,t.width,t.height),Pt.framebufferRenderbuffer(Pt.FRAMEBUFFER,Pt.DEPTH_STENCIL_ATTACHMENT,Pt.RENDERBUFFER,e)):Pt.renderbufferStorage(Pt.RENDERBUFFER,Pt.RGBA4,t.width,t.height)}function vt(e){e instanceof THREE.WebGLRenderTargetCube?(Pt.bindTexture(Pt.TEXTURE_CUBE_MAP,e.__webglTexture),Pt.generateMipmap(Pt.TEXTURE_CUBE_MAP),Pt.bindTexture(Pt.TEXTURE_CUBE_MAP,null)):(Pt.bindTexture(Pt.TEXTURE_2D,e.__webglTexture),Pt.generateMipmap(Pt.TEXTURE_2D),Pt.bindTexture(Pt.TEXTURE_2D,null))}function yt(e){return e===THREE.NearestFilter||e===THREE.NearestMipMapNearestFilter||e===THREE.NearestMipMapLinearFilter?Pt.NEAREST:Pt.LINEAR}function xt(e){if(e===THREE.RepeatWrapping)return Pt.REPEAT;if(e===THREE.ClampToEdgeWrapping)return Pt.CLAMP_TO_EDGE;if(e===THREE.MirroredRepeatWrapping)return Pt.MIRRORED_REPEAT;if(e===THREE.NearestFilter)return Pt.NEAREST;if(e===THREE.NearestMipMapNearestFilter)return Pt.NEAREST_MIPMAP_NEAREST;if(e===THREE.NearestMipMapLinearFilter)return Pt.NEAREST_MIPMAP_LINEAR;if(e===THREE.LinearFilter)return Pt.LINEAR;if(e===THREE.LinearMipMapNearestFilter)return Pt.LINEAR_MIPMAP_NEAREST;if(e===THREE.LinearMipMapLinearFilter)return Pt.LINEAR_MIPMAP_LINEAR;if(e===THREE.UnsignedByteType)return Pt.UNSIGNED_BYTE;if(e===THREE.UnsignedShort4444Type)return Pt.UNSIGNED_SHORT_4_4_4_4;if(e===THREE.UnsignedShort5551Type)return Pt.UNSIGNED_SHORT_5_5_5_1;if(e===THREE.UnsignedShort565Type)return Pt.UNSIGNED_SHORT_5_6_5;if(e===THREE.ByteType)return Pt.BYTE;if(e===THREE.ShortType)return Pt.SHORT;if(e===THREE.UnsignedShortType)return Pt.UNSIGNED_SHORT;if(e===THREE.IntType)return Pt.INT;if(e===THREE.UnsignedIntType)return Pt.UNSIGNED_INT;if(e===THREE.FloatType)return Pt.FLOAT;if(e===THREE.AlphaFormat)return Pt.ALPHA;if(e===THREE.RGBFormat)return Pt.RGB;if(e===THREE.RGBAFormat)return Pt.RGBA;if(e===THREE.LuminanceFormat)return Pt.LUMINANCE;if(e===THREE.LuminanceAlphaFormat)return Pt.LUMINANCE_ALPHA;if(e===THREE.AddEquation)return Pt.FUNC_ADD;if(e===THREE.SubtractEquation)return Pt.FUNC_SUBTRACT;if(e===THREE.ReverseSubtractEquation)return Pt.FUNC_REVERSE_SUBTRACT;if(e===THREE.ZeroFactor)return Pt.ZERO;if(e===THREE.OneFactor)return Pt.ONE;if(e===THREE.SrcColorFactor)return Pt.SRC_COLOR;if(e===THREE.OneMinusSrcColorFactor)return Pt.ONE_MINUS_SRC_COLOR;if(e===THREE.SrcAlphaFactor)return Pt.SRC_ALPHA;if(e===THREE.OneMinusSrcAlphaFactor)return Pt.ONE_MINUS_SRC_ALPHA;if(e===THREE.DstAlphaFactor)return Pt.DST_ALPHA;if(e===THREE.OneMinusDstAlphaFactor)return Pt.ONE_MINUS_DST_ALPHA;if(e===THREE.DstColorFactor)return Pt.DST_COLOR;if(e===THREE.OneMinusDstColorFactor)return Pt.ONE_MINUS_DST_COLOR;if(e===THREE.SrcAlphaSaturateFactor)return Pt.SRC_ALPHA_SATURATE;if(void 0!==Nt){if(e===THREE.RGB_S3TC_DXT1_Format)return Nt.COMPRESSED_RGB_S3TC_DXT1_EXT;if(e===THREE.RGBA_S3TC_DXT1_Format)return Nt.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(e===THREE.RGBA_S3TC_DXT3_Format)return Nt.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(e===THREE.RGBA_S3TC_DXT5_Format)return Nt.COMPRESSED_RGBA_S3TC_DXT5_EXT}return 0}function Tt(e){if(Si&&e&&e.useVertexTexture)return 1024;var t=Pt.getParameter(Pt.MAX_VERTEX_UNIFORM_VECTORS),i=Math.floor((t-20)/4),r=i;return void 0!==e&&e instanceof THREE.SkinnedMesh&&(r=Math.min(e.bones.length,r),r<e.bones.length&&console.warn("WebGLRenderer: too many bones - "+e.bones.length+", this GPU supports just "+r+" (try OpenGL instead of ANGLE)")),r}function wt(e){for(var t=0,i=0,r=0,n=0,o=0,s=e.length;s>o;o++){var a=e[o];a.onlyShadow||(a instanceof THREE.DirectionalLight&&t++,a instanceof THREE.PointLight&&i++,a instanceof THREE.SpotLight&&r++,a instanceof THREE.HemisphereLight&&n++)}return{directional:t,point:i,spot:r,hemi:n}}function At(e){for(var t=0,i=0,r=e.length;r>i;i++){var n=e[i];n.castShadow&&(n instanceof THREE.SpotLight&&t++,n instanceof THREE.DirectionalLight&&!n.shadowCascade&&t++)}return t}function Rt(){try{var e={alpha:Ht,premultipliedAlpha:Dt,antialias:Mt,stencil:Bt,preserveDrawingBuffer:Lt};if(Pt=bt||Ct.getContext("webgl",e)||Ct.getContext("experimental-webgl",e),null===Pt)throw"Error creating WebGL context."}catch(t){console.error(t)}$t=Pt.getExtension("OES_texture_float"),Ot=Pt.getExtension("OES_texture_float_linear"),It=Pt.getExtension("OES_standard_derivatives"),zt=Pt.getExtension("EXT_texture_filter_anisotropic")||Pt.getExtension("MOZ_EXT_texture_filter_anisotropic")||Pt.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),Nt=Pt.getExtension("WEBGL_compressed_texture_s3tc")||Pt.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||Pt.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc"),$t||console.log("THREE.WebGLRenderer: Float textures not supported."),It||console.log("THREE.WebGLRenderer: Standard derivatives not supported."),zt||console.log("THREE.WebGLRenderer: Anisotropic texture filtering not supported."),Nt||console.log("THREE.WebGLRenderer: S3TC compressed textures not supported."),void 0===Pt.getShaderPrecisionFormat&&(Pt.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}function _t(){Pt.clearColor(0,0,0,1),Pt.clearDepth(1),Pt.clearStencil(0),Pt.enable(Pt.DEPTH_TEST),Pt.depthFunc(Pt.LEQUAL),Pt.frontFace(Pt.CCW),Pt.cullFace(Pt.BACK),Pt.enable(Pt.CULL_FACE),Pt.enable(Pt.BLEND),Pt.blendEquation(Pt.FUNC_ADD),Pt.blendFunc(Pt.SRC_ALPHA,Pt.ONE_MINUS_SRC_ALPHA),Pt.viewport(ci,ui,di,fi),Pt.clearColor(kt.r,kt.g,kt.b,qt)}console.log("THREE.WebGLRenderer",THREE.REVISION),e=e||{};var Ct=void 0!==e.canvas?e.canvas:document.createElement("canvas"),bt=void 0!==e.context?e.context:null,Ft=void 0!==e.precision?e.precision:"highp",St={},Ht=void 0!==e.alpha?e.alpha:!1,Dt=void 0!==e.premultipliedAlpha?e.premultipliedAlpha:!0,Mt=void 0!==e.antialias?e.antialias:!1,Bt=void 0!==e.stencil?e.stencil:!0,Lt=void 0!==e.preserveDrawingBuffer?e.preserveDrawingBuffer:!1,kt=new THREE.Color(0),qt=0;this.domElement=Ct,this.context=null,this.devicePixelRatio=void 0!==e.devicePixelRatio?e.devicePixelRatio:void 0!==self.devicePixelRatio?self.devicePixelRatio:1,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.autoUpdateObjects=!0,this.gammaInput=!1,this.gammaOutput=!1,this.shadowMapEnabled=!1,this.shadowMapAutoUpdate=!0,this.shadowMapType=THREE.PCFShadowMap,this.shadowMapCullFace=THREE.CullFaceFront,this.shadowMapDebug=!1,this.shadowMapCascade=!1,this.maxMorphTargets=8,this.maxMorphNormals=4,this.autoScaleCubemaps=!0,this.renderPluginsPre=[],this.renderPluginsPost=[],this.info={memory:{programs:0,geometries:0,textures:0},render:{calls:0,vertices:0,faces:0,points:0}};var Pt,$t,Ot,It,zt,Nt,Vt=this,Ut=[],Wt=0,Gt=null,jt=null,Xt=-1,Yt=null,Kt=null,Zt=0,Qt=-1,Jt=-1,ei=-1,ti=-1,ii=-1,ri=-1,ni=-1,oi=-1,si=null,ai=null,li=null,hi=null,ci=0,ui=0,di=Ct.width,fi=Ct.height,mi=0,pi=0,gi=new Uint8Array(16),Ei=new THREE.Frustum,vi=new THREE.Matrix4,yi=new THREE.Matrix4,xi=new THREE.Vector3,Ti=new THREE.Vector3,wi=!0,Ai={ambient:[0,0,0],directional:{length:0,colors:new Array,positions:new Array},point:{length:0,colors:new Array,positions:new Array,distances:new Array},spot:{length:0,colors:new Array,positions:new Array,distances:new Array,directions:new Array,anglesCos:new Array,exponents:new Array},hemi:{length:0,skyColors:new Array,groundColors:new Array,positions:new Array}};Rt(),_t(),this.context=Pt;var Ri=Pt.getParameter(Pt.MAX_TEXTURE_IMAGE_UNITS),_i=Pt.getParameter(Pt.MAX_VERTEX_TEXTURE_IMAGE_UNITS),Ci=(Pt.getParameter(Pt.MAX_TEXTURE_SIZE),Pt.getParameter(Pt.MAX_CUBE_MAP_TEXTURE_SIZE)),bi=zt?Pt.getParameter(zt.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0,Fi=_i>0,Si=Fi&&$t,Hi=(Nt?Pt.getParameter(Pt.COMPRESSED_TEXTURE_FORMATS):[],Pt.getShaderPrecisionFormat(Pt.VERTEX_SHADER,Pt.HIGH_FLOAT)),Di=Pt.getShaderPrecisionFormat(Pt.VERTEX_SHADER,Pt.MEDIUM_FLOAT),Mi=(Pt.getShaderPrecisionFormat(Pt.VERTEX_SHADER,Pt.LOW_FLOAT),Pt.getShaderPrecisionFormat(Pt.FRAGMENT_SHADER,Pt.HIGH_FLOAT)),Bi=Pt.getShaderPrecisionFormat(Pt.FRAGMENT_SHADER,Pt.MEDIUM_FLOAT),Li=(Pt.getShaderPrecisionFormat(Pt.FRAGMENT_SHADER,Pt.LOW_FLOAT),Pt.getShaderPrecisionFormat(Pt.VERTEX_SHADER,Pt.HIGH_INT),Pt.getShaderPrecisionFormat(Pt.VERTEX_SHADER,Pt.MEDIUM_INT),Pt.getShaderPrecisionFormat(Pt.VERTEX_SHADER,Pt.LOW_INT),Pt.getShaderPrecisionFormat(Pt.FRAGMENT_SHADER,Pt.HIGH_INT),Pt.getShaderPrecisionFormat(Pt.FRAGMENT_SHADER,Pt.MEDIUM_INT),Pt.getShaderPrecisionFormat(Pt.FRAGMENT_SHADER,Pt.LOW_INT),Hi.precision>0&&Mi.precision>0),ki=Di.precision>0&&Bi.precision>0;"highp"!==Ft||Li||(ki?(Ft="mediump",console.warn("WebGLRenderer: highp not supported, using mediump")):(Ft="lowp",console.warn("WebGLRenderer: highp and mediump not supported, using lowp"))),"mediump"!==Ft||ki||(Ft="lowp",console.warn("WebGLRenderer: mediump not supported, using lowp")),this.getContext=function(){return Pt},this.supportsVertexTextures=function(){return Fi},this.supportsFloatTextures=function(){return $t},this.supportsStandardDerivatives=function(){return It},this.supportsCompressedTextureS3TC=function(){return Nt},this.getMaxAnisotropy=function(){return bi},this.getPrecision=function(){return Ft},this.setSize=function(e,t,i){Ct.width=e*this.devicePixelRatio,Ct.height=t*this.devicePixelRatio,1!==this.devicePixelRatio&&i!==!1&&(Ct.style.width=e+"px",Ct.style.height=t+"px"),this.setViewport(0,0,e,t)},this.setViewport=function(e,t,i,r){ci=e*this.devicePixelRatio,ui=t*this.devicePixelRatio,di=i*this.devicePixelRatio,fi=r*this.devicePixelRatio,Pt.viewport(ci,ui,di,fi)},this.setScissor=function(e,t,i,r){Pt.scissor(e*this.devicePixelRatio,t*this.devicePixelRatio,i*this.devicePixelRatio,r*this.devicePixelRatio)},this.enableScissorTest=function(e){e?Pt.enable(Pt.SCISSOR_TEST):Pt.disable(Pt.SCISSOR_TEST)},this.setClearColor=function(e,t){kt.set(e),qt=void 0!==t?t:1,Pt.clearColor(kt.r,kt.g,kt.b,qt)},this.setClearColorHex=function(e,t){console.warn("DEPRECATED: .setClearColorHex() is being removed. Use .setClearColor() instead."),this.setClearColor(e,t)},this.getClearColor=function(){return kt},this.getClearAlpha=function(){return qt},this.clear=function(e,t,i){var r=0;(void 0===e||e)&&(r|=Pt.COLOR_BUFFER_BIT),(void 0===t||t)&&(r|=Pt.DEPTH_BUFFER_BIT),(void 0===i||i)&&(r|=Pt.STENCIL_BUFFER_BIT),Pt.clear(r)},this.clearColor=function(){Pt.clear(Pt.COLOR_BUFFER_BIT)},this.clearDepth=function(){Pt.clear(Pt.DEPTH_BUFFER_BIT)},this.clearStencil=function(){Pt.clear(Pt.STENCIL_BUFFER_BIT)},this.clearTarget=function(e,t,i,r){this.setRenderTarget(e),this.clear(t,i,r)},this.addPostPlugin=function(e){e.init(this),this.renderPluginsPost.push(e)},this.addPrePlugin=function(e){e.init(this),this.renderPluginsPre.push(e)},this.updateShadowMap=function(e,t){Gt=null,ei=-1,ni=-1,oi=-1,Yt=-1,Xt=-1,wi=!0,Qt=-1,Jt=-1,this.shadowMapPlugin.update(e,t)};var qi=function(e){var t=e.target;t.removeEventListener("dispose",qi),zi(t)},Pi=function(e){var t=e.target;t.removeEventListener("dispose",Pi),Ni(t),Vt.info.memory.textures--},$i=function(e){var t=e.target;t.removeEventListener("dispose",$i),Vi(t),Vt.info.memory.textures--},Oi=function(e){var t=e.target;t.removeEventListener("dispose",Oi),Ui(t)},Ii=function(e){if(void 0!==e.__webglVertexBuffer&&Pt.deleteBuffer(e.__webglVertexBuffer),void 0!==e.__webglNormalBuffer&&Pt.deleteBuffer(e.__webglNormalBuffer),void 0!==e.__webglTangentBuffer&&Pt.deleteBuffer(e.__webglTangentBuffer),void 0!==e.__webglColorBuffer&&Pt.deleteBuffer(e.__webglColorBuffer),void 0!==e.__webglUVBuffer&&Pt.deleteBuffer(e.__webglUVBuffer),void 0!==e.__webglUV2Buffer&&Pt.deleteBuffer(e.__webglUV2Buffer),void 0!==e.__webglSkinIndicesBuffer&&Pt.deleteBuffer(e.__webglSkinIndicesBuffer),void 0!==e.__webglSkinWeightsBuffer&&Pt.deleteBuffer(e.__webglSkinWeightsBuffer),void 0!==e.__webglFaceBuffer&&Pt.deleteBuffer(e.__webglFaceBuffer),void 0!==e.__webglLineBuffer&&Pt.deleteBuffer(e.__webglLineBuffer),void 0!==e.__webglLineDistanceBuffer&&Pt.deleteBuffer(e.__webglLineDistanceBuffer),void 0!==e.__webglCustomAttributesList)for(var t in e.__webglCustomAttributesList)Pt.deleteBuffer(e.__webglCustomAttributesList[t].buffer);Vt.info.memory.geometries--},zi=function(e){if(e.__webglInit=void 0,e instanceof THREE.BufferGeometry){var t=e.attributes;for(var i in t)void 0!==t[i].buffer&&Pt.deleteBuffer(t[i].buffer);Vt.info.memory.geometries--}if(e instanceof THREE.Geometry2)delete St[e.id],Vt.info.memory.geometries--;else if(void 0!==e.geometryGroups)for(var r in e.geometryGroups){var n=e.geometryGroups[r];if(void 0!==n.numMorphTargets)for(var o=0,s=n.numMorphTargets;s>o;o++)Pt.deleteBuffer(n.__webglMorphTargetsBuffers[o]);if(void 0!==n.numMorphNormals)for(var o=0,s=n.numMorphNormals;s>o;o++)Pt.deleteBuffer(n.__webglMorphNormalsBuffers[o]);Ii(n)}else Ii(e)},Ni=function(e){if(e.image&&e.image.__webglTextureCube)Pt.deleteTexture(e.image.__webglTextureCube);else{if(!e.__webglInit)return;e.__webglInit=!1,Pt.deleteTexture(e.__webglTexture)}},Vi=function(e){if(e&&e.__webglTexture)if(Pt.deleteTexture(e.__webglTexture),e instanceof THREE.WebGLRenderTargetCube)for(var t=0;6>t;t++)Pt.deleteFramebuffer(e.__webglFramebuffer[t]),Pt.deleteRenderbuffer(e.__webglRenderbuffer[t]);else Pt.deleteFramebuffer(e.__webglFramebuffer),Pt.deleteRenderbuffer(e.__webglRenderbuffer)},Ui=function(e){var t=e.program;if(void 0!==t){e.program=void 0;var i,r,n,o=!1;for(i=0,r=Ut.length;r>i;i++)if(n=Ut[i],n.program===t){n.usedTimes--,0===n.usedTimes&&(o=!0);break}if(o===!0){var s=[];for(i=0,r=Ut.length;r>i;i++)n=Ut[i],n.program!==t&&s.push(n);Ut=s,Pt.deleteProgram(t),Vt.info.memory.programs--}}};this.renderBufferImmediate=function(e,t,i){if(e.hasPositions&&!e.__webglVertexBuffer&&(e.__webglVertexBuffer=Pt.createBuffer()),e.hasNormals&&!e.__webglNormalBuffer&&(e.__webglNormalBuffer=Pt.createBuffer()),e.hasUvs&&!e.__webglUvBuffer&&(e.__webglUvBuffer=Pt.createBuffer()),e.hasColors&&!e.__webglColorBuffer&&(e.__webglColorBuffer=Pt.createBuffer()),e.hasPositions&&(Pt.bindBuffer(Pt.ARRAY_BUFFER,e.__webglVertexBuffer),Pt.bufferData(Pt.ARRAY_BUFFER,e.positionArray,Pt.DYNAMIC_DRAW),Pt.enableVertexAttribArray(t.attributes.position),Pt.vertexAttribPointer(t.attributes.position,3,Pt.FLOAT,!1,0,0)),e.hasNormals){if(Pt.bindBuffer(Pt.ARRAY_BUFFER,e.__webglNormalBuffer),i.shading===THREE.FlatShading){var r,n,o,s,a,l,h,c,u,d,f,m,p,g,E=3*e.count;for(g=0;E>g;g+=9)p=e.normalArray,s=p[g],h=p[g+1],d=p[g+2],a=p[g+3],c=p[g+4],f=p[g+5],l=p[g+6],u=p[g+7],m=p[g+8],r=(s+a+l)/3,n=(h+c+u)/3,o=(d+f+m)/3,p[g]=r,p[g+1]=n,p[g+2]=o,p[g+3]=r,p[g+4]=n,p[g+5]=o,p[g+6]=r,p[g+7]=n,p[g+8]=o}Pt.bufferData(Pt.ARRAY_BUFFER,e.normalArray,Pt.DYNAMIC_DRAW),Pt.enableVertexAttribArray(t.attributes.normal),Pt.vertexAttribPointer(t.attributes.normal,3,Pt.FLOAT,!1,0,0)}e.hasUvs&&i.map&&(Pt.bindBuffer(Pt.ARRAY_BUFFER,e.__webglUvBuffer),Pt.bufferData(Pt.ARRAY_BUFFER,e.uvArray,Pt.DYNAMIC_DRAW),Pt.enableVertexAttribArray(t.attributes.uv),Pt.vertexAttribPointer(t.attributes.uv,2,Pt.FLOAT,!1,0,0)),e.hasColors&&i.vertexColors!==THREE.NoColors&&(Pt.bindBuffer(Pt.ARRAY_BUFFER,e.__webglColorBuffer),Pt.bufferData(Pt.ARRAY_BUFFER,e.colorArray,Pt.DYNAMIC_DRAW),Pt.enableVertexAttribArray(t.attributes.color),Pt.vertexAttribPointer(t.attributes.color,3,Pt.FLOAT,!1,0,0)),Pt.drawArrays(Pt.TRIANGLES,0,e.count),e.count=0},this.renderBufferGeometry2=function(e,t,i,r,n,o){var s=z(e,t,i,r,o),a=s.attributes,l={position:"vertices",normal:"normals",uv:"uvs"},h={position:3,normal:3,uv:2},c=St[n.id];w();for(var u in a){var d=a[u];if(d>=0){var f=n[l[u]];void 0!==f&&f.length>0?(Pt.bindBuffer(Pt.ARRAY_BUFFER,c[l[u]]),T(d),Pt.vertexAttribPointer(d,h[u],Pt.FLOAT,!1,0,0)):3===h[u]?Pt.vertexAttrib3fv(d,[0,0,0]):2===h[u]&&Pt.vertexAttrib2fv(d,[0,0])}}Pt.drawArrays(Pt.TRIANGLES,0,n.vertices.length/3)},this.renderBufferDirect=function(e,t,i,r,n,o){if(r.visible!==!1){var s,a,l,h,c=z(e,t,i,r,o),u=c.attributes,d=n.attributes,f=!1,m=r.wireframe?1:0,p=16777215*n.id+2*c.id+m;if(p!==Yt&&(Yt=p,f=!0),f&&w(),o instanceof THREE.Mesh){var g=d.index;if(g){var E=n.offsets;E.length>1&&(f=!0);for(var y=0,x=E.length;x>y;y++){var A=E[y].index;if(f){for(a in u)l=u[a],s=d[a],l>=0&&(s?(h=s.itemSize,Pt.bindBuffer(Pt.ARRAY_BUFFER,s.buffer),T(l),Pt.vertexAttribPointer(l,h,Pt.FLOAT,!1,0,A*h*4)):r.defaultAttributeValues&&(2===r.defaultAttributeValues[a].length?Pt.vertexAttrib2fv(l,r.defaultAttributeValues[a]):3===r.defaultAttributeValues[a].length&&Pt.vertexAttrib3fv(l,r.defaultAttributeValues[a])));Pt.bindBuffer(Pt.ELEMENT_ARRAY_BUFFER,g.buffer)}Pt.drawElements(Pt.TRIANGLES,E[y].count,Pt.UNSIGNED_SHORT,2*E[y].start),Vt.info.render.calls++,Vt.info.render.vertices+=E[y].count,Vt.info.render.faces+=E[y].count/3}}else{if(f)for(a in u)"index"!==a&&(l=u[a],s=d[a],l>=0&&(s?(h=s.itemSize,Pt.bindBuffer(Pt.ARRAY_BUFFER,s.buffer),T(l),Pt.vertexAttribPointer(l,h,Pt.FLOAT,!1,0,0)):r.defaultAttributeValues&&r.defaultAttributeValues[a]&&(2===r.defaultAttributeValues[a].length?Pt.vertexAttrib2fv(l,r.defaultAttributeValues[a]):3===r.defaultAttributeValues[a].length&&Pt.vertexAttrib3fv(l,r.defaultAttributeValues[a]))));var R=n.attributes.position;Pt.drawArrays(Pt.TRIANGLES,0,R.array.length/3),Vt.info.render.calls++,Vt.info.render.vertices+=R.array.length/3,Vt.info.render.faces+=R.array.length/3/3}}else if(o instanceof THREE.ParticleSystem){if(f)for(a in u)l=u[a],s=d[a],l>=0&&(s?(h=s.itemSize,Pt.bindBuffer(Pt.ARRAY_BUFFER,s.buffer),T(l),Pt.vertexAttribPointer(l,h,Pt.FLOAT,!1,0,0)):r.defaultAttributeValues&&r.defaultAttributeValues[a]&&(2===r.defaultAttributeValues[a].length?Pt.vertexAttrib2fv(l,r.defaultAttributeValues[a]):3===r.defaultAttributeValues[a].length&&Pt.vertexAttrib3fv(l,r.defaultAttributeValues[a])));var R=d.position;Pt.drawArrays(Pt.POINTS,0,R.array.length/3),Vt.info.render.calls++,Vt.info.render.points+=R.array.length/3}else if(o instanceof THREE.Line){var _=o.type===THREE.LineStrip?Pt.LINE_STRIP:Pt.LINES;nt(r.linewidth);var g=d.index;if(g){var E=n.offsets;E.length>1&&(f=!0);for(var y=0,x=E.length;x>y;y++){var A=E[y].index;f&&(v(r,u,d,A),Pt.bindBuffer(Pt.ELEMENT_ARRAY_BUFFER,g.buffer)),Pt.drawElements(Pt.LINES,E[y].count,Pt.UNSIGNED_SHORT,2*E[y].start),Vt.info.render.calls++,Vt.info.render.vertices+=E[y].count}}else{f&&v(r,u,d,0);var R=d.position;Pt.drawArrays(_,0,R.array.length/3),Vt.info.render.calls++,Vt.info.render.points+=R.array.length}}}},this.renderBuffer=function(e,t,i,r,n,o){if(r.visible!==!1){var s,a,l,h=z(e,t,i,r,o),c=h.attributes,u=!1,d=r.wireframe?1:0,f=16777215*n.id+2*h.id+d;if(f!==Yt&&(Yt=f,u=!0),u&&w(),!r.morphTargets&&c.position>=0?u&&(Pt.bindBuffer(Pt.ARRAY_BUFFER,n.__webglVertexBuffer),T(c.position),Pt.vertexAttribPointer(c.position,3,Pt.FLOAT,!1,0,0)):o.morphTargetBase&&A(r,n,o),u){if(n.__webglCustomAttributesList)for(a=0,l=n.__webglCustomAttributesList.length;l>a;a++)s=n.__webglCustomAttributesList[a],c[s.buffer.belongsToAttribute]>=0&&(Pt.bindBuffer(Pt.ARRAY_BUFFER,s.buffer),T(c[s.buffer.belongsToAttribute]),Pt.vertexAttribPointer(c[s.buffer.belongsToAttribute],s.size,Pt.FLOAT,!1,0,0));c.color>=0&&(o.geometry.colors.length>0||o.geometry.faces.length>0?(Pt.bindBuffer(Pt.ARRAY_BUFFER,n.__webglColorBuffer),T(c.color),Pt.vertexAttribPointer(c.color,3,Pt.FLOAT,!1,0,0)):r.defaultAttributeValues&&Pt.vertexAttrib3fv(c.color,r.defaultAttributeValues.color)),c.normal>=0&&(Pt.bindBuffer(Pt.ARRAY_BUFFER,n.__webglNormalBuffer),T(c.normal),Pt.vertexAttribPointer(c.normal,3,Pt.FLOAT,!1,0,0)),c.tangent>=0&&(Pt.bindBuffer(Pt.ARRAY_BUFFER,n.__webglTangentBuffer),T(c.tangent),Pt.vertexAttribPointer(c.tangent,4,Pt.FLOAT,!1,0,0)),c.uv>=0&&(o.geometry.faceVertexUvs[0]?(Pt.bindBuffer(Pt.ARRAY_BUFFER,n.__webglUVBuffer),T(c.uv),Pt.vertexAttribPointer(c.uv,2,Pt.FLOAT,!1,0,0)):r.defaultAttributeValues&&Pt.vertexAttrib2fv(c.uv,r.defaultAttributeValues.uv)),c.uv2>=0&&(o.geometry.faceVertexUvs[1]?(Pt.bindBuffer(Pt.ARRAY_BUFFER,n.__webglUV2Buffer),T(c.uv2),Pt.vertexAttribPointer(c.uv2,2,Pt.FLOAT,!1,0,0)):r.defaultAttributeValues&&Pt.vertexAttrib2fv(c.uv2,r.defaultAttributeValues.uv2)),r.skinning&&c.skinIndex>=0&&c.skinWeight>=0&&(Pt.bindBuffer(Pt.ARRAY_BUFFER,n.__webglSkinIndicesBuffer),T(c.skinIndex),Pt.vertexAttribPointer(c.skinIndex,4,Pt.FLOAT,!1,0,0),Pt.bindBuffer(Pt.ARRAY_BUFFER,n.__webglSkinWeightsBuffer),T(c.skinWeight),Pt.vertexAttribPointer(c.skinWeight,4,Pt.FLOAT,!1,0,0)),c.lineDistance>=0&&(Pt.bindBuffer(Pt.ARRAY_BUFFER,n.__webglLineDistanceBuffer),T(c.lineDistance),Pt.vertexAttribPointer(c.lineDistance,1,Pt.FLOAT,!1,0,0))}if(o instanceof THREE.Mesh)r.wireframe?(nt(r.wireframeLinewidth),u&&Pt.bindBuffer(Pt.ELEMENT_ARRAY_BUFFER,n.__webglLineBuffer),Pt.drawElements(Pt.LINES,n.__webglLineCount,Pt.UNSIGNED_SHORT,0)):(u&&Pt.bindBuffer(Pt.ELEMENT_ARRAY_BUFFER,n.__webglFaceBuffer),Pt.drawElements(Pt.TRIANGLES,n.__webglFaceCount,Pt.UNSIGNED_SHORT,0)),Vt.info.render.calls++,Vt.info.render.vertices+=n.__webglFaceCount,Vt.info.render.faces+=n.__webglFaceCount/3;else if(o instanceof THREE.Line){var m=o.type===THREE.LineStrip?Pt.LINE_STRIP:Pt.LINES;nt(r.linewidth),Pt.drawArrays(m,0,n.__webglLineCount),Vt.info.render.calls++}else o instanceof THREE.ParticleSystem&&(Pt.drawArrays(Pt.POINTS,0,n.__webglParticleCount),Vt.info.render.calls++,Vt.info.render.points+=n.__webglParticleCount)}},this.render=function(e,t,i,r){if(t instanceof THREE.Camera==!1)return console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera."),void 0;var n,o,s,a,l,h=e.__lights,c=e.fog;for(Xt=-1,wi=!0,e.autoUpdate===!0&&e.updateMatrixWorld(),void 0===t.parent&&t.updateMatrixWorld(),t.matrixWorldInverse.getInverse(t.matrixWorld),vi.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),Ei.setFromMatrix(vi),this.autoUpdateObjects&&this.initWebGLObjects(e),C(this.renderPluginsPre,e,t),Vt.info.render.calls=0,Vt.info.render.vertices=0,Vt.info.render.faces=0,Vt.info.render.points=0,this.setRenderTarget(i),(this.autoClear||r)&&this.clear(this.autoClearColor,this.autoClearDepth,this.autoClearStencil),l=e.__webglObjects,n=0,o=l.length;o>n;n++)s=l[n],a=s.object,s.id=n,s.render=!1,a.visible&&((a instanceof THREE.Mesh||a instanceof THREE.ParticleSystem)&&a.frustumCulled&&!Ei.intersectsObject(a)||(et(a,t),H(s),s.render=!0,this.sortObjects===!0&&(null!==a.renderDepth?s.z=a.renderDepth:(xi.setFromMatrixPosition(a.matrixWorld),xi.applyProjection(vi),s.z=xi.z))));for(this.sortObjects&&l.sort(R),l=e.__webglObjectsImmediate,n=0,o=l.length;o>n;n++)s=l[n],a=s.object,a.visible&&(et(a,t),S(s));if(e.overrideMaterial){var u=e.overrideMaterial;this.setBlending(u.blending,u.blendEquation,u.blendSrc,u.blendDst),this.setDepthTest(u.depthTest),this.setDepthWrite(u.depthWrite),ot(u.polygonOffset,u.polygonOffsetFactor,u.polygonOffsetUnits),b(e.__webglObjects,!1,"",t,h,c,!0,u),F(e.__webglObjectsImmediate,"",t,h,c,!1,u)}else{var u=null;this.setBlending(THREE.NoBlending),b(e.__webglObjects,!0,"opaque",t,h,c,!1,u),F(e.__webglObjectsImmediate,"opaque",t,h,c,!1,u),b(e.__webglObjects,!1,"transparent",t,h,c,!0,u),F(e.__webglObjectsImmediate,"transparent",t,h,c,!0,u)}C(this.renderPluginsPost,e,t),i&&i.generateMipmaps&&i.minFilter!==THREE.NearestFilter&&i.minFilter!==THREE.LinearFilter&&vt(i),this.setDepthTest(!0),this.setDepthWrite(!0)},this.renderImmediateObject=function(e,t,i,r,n){var o=z(e,t,i,r,n);Yt=-1,Vt.setMaterialFaces(r),n.immediateRenderCallback?n.immediateRenderCallback(o,Pt,Ei):n.render(function(e){Vt.renderBufferImmediate(e,o,r)})},this.initWebGLObjects=function(e){for(e.__webglObjects||(e.__webglObjects=[],e.__webglObjectsImmediate=[],e.__webglSprites=[],e.__webglFlares=[]);e.__objectsAdded.length;)D(e.__objectsAdded[0],e),e.__objectsAdded.splice(0,1);for(;e.__objectsRemoved.length;)P(e.__objectsRemoved[0],e),e.__objectsRemoved.splice(0,1);for(var t=0,i=e.__webglObjects.length;i>t;t++){var r=e.__webglObjects[t].object;void 0===r.__webglInit&&(void 0!==r.__webglActive&&P(r,e),D(r,e)),L(r)}},this.initMaterial=function(e,t,i,r){e.addEventListener("dispose",Oi);var n,o,s,a,l,h,c;e instanceof THREE.MeshDepthMaterial?c="depth":e instanceof THREE.MeshNormalMaterial?c="normal":e instanceof THREE.MeshBasicMaterial?c="basic":e instanceof THREE.MeshLambertMaterial?c="lambert":e instanceof THREE.MeshPhongMaterial?c="phong":e instanceof THREE.LineBasicMaterial?c="basic":e instanceof THREE.LineDashedMaterial?c="dashed":e instanceof THREE.ParticleSystemMaterial&&(c="particle_basic"),c&&I(e,THREE.ShaderLib[c]),a=wt(t),h=At(t),l=Tt(r),s={map:!!e.map,envMap:!!e.envMap,lightMap:!!e.lightMap,bumpMap:!!e.bumpMap,normalMap:!!e.normalMap,specularMap:!!e.specularMap,vertexColors:e.vertexColors,fog:i,useFog:e.fog,fogExp:i instanceof THREE.FogExp2,sizeAttenuation:e.sizeAttenuation,skinning:e.skinning,maxBones:l,useVertexTexture:Si&&r&&r.useVertexTexture,morphTargets:e.morphTargets,morphNormals:e.morphNormals,maxMorphTargets:this.maxMorphTargets,maxMorphNormals:this.maxMorphNormals,maxDirLights:a.directional,maxPointLights:a.point,maxSpotLights:a.spot,maxHemiLights:a.hemi,maxShadows:h,shadowMapEnabled:this.shadowMapEnabled&&r.receiveShadow,shadowMapType:this.shadowMapType,shadowMapDebug:this.shadowMapDebug,shadowMapCascade:this.shadowMapCascade,alphaTest:e.alphaTest,metal:e.metal,wrapAround:e.wrapAround,doubleSided:e.side===THREE.DoubleSide,flipSided:e.side===THREE.BackSide},e.program=at(c,e.fragmentShader,e.vertexShader,e.uniforms,e.attributes,e.defines,s,e.index0AttributeName);var u=e.program.attributes;if(e.morphTargets){e.numSupportedMorphTargets=0;var d,f="morphTarget";for(o=0;o<this.maxMorphTargets;o++)d=f+o,u[d]>=0&&e.numSupportedMorphTargets++}if(e.morphNormals){e.numSupportedMorphNormals=0;var d,f="morphNormal";for(o=0;o<this.maxMorphNormals;o++)d=f+o,u[d]>=0&&e.numSupportedMorphNormals++}e.uniformsList=[];for(n in e.uniforms)e.uniformsList.push([e.uniforms[n],n])},this.setFaceCulling=function(e,t){e===THREE.CullFaceNone?Pt.disable(Pt.CULL_FACE):(t===THREE.FrontFaceDirectionCW?Pt.frontFace(Pt.CW):Pt.frontFace(Pt.CCW),e===THREE.CullFaceBack?Pt.cullFace(Pt.BACK):e===THREE.CullFaceFront?Pt.cullFace(Pt.FRONT):Pt.cullFace(Pt.FRONT_AND_BACK),Pt.enable(Pt.CULL_FACE))},this.setMaterialFaces=function(e){var t=e.side===THREE.DoubleSide,i=e.side===THREE.BackSide;Qt!==t&&(t?Pt.disable(Pt.CULL_FACE):Pt.enable(Pt.CULL_FACE),Qt=t),Jt!==i&&(i?Pt.frontFace(Pt.CW):Pt.frontFace(Pt.CCW),Jt=i)},this.setDepthTest=function(e){ni!==e&&(e?Pt.enable(Pt.DEPTH_TEST):Pt.disable(Pt.DEPTH_TEST),ni=e)},this.setDepthWrite=function(e){oi!==e&&(Pt.depthMask(e),oi=e)},this.setBlending=function(e,t,i,r){e!==ei&&(e===THREE.NoBlending?Pt.disable(Pt.BLEND):e===THREE.AdditiveBlending?(Pt.enable(Pt.BLEND),Pt.blendEquation(Pt.FUNC_ADD),Pt.blendFunc(Pt.SRC_ALPHA,Pt.ONE)):e===THREE.SubtractiveBlending?(Pt.enable(Pt.BLEND),Pt.blendEquation(Pt.FUNC_ADD),Pt.blendFunc(Pt.ZERO,Pt.ONE_MINUS_SRC_COLOR)):e===THREE.MultiplyBlending?(Pt.enable(Pt.BLEND),Pt.blendEquation(Pt.FUNC_ADD),Pt.blendFunc(Pt.ZERO,Pt.SRC_COLOR)):e===THREE.CustomBlending?Pt.enable(Pt.BLEND):(Pt.enable(Pt.BLEND),Pt.blendEquationSeparate(Pt.FUNC_ADD,Pt.FUNC_ADD),Pt.blendFuncSeparate(Pt.SRC_ALPHA,Pt.ONE_MINUS_SRC_ALPHA,Pt.ONE,Pt.ONE_MINUS_SRC_ALPHA)),ei=e),e===THREE.CustomBlending?(t!==ti&&(Pt.blendEquation(xt(t)),ti=t),(i!==ii||r!==ri)&&(Pt.blendFunc(xt(i),xt(r)),ii=i,ri=r)):(ti=null,ii=null,ri=null)},this.setTexture=function(e,t){if(e.needsUpdate){e.__webglInit||(e.__webglInit=!0,e.addEventListener("dispose",Pi),e.__webglTexture=Pt.createTexture(),Vt.info.memory.textures++),Pt.activeTexture(Pt.TEXTURE0+t),Pt.bindTexture(Pt.TEXTURE_2D,e.__webglTexture),Pt.pixelStorei(Pt.UNPACK_FLIP_Y_WEBGL,e.flipY),Pt.pixelStorei(Pt.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.premultiplyAlpha),Pt.pixelStorei(Pt.UNPACK_ALIGNMENT,e.unpackAlignment);var i=e.image,r=THREE.Math.isPowerOfTwo(i.width)&&THREE.Math.isPowerOfTwo(i.height),n=xt(e.format),o=xt(e.type);dt(Pt.TEXTURE_2D,e,r);var s,a=e.mipmaps;if(e instanceof THREE.DataTexture)if(a.length>0&&r){for(var l=0,h=a.length;h>l;l++)s=a[l],Pt.texImage2D(Pt.TEXTURE_2D,l,n,s.width,s.height,0,n,o,s.data);e.generateMipmaps=!1}else Pt.texImage2D(Pt.TEXTURE_2D,0,n,i.width,i.height,0,n,o,i.data);else if(e instanceof THREE.CompressedTexture)for(var l=0,h=a.length;h>l;l++)s=a[l],e.format!==THREE.RGBAFormat?Pt.compressedTexImage2D(Pt.TEXTURE_2D,l,n,s.width,s.height,0,s.data):Pt.texImage2D(Pt.TEXTURE_2D,l,n,s.width,s.height,0,n,o,s.data);else if(a.length>0&&r){for(var l=0,h=a.length;h>l;l++)s=a[l],Pt.texImage2D(Pt.TEXTURE_2D,l,n,n,o,s);e.generateMipmaps=!1}else Pt.texImage2D(Pt.TEXTURE_2D,0,n,n,o,e.image);e.generateMipmaps&&r&&Pt.generateMipmap(Pt.TEXTURE_2D),e.needsUpdate=!1,e.onUpdate&&e.onUpdate()}else Pt.activeTexture(Pt.TEXTURE0+t),Pt.bindTexture(Pt.TEXTURE_2D,e.__webglTexture)},this.setRenderTarget=function(e){var t=e instanceof THREE.WebGLRenderTargetCube;if(e&&!e.__webglFramebuffer){void 0===e.depthBuffer&&(e.depthBuffer=!0),void 0===e.stencilBuffer&&(e.stencilBuffer=!0),e.addEventListener("dispose",$i),e.__webglTexture=Pt.createTexture(),Vt.info.memory.textures++;var i=THREE.Math.isPowerOfTwo(e.width)&&THREE.Math.isPowerOfTwo(e.height),r=xt(e.format),n=xt(e.type);if(t){e.__webglFramebuffer=[],e.__webglRenderbuffer=[],Pt.bindTexture(Pt.TEXTURE_CUBE_MAP,e.__webglTexture),dt(Pt.TEXTURE_CUBE_MAP,e,i);for(var o=0;6>o;o++)e.__webglFramebuffer[o]=Pt.createFramebuffer(),e.__webglRenderbuffer[o]=Pt.createRenderbuffer(),Pt.texImage2D(Pt.TEXTURE_CUBE_MAP_POSITIVE_X+o,0,r,e.width,e.height,0,r,n,null),gt(e.__webglFramebuffer[o],e,Pt.TEXTURE_CUBE_MAP_POSITIVE_X+o),Et(e.__webglRenderbuffer[o],e);i&&Pt.generateMipmap(Pt.TEXTURE_CUBE_MAP)}else e.__webglFramebuffer=Pt.createFramebuffer(),e.__webglRenderbuffer=e.shareDepthFrom?e.shareDepthFrom.__webglRenderbuffer:Pt.createRenderbuffer(),Pt.bindTexture(Pt.TEXTURE_2D,e.__webglTexture),dt(Pt.TEXTURE_2D,e,i),Pt.texImage2D(Pt.TEXTURE_2D,0,r,e.width,e.height,0,r,n,null),gt(e.__webglFramebuffer,e,Pt.TEXTURE_2D),e.shareDepthFrom?e.depthBuffer&&!e.stencilBuffer?Pt.framebufferRenderbuffer(Pt.FRAMEBUFFER,Pt.DEPTH_ATTACHMENT,Pt.RENDERBUFFER,e.__webglRenderbuffer):e.depthBuffer&&e.stencilBuffer&&Pt.framebufferRenderbuffer(Pt.FRAMEBUFFER,Pt.DEPTH_STENCIL_ATTACHMENT,Pt.RENDERBUFFER,e.__webglRenderbuffer):Et(e.__webglRenderbuffer,e),i&&Pt.generateMipmap(Pt.TEXTURE_2D);t?Pt.bindTexture(Pt.TEXTURE_CUBE_MAP,null):Pt.bindTexture(Pt.TEXTURE_2D,null),Pt.bindRenderbuffer(Pt.RENDERBUFFER,null),Pt.bindFramebuffer(Pt.FRAMEBUFFER,null)}var s,a,l,h,c;e?(s=t?e.__webglFramebuffer[e.activeCubeFace]:e.__webglFramebuffer,a=e.width,l=e.height,h=0,c=0):(s=null,a=di,l=fi,h=ci,c=ui),s!==jt&&(Pt.bindFramebuffer(Pt.FRAMEBUFFER,s),Pt.viewport(h,c,a,l),jt=s),mi=a,pi=l},this.shadowMapPlugin=new THREE.ShadowMapPlugin,this.addPrePlugin(this.shadowMapPlugin),this.addPostPlugin(new THREE.SpritePlugin),this.addPostPlugin(new THREE.LensFlarePlugin)},THREE.WebGLRenderTarget=function(e,t,i){this.width=e,this.height=t,i=i||{},this.wrapS=void 0!==i.wrapS?i.wrapS:THREE.ClampToEdgeWrapping,this.wrapT=void 0!==i.wrapT?i.wrapT:THREE.ClampToEdgeWrapping,this.magFilter=void 0!==i.magFilter?i.magFilter:THREE.LinearFilter,this.minFilter=void 0!==i.minFilter?i.minFilter:THREE.LinearMipMapLinearFilter,this.anisotropy=void 0!==i.anisotropy?i.anisotropy:1,this.offset=new THREE.Vector2(0,0),this.repeat=new THREE.Vector2(1,1),this.format=void 0!==i.format?i.format:THREE.RGBAFormat,this.type=void 0!==i.type?i.type:THREE.UnsignedByteType,this.depthBuffer=void 0!==i.depthBuffer?i.depthBuffer:!0,this.stencilBuffer=void 0!==i.stencilBuffer?i.stencilBuffer:!0,this.generateMipmaps=!0,this.shareDepthFrom=null
},THREE.WebGLRenderTarget.prototype={constructor:THREE.WebGLRenderTarget,clone:function(){var e=new THREE.WebGLRenderTarget(this.width,this.height);return e.wrapS=this.wrapS,e.wrapT=this.wrapT,e.magFilter=this.magFilter,e.minFilter=this.minFilter,e.anisotropy=this.anisotropy,e.offset.copy(this.offset),e.repeat.copy(this.repeat),e.format=this.format,e.type=this.type,e.depthBuffer=this.depthBuffer,e.stencilBuffer=this.stencilBuffer,e.generateMipmaps=this.generateMipmaps,e.shareDepthFrom=this.shareDepthFrom,e},dispose:function(){this.dispatchEvent({type:"dispose"})}},THREE.EventDispatcher.prototype.apply(THREE.WebGLRenderTarget.prototype),THREE.WebGLRenderTargetCube=function(e,t,i){THREE.WebGLRenderTarget.call(this,e,t,i),this.activeCubeFace=0},THREE.WebGLRenderTargetCube.prototype=Object.create(THREE.WebGLRenderTarget.prototype),THREE.RenderableVertex=function(){this.position=new THREE.Vector3,this.positionWorld=new THREE.Vector3,this.positionScreen=new THREE.Vector4,this.visible=!0},THREE.RenderableVertex.prototype.copy=function(e){this.positionWorld.copy(e.positionWorld),this.positionScreen.copy(e.positionScreen)},THREE.RenderableFace=function(){this.id=0,this.v1=new THREE.RenderableVertex,this.v2=new THREE.RenderableVertex,this.v3=new THREE.RenderableVertex,this.centroidModel=new THREE.Vector3,this.normalModel=new THREE.Vector3,this.vertexNormalsModel=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3],this.vertexNormalsLength=0,this.color=null,this.material=null,this.uvs=[[]],this.z=0},THREE.RenderableObject=function(){this.id=0,this.object=null,this.z=0},THREE.RenderableSprite=function(){this.id=0,this.object=null,this.x=0,this.y=0,this.z=0,this.rotation=0,this.scale=new THREE.Vector2,this.material=null},THREE.RenderableLine=function(){this.id=0,this.v1=new THREE.RenderableVertex,this.v2=new THREE.RenderableVertex,this.vertexColors=[new THREE.Color,new THREE.Color],this.material=null,this.z=0},THREE.GeometryUtils={merge:function(e,t,i){var r,n,o=e.vertices.length,s=(e.faceVertexUvs[0].length,t instanceof THREE.Mesh?t.geometry:t),a=e.vertices,l=s.vertices,h=e.faces,c=s.faces,u=e.faceVertexUvs[0],d=s.faceVertexUvs[0];void 0===i&&(i=0),t instanceof THREE.Mesh&&(t.matrixAutoUpdate&&t.updateMatrix(),r=t.matrix,n=(new THREE.Matrix3).getNormalMatrix(r));for(var f=0,m=l.length;m>f;f++){var p=l[f],g=p.clone();r&&g.applyMatrix4(r),a.push(g)}for(f=0,m=c.length;m>f;f++){var E,v,y,x=c[f],T=x.vertexNormals,w=x.vertexColors;E=new THREE.Face3(x.a+o,x.b+o,x.c+o),E.normal.copy(x.normal),n&&E.normal.applyMatrix3(n).normalize();for(var A=0,R=T.length;R>A;A++)v=T[A].clone(),n&&v.applyMatrix3(n).normalize(),E.vertexNormals.push(v);E.color.copy(x.color);for(var A=0,R=w.length;R>A;A++)y=w[A],E.vertexColors.push(y.clone());E.materialIndex=x.materialIndex+i,E.centroid.copy(x.centroid),r&&E.centroid.applyMatrix4(r),h.push(E)}for(f=0,m=d.length;m>f;f++){for(var _=d[f],C=[],A=0,R=_.length;R>A;A++)C.push(new THREE.Vector2(_[A].x,_[A].y));u.push(C)}},randomPointInTriangle:function(){var e=new THREE.Vector3;return function(t,i,r){var n=new THREE.Vector3,o=THREE.Math.random16(),s=THREE.Math.random16();o+s>1&&(o=1-o,s=1-s);var a=1-o-s;return n.copy(t),n.multiplyScalar(o),e.copy(i),e.multiplyScalar(s),n.add(e),e.copy(r),e.multiplyScalar(a),n.add(e),n}}(),randomPointInFace:function(e,t){var i,r,n;return i=t.vertices[e.a],r=t.vertices[e.b],n=t.vertices[e.c],THREE.GeometryUtils.randomPointInTriangle(i,r,n)},randomPointsInGeometry:function(e,t){function i(e){function t(i,r){if(i>r)return i;var n=i+Math.floor((r-i)/2);return d[n]>e?t(i,n-1):d[n]<e?t(n+1,r):n}var i=t(0,d.length-1);return i}var r,n,o,s,a,l=e.faces,h=e.vertices,c=l.length,u=0,d=[];for(n=0;c>n;n++)r=l[n],o=h[r.a],s=h[r.b],a=h[r.c],r._area=THREE.GeometryUtils.triangleArea(o,s,a),u+=r._area,d[n]=u;var f,m,p=[],g={};for(n=0;t>n;n++)f=THREE.Math.random16()*u,m=i(f),p[n]=THREE.GeometryUtils.randomPointInFace(l[m],e,!0),g[m]?g[m]+=1:g[m]=1;return p},triangleArea:function(){var e=new THREE.Vector3,t=new THREE.Vector3;return function(i,r,n){return e.subVectors(r,i),t.subVectors(n,i),e.cross(t),.5*e.length()}}(),center:function(e){e.computeBoundingBox();var t=e.boundingBox,i=new THREE.Vector3;return i.addVectors(t.min,t.max),i.multiplyScalar(-.5),e.applyMatrix((new THREE.Matrix4).makeTranslation(i.x,i.y,i.z)),e.computeBoundingBox(),i},triangulateQuads:function(e){var t,i,r,n,o=[],s=[];for(t=0,i=e.faceVertexUvs.length;i>t;t++)s[t]=[];for(t=0,i=e.faces.length;i>t;t++){var a=e.faces[t];for(o.push(a),r=0,n=e.faceVertexUvs.length;n>r;r++)s[r].push(e.faceVertexUvs[r][t])}e.faces=o,e.faceVertexUvs=s,e.computeCentroids(),e.computeFaceNormals(),e.computeVertexNormals(),e.hasTangents&&e.computeTangents()}},THREE.ImageUtils={crossOrigin:void 0,loadTexture:function(e,t,i){var r=new THREE.ImageLoader;r.crossOrigin=this.crossOrigin;var n=new THREE.Texture(void 0,t),o=r.load(e,function(){n.needsUpdate=!0,i&&i(n)});return n.image=o,n.sourceFile=e,n},loadCompressedTexture:function(e,t,i,r){var n=new THREE.CompressedTexture;n.mapping=t;var o=new XMLHttpRequest;return o.onload=function(){var e=o.response,t=THREE.ImageUtils.parseDDS(e,!0);n.format=t.format,n.mipmaps=t.mipmaps,n.image.width=t.width,n.image.height=t.height,n.generateMipmaps=!1,n.needsUpdate=!0,i&&i(n)},o.onerror=r,o.open("GET",e,!0),o.responseType="arraybuffer",o.send(null),n},loadTextureCube:function(e,t,i,r){var n=[];n.loadCount=0;var o=new THREE.Texture;o.image=n,void 0!==t&&(o.mapping=t),o.flipY=!1;for(var s=0,a=e.length;a>s;++s){var l=new Image;n[s]=l,l.onload=function(){n.loadCount+=1,6===n.loadCount&&(o.needsUpdate=!0,i&&i(o))},l.onerror=r,l.crossOrigin=this.crossOrigin,l.src=e[s]}return o},loadCompressedTextureCube:function(e,t,i,r){var n=[];n.loadCount=0;var o=new THREE.CompressedTexture;o.image=n,void 0!==t&&(o.mapping=t),o.flipY=!1,o.generateMipmaps=!1;var s=function(e,t){return function(){var r=e.response,s=THREE.ImageUtils.parseDDS(r,!0);t.format=s.format,t.mipmaps=s.mipmaps,t.width=s.width,t.height=s.height,n.loadCount+=1,6===n.loadCount&&(o.format=s.format,o.needsUpdate=!0,i&&i(o))}};if(e instanceof Array)for(var a=0,l=e.length;l>a;++a){var h={};n[a]=h;var c=new XMLHttpRequest;c.onload=s(c,h),c.onerror=r;var u=e[a];c.open("GET",u,!0),c.responseType="arraybuffer",c.send(null)}else{var u=e,c=new XMLHttpRequest;c.onload=function(){var e=c.response,t=THREE.ImageUtils.parseDDS(e,!0);if(t.isCubemap){for(var r=t.mipmaps.length/t.mipmapCount,s=0;r>s;s++){n[s]={mipmaps:[]};for(var a=0;a<t.mipmapCount;a++)n[s].mipmaps.push(t.mipmaps[s*t.mipmapCount+a]),n[s].format=t.format,n[s].width=t.width,n[s].height=t.height}o.format=t.format,o.needsUpdate=!0,i&&i(o)}},c.onerror=r,c.open("GET",u,!0),c.responseType="arraybuffer",c.send(null)}return o},loadDDSTexture:function(e,t,i,r){var n=[];n.loadCount=0;var o=new THREE.CompressedTexture;o.image=n,void 0!==t&&(o.mapping=t),o.flipY=!1,o.generateMipmaps=!1;var s=new XMLHttpRequest;return s.onload=function(){var e=s.response,t=THREE.ImageUtils.parseDDS(e,!0);if(t.isCubemap)for(var r=t.mipmaps.length/t.mipmapCount,a=0;r>a;a++){n[a]={mipmaps:[]};for(var l=0;l<t.mipmapCount;l++)n[a].mipmaps.push(t.mipmaps[a*t.mipmapCount+l]),n[a].format=t.format,n[a].width=t.width,n[a].height=t.height}else o.image.width=t.width,o.image.height=t.height,o.mipmaps=t.mipmaps;o.format=t.format,o.needsUpdate=!0,i&&i(o)},s.onerror=r,s.open("GET",e,!0),s.responseType="arraybuffer",s.send(null),o},parseDDS:function(e,t){function i(e){return e.charCodeAt(0)+(e.charCodeAt(1)<<8)+(e.charCodeAt(2)<<16)+(e.charCodeAt(3)<<24)}function r(e){return String.fromCharCode(255&e,e>>8&255,e>>16&255,e>>24&255)}function n(e,t,i,r){for(var n=i*r*4,o=new Uint8Array(e,t,n),s=new Uint8Array(n),a=0,l=0,h=0;r>h;h++)for(var c=0;i>c;c++){var u=o[l];l++;var d=o[l];l++;var f=o[l];l++;var m=o[l];l++,s[a]=f,a++,s[a]=d,a++,s[a]=u,a++,s[a]=m,a++}return s}var o={mipmaps:[],width:0,height:0,format:null,mipmapCount:1},s=542327876,a=131072,l=512,h=4,c=i("DXT1"),u=i("DXT3"),d=i("DXT5"),f=31,m=0,p=1,g=2,E=3,v=4,y=7,x=20,T=21,w=22,A=23,R=24,_=25,C=26,b=28,F=new Int32Array(e,0,f);if(F[m]!==s)return console.error("ImageUtils.parseDDS(): Invalid magic number in DDS header"),o;if(!F[x]&h)return console.error("ImageUtils.parseDDS(): Unsupported format, must contain a FourCC code"),o;var S,H=F[T],D=!1;switch(H){case c:S=8,o.format=THREE.RGB_S3TC_DXT1_Format;break;case u:S=16,o.format=THREE.RGBA_S3TC_DXT3_Format;break;case d:S=16,o.format=THREE.RGBA_S3TC_DXT5_Format;break;default:if(!(32==F[w]&&16711680&F[A]&&65280&F[R]&&255&F[_]&&4278190080&F[C]))return console.error("ImageUtils.parseDDS(): Unsupported FourCC code: ",r(H)),o;D=!0,S=64,o.format=THREE.RGBAFormat}o.mipmapCount=1,F[g]&a&&t!==!1&&(o.mipmapCount=Math.max(1,F[y])),o.isCubemap=F[b]&l?!0:!1,o.width=F[v],o.height=F[E];for(var M=F[p]+4,B=o.width,L=o.height,k=o.isCubemap?6:1,q=0;k>q;q++){for(var P=0;P<o.mipmapCount;P++){if(D)var $=n(e,M,B,L),O=$.length;else var O=Math.max(4,B)/4*Math.max(4,L)/4*S,$=new Uint8Array(e,M,O);var I={data:$,width:B,height:L};o.mipmaps.push(I),M+=O,B=Math.max(.5*B,1),L=Math.max(.5*L,1)}B=o.width,L=o.height}return o},getNormalMap:function(e,t){var i=function(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]},r=function(e,t){return[e[0]-t[0],e[1]-t[1],e[2]-t[2]]},n=function(e){var t=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);return[e[0]/t,e[1]/t,e[2]/t]};t=1|t;var o=e.width,s=e.height,a=document.createElement("canvas");a.width=o,a.height=s;var l=a.getContext("2d");l.drawImage(e,0,0);for(var h=l.getImageData(0,0,o,s).data,c=l.createImageData(o,s),u=c.data,d=0;o>d;d++)for(var f=0;s>f;f++){var m=0>f-1?0:f-1,p=f+1>s-1?s-1:f+1,g=0>d-1?0:d-1,E=d+1>o-1?o-1:d+1,v=[],y=[0,0,h[4*(f*o+d)]/255*t];v.push([-1,0,h[4*(f*o+g)]/255*t]),v.push([-1,-1,h[4*(m*o+g)]/255*t]),v.push([0,-1,h[4*(m*o+d)]/255*t]),v.push([1,-1,h[4*(m*o+E)]/255*t]),v.push([1,0,h[4*(f*o+E)]/255*t]),v.push([1,1,h[4*(p*o+E)]/255*t]),v.push([0,1,h[4*(p*o+d)]/255*t]),v.push([-1,1,h[4*(p*o+g)]/255*t]);for(var x=[],T=v.length,w=0;T>w;w++){var A=v[w],R=v[(w+1)%T];A=r(A,y),R=r(R,y),x.push(n(i(A,R)))}for(var _=[0,0,0],w=0;w<x.length;w++)_[0]+=x[w][0],_[1]+=x[w][1],_[2]+=x[w][2];_[0]/=x.length,_[1]/=x.length,_[2]/=x.length;var C=4*(f*o+d);u[C]=(_[0]+1)/2*255|0,u[C+1]=(_[1]+1)/2*255|0,u[C+2]=255*_[2]|0,u[C+3]=255}return l.putImageData(c,0,0),a},generateDataTexture:function(e,t,i){for(var r=e*t,n=new Uint8Array(3*r),o=Math.floor(255*i.r),s=Math.floor(255*i.g),a=Math.floor(255*i.b),l=0;r>l;l++)n[3*l]=o,n[3*l+1]=s,n[3*l+2]=a;var h=new THREE.DataTexture(n,e,t,THREE.RGBFormat);return h.needsUpdate=!0,h}},THREE.SceneUtils={createMultiMaterialObject:function(e,t){for(var i=new THREE.Object3D,r=0,n=t.length;n>r;r++)i.add(new THREE.Mesh(e,t[r]));return i},detach:function(e,t,i){e.applyMatrix(t.matrixWorld),t.remove(e),i.add(e)},attach:function(e,t,i){var r=new THREE.Matrix4;r.getInverse(i.matrixWorld),e.applyMatrix(r),t.remove(e),i.add(e)}},THREE.FontUtils={faces:{},face:"helvetiker",weight:"normal",style:"normal",size:150,divisions:10,getFace:function(){return this.faces[this.face][this.weight][this.style]},loadFace:function(e){var t=e.familyName.toLowerCase(),i=this;i.faces[t]=i.faces[t]||{},i.faces[t][e.cssFontWeight]=i.faces[t][e.cssFontWeight]||{},i.faces[t][e.cssFontWeight][e.cssFontStyle]=e;i.faces[t][e.cssFontWeight][e.cssFontStyle]=e;return e},drawText:function(e){var t,i=this.getFace(),r=this.size/i.resolution,n=0,o=String(e).split(""),s=o.length,a=[];for(t=0;s>t;t++){var l=new THREE.Path,h=this.extractGlyphPoints(o[t],i,r,n,l);n+=h.offset,a.push(h.path)}var c=n/2;return{paths:a,offset:c}},extractGlyphPoints:function(e,t,i,r,n){var o,s,a,l,h,c,u,d,f,m,p,g,E,v,y,x,T,w,A,R=[],_=t.glyphs[e]||t.glyphs["?"];if(_){if(_.o)for(l=_._cachedOutline||(_._cachedOutline=_.o.split(" ")),c=l.length,u=i,d=i,o=0;c>o;)switch(h=l[o++]){case"m":f=l[o++]*u+r,m=l[o++]*d,n.moveTo(f,m);break;case"l":f=l[o++]*u+r,m=l[o++]*d,n.lineTo(f,m);break;case"q":if(p=l[o++]*u+r,g=l[o++]*d,y=l[o++]*u+r,x=l[o++]*d,n.quadraticCurveTo(y,x,p,g),A=R[R.length-1])for(E=A.x,v=A.y,s=1,a=this.divisions;a>=s;s++){var C=s/a;THREE.Shape.Utils.b2(C,E,y,p),THREE.Shape.Utils.b2(C,v,x,g)}break;case"b":if(p=l[o++]*u+r,g=l[o++]*d,y=l[o++]*u+r,x=l[o++]*-d,T=l[o++]*u+r,w=l[o++]*-d,n.bezierCurveTo(p,g,y,x,T,w),A=R[R.length-1])for(E=A.x,v=A.y,s=1,a=this.divisions;a>=s;s++){var C=s/a;THREE.Shape.Utils.b3(C,E,y,T,p),THREE.Shape.Utils.b3(C,v,x,w,g)}}return{offset:_.ha*i,path:n}}}},THREE.FontUtils.generateShapes=function(e,t){t=t||{};var i=void 0!==t.size?t.size:100,r=void 0!==t.curveSegments?t.curveSegments:4,n=void 0!==t.font?t.font:"helvetiker",o=void 0!==t.weight?t.weight:"normal",s=void 0!==t.style?t.style:"normal";THREE.FontUtils.size=i,THREE.FontUtils.divisions=r,THREE.FontUtils.face=n,THREE.FontUtils.weight=o,THREE.FontUtils.style=s;for(var a=THREE.FontUtils.drawText(e),l=a.paths,h=[],c=0,u=l.length;u>c;c++)Array.prototype.push.apply(h,l[c].toShapes());return h},function(e){var t=1e-10,i=function(e,t){var i=e.length;if(3>i)return null;var o,s,a,l=[],h=[],c=[];if(r(e)>0)for(s=0;i>s;s++)h[s]=s;else for(s=0;i>s;s++)h[s]=i-1-s;var u=i,d=2*u;for(s=u-1;u>2;){if(d--<=0)return console.log("Warning, unable to triangulate polygon!"),t?c:l;if(o=s,o>=u&&(o=0),s=o+1,s>=u&&(s=0),a=s+1,a>=u&&(a=0),n(e,o,s,a,u,h)){var f,m,p,g,E;for(f=h[o],m=h[s],p=h[a],l.push([e[f],e[m],e[p]]),c.push([h[o],h[s],h[a]]),g=s,E=s+1;u>E;g++,E++)h[g]=h[E];u--,d=2*u}}return t?c:l},r=function(e){for(var t=e.length,i=0,r=t-1,n=0;t>n;r=n++)i+=e[r].x*e[n].y-e[n].x*e[r].y;return.5*i},n=function(e,i,r,n,o,s){var a,l,h,c,u,d,f,m,p;if(l=e[s[i]].x,h=e[s[i]].y,c=e[s[r]].x,u=e[s[r]].y,d=e[s[n]].x,f=e[s[n]].y,t>(c-l)*(f-h)-(u-h)*(d-l))return!1;var g,E,v,y,x,T,w,A,R,_,C,b,F,S,H;for(g=d-c,E=f-u,v=l-d,y=h-f,x=c-l,T=u-h,a=0;o>a;a++)if(m=e[s[a]].x,p=e[s[a]].y,!(m===l&&p===h||m===c&&p===u||m===d&&p===f)&&(w=m-l,A=p-h,R=m-c,_=p-u,C=m-d,b=p-f,H=g*_-E*R,F=x*A-T*w,S=v*b-y*C,H>=-t&&S>=-t&&F>=-t))return!1;return!0};return e.Triangulate=i,e.Triangulate.area=r,e}(THREE.FontUtils),self._typeface_js={faces:THREE.FontUtils.faces,loadFace:THREE.FontUtils.loadFace},THREE.typeface_js=self._typeface_js,THREE.Curve=function(){},THREE.Curve.prototype.getPoint=function(){return console.log("Warning, getPoint() not implemented!"),null},THREE.Curve.prototype.getPointAt=function(e){var t=this.getUtoTmapping(e);return this.getPoint(t)},THREE.Curve.prototype.getPoints=function(e){e||(e=5);var t,i=[];for(t=0;e>=t;t++)i.push(this.getPoint(t/e));return i},THREE.Curve.prototype.getSpacedPoints=function(e){e||(e=5);var t,i=[];for(t=0;e>=t;t++)i.push(this.getPointAt(t/e));return i},THREE.Curve.prototype.getLength=function(){var e=this.getLengths();return e[e.length-1]},THREE.Curve.prototype.getLengths=function(e){if(e||(e=this.__arcLengthDivisions?this.__arcLengthDivisions:200),this.cacheArcLengths&&this.cacheArcLengths.length==e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t,i,r=[],n=this.getPoint(0),o=0;for(r.push(0),i=1;e>=i;i++)t=this.getPoint(i/e),o+=t.distanceTo(n),r.push(o),n=t;return this.cacheArcLengths=r,r},THREE.Curve.prototype.updateArcLengths=function(){this.needsUpdate=!0,this.getLengths()},THREE.Curve.prototype.getUtoTmapping=function(e,t){var i,r=this.getLengths(),n=0,o=r.length;i=t?t:e*r[o-1];for(var s,a=0,l=o-1;l>=a;)if(n=Math.floor(a+(l-a)/2),s=r[n]-i,0>s)a=n+1;else{if(!(s>0)){l=n;break}l=n-1}if(n=l,r[n]==i){var h=n/(o-1);return h}var c=r[n],u=r[n+1],d=u-c,f=(i-c)/d,h=(n+f)/(o-1);return h},THREE.Curve.prototype.getTangent=function(e){var t=1e-4,i=e-t,r=e+t;0>i&&(i=0),r>1&&(r=1);var n=this.getPoint(i),o=this.getPoint(r),s=o.clone().sub(n);return s.normalize()},THREE.Curve.prototype.getTangentAt=function(e){var t=this.getUtoTmapping(e);return this.getTangent(t)},THREE.Curve.Utils={tangentQuadraticBezier:function(e,t,i,r){return 2*(1-e)*(i-t)+2*e*(r-i)},tangentCubicBezier:function(e,t,i,r,n){return-3*t*(1-e)*(1-e)+3*i*(1-e)*(1-e)-6*e*i*(1-e)+6*e*r*(1-e)-3*e*e*r+3*e*e*n},tangentSpline:function(e){var t=6*e*e-6*e,i=3*e*e-4*e+1,r=-6*e*e+6*e,n=3*e*e-2*e;return t+i+r+n},interpolate:function(e,t,i,r,n){var o=.5*(i-e),s=.5*(r-t),a=n*n,l=n*a;return(2*t-2*i+o+s)*l+(-3*t+3*i-2*o-s)*a+o*n+t}},THREE.Curve.create=function(e,t){return e.prototype=Object.create(THREE.Curve.prototype),e.prototype.getPoint=t,e},THREE.CurvePath=function(){this.curves=[],this.bends=[],this.autoClose=!1},THREE.CurvePath.prototype=Object.create(THREE.Curve.prototype),THREE.CurvePath.prototype.add=function(e){this.curves.push(e)},THREE.CurvePath.prototype.checkConnection=function(){},THREE.CurvePath.prototype.closePath=function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new THREE.LineCurve(t,e))},THREE.CurvePath.prototype.getPoint=function(e){for(var t,i,r=e*this.getLength(),n=this.getCurveLengths(),o=0;o<n.length;){if(n[o]>=r){t=n[o]-r,i=this.curves[o];var s=1-t/i.getLength();return i.getPointAt(s)}o++}return null},THREE.CurvePath.prototype.getLength=function(){var e=this.getCurveLengths();return e[e.length-1]},THREE.CurvePath.prototype.getCurveLengths=function(){if(this.cacheLengths&&this.cacheLengths.length==this.curves.length)return this.cacheLengths;var e,t=[],i=0,r=this.curves.length;for(e=0;r>e;e++)i+=this.curves[e].getLength(),t.push(i);return this.cacheLengths=t,t},THREE.CurvePath.prototype.getBoundingBox=function(){var e,t,i,r,n,o,s=this.getPoints();e=t=Number.NEGATIVE_INFINITY,r=n=Number.POSITIVE_INFINITY;var a,l,h,c,u=s[0]instanceof THREE.Vector3;for(c=u?new THREE.Vector3:new THREE.Vector2,l=0,h=s.length;h>l;l++)a=s[l],a.x>e?e=a.x:a.x<r&&(r=a.x),a.y>t?t=a.y:a.y<n&&(n=a.y),u&&(a.z>i?i=a.z:a.z<o&&(o=a.z)),c.add(a);var d={minX:r,minY:n,maxX:e,maxY:t,centroid:c.divideScalar(h)};return u&&(d.maxZ=i,d.minZ=o),d},THREE.CurvePath.prototype.createPointsGeometry=function(e){var t=this.getPoints(e,!0);return this.createGeometry(t)},THREE.CurvePath.prototype.createSpacedPointsGeometry=function(e){var t=this.getSpacedPoints(e,!0);return this.createGeometry(t)},THREE.CurvePath.prototype.createGeometry=function(e){for(var t=new THREE.Geometry,i=0;i<e.length;i++)t.vertices.push(new THREE.Vector3(e[i].x,e[i].y,e[i].z||0));return t},THREE.CurvePath.prototype.addWrapPath=function(e){this.bends.push(e)},THREE.CurvePath.prototype.getTransformedPoints=function(e,t){var i,r,n=this.getPoints(e);for(t||(t=this.bends),i=0,r=t.length;r>i;i++)n=this.getWrapPoints(n,t[i]);return n},THREE.CurvePath.prototype.getTransformedSpacedPoints=function(e,t){var i,r,n=this.getSpacedPoints(e);for(t||(t=this.bends),i=0,r=t.length;r>i;i++)n=this.getWrapPoints(n,t[i]);return n},THREE.CurvePath.prototype.getWrapPoints=function(e,t){var i,r,n,o,s,a,l=this.getBoundingBox();for(i=0,r=e.length;r>i;i++){n=e[i],o=n.x,s=n.y,a=o/l.maxX,a=t.getUtoTmapping(a,o);var h=t.getPoint(a),c=t.getTangent(a);c.set(-c.y,c.x).multiplyScalar(s),n.x=h.x+c.x,n.y=h.y+c.y}return e},THREE.Gyroscope=function(){THREE.Object3D.call(this)},THREE.Gyroscope.prototype=Object.create(THREE.Object3D.prototype),THREE.Gyroscope.prototype.updateMatrixWorld=function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent?(this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorld.decompose(this.translationWorld,this.quaternionWorld,this.scaleWorld),this.matrix.decompose(this.translationObject,this.quaternionObject,this.scaleObject),this.matrixWorld.compose(this.translationWorld,this.quaternionObject,this.scaleWorld)):this.matrixWorld.copy(this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var t=0,i=this.children.length;i>t;t++)this.children[t].updateMatrixWorld(e)},THREE.Gyroscope.prototype.translationWorld=new THREE.Vector3,THREE.Gyroscope.prototype.translationObject=new THREE.Vector3,THREE.Gyroscope.prototype.quaternionWorld=new THREE.Quaternion,THREE.Gyroscope.prototype.quaternionObject=new THREE.Quaternion,THREE.Gyroscope.prototype.scaleWorld=new THREE.Vector3,THREE.Gyroscope.prototype.scaleObject=new THREE.Vector3,THREE.Path=function(e){THREE.CurvePath.call(this),this.actions=[],e&&this.fromPoints(e)},THREE.Path.prototype=Object.create(THREE.CurvePath.prototype),THREE.PathActions={MOVE_TO:"moveTo",LINE_TO:"lineTo",QUADRATIC_CURVE_TO:"quadraticCurveTo",BEZIER_CURVE_TO:"bezierCurveTo",CSPLINE_THRU:"splineThru",ARC:"arc",ELLIPSE:"ellipse"},THREE.Path.prototype.fromPoints=function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,i=e.length;i>t;t++)this.lineTo(e[t].x,e[t].y)},THREE.Path.prototype.moveTo=function(){var e=Array.prototype.slice.call(arguments);this.actions.push({action:THREE.PathActions.MOVE_TO,args:e})},THREE.Path.prototype.lineTo=function(e,t){var i=Array.prototype.slice.call(arguments),r=this.actions[this.actions.length-1].args,n=r[r.length-2],o=r[r.length-1],s=new THREE.LineCurve(new THREE.Vector2(n,o),new THREE.Vector2(e,t));this.curves.push(s),this.actions.push({action:THREE.PathActions.LINE_TO,args:i})},THREE.Path.prototype.quadraticCurveTo=function(e,t,i,r){var n=Array.prototype.slice.call(arguments),o=this.actions[this.actions.length-1].args,s=o[o.length-2],a=o[o.length-1],l=new THREE.QuadraticBezierCurve(new THREE.Vector2(s,a),new THREE.Vector2(e,t),new THREE.Vector2(i,r));this.curves.push(l),this.actions.push({action:THREE.PathActions.QUADRATIC_CURVE_TO,args:n})},THREE.Path.prototype.bezierCurveTo=function(e,t,i,r,n,o){var s=Array.prototype.slice.call(arguments),a=this.actions[this.actions.length-1].args,l=a[a.length-2],h=a[a.length-1],c=new THREE.CubicBezierCurve(new THREE.Vector2(l,h),new THREE.Vector2(e,t),new THREE.Vector2(i,r),new THREE.Vector2(n,o));this.curves.push(c),this.actions.push({action:THREE.PathActions.BEZIER_CURVE_TO,args:s})},THREE.Path.prototype.splineThru=function(e){var t=Array.prototype.slice.call(arguments),i=this.actions[this.actions.length-1].args,r=i[i.length-2],n=i[i.length-1],o=[new THREE.Vector2(r,n)];Array.prototype.push.apply(o,e);var s=new THREE.SplineCurve(o);this.curves.push(s),this.actions.push({action:THREE.PathActions.CSPLINE_THRU,args:t})},THREE.Path.prototype.arc=function(e,t,i,r,n,o){var s=this.actions[this.actions.length-1].args,a=s[s.length-2],l=s[s.length-1];this.absarc(e+a,t+l,i,r,n,o)},THREE.Path.prototype.absarc=function(e,t,i,r,n,o){this.absellipse(e,t,i,i,r,n,o)},THREE.Path.prototype.ellipse=function(e,t,i,r,n,o,s){var a=this.actions[this.actions.length-1].args,l=a[a.length-2],h=a[a.length-1];this.absellipse(e+l,t+h,i,r,n,o,s)},THREE.Path.prototype.absellipse=function(e,t,i,r,n,o,s){var a=Array.prototype.slice.call(arguments),l=new THREE.EllipseCurve(e,t,i,r,n,o,s);this.curves.push(l);var h=l.getPoint(1);a.push(h.x),a.push(h.y),this.actions.push({action:THREE.PathActions.ELLIPSE,args:a})},THREE.Path.prototype.getSpacedPoints=function(e){e||(e=40);for(var t=[],i=0;e>i;i++)t.push(this.getPoint(i/e));return t},THREE.Path.prototype.getPoints=function(e,t){if(this.useSpacedPoints)return console.log("tata"),this.getSpacedPoints(e,t);e=e||12;var i,r,n,o,s,a,l,h,c,u,d,f,m,p,g,E,v,y,x=[];for(i=0,r=this.actions.length;r>i;i++)switch(n=this.actions[i],o=n.action,s=n.args,o){case THREE.PathActions.MOVE_TO:x.push(new THREE.Vector2(s[0],s[1]));break;case THREE.PathActions.LINE_TO:x.push(new THREE.Vector2(s[0],s[1]));break;case THREE.PathActions.QUADRATIC_CURVE_TO:for(a=s[2],l=s[3],u=s[0],d=s[1],x.length>0?(p=x[x.length-1],f=p.x,m=p.y):(p=this.actions[i-1].args,f=p[p.length-2],m=p[p.length-1]),g=1;e>=g;g++)E=g/e,v=THREE.Shape.Utils.b2(E,f,u,a),y=THREE.Shape.Utils.b2(E,m,d,l),x.push(new THREE.Vector2(v,y));break;case THREE.PathActions.BEZIER_CURVE_TO:for(a=s[4],l=s[5],u=s[0],d=s[1],h=s[2],c=s[3],x.length>0?(p=x[x.length-1],f=p.x,m=p.y):(p=this.actions[i-1].args,f=p[p.length-2],m=p[p.length-1]),g=1;e>=g;g++)E=g/e,v=THREE.Shape.Utils.b3(E,f,u,h,a),y=THREE.Shape.Utils.b3(E,m,d,c,l),x.push(new THREE.Vector2(v,y));break;case THREE.PathActions.CSPLINE_THRU:p=this.actions[i-1].args;var T=new THREE.Vector2(p[p.length-2],p[p.length-1]),w=[T],A=e*s[0].length;w=w.concat(s[0]);var R=new THREE.SplineCurve(w);for(g=1;A>=g;g++)x.push(R.getPointAt(g/A));break;case THREE.PathActions.ARC:var _,C=s[0],b=s[1],F=s[2],S=s[3],H=s[4],D=!!s[5],M=H-S,B=2*e;for(g=1;B>=g;g++)E=g/B,D||(E=1-E),_=S+E*M,v=C+F*Math.cos(_),y=b+F*Math.sin(_),x.push(new THREE.Vector2(v,y));break;case THREE.PathActions.ELLIPSE:var _,C=s[0],b=s[1],L=s[2],k=s[3],S=s[4],H=s[5],D=!!s[6],M=H-S,B=2*e;for(g=1;B>=g;g++)E=g/B,D||(E=1-E),_=S+E*M,v=C+L*Math.cos(_),y=b+k*Math.sin(_),x.push(new THREE.Vector2(v,y))}var q=x[x.length-1],P=1e-10;return Math.abs(q.x-x[0].x)<P&&Math.abs(q.y-x[0].y)<P&&x.splice(x.length-1,1),t&&x.push(x[0]),x},THREE.Path.prototype.toShapes=function(e){function t(e,t){for(var i=1e-10,r=t.length,n=!1,o=r-1,s=0;r>s;o=s++){var a=t[o],l=t[s],h=l.x-a.x,c=l.y-a.y;if(Math.abs(c)>i){if(0>c&&(a=t[s],h=-h,l=t[o],c=-c),e.y<a.y||e.y>l.y)continue;if(e.y==a.y){if(e.x==a.x)return!0}else{var u=c*(e.x-a.x)-h*(e.y-a.y);if(0==u)return!0;if(0>u)continue;n=!n}}else{if(e.y!=a.y)continue;if(l.x<=e.x&&e.x<=a.x||a.x<=e.x&&e.x<=l.x)return!0}}return n}var i,r,n,o,s,a=[],l=new THREE.Path;for(i=0,r=this.actions.length;r>i;i++)n=this.actions[i],s=n.args,o=n.action,o==THREE.PathActions.MOVE_TO&&0!=l.actions.length&&(a.push(l),l=new THREE.Path),l[o].apply(l,s);if(0!=l.actions.length&&a.push(l),0==a.length)return[];var h,c,u,d=[];if(1==a.length)return c=a[0],u=new THREE.Shape,u.actions=c.actions,u.curves=c.curves,d.push(u),d;var f=!THREE.Shape.Utils.isClockWise(a[0].getPoints());f=e?!f:f;var m,p=[],g=[],E=[],v=0;for(g[v]=void 0,E[v]=[],i=0,r=a.length;r>i;i++)c=a[i],m=c.getPoints(),h=THREE.Shape.Utils.isClockWise(m),h=e?!h:h,h?(!f&&g[v]&&v++,g[v]={s:new THREE.Shape,p:m},g[v].s.actions=c.actions,g[v].s.curves=c.curves,f&&v++,E[v]=[]):E[v].push({h:c,p:m[0]});if(g.length>1){for(var y=!1,x=[],T=0,w=g.length;w>T;T++)p[T]=[];for(var T=0,w=g.length;w>T;T++)for(var A=(g[T],E[T]),R=0;R<A.length;R++){for(var _=A[R],C=!0,b=0;b<g.length;b++)t(_.p,g[b].p)&&(T!=b&&x.push({froms:T,tos:b,hole:R}),C?(C=!1,p[b].push(_)):y=!0);C&&p[T].push(_)}x.length>0&&(y||(E=p))}var F,S,H;for(i=0,r=g.length;r>i;i++)for(u=g[i].s,d.push(u),F=E[i],S=0,H=F.length;H>S;S++)u.holes.push(F[S].h);return d},THREE.Shape=function(){THREE.Path.apply(this,arguments),this.holes=[]},THREE.Shape.prototype=Object.create(THREE.Path.prototype),THREE.Shape.prototype.extrude=function(e){var t=new THREE.ExtrudeGeometry(this,e);return t},THREE.Shape.prototype.makeGeometry=function(e){var t=new THREE.ShapeGeometry(this,e);return t},THREE.Shape.prototype.getPointsHoles=function(e){var t,i=this.holes.length,r=[];for(t=0;i>t;t++)r[t]=this.holes[t].getTransformedPoints(e,this.bends);return r},THREE.Shape.prototype.getSpacedPointsHoles=function(e){var t,i=this.holes.length,r=[];for(t=0;i>t;t++)r[t]=this.holes[t].getTransformedSpacedPoints(e,this.bends);return r},THREE.Shape.prototype.extractAllPoints=function(e){return{shape:this.getTransformedPoints(e),holes:this.getPointsHoles(e)}},THREE.Shape.prototype.extractPoints=function(e){return this.useSpacedPoints?this.extractAllSpacedPoints(e):this.extractAllPoints(e)},THREE.Shape.prototype.extractAllSpacedPoints=function(e){return{shape:this.getTransformedSpacedPoints(e),holes:this.getSpacedPointsHoles(e)}},THREE.Shape.Utils={triangulateShape:function(e,t){function i(e,t,i){return e.x!=t.x?e.x<t.x?e.x<=i.x&&i.x<=t.x:t.x<=i.x&&i.x<=e.x:e.y<t.y?e.y<=i.y&&i.y<=t.y:t.y<=i.y&&i.y<=e.y}function r(e,t,r,n,o){var s=1e-10,a=t.x-e.x,l=t.y-e.y,h=n.x-r.x,c=n.y-r.y,u=e.x-r.x,d=e.y-r.y,f=l*h-a*c,m=l*u-a*d;if(Math.abs(f)>s){var p;if(f>0){if(0>m||m>f)return[];if(p=c*u-h*d,0>p||p>f)return[]}else{if(m>0||f>m)return[];if(p=c*u-h*d,p>0||f>p)return[]}if(0==p)return!o||0!=m&&m!=f?[e]:[];if(p==f)return!o||0!=m&&m!=f?[t]:[];if(0==m)return[r];if(m==f)return[n];var g=p/f;return[{x:e.x+g*a,y:e.y+g*l}]}if(0!=m||c*u!=h*d)return[];var E=0==a&&0==l,v=0==h&&0==c;if(E&&v)return e.x!=r.x||e.y!=r.y?[]:[e];if(E)return i(r,n,e)?[e]:[];if(v)return i(e,t,r)?[r]:[];var y,x,T,w,A,R,_,C;return 0!=a?(e.x<t.x?(y=e,T=e.x,x=t,w=t.x):(y=t,T=t.x,x=e,w=e.x),r.x<n.x?(A=r,_=r.x,R=n,C=n.x):(A=n,_=n.x,R=r,C=r.x)):(e.y<t.y?(y=e,T=e.y,x=t,w=t.y):(y=t,T=t.y,x=e,w=e.y),r.y<n.y?(A=r,_=r.y,R=n,C=n.y):(A=n,_=n.y,R=r,C=r.y)),_>=T?_>w?[]:w==_?o?[]:[A]:C>=w?[A,x]:[A,R]:T>C?[]:T==C?o?[]:[y]:C>=w?[y,x]:[y,R]}function n(e,t,i,r){var n=1e-10,o=t.x-e.x,s=t.y-e.y,a=i.x-e.x,l=i.y-e.y,h=r.x-e.x,c=r.y-e.y,u=o*l-s*a,d=o*c-s*h;if(Math.abs(u)>n){var f=h*l-c*a;return u>0?d>=0&&f>=0:d>=0||f>=0}return d>0}function o(e,t){function i(e,t){var i=x.length-1,r=e-1;0>r&&(r=i);var o=e+1;o>i&&(o=0);var s=n(x[e],x[r],x[o],a[t]);if(!s)return!1;var l=a.length-1,h=t-1;0>h&&(h=l);var c=t+1;return c>l&&(c=0),s=n(a[t],a[h],a[c],x[e]),s?!0:!1}function o(e,t){var i,n,o;for(i=0;i<x.length;i++)if(n=i+1,n%=x.length,o=r(e,t,x[i],x[n],!0),o.length>0)return!0;return!1}function s(e,i){var n,o,s,a,l;for(n=0;n<T.length;n++)for(o=t[T[n]],s=0;s<o.length;s++)if(a=s+1,a%=o.length,l=r(e,i,o[s],o[a],!0),l.length>0)return!0;return!1}var a,l,h,c,u,d,f,m,p,g,E,v,y,x=e.concat(),T=[],w=[];for(u in t)T.push(u);for(var A=2*T.length;T.length>0;){if(A--,0>A){console.log("Infinite Loop! Holes left:"+T.length+", Probably Hole outside Shape!");break}for(h=0;h<x.length;h++){for(c=x[h],l=-1,u=0;u<T.length;u++)if(m=T[u],p=c.x+":"+c.y+":"+m,void 0===w[p]){for(a=t[m],d=0;d<a.length;d++)if(f=a[d],i(h,d)&&!o(c,f)&&!s(c,f)){l=d,T.splice(u,1),g=x.slice(0,h+1),E=x.slice(h),v=a.slice(l),y=a.slice(0,l+1),x=g.concat(v).concat(y).concat(E);break}if(l>=0)break;w[p]=!0}if(l>=0)break}}return x}var s,a,l,h,c,u,d={},f=e.concat();for(var m in t)Array.prototype.push.apply(f,t[m]);for(s=0,a=f.length;a>s;s++)c=f[s].x+":"+f[s].y,void 0!==d[c]&&console.log("Duplicate point",c),d[c]=s;var p=o(e,t),g=THREE.FontUtils.Triangulate(p,!1);for(s=0,a=g.length;a>s;s++)for(h=g[s],l=0;3>l;l++)c=h[l].x+":"+h[l].y,u=d[c],void 0!==u&&(h[l]=u);return g.concat()},isClockWise:function(e){return THREE.FontUtils.Triangulate.area(e)<0},b2p0:function(e,t){var i=1-e;return i*i*t},b2p1:function(e,t){return 2*(1-e)*e*t},b2p2:function(e,t){return e*e*t},b2:function(e,t,i,r){return this.b2p0(e,t)+this.b2p1(e,i)+this.b2p2(e,r)},b3p0:function(e,t){var i=1-e;return i*i*i*t},b3p1:function(e,t){var i=1-e;return 3*i*i*e*t},b3p2:function(e,t){var i=1-e;return 3*i*e*e*t},b3p3:function(e,t){return e*e*e*t},b3:function(e,t,i,r,n){return this.b3p0(e,t)+this.b3p1(e,i)+this.b3p2(e,r)+this.b3p3(e,n)}},THREE.LineCurve=function(e,t){this.v1=e,this.v2=t},THREE.LineCurve.prototype=Object.create(THREE.Curve.prototype),THREE.LineCurve.prototype.getPoint=function(e){var t=this.v2.clone().sub(this.v1);return t.multiplyScalar(e).add(this.v1),t},THREE.LineCurve.prototype.getPointAt=function(e){return this.getPoint(e)},THREE.LineCurve.prototype.getTangent=function(){var e=this.v2.clone().sub(this.v1);return e.normalize()},THREE.QuadraticBezierCurve=function(e,t,i){this.v0=e,this.v1=t,this.v2=i},THREE.QuadraticBezierCurve.prototype=Object.create(THREE.Curve.prototype),THREE.QuadraticBezierCurve.prototype.getPoint=function(e){var t,i;return t=THREE.Shape.Utils.b2(e,this.v0.x,this.v1.x,this.v2.x),i=THREE.Shape.Utils.b2(e,this.v0.y,this.v1.y,this.v2.y),new THREE.Vector2(t,i)},THREE.QuadraticBezierCurve.prototype.getTangent=function(e){var t,i;t=THREE.Curve.Utils.tangentQuadraticBezier(e,this.v0.x,this.v1.x,this.v2.x),i=THREE.Curve.Utils.tangentQuadraticBezier(e,this.v0.y,this.v1.y,this.v2.y);var r=new THREE.Vector2(t,i);return r.normalize(),r},THREE.CubicBezierCurve=function(e,t,i,r){this.v0=e,this.v1=t,this.v2=i,this.v3=r},THREE.CubicBezierCurve.prototype=Object.create(THREE.Curve.prototype),THREE.CubicBezierCurve.prototype.getPoint=function(e){var t,i;return t=THREE.Shape.Utils.b3(e,this.v0.x,this.v1.x,this.v2.x,this.v3.x),i=THREE.Shape.Utils.b3(e,this.v0.y,this.v1.y,this.v2.y,this.v3.y),new THREE.Vector2(t,i)},THREE.CubicBezierCurve.prototype.getTangent=function(e){var t,i;t=THREE.Curve.Utils.tangentCubicBezier(e,this.v0.x,this.v1.x,this.v2.x,this.v3.x),i=THREE.Curve.Utils.tangentCubicBezier(e,this.v0.y,this.v1.y,this.v2.y,this.v3.y);var r=new THREE.Vector2(t,i);return r.normalize(),r},THREE.SplineCurve=function(e){this.points=void 0==e?[]:e},THREE.SplineCurve.prototype=Object.create(THREE.Curve.prototype),THREE.SplineCurve.prototype.getPoint=function(e){var t,i,r,n=new THREE.Vector2,o=[],s=this.points;return t=(s.length-1)*e,i=Math.floor(t),r=t-i,o[0]=0==i?i:i-1,o[1]=i,o[2]=i>s.length-2?s.length-1:i+1,o[3]=i>s.length-3?s.length-1:i+2,n.x=THREE.Curve.Utils.interpolate(s[o[0]].x,s[o[1]].x,s[o[2]].x,s[o[3]].x,r),n.y=THREE.Curve.Utils.interpolate(s[o[0]].y,s[o[1]].y,s[o[2]].y,s[o[3]].y,r),n},THREE.EllipseCurve=function(e,t,i,r,n,o,s){this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=r,this.aStartAngle=n,this.aEndAngle=o,this.aClockwise=s},THREE.EllipseCurve.prototype=Object.create(THREE.Curve.prototype),THREE.EllipseCurve.prototype.getPoint=function(e){var t,i=this.aEndAngle-this.aStartAngle;
0>i&&(i+=2*Math.PI),i>2*Math.PI&&(i-=2*Math.PI),t=this.aClockwise===!0?this.aEndAngle+(1-e)*(2*Math.PI-i):this.aStartAngle+e*i;var r=this.aX+this.xRadius*Math.cos(t),n=this.aY+this.yRadius*Math.sin(t);return new THREE.Vector2(r,n)},THREE.ArcCurve=function(e,t,i,r,n,o){THREE.EllipseCurve.call(this,e,t,i,i,r,n,o)},THREE.ArcCurve.prototype=Object.create(THREE.EllipseCurve.prototype),THREE.LineCurve3=THREE.Curve.create(function(e,t){this.v1=e,this.v2=t},function(e){var t=new THREE.Vector3;return t.subVectors(this.v2,this.v1),t.multiplyScalar(e),t.add(this.v1),t}),THREE.QuadraticBezierCurve3=THREE.Curve.create(function(e,t,i){this.v0=e,this.v1=t,this.v2=i},function(e){var t,i,r;return t=THREE.Shape.Utils.b2(e,this.v0.x,this.v1.x,this.v2.x),i=THREE.Shape.Utils.b2(e,this.v0.y,this.v1.y,this.v2.y),r=THREE.Shape.Utils.b2(e,this.v0.z,this.v1.z,this.v2.z),new THREE.Vector3(t,i,r)}),THREE.CubicBezierCurve3=THREE.Curve.create(function(e,t,i,r){this.v0=e,this.v1=t,this.v2=i,this.v3=r},function(e){var t,i,r;return t=THREE.Shape.Utils.b3(e,this.v0.x,this.v1.x,this.v2.x,this.v3.x),i=THREE.Shape.Utils.b3(e,this.v0.y,this.v1.y,this.v2.y,this.v3.y),r=THREE.Shape.Utils.b3(e,this.v0.z,this.v1.z,this.v2.z,this.v3.z),new THREE.Vector3(t,i,r)}),THREE.SplineCurve3=THREE.Curve.create(function(e){this.points=void 0==e?[]:e},function(e){var t,i,r,n=new THREE.Vector3,o=[],s=this.points;t=(s.length-1)*e,i=Math.floor(t),r=t-i,o[0]=0==i?i:i-1,o[1]=i,o[2]=i>s.length-2?s.length-1:i+1,o[3]=i>s.length-3?s.length-1:i+2;var a=s[o[0]],l=s[o[1]],h=s[o[2]],c=s[o[3]];return n.x=THREE.Curve.Utils.interpolate(a.x,l.x,h.x,c.x,r),n.y=THREE.Curve.Utils.interpolate(a.y,l.y,h.y,c.y,r),n.z=THREE.Curve.Utils.interpolate(a.z,l.z,h.z,c.z,r),n}),THREE.ClosedSplineCurve3=THREE.Curve.create(function(e){this.points=void 0==e?[]:e},function(e){var t,i,r,n=new THREE.Vector3,o=[],s=this.points;return t=(s.length-0)*e,i=Math.floor(t),r=t-i,i+=i>0?0:(Math.floor(Math.abs(i)/s.length)+1)*s.length,o[0]=(i-1)%s.length,o[1]=i%s.length,o[2]=(i+1)%s.length,o[3]=(i+2)%s.length,n.x=THREE.Curve.Utils.interpolate(s[o[0]].x,s[o[1]].x,s[o[2]].x,s[o[3]].x,r),n.y=THREE.Curve.Utils.interpolate(s[o[0]].y,s[o[1]].y,s[o[2]].y,s[o[3]].y,r),n.z=THREE.Curve.Utils.interpolate(s[o[0]].z,s[o[1]].z,s[o[2]].z,s[o[3]].z,r),n}),THREE.AnimationHandler=function(){var e=[],t={},i={};i.update=function(t){for(var i=0;i<e.length;i++)e[i].update(t)},i.addToUpdate=function(t){-1===e.indexOf(t)&&e.push(t)},i.removeFromUpdate=function(t){var i=e.indexOf(t);-1!==i&&e.splice(i,1)},i.add=function(e){void 0!==t[e.name]&&console.log("THREE.AnimationHandler.add: Warning! "+e.name+" already exists in library. Overwriting."),t[e.name]=e,n(e)},i.get=function(e){return"string"==typeof e?t[e]?t[e]:(console.log("THREE.AnimationHandler.get: Couldn't find animation "+e),null):void 0},i.parse=function(e){var t=[];if(e instanceof THREE.SkinnedMesh)for(var i=0;i<e.bones.length;i++)t.push(e.bones[i]);else r(e,t);return t};var r=function(e,t){t.push(e);for(var i=0;i<e.children.length;i++)r(e.children[i],t)},n=function(e){if(e.initialized!==!0){for(var t=0;t<e.hierarchy.length;t++){for(var i=0;i<e.hierarchy[t].keys.length;i++)if(e.hierarchy[t].keys[i].time<0&&(e.hierarchy[t].keys[i].time=0),void 0!==e.hierarchy[t].keys[i].rot&&!(e.hierarchy[t].keys[i].rot instanceof THREE.Quaternion)){var r=e.hierarchy[t].keys[i].rot;e.hierarchy[t].keys[i].rot=new THREE.Quaternion(r[0],r[1],r[2],r[3])}if(e.hierarchy[t].keys.length&&void 0!==e.hierarchy[t].keys[0].morphTargets){for(var n={},i=0;i<e.hierarchy[t].keys.length;i++)for(var o=0;o<e.hierarchy[t].keys[i].morphTargets.length;o++){var s=e.hierarchy[t].keys[i].morphTargets[o];n[s]=-1}e.hierarchy[t].usedMorphTargets=n;for(var i=0;i<e.hierarchy[t].keys.length;i++){var a={};for(var s in n){for(var o=0;o<e.hierarchy[t].keys[i].morphTargets.length;o++)if(e.hierarchy[t].keys[i].morphTargets[o]===s){a[s]=e.hierarchy[t].keys[i].morphTargetsInfluences[o];break}o===e.hierarchy[t].keys[i].morphTargets.length&&(a[s]=0)}e.hierarchy[t].keys[i].morphTargetsInfluences=a}}for(var i=1;i<e.hierarchy[t].keys.length;i++)e.hierarchy[t].keys[i].time===e.hierarchy[t].keys[i-1].time&&(e.hierarchy[t].keys.splice(i,1),i--);for(var i=0;i<e.hierarchy[t].keys.length;i++)e.hierarchy[t].keys[i].index=i}e.initialized=!0}};return i.LINEAR=0,i.CATMULLROM=1,i.CATMULLROM_FORWARD=2,i}(),THREE.Animation=function(e,t){this.root=e,this.data=THREE.AnimationHandler.get(t),this.hierarchy=THREE.AnimationHandler.parse(e),this.currentTime=0,this.timeScale=1,this.isPlaying=!1,this.isPaused=!0,this.loop=!0,this.interpolationType=THREE.AnimationHandler.LINEAR,this.points=[],this.target=new THREE.Vector3},THREE.Animation.prototype.play=function(e){this.currentTime=void 0!==e?e:0,this.isPlaying===!1&&(this.isPlaying=!0,this.reset(),this.update(0)),this.isPaused=!1,THREE.AnimationHandler.addToUpdate(this)},THREE.Animation.prototype.pause=function(){this.isPaused===!0?THREE.AnimationHandler.addToUpdate(this):THREE.AnimationHandler.removeFromUpdate(this),this.isPaused=!this.isPaused},THREE.Animation.prototype.stop=function(){this.isPlaying=!1,this.isPaused=!1,THREE.AnimationHandler.removeFromUpdate(this)},THREE.Animation.prototype.reset=function(){for(var e=0,t=this.hierarchy.length;t>e;e++){var i=this.hierarchy[e];i.matrixAutoUpdate=!0,void 0===i.animationCache&&(i.animationCache={},i.animationCache.prevKey={pos:0,rot:0,scl:0},i.animationCache.nextKey={pos:0,rot:0,scl:0},i.animationCache.originalMatrix=i instanceof THREE.Bone?i.skinMatrix:i.matrix);var r=i.animationCache.prevKey,n=i.animationCache.nextKey;r.pos=this.data.hierarchy[e].keys[0],r.rot=this.data.hierarchy[e].keys[0],r.scl=this.data.hierarchy[e].keys[0],n.pos=this.getNextKeyWith("pos",e,1),n.rot=this.getNextKeyWith("rot",e,1),n.scl=this.getNextKeyWith("scl",e,1)}},THREE.Animation.prototype.update=function(e){if(this.isPlaying!==!1){this.currentTime+=e*this.timeScale;var t,i=["pos","rot","scl"],r=this.data.length;this.loop===!0&&this.currentTime>r&&(this.currentTime%=r,this.reset()),this.currentTime=Math.min(this.currentTime,r);for(var n=0,o=this.hierarchy.length;o>n;n++)for(var s=this.hierarchy[n],a=s.animationCache,l=0;3>l;l++){var h=i[l],c=a.prevKey[h],u=a.nextKey[h];if(u.time<=this.currentTime){for(c=this.data.hierarchy[n].keys[0],u=this.getNextKeyWith(h,n,1);u.time<this.currentTime&&u.index>c.index;)c=u,u=this.getNextKeyWith(h,n,u.index+1);a.prevKey[h]=c,a.nextKey[h]=u}s.matrixAutoUpdate=!0,s.matrixWorldNeedsUpdate=!0;var d=(this.currentTime-c.time)/(u.time-c.time),f=c[h],m=u[h];if(0>d&&(d=0),d>1&&(d=1),"pos"===h){if(t=s.position,this.interpolationType===THREE.AnimationHandler.LINEAR)t.x=f[0]+(m[0]-f[0])*d,t.y=f[1]+(m[1]-f[1])*d,t.z=f[2]+(m[2]-f[2])*d;else if(this.interpolationType===THREE.AnimationHandler.CATMULLROM||this.interpolationType===THREE.AnimationHandler.CATMULLROM_FORWARD){this.points[0]=this.getPrevKeyWith("pos",n,c.index-1).pos,this.points[1]=f,this.points[2]=m,this.points[3]=this.getNextKeyWith("pos",n,u.index+1).pos,d=.33*d+.33;var p=this.interpolateCatmullRom(this.points,d);if(t.x=p[0],t.y=p[1],t.z=p[2],this.interpolationType===THREE.AnimationHandler.CATMULLROM_FORWARD){var g=this.interpolateCatmullRom(this.points,1.01*d);this.target.set(g[0],g[1],g[2]),this.target.sub(t),this.target.y=0,this.target.normalize();var E=Math.atan2(this.target.x,this.target.z);s.rotation.set(0,E,0)}}}else"rot"===h?THREE.Quaternion.slerp(f,m,s.quaternion,d):"scl"===h&&(t=s.scale,t.x=f[0]+(m[0]-f[0])*d,t.y=f[1]+(m[1]-f[1])*d,t.z=f[2]+(m[2]-f[2])*d)}this.loop===!1&&this.currentTime>r&&this.stop()}},THREE.Animation.prototype.interpolateCatmullRom=function(e,t){var i,r,n,o,s,a,l,h,c,u=[],d=[];return i=(e.length-1)*t,r=Math.floor(i),n=i-r,u[0]=0===r?r:r-1,u[1]=r,u[2]=r>e.length-2?r:r+1,u[3]=r>e.length-3?r:r+2,a=e[u[0]],l=e[u[1]],h=e[u[2]],c=e[u[3]],o=n*n,s=n*o,d[0]=this.interpolate(a[0],l[0],h[0],c[0],n,o,s),d[1]=this.interpolate(a[1],l[1],h[1],c[1],n,o,s),d[2]=this.interpolate(a[2],l[2],h[2],c[2],n,o,s),d},THREE.Animation.prototype.interpolate=function(e,t,i,r,n,o,s){var a=.5*(i-e),l=.5*(r-t);return(2*(t-i)+a+l)*s+(-3*(t-i)-2*a-l)*o+a*n+t},THREE.Animation.prototype.getNextKeyWith=function(e,t,i){var r=this.data.hierarchy[t].keys;for(this.interpolationType===THREE.AnimationHandler.CATMULLROM||this.interpolationType===THREE.AnimationHandler.CATMULLROM_FORWARD?i=i<r.length-1?i:r.length-1:i%=r.length;i<r.length;i++)if(void 0!==r[i][e])return r[i];return this.data.hierarchy[t].keys[0]},THREE.Animation.prototype.getPrevKeyWith=function(e,t,i){var r=this.data.hierarchy[t].keys;for(i=this.interpolationType===THREE.AnimationHandler.CATMULLROM||this.interpolationType===THREE.AnimationHandler.CATMULLROM_FORWARD?i>0?i:0:i>=0?i:i+r.length;i>=0;i--)if(void 0!==r[i][e])return r[i];return this.data.hierarchy[t].keys[r.length-1]},THREE.KeyFrameAnimation=function(e,t){this.root=e,this.data=THREE.AnimationHandler.get(t),this.hierarchy=THREE.AnimationHandler.parse(e),this.currentTime=0,this.timeScale=.001,this.isPlaying=!1,this.isPaused=!0,this.loop=!0;for(var i=0,r=this.hierarchy.length;r>i;i++){var n=this.data.hierarchy[i].keys,o=this.data.hierarchy[i].sids,s=this.hierarchy[i];if(n.length&&o){for(var a=0;a<o.length;a++){var l=o[a],h=this.getNextKeyWith(l,i,0);h&&h.apply(l)}s.matrixAutoUpdate=!1,this.data.hierarchy[i].node.updateMatrix(),s.matrixWorldNeedsUpdate=!0}}},THREE.KeyFrameAnimation.prototype.play=function(e){if(this.currentTime=void 0!==e?e:0,this.isPlaying===!1){this.isPlaying=!0;var t,i,r,n=this.hierarchy.length;for(t=0;n>t;t++){i=this.hierarchy[t],r=this.data.hierarchy[t],void 0===r.animationCache&&(r.animationCache={},r.animationCache.prevKey=null,r.animationCache.nextKey=null,r.animationCache.originalMatrix=i instanceof THREE.Bone?i.skinMatrix:i.matrix);var o=this.data.hierarchy[t].keys;o.length&&(r.animationCache.prevKey=o[0],r.animationCache.nextKey=o[1],this.startTime=Math.min(o[0].time,this.startTime),this.endTime=Math.max(o[o.length-1].time,this.endTime))}this.update(0)}this.isPaused=!1,THREE.AnimationHandler.addToUpdate(this)},THREE.KeyFrameAnimation.prototype.pause=function(){this.isPaused?THREE.AnimationHandler.addToUpdate(this):THREE.AnimationHandler.removeFromUpdate(this),this.isPaused=!this.isPaused},THREE.KeyFrameAnimation.prototype.stop=function(){this.isPlaying=!1,this.isPaused=!1,THREE.AnimationHandler.removeFromUpdate(this);for(var e=0;e<this.data.hierarchy.length;e++){var t=this.hierarchy[e],i=this.data.hierarchy[e];if(void 0!==i.animationCache){var r=i.animationCache.originalMatrix;t instanceof THREE.Bone?(r.copy(t.skinMatrix),t.skinMatrix=r):(r.copy(t.matrix),t.matrix=r),delete i.animationCache}}},THREE.KeyFrameAnimation.prototype.update=function(e){if(this.isPlaying!==!1){this.currentTime+=e*this.timeScale;var t=this.data.length;this.loop===!0&&this.currentTime>t&&(this.currentTime%=t),this.currentTime=Math.min(this.currentTime,t);for(var i=0,r=this.hierarchy.length;r>i;i++){var n=this.hierarchy[i],o=this.data.hierarchy[i],s=o.keys,a=o.animationCache;if(s.length){var l=a.prevKey,h=a.nextKey;if(h.time<=this.currentTime){for(;h.time<this.currentTime&&h.index>l.index;)l=h,h=s[l.index+1];a.prevKey=l,a.nextKey=h}h.time>=this.currentTime?l.interpolate(h,this.currentTime):l.interpolate(h,h.time),this.data.hierarchy[i].node.updateMatrix(),n.matrixWorldNeedsUpdate=!0}}}},THREE.KeyFrameAnimation.prototype.getNextKeyWith=function(e,t,i){var r=this.data.hierarchy[t].keys;for(i%=r.length;i<r.length;i++)if(r[i].hasTarget(e))return r[i];return r[0]},THREE.KeyFrameAnimation.prototype.getPrevKeyWith=function(e,t,i){var r=this.data.hierarchy[t].keys;for(i=i>=0?i:i+r.length;i>=0;i--)if(r[i].hasTarget(e))return r[i];return r[r.length-1]},THREE.MorphAnimation=function(e){this.mesh=e,this.frames=e.morphTargetInfluences.length,this.currentTime=0,this.duration=1e3,this.loop=!0,this.isPlaying=!1},THREE.MorphAnimation.prototype={play:function(){this.isPlaying=!0},pause:function(){this.isPlaying=!1},update:function(){var e=0,t=0;return function(i){if(this.isPlaying!==!1){this.currentTime+=i,this.loop===!0&&this.currentTime>this.duration&&(this.currentTime%=this.duration),this.currentTime=Math.min(this.currentTime,this.duration);var r=this.duration/this.frames,n=Math.floor(this.currentTime/r);n!=t&&(this.mesh.morphTargetInfluences[e]=0,this.mesh.morphTargetInfluences[t]=1,this.mesh.morphTargetInfluences[n]=0,e=t,t=n),this.mesh.morphTargetInfluences[n]=this.currentTime%r/r,this.mesh.morphTargetInfluences[e]=1-this.mesh.morphTargetInfluences[n]}}}()},THREE.CubeCamera=function(e,t,i){THREE.Object3D.call(this);var r=90,n=1,o=new THREE.PerspectiveCamera(r,n,e,t);o.up.set(0,-1,0),o.lookAt(new THREE.Vector3(1,0,0)),this.add(o);var s=new THREE.PerspectiveCamera(r,n,e,t);s.up.set(0,-1,0),s.lookAt(new THREE.Vector3(-1,0,0)),this.add(s);var a=new THREE.PerspectiveCamera(r,n,e,t);a.up.set(0,0,1),a.lookAt(new THREE.Vector3(0,1,0)),this.add(a);var l=new THREE.PerspectiveCamera(r,n,e,t);l.up.set(0,0,-1),l.lookAt(new THREE.Vector3(0,-1,0)),this.add(l);var h=new THREE.PerspectiveCamera(r,n,e,t);h.up.set(0,-1,0),h.lookAt(new THREE.Vector3(0,0,1)),this.add(h);var c=new THREE.PerspectiveCamera(r,n,e,t);c.up.set(0,-1,0),c.lookAt(new THREE.Vector3(0,0,-1)),this.add(c),this.renderTarget=new THREE.WebGLRenderTargetCube(i,i,{format:THREE.RGBFormat,magFilter:THREE.LinearFilter,minFilter:THREE.LinearFilter}),this.updateCubeMap=function(e,t){var i=this.renderTarget,r=i.generateMipmaps;i.generateMipmaps=!1,i.activeCubeFace=0,e.render(t,o,i),i.activeCubeFace=1,e.render(t,s,i),i.activeCubeFace=2,e.render(t,a,i),i.activeCubeFace=3,e.render(t,l,i),i.activeCubeFace=4,e.render(t,h,i),i.generateMipmaps=r,i.activeCubeFace=5,e.render(t,c,i)}},THREE.CubeCamera.prototype=Object.create(THREE.Object3D.prototype),THREE.CombinedCamera=function(e,t,i,r,n,o,s){THREE.Camera.call(this),this.fov=i,this.left=-e/2,this.right=e/2,this.top=t/2,this.bottom=-t/2,this.cameraO=new THREE.OrthographicCamera(e/-2,e/2,t/2,t/-2,o,s),this.cameraP=new THREE.PerspectiveCamera(i,e/t,r,n),this.zoom=1,this.toPerspective()},THREE.CombinedCamera.prototype=Object.create(THREE.Camera.prototype),THREE.CombinedCamera.prototype.toPerspective=function(){this.near=this.cameraP.near,this.far=this.cameraP.far,this.cameraP.fov=this.fov/this.zoom,this.cameraP.updateProjectionMatrix(),this.projectionMatrix=this.cameraP.projectionMatrix,this.inPerspectiveMode=!0,this.inOrthographicMode=!1},THREE.CombinedCamera.prototype.toOrthographic=function(){var e=this.fov,t=this.cameraP.aspect,i=this.cameraP.near,r=this.cameraP.far,n=(i+r)/2,o=Math.tan(e/2)*n,s=2*o,a=s*t,l=a/2;o/=this.zoom,l/=this.zoom,this.cameraO.left=-l,this.cameraO.right=l,this.cameraO.top=o,this.cameraO.bottom=-o,this.cameraO.updateProjectionMatrix(),this.near=this.cameraO.near,this.far=this.cameraO.far,this.projectionMatrix=this.cameraO.projectionMatrix,this.inPerspectiveMode=!1,this.inOrthographicMode=!0},THREE.CombinedCamera.prototype.setSize=function(e,t){this.cameraP.aspect=e/t,this.left=-e/2,this.right=e/2,this.top=t/2,this.bottom=-t/2},THREE.CombinedCamera.prototype.setFov=function(e){this.fov=e,this.inPerspectiveMode?this.toPerspective():this.toOrthographic()},THREE.CombinedCamera.prototype.updateProjectionMatrix=function(){this.inPerspectiveMode?this.toPerspective():(this.toPerspective(),this.toOrthographic())},THREE.CombinedCamera.prototype.setLens=function(e,t){void 0===t&&(t=24);var i=2*THREE.Math.radToDeg(Math.atan(t/(2*e)));return this.setFov(i),i},THREE.CombinedCamera.prototype.setZoom=function(e){this.zoom=e,this.inPerspectiveMode?this.toPerspective():this.toOrthographic()},THREE.CombinedCamera.prototype.toFrontView=function(){this.rotation.x=0,this.rotation.y=0,this.rotation.z=0,this.rotationAutoUpdate=!1},THREE.CombinedCamera.prototype.toBackView=function(){this.rotation.x=0,this.rotation.y=Math.PI,this.rotation.z=0,this.rotationAutoUpdate=!1},THREE.CombinedCamera.prototype.toLeftView=function(){this.rotation.x=0,this.rotation.y=-Math.PI/2,this.rotation.z=0,this.rotationAutoUpdate=!1},THREE.CombinedCamera.prototype.toRightView=function(){this.rotation.x=0,this.rotation.y=Math.PI/2,this.rotation.z=0,this.rotationAutoUpdate=!1},THREE.CombinedCamera.prototype.toTopView=function(){this.rotation.x=-Math.PI/2,this.rotation.y=0,this.rotation.z=0,this.rotationAutoUpdate=!1},THREE.CombinedCamera.prototype.toBottomView=function(){this.rotation.x=Math.PI/2,this.rotation.y=0,this.rotation.z=0,this.rotationAutoUpdate=!1},THREE.BoxGeometry=function(e,t,i,r,n,o){function s(e,t,i,r,n,o,s,l){var h,c,u,d=a.widthSegments,f=a.heightSegments,m=n/2,p=o/2,g=a.vertices.length;"x"===e&&"y"===t||"y"===e&&"x"===t?h="z":"x"===e&&"z"===t||"z"===e&&"x"===t?(h="y",f=a.depthSegments):("z"===e&&"y"===t||"y"===e&&"z"===t)&&(h="x",d=a.depthSegments);var E=d+1,v=f+1,y=n/d,x=o/f,T=new THREE.Vector3;for(T[h]=s>0?1:-1,u=0;v>u;u++)for(c=0;E>c;c++){var w=new THREE.Vector3;w[e]=(c*y-m)*i,w[t]=(u*x-p)*r,w[h]=s,a.vertices.push(w)}for(u=0;f>u;u++)for(c=0;d>c;c++){var A=c+E*u,R=c+E*(u+1),_=c+1+E*(u+1),C=c+1+E*u,b=new THREE.Vector2(c/d,1-u/f),F=new THREE.Vector2(c/d,1-(u+1)/f),S=new THREE.Vector2((c+1)/d,1-(u+1)/f),H=new THREE.Vector2((c+1)/d,1-u/f),D=new THREE.Face3(A+g,R+g,C+g);D.normal.copy(T),D.vertexNormals.push(T.clone(),T.clone(),T.clone()),D.materialIndex=l,a.faces.push(D),a.faceVertexUvs[0].push([b,F,H]),D=new THREE.Face3(R+g,_+g,C+g),D.normal.copy(T),D.vertexNormals.push(T.clone(),T.clone(),T.clone()),D.materialIndex=l,a.faces.push(D),a.faceVertexUvs[0].push([F.clone(),S,H.clone()])}}THREE.Geometry.call(this);var a=this;this.width=e,this.height=t,this.depth=i,this.widthSegments=r||1,this.heightSegments=n||1,this.depthSegments=o||1;var l=this.width/2,h=this.height/2,c=this.depth/2;s("z","y",-1,-1,this.depth,this.height,l,0),s("z","y",1,-1,this.depth,this.height,-l,1),s("x","z",1,1,this.width,this.depth,h,2),s("x","z",1,-1,this.width,this.depth,-h,3),s("x","y",1,-1,this.width,this.height,c,4),s("x","y",-1,-1,this.width,this.height,-c,5),this.computeCentroids(),this.mergeVertices()},THREE.BoxGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.CircleGeometry=function(e,t,i,r){THREE.Geometry.call(this),this.radius=e=e||50,this.segments=t=void 0!==t?Math.max(3,t):8,this.thetaStart=i=void 0!==i?i:0,this.thetaLength=r=void 0!==r?r:2*Math.PI;var n,o=[],s=new THREE.Vector3,a=new THREE.Vector2(.5,.5);for(this.vertices.push(s),o.push(a),n=0;t>=n;n++){var l=new THREE.Vector3,h=i+n/t*r;l.x=e*Math.cos(h),l.y=e*Math.sin(h),this.vertices.push(l),o.push(new THREE.Vector2((l.x/e+1)/2,(l.y/e+1)/2))}var c=new THREE.Vector3(0,0,1);for(n=1;t>=n;n++){var u=n,d=n+1,f=0;this.faces.push(new THREE.Face3(u,d,f,[c.clone(),c.clone(),c.clone()])),this.faceVertexUvs[0].push([o[n].clone(),o[n+1].clone(),a.clone()])}this.computeCentroids(),this.computeFaceNormals(),this.boundingSphere=new THREE.Sphere(new THREE.Vector3,e)},THREE.CircleGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.CubeGeometry=THREE.BoxGeometry,THREE.CylinderGeometry=function(e,t,i,r,n,o){THREE.Geometry.call(this),this.radiusTop=e=void 0!==e?e:20,this.radiusBottom=t=void 0!==t?t:20,this.height=i=void 0!==i?i:100,this.radialSegments=r=r||8,this.heightSegments=n=n||1,this.openEnded=o=void 0!==o?o:!1;var s,a,l=i/2,h=[],c=[];for(a=0;n>=a;a++){var u=[],d=[],f=a/n,m=f*(t-e)+e;for(s=0;r>=s;s++){var p=s/r,g=new THREE.Vector3;g.x=m*Math.sin(p*Math.PI*2),g.y=-f*i+l,g.z=m*Math.cos(p*Math.PI*2),this.vertices.push(g),u.push(this.vertices.length-1),d.push(new THREE.Vector2(p,1-f))}h.push(u),c.push(d)}var E,v,y=(t-e)/i;for(s=0;r>s;s++)for(0!==e?(E=this.vertices[h[0][s]].clone(),v=this.vertices[h[0][s+1]].clone()):(E=this.vertices[h[1][s]].clone(),v=this.vertices[h[1][s+1]].clone()),E.setY(Math.sqrt(E.x*E.x+E.z*E.z)*y).normalize(),v.setY(Math.sqrt(v.x*v.x+v.z*v.z)*y).normalize(),a=0;n>a;a++){var x=h[a][s],T=h[a+1][s],w=h[a+1][s+1],A=h[a][s+1],R=E.clone(),_=E.clone(),C=v.clone(),b=v.clone(),F=c[a][s].clone(),S=c[a+1][s].clone(),H=c[a+1][s+1].clone(),D=c[a][s+1].clone();this.faces.push(new THREE.Face3(x,T,A,[R,_,b])),this.faceVertexUvs[0].push([F,S,D]),this.faces.push(new THREE.Face3(T,w,A,[_.clone(),C,b.clone()])),this.faceVertexUvs[0].push([S.clone(),H,D.clone()])}if(o===!1&&e>0)for(this.vertices.push(new THREE.Vector3(0,l,0)),s=0;r>s;s++){var x=h[0][s],T=h[0][s+1],w=this.vertices.length-1,R=new THREE.Vector3(0,1,0),_=new THREE.Vector3(0,1,0),C=new THREE.Vector3(0,1,0),F=c[0][s].clone(),S=c[0][s+1].clone(),H=new THREE.Vector2(S.x,0);this.faces.push(new THREE.Face3(x,T,w,[R,_,C])),this.faceVertexUvs[0].push([F,S,H])}if(o===!1&&t>0)for(this.vertices.push(new THREE.Vector3(0,-l,0)),s=0;r>s;s++){var x=h[a][s+1],T=h[a][s],w=this.vertices.length-1,R=new THREE.Vector3(0,-1,0),_=new THREE.Vector3(0,-1,0),C=new THREE.Vector3(0,-1,0),F=c[a][s+1].clone(),S=c[a][s].clone(),H=new THREE.Vector2(S.x,1);this.faces.push(new THREE.Face3(x,T,w,[R,_,C])),this.faceVertexUvs[0].push([F,S,H])}this.computeCentroids(),this.computeFaceNormals()},THREE.CylinderGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.ExtrudeGeometry=function(e,t){return"undefined"==typeof e?(e=[],void 0):(THREE.Geometry.call(this),e=e instanceof Array?e:[e],this.shapebb=e[e.length-1].getBoundingBox(),this.addShapeList(e,t),this.computeCentroids(),this.computeFaceNormals(),void 0)},THREE.ExtrudeGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.ExtrudeGeometry.prototype.addShapeList=function(e,t){for(var i=e.length,r=0;i>r;r++){var n=e[r];this.addShape(n,t)}},THREE.ExtrudeGeometry.prototype.addShape=function(e,t){function i(e,t,i){return t||console.log("die"),t.clone().multiplyScalar(i).add(e)}function r(e,t,i){var r,n,o=1e-10,s=THREE.Math.sign,a=1,l=e.x-t.x,h=e.y-t.y,c=i.x-e.x,u=i.y-e.y,d=l*l+h*h,f=l*u-h*c;if(Math.abs(f)>o){var m=Math.sqrt(d),p=Math.sqrt(c*c+u*u),g=t.x-h/m,E=t.y+l/m,v=i.x-u/p,y=i.y+c/p,x=((v-g)*u-(y-E)*c)/(l*u-h*c);r=g+l*x-e.x,n=E+h*x-e.y;var T=r*r+n*n;if(2>=T)return new THREE.Vector2(r,n);a=Math.sqrt(T/2)}else{var w=!1;l>o?c>o&&(w=!0):-o>l?-o>c&&(w=!0):s(h)==s(u)&&(w=!0),w?(r=-h,n=l,a=Math.sqrt(d)):(r=l,n=h,a=Math.sqrt(d/2))}return new THREE.Vector2(r/a,n/a)}function n(){if(y){var e=0,t=U*e;for(j=0;W>j;j++)V=q[j],l(V[2]+t,V[1]+t,V[0]+t,!0);for(e=T+2*v,t=U*e,j=0;W>j;j++)V=q[j],l(V[0]+t,V[1]+t,V[2]+t,!1)}else{for(j=0;W>j;j++)V=q[j],l(V[2],V[1],V[0],!0);for(j=0;W>j;j++)V=q[j],l(V[0]+U*T,V[1]+U*T,V[2]+U*T,!1)}}function o(){var e=0;for(s(P,e),e+=P.length,F=0,S=L.length;S>F;F++)b=L[F],s(b,e),e+=b.length}function s(e,t){var i,r;for(j=e.length;--j>=0;){i=j,r=j-1,0>r&&(r=e.length-1);var n=0,o=T+2*v;for(n=0;o>n;n++){var s=U*n,a=U*(n+1),l=t+i+s,c=t+r+s,u=t+r+a,d=t+i+a;h(l,c,u,d,e,n,o,i,r)}}}function a(e,t,i){H.vertices.push(new THREE.Vector3(e,t,i))}function l(i,r,n,o){i+=D,r+=D,n+=D,H.faces.push(new THREE.Face3(i,r,n,null,null,R));var s=o?C.generateBottomUV(H,e,t,i,r,n):C.generateTopUV(H,e,t,i,r,n);H.faceVertexUvs[0].push(s)}function h(i,r,n,o,s,a,l,h,c){i+=D,r+=D,n+=D,o+=D,H.faces.push(new THREE.Face3(i,r,o,null,null,_)),H.faces.push(new THREE.Face3(r,n,o,null,null,_));var u=C.generateSideWallUV(H,e,s,t,i,r,n,o,a,l,h,c);H.faceVertexUvs[0].push([u[0],u[1],u[3]]),H.faceVertexUvs[0].push([u[1],u[2],u[3]])}{var c,u,d,f,m,p=void 0!==t.amount?t.amount:100,g=void 0!==t.bevelThickness?t.bevelThickness:6,E=void 0!==t.bevelSize?t.bevelSize:g-2,v=void 0!==t.bevelSegments?t.bevelSegments:3,y=void 0!==t.bevelEnabled?t.bevelEnabled:!0,x=void 0!==t.curveSegments?t.curveSegments:12,T=void 0!==t.steps?t.steps:1,w=t.extrudePath,A=!1,R=t.material,_=t.extrudeMaterial,C=void 0!==t.UVGenerator?t.UVGenerator:THREE.ExtrudeGeometry.WorldUVGenerator;this.shapebb}w&&(c=w.getSpacedPoints(T),A=!0,y=!1,u=void 0!==t.frames?t.frames:new THREE.TubeGeometry.FrenetFrames(w,T,!1),d=new THREE.Vector3,f=new THREE.Vector3,m=new THREE.Vector3),y||(v=0,g=0,E=0);var b,F,S,H=this,D=this.vertices.length,M=e.extractPoints(x),B=M.shape,L=M.holes,k=!THREE.Shape.Utils.isClockWise(B);if(k){for(B=B.reverse(),F=0,S=L.length;S>F;F++)b=L[F],THREE.Shape.Utils.isClockWise(b)&&(L[F]=b.reverse());k=!1}var q=THREE.Shape.Utils.triangulateShape(B,L),P=B;for(F=0,S=L.length;S>F;F++)b=L[F],B=B.concat(b);for(var $,O,I,z,N,V,U=B.length,W=q.length,G=(P.length,180/Math.PI,[]),j=0,X=P.length,Y=X-1,K=j+1;X>j;j++,Y++,K++){Y===X&&(Y=0),K===X&&(K=0);{P[j],P[Y],P[K]}G[j]=r(P[j],P[Y],P[K])}var Z,Q=[],J=G.concat();for(F=0,S=L.length;S>F;F++){for(b=L[F],Z=[],j=0,X=b.length,Y=X-1,K=j+1;X>j;j++,Y++,K++)Y===X&&(Y=0),K===X&&(K=0),Z[j]=r(b[j],b[Y],b[K]);Q.push(Z),J=J.concat(Z)}for($=0;v>$;$++){for(I=$/v,z=g*(1-I),O=E*Math.sin(I*Math.PI/2),j=0,X=P.length;X>j;j++)N=i(P[j],G[j],O),a(N.x,N.y,-z);for(F=0,S=L.length;S>F;F++)for(b=L[F],Z=Q[F],j=0,X=b.length;X>j;j++)N=i(b[j],Z[j],O),a(N.x,N.y,-z)}for(O=E,j=0;U>j;j++)N=y?i(B[j],J[j],O):B[j],A?(f.copy(u.normals[0]).multiplyScalar(N.x),d.copy(u.binormals[0]).multiplyScalar(N.y),m.copy(c[0]).add(f).add(d),a(m.x,m.y,m.z)):a(N.x,N.y,0);var et;for(et=1;T>=et;et++)for(j=0;U>j;j++)N=y?i(B[j],J[j],O):B[j],A?(f.copy(u.normals[et]).multiplyScalar(N.x),d.copy(u.binormals[et]).multiplyScalar(N.y),m.copy(c[et]).add(f).add(d),a(m.x,m.y,m.z)):a(N.x,N.y,p/T*et);for($=v-1;$>=0;$--){for(I=$/v,z=g*(1-I),O=E*Math.sin(I*Math.PI/2),j=0,X=P.length;X>j;j++)N=i(P[j],G[j],O),a(N.x,N.y,p+z);for(F=0,S=L.length;S>F;F++)for(b=L[F],Z=Q[F],j=0,X=b.length;X>j;j++)N=i(b[j],Z[j],O),A?a(N.x,N.y+c[T-1].y,c[T-1].x+z):a(N.x,N.y,p+z)}n(),o()},THREE.ExtrudeGeometry.WorldUVGenerator={generateTopUV:function(e,t,i,r,n,o){var s=e.vertices[r].x,a=e.vertices[r].y,l=e.vertices[n].x,h=e.vertices[n].y,c=e.vertices[o].x,u=e.vertices[o].y;return[new THREE.Vector2(s,a),new THREE.Vector2(l,h),new THREE.Vector2(c,u)]},generateBottomUV:function(e,t,i,r,n,o){return this.generateTopUV(e,t,i,r,n,o)},generateSideWallUV:function(e,t,i,r,n,o,s,a){var l=e.vertices[n].x,h=e.vertices[n].y,c=e.vertices[n].z,u=e.vertices[o].x,d=e.vertices[o].y,f=e.vertices[o].z,m=e.vertices[s].x,p=e.vertices[s].y,g=e.vertices[s].z,E=e.vertices[a].x,v=e.vertices[a].y,y=e.vertices[a].z;return Math.abs(h-d)<.01?[new THREE.Vector2(l,1-c),new THREE.Vector2(u,1-f),new THREE.Vector2(m,1-g),new THREE.Vector2(E,1-y)]:[new THREE.Vector2(h,1-c),new THREE.Vector2(d,1-f),new THREE.Vector2(p,1-g),new THREE.Vector2(v,1-y)]}},THREE.ExtrudeGeometry.__v1=new THREE.Vector2,THREE.ExtrudeGeometry.__v2=new THREE.Vector2,THREE.ExtrudeGeometry.__v3=new THREE.Vector2,THREE.ExtrudeGeometry.__v4=new THREE.Vector2,THREE.ExtrudeGeometry.__v5=new THREE.Vector2,THREE.ExtrudeGeometry.__v6=new THREE.Vector2,THREE.ShapeGeometry=function(e,t){THREE.Geometry.call(this),e instanceof Array==!1&&(e=[e]),this.shapebb=e[e.length-1].getBoundingBox(),this.addShapeList(e,t),this.computeCentroids(),this.computeFaceNormals()},THREE.ShapeGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.ShapeGeometry.prototype.addShapeList=function(e,t){for(var i=0,r=e.length;r>i;i++)this.addShape(e[i],t);return this},THREE.ShapeGeometry.prototype.addShape=function(e,t){void 0===t&&(t={});var i,r,n,o=void 0!==t.curveSegments?t.curveSegments:12,s=t.material,a=void 0===t.UVGenerator?THREE.ExtrudeGeometry.WorldUVGenerator:t.UVGenerator,l=(this.shapebb,this.vertices.length),h=e.extractPoints(o),c=h.shape,u=h.holes,d=!THREE.Shape.Utils.isClockWise(c);if(d){for(c=c.reverse(),i=0,r=u.length;r>i;i++)n=u[i],THREE.Shape.Utils.isClockWise(n)&&(u[i]=n.reverse());d=!1}var f=THREE.Shape.Utils.triangulateShape(c,u),m=c;for(i=0,r=u.length;r>i;i++)n=u[i],c=c.concat(n);{var p,g,E=c.length,v=f.length;m.length}for(i=0;E>i;i++)p=c[i],this.vertices.push(new THREE.Vector3(p.x,p.y,0));for(i=0;v>i;i++){g=f[i];var y=g[0]+l,x=g[1]+l,T=g[2]+l;this.faces.push(new THREE.Face3(y,x,T,null,null,s)),this.faceVertexUvs[0].push(a.generateBottomUV(this,e,t,y,x,T))}},THREE.LatheGeometry=function(e,t,i,r){THREE.Geometry.call(this),t=t||12,i=i||0,r=r||2*Math.PI;for(var n=1/(e.length-1),o=1/t,s=0,a=t;a>=s;s++)for(var l=i+s*o*r,h=Math.cos(l),c=Math.sin(l),u=0,d=e.length;d>u;u++){var f=e[u],m=new THREE.Vector3;m.x=h*f.x-c*f.y,m.y=c*f.x+h*f.y,m.z=f.z,this.vertices.push(m)}for(var p=e.length,s=0,a=t;a>s;s++)for(var u=0,d=e.length-1;d>u;u++){var g=u+p*s,E=g,v=g+p,h=g+1+p,y=g+1,x=s*o,T=u*n,w=x+o,A=T+n;this.faces.push(new THREE.Face3(E,v,y)),this.faceVertexUvs[0].push([new THREE.Vector2(x,T),new THREE.Vector2(w,T),new THREE.Vector2(x,A)]),this.faces.push(new THREE.Face3(v,h,y)),this.faceVertexUvs[0].push([new THREE.Vector2(w,T),new THREE.Vector2(w,A),new THREE.Vector2(x,A)])}this.mergeVertices(),this.computeCentroids(),this.computeFaceNormals(),this.computeVertexNormals()},THREE.LatheGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.PlaneGeometry=function(e,t,i,r){THREE.Geometry.call(this),this.width=e,this.height=t,this.widthSegments=i||1,this.heightSegments=r||1;var n,o,s=e/2,a=t/2,l=this.widthSegments,h=this.heightSegments,c=l+1,u=h+1,d=this.width/l,f=this.height/h,m=new THREE.Vector3(0,0,1);for(o=0;u>o;o++)for(n=0;c>n;n++){var p=n*d-s,g=o*f-a;this.vertices.push(new THREE.Vector3(p,-g,0))}for(o=0;h>o;o++)for(n=0;l>n;n++){var E=n+c*o,v=n+c*(o+1),y=n+1+c*(o+1),x=n+1+c*o,T=new THREE.Vector2(n/l,1-o/h),w=new THREE.Vector2(n/l,1-(o+1)/h),A=new THREE.Vector2((n+1)/l,1-(o+1)/h),R=new THREE.Vector2((n+1)/l,1-o/h),_=new THREE.Face3(E,v,x);_.normal.copy(m),_.vertexNormals.push(m.clone(),m.clone(),m.clone()),this.faces.push(_),this.faceVertexUvs[0].push([T,w,R]),_=new THREE.Face3(v,y,x),_.normal.copy(m),_.vertexNormals.push(m.clone(),m.clone(),m.clone()),this.faces.push(_),this.faceVertexUvs[0].push([w.clone(),A,R.clone()])}this.computeCentroids()},THREE.PlaneGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.RingGeometry=function(e,t,i,r,n,o){THREE.Geometry.call(this),e=e||0,t=t||50,n=void 0!==n?n:0,o=void 0!==o?o:2*Math.PI,i=void 0!==i?Math.max(3,i):8,r=void 0!==r?Math.max(3,r):8;var s,a,l=[],h=e,c=(t-e)/r;for(s=0;r>=s;s++){for(a=0;i>=a;a++){var u=new THREE.Vector3,d=n+a/i*o;u.x=h*Math.cos(d),u.y=h*Math.sin(d),this.vertices.push(u),l.push(new THREE.Vector2((u.x/t+1)/2,(u.y/t+1)/2))}h+=c}var f=new THREE.Vector3(0,0,1);for(s=0;r>s;s++){var m=s*i;for(a=0;i>=a;a++){var d=a+m,p=d+s,g=d+i+s,E=d+i+1+s;this.faces.push(new THREE.Face3(p,g,E,[f.clone(),f.clone(),f.clone()])),this.faceVertexUvs[0].push([l[p].clone(),l[g].clone(),l[E].clone()]),p=d+s,g=d+i+1+s,E=d+1+s,this.faces.push(new THREE.Face3(p,g,E,[f.clone(),f.clone(),f.clone()])),this.faceVertexUvs[0].push([l[p].clone(),l[g].clone(),l[E].clone()])}}this.computeCentroids(),this.computeFaceNormals(),this.boundingSphere=new THREE.Sphere(new THREE.Vector3,h)},THREE.RingGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.SphereGeometry=function(e,t,i,r,n,o,s){THREE.Geometry.call(this),this.radius=e=e||50,this.widthSegments=t=Math.max(3,Math.floor(t)||8),this.heightSegments=i=Math.max(2,Math.floor(i)||6),this.phiStart=r=void 0!==r?r:0,this.phiLength=n=void 0!==n?n:2*Math.PI,this.thetaStart=o=void 0!==o?o:0,this.thetaLength=s=void 0!==s?s:Math.PI;var a,l,h=[],c=[];for(l=0;i>=l;l++){var u=[],d=[];for(a=0;t>=a;a++){var f=a/t,m=l/i,p=new THREE.Vector3;p.x=-e*Math.cos(r+f*n)*Math.sin(o+m*s),p.y=e*Math.cos(o+m*s),p.z=e*Math.sin(r+f*n)*Math.sin(o+m*s),this.vertices.push(p),u.push(this.vertices.length-1),d.push(new THREE.Vector2(f,1-m))}h.push(u),c.push(d)}for(l=0;l<this.heightSegments;l++)for(a=0;a<this.widthSegments;a++){var g=h[l][a+1],E=h[l][a],v=h[l+1][a],y=h[l+1][a+1],x=this.vertices[g].clone().normalize(),T=this.vertices[E].clone().normalize(),w=this.vertices[v].clone().normalize(),A=this.vertices[y].clone().normalize(),R=c[l][a+1].clone(),_=c[l][a].clone(),C=c[l+1][a].clone(),b=c[l+1][a+1].clone();Math.abs(this.vertices[g].y)===this.radius?(R.x=(R.x+_.x)/2,this.faces.push(new THREE.Face3(g,v,y,[x,w,A])),this.faceVertexUvs[0].push([R,C,b])):Math.abs(this.vertices[v].y)===this.radius?(C.x=(C.x+b.x)/2,this.faces.push(new THREE.Face3(g,E,v,[x,T,w])),this.faceVertexUvs[0].push([R,_,C])):(this.faces.push(new THREE.Face3(g,E,y,[x,T,A])),this.faceVertexUvs[0].push([R,_,b]),this.faces.push(new THREE.Face3(E,v,y,[T.clone(),w,A.clone()])),this.faceVertexUvs[0].push([_.clone(),C,b.clone()]))}this.computeCentroids(),this.computeFaceNormals(),this.boundingSphere=new THREE.Sphere(new THREE.Vector3,e)},THREE.SphereGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.TextGeometry=function(e,t){t=t||{};var i=THREE.FontUtils.generateShapes(e,t);t.amount=void 0!==t.height?t.height:50,void 0===t.bevelThickness&&(t.bevelThickness=10),void 0===t.bevelSize&&(t.bevelSize=8),void 0===t.bevelEnabled&&(t.bevelEnabled=!1),THREE.ExtrudeGeometry.call(this,i,t)},THREE.TextGeometry.prototype=Object.create(THREE.ExtrudeGeometry.prototype),THREE.TorusGeometry=function(e,t,i,r,n){THREE.Geometry.call(this);this.radius=e||100,this.tube=t||40,this.radialSegments=i||8,this.tubularSegments=r||6,this.arc=n||2*Math.PI;
for(var o=new THREE.Vector3,s=[],a=[],l=0;l<=this.radialSegments;l++)for(var h=0;h<=this.tubularSegments;h++){var c=h/this.tubularSegments*this.arc,u=l/this.radialSegments*Math.PI*2;o.x=this.radius*Math.cos(c),o.y=this.radius*Math.sin(c);var d=new THREE.Vector3;d.x=(this.radius+this.tube*Math.cos(u))*Math.cos(c),d.y=(this.radius+this.tube*Math.cos(u))*Math.sin(c),d.z=this.tube*Math.sin(u),this.vertices.push(d),s.push(new THREE.Vector2(h/this.tubularSegments,l/this.radialSegments)),a.push(d.clone().sub(o).normalize())}for(var l=1;l<=this.radialSegments;l++)for(var h=1;h<=this.tubularSegments;h++){var f=(this.tubularSegments+1)*l+h-1,m=(this.tubularSegments+1)*(l-1)+h-1,p=(this.tubularSegments+1)*(l-1)+h,g=(this.tubularSegments+1)*l+h,E=new THREE.Face3(f,m,g,[a[f].clone(),a[m].clone(),a[g].clone()]);this.faces.push(E),this.faceVertexUvs[0].push([s[f].clone(),s[m].clone(),s[g].clone()]),E=new THREE.Face3(m,p,g,[a[m].clone(),a[p].clone(),a[g].clone()]),this.faces.push(E),this.faceVertexUvs[0].push([s[m].clone(),s[p].clone(),s[g].clone()])}this.computeCentroids(),this.computeFaceNormals()},THREE.TorusGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.TorusKnotGeometry=function(e,t,i,r,n,o,s){function a(e,t,i,r,n){var o=Math.cos(e),s=Math.sin(e),a=t/i*e,l=Math.cos(a),h=r*(2+l)*.5*o,c=r*(2+l)*s*.5,u=n*r*Math.sin(a)*.5;return new THREE.Vector3(h,c,u)}THREE.Geometry.call(this);var l=this;this.radius=e||100,this.tube=t||40,this.radialSegments=i||64,this.tubularSegments=r||8,this.p=n||2,this.q=o||3,this.heightScale=s||1,this.grid=new Array(this.radialSegments);for(var h=new THREE.Vector3,c=new THREE.Vector3,u=new THREE.Vector3,d=0;d<this.radialSegments;++d){this.grid[d]=new Array(this.tubularSegments);var f=d/this.radialSegments*2*this.p*Math.PI,m=a(f,this.q,this.p,this.radius,this.heightScale),p=a(f+.01,this.q,this.p,this.radius,this.heightScale);h.subVectors(p,m),c.addVectors(p,m),u.crossVectors(h,c),c.crossVectors(u,h),u.normalize(),c.normalize();for(var g=0;g<this.tubularSegments;++g){var E=g/this.tubularSegments*2*Math.PI,v=-this.tube*Math.cos(E),y=this.tube*Math.sin(E),x=new THREE.Vector3;x.x=m.x+v*c.x+y*u.x,x.y=m.y+v*c.y+y*u.y,x.z=m.z+v*c.z+y*u.z,this.grid[d][g]=l.vertices.push(x)-1}}for(var d=0;d<this.radialSegments;++d)for(var g=0;g<this.tubularSegments;++g){var T=(d+1)%this.radialSegments,w=(g+1)%this.tubularSegments,A=this.grid[d][g],R=this.grid[T][g],_=this.grid[T][w],C=this.grid[d][w],b=new THREE.Vector2(d/this.radialSegments,g/this.tubularSegments),F=new THREE.Vector2((d+1)/this.radialSegments,g/this.tubularSegments),S=new THREE.Vector2((d+1)/this.radialSegments,(g+1)/this.tubularSegments),H=new THREE.Vector2(d/this.radialSegments,(g+1)/this.tubularSegments);this.faces.push(new THREE.Face3(A,R,C)),this.faceVertexUvs[0].push([b,F,H]),this.faces.push(new THREE.Face3(R,_,C)),this.faceVertexUvs[0].push([F.clone(),S,H.clone()])}this.computeCentroids(),this.computeFaceNormals(),this.computeVertexNormals()},THREE.TorusKnotGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.TubeGeometry=function(e,t,i,r,n){function o(e,t,i){return C.vertices.push(new THREE.Vector3(e,t,i))-1}THREE.Geometry.call(this),this.path=e,this.segments=t||64,this.radius=i||1,this.radialSegments=r||8,this.closed=n||!1,this.grid=[];var s,a,l,h,c,u,d,f,m,p,g,E,v,y,x,T,w,A,R,_,C=this,b=this.segments+1,F=new THREE.Vector3,S=new THREE.TubeGeometry.FrenetFrames(this.path,this.segments,this.closed),H=S.tangents,D=S.normals,M=S.binormals;for(this.tangents=H,this.normals=D,this.binormals=M,m=0;b>m;m++)for(this.grid[m]=[],h=m/(b-1),f=e.getPointAt(h),s=H[m],a=D[m],l=M[m],p=0;p<this.radialSegments;p++)c=p/this.radialSegments*2*Math.PI,u=-this.radius*Math.cos(c),d=this.radius*Math.sin(c),F.copy(f),F.x+=u*a.x+d*l.x,F.y+=u*a.y+d*l.y,F.z+=u*a.z+d*l.z,this.grid[m][p]=o(F.x,F.y,F.z);for(m=0;m<this.segments;m++)for(p=0;p<this.radialSegments;p++)g=this.closed?(m+1)%this.segments:m+1,E=(p+1)%this.radialSegments,v=this.grid[m][p],y=this.grid[g][p],x=this.grid[g][E],T=this.grid[m][E],w=new THREE.Vector2(m/this.segments,p/this.radialSegments),A=new THREE.Vector2((m+1)/this.segments,p/this.radialSegments),R=new THREE.Vector2((m+1)/this.segments,(p+1)/this.radialSegments),_=new THREE.Vector2(m/this.segments,(p+1)/this.radialSegments),this.faces.push(new THREE.Face3(v,y,T)),this.faceVertexUvs[0].push([w,A,_]),this.faces.push(new THREE.Face3(y,x,T)),this.faceVertexUvs[0].push([A.clone(),R,_.clone()]);this.computeCentroids(),this.computeFaceNormals(),this.computeVertexNormals()},THREE.TubeGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.TubeGeometry.FrenetFrames=function(e,t,i){function r(){f[0]=new THREE.Vector3,m[0]=new THREE.Vector3,o=Number.MAX_VALUE,s=Math.abs(d[0].x),a=Math.abs(d[0].y),l=Math.abs(d[0].z),o>=s&&(o=s,u.set(1,0,0)),o>=a&&(o=a,u.set(0,1,0)),o>=l&&u.set(0,0,1),p.crossVectors(d[0],u).normalize(),f[0].crossVectors(d[0],p),m[0].crossVectors(d[0],f[0])}var n,o,s,a,l,h,c,u=(new THREE.Vector3,new THREE.Vector3),d=(new THREE.Vector3,[]),f=[],m=[],p=new THREE.Vector3,g=new THREE.Matrix4,E=t+1,v=1e-4;for(this.tangents=d,this.normals=f,this.binormals=m,h=0;E>h;h++)c=h/(E-1),d[h]=e.getTangentAt(c),d[h].normalize();for(r(),h=1;E>h;h++)f[h]=f[h-1].clone(),m[h]=m[h-1].clone(),p.crossVectors(d[h-1],d[h]),p.length()>v&&(p.normalize(),n=Math.acos(THREE.Math.clamp(d[h-1].dot(d[h]),-1,1)),f[h].applyMatrix4(g.makeRotationAxis(p,n))),m[h].crossVectors(d[h],f[h]);if(i)for(n=Math.acos(THREE.Math.clamp(f[0].dot(f[E-1]),-1,1)),n/=E-1,d[0].dot(p.crossVectors(f[0],f[E-1]))>0&&(n=-n),h=1;E>h;h++)f[h].applyMatrix4(g.makeRotationAxis(d[h],n*h)),m[h].crossVectors(d[h],f[h])},THREE.PolyhedronGeometry=function(e,t,i,r){function n(e){var t=e.normalize().clone();t.index=c.vertices.push(t)-1;var i=a(e)/2/Math.PI+.5,r=l(e)/Math.PI+.5;return t.uv=new THREE.Vector2(i,1-r),t}function o(e,t,i){var r=new THREE.Face3(e.index,t.index,i.index,[e.clone(),t.clone(),i.clone()]);r.centroid.add(e).add(t).add(i).divideScalar(3),c.faces.push(r);var n=a(r.centroid);c.faceVertexUvs[0].push([h(e.uv,e,n),h(t.uv,t,n),h(i.uv,i,n)])}function s(e,t){for(var i=Math.pow(2,t),r=(Math.pow(4,t),n(c.vertices[e.a])),s=n(c.vertices[e.b]),a=n(c.vertices[e.c]),l=[],h=0;i>=h;h++){l[h]=[];for(var u=n(r.clone().lerp(a,h/i)),d=n(s.clone().lerp(a,h/i)),f=i-h,m=0;f>=m;m++)l[h][m]=0==m&&h==i?u:n(u.clone().lerp(d,m/f))}for(var h=0;i>h;h++)for(var m=0;2*(i-h)-1>m;m++){var p=Math.floor(m/2);m%2==0?o(l[h][p+1],l[h+1][p],l[h][p]):o(l[h][p+1],l[h+1][p+1],l[h+1][p])}}function a(e){return Math.atan2(e.z,-e.x)}function l(e){return Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))}function h(e,t,i){return 0>i&&1===e.x&&(e=new THREE.Vector2(e.x-1,e.y)),0===t.x&&0===t.z&&(e=new THREE.Vector2(i/2/Math.PI+.5,e.y)),e.clone()}THREE.Geometry.call(this),i=i||1,r=r||0;for(var c=this,u=0,d=e.length;d>u;u++)n(new THREE.Vector3(e[u][0],e[u][1],e[u][2]));for(var f=this.vertices,m=[],u=0,d=t.length;d>u;u++){var p=f[t[u][0]],g=f[t[u][1]],E=f[t[u][2]];m[u]=new THREE.Face3(p.index,g.index,E.index,[p.clone(),g.clone(),E.clone()])}for(var u=0,d=m.length;d>u;u++)s(m[u],r);for(var u=0,d=this.faceVertexUvs[0].length;d>u;u++){var v=this.faceVertexUvs[0][u],y=v[0].x,x=v[1].x,T=v[2].x,w=Math.max(y,Math.max(x,T)),A=Math.min(y,Math.min(x,T));w>.9&&.1>A&&(.2>y&&(v[0].x+=1),.2>x&&(v[1].x+=1),.2>T&&(v[2].x+=1))}for(var u=0,d=this.vertices.length;d>u;u++)this.vertices[u].multiplyScalar(i);this.mergeVertices(),this.computeCentroids(),this.computeFaceNormals(),this.boundingSphere=new THREE.Sphere(new THREE.Vector3,i)},THREE.PolyhedronGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.IcosahedronGeometry=function(e,t){this.radius=e,this.detail=t;var i=(1+Math.sqrt(5))/2,r=[[-1,i,0],[1,i,0],[-1,-i,0],[1,-i,0],[0,-1,i],[0,1,i],[0,-1,-i],[0,1,-i],[i,0,-1],[i,0,1],[-i,0,-1],[-i,0,1]],n=[[0,11,5],[0,5,1],[0,1,7],[0,7,10],[0,10,11],[1,5,9],[5,11,4],[11,10,2],[10,7,6],[7,1,8],[3,9,4],[3,4,2],[3,2,6],[3,6,8],[3,8,9],[4,9,5],[2,4,11],[6,2,10],[8,6,7],[9,8,1]];THREE.PolyhedronGeometry.call(this,r,n,e,t)},THREE.IcosahedronGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.OctahedronGeometry=function(e,t){var i=[[1,0,0],[-1,0,0],[0,1,0],[0,-1,0],[0,0,1],[0,0,-1]],r=[[0,2,4],[0,4,3],[0,3,5],[0,5,2],[1,2,5],[1,5,3],[1,3,4],[1,4,2]];THREE.PolyhedronGeometry.call(this,i,r,e,t)},THREE.OctahedronGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.TetrahedronGeometry=function(e,t){var i=[[1,1,1],[-1,-1,1],[-1,1,-1],[1,-1,-1]],r=[[2,1,0],[0,3,2],[1,3,0],[2,3,1]];THREE.PolyhedronGeometry.call(this,i,r,e,t)},THREE.TetrahedronGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.ParametricGeometry=function(e,t,i){THREE.Geometry.call(this);var r,n,o,s,a,l=this.vertices,h=this.faces,c=this.faceVertexUvs[0],u=t+1;for(r=0;i>=r;r++)for(a=r/i,n=0;t>=n;n++)s=n/t,o=e(s,a),l.push(o);var d,f,m,p,g,E,v,y;for(r=0;i>r;r++)for(n=0;t>n;n++)d=r*u+n,f=r*u+n+1,m=(r+1)*u+n+1,p=(r+1)*u+n,g=new THREE.Vector2(n/t,r/i),E=new THREE.Vector2((n+1)/t,r/i),v=new THREE.Vector2((n+1)/t,(r+1)/i),y=new THREE.Vector2(n/t,(r+1)/i),h.push(new THREE.Face3(d,f,p)),c.push([g,E,y]),h.push(new THREE.Face3(f,m,p)),c.push([E.clone(),v,y.clone()]);this.computeCentroids(),this.computeFaceNormals(),this.computeVertexNormals()},THREE.ParametricGeometry.prototype=Object.create(THREE.Geometry.prototype),THREE.AxisHelper=function(e){e=e||1;var t=new THREE.Geometry;t.vertices.push(new THREE.Vector3,new THREE.Vector3(e,0,0),new THREE.Vector3,new THREE.Vector3(0,e,0),new THREE.Vector3,new THREE.Vector3(0,0,e)),t.colors.push(new THREE.Color(16711680),new THREE.Color(16755200),new THREE.Color(65280),new THREE.Color(11206400),new THREE.Color(255),new THREE.Color(43775));var i=new THREE.LineBasicMaterial({vertexColors:THREE.VertexColors});THREE.Line.call(this,t,i,THREE.LinePieces)},THREE.AxisHelper.prototype=Object.create(THREE.Line.prototype),THREE.ArrowHelper=function(e,t,i,r,n,o){THREE.Object3D.call(this),void 0===r&&(r=16776960),void 0===i&&(i=1),void 0===n&&(n=.2*i),void 0===o&&(o=.2*n),this.position=t;var s=new THREE.Geometry;s.vertices.push(new THREE.Vector3(0,0,0)),s.vertices.push(new THREE.Vector3(0,1,0)),this.line=new THREE.Line(s,new THREE.LineBasicMaterial({color:r})),this.line.matrixAutoUpdate=!1,this.add(this.line);var a=new THREE.CylinderGeometry(0,.5,1,5,1);a.applyMatrix((new THREE.Matrix4).makeTranslation(0,-.5,0)),this.cone=new THREE.Mesh(a,new THREE.MeshBasicMaterial({color:r})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,n,o)},THREE.ArrowHelper.prototype=Object.create(THREE.Object3D.prototype),THREE.ArrowHelper.prototype.setDirection=function(){var e,t=new THREE.Vector3;return function(i){i.y>.99999?this.quaternion.set(0,0,0,1):i.y<-.99999?this.quaternion.set(1,0,0,0):(t.set(i.z,0,-i.x).normalize(),e=Math.acos(i.y),this.quaternion.setFromAxisAngle(t,e))}}(),THREE.ArrowHelper.prototype.setLength=function(e,t,i){void 0===t&&(t=.2*e),void 0===i&&(i=.2*t),this.line.scale.set(1,e,1),this.line.updateMatrix(),this.cone.scale.set(i,t,i),this.cone.position.y=e,this.cone.updateMatrix()},THREE.ArrowHelper.prototype.setColor=function(e){this.line.material.color.setHex(e),this.cone.material.color.setHex(e)},THREE.BoxHelper=function(e){var t=[new THREE.Vector3(1,1,1),new THREE.Vector3(-1,1,1),new THREE.Vector3(-1,-1,1),new THREE.Vector3(1,-1,1),new THREE.Vector3(1,1,-1),new THREE.Vector3(-1,1,-1),new THREE.Vector3(-1,-1,-1),new THREE.Vector3(1,-1,-1)];this.vertices=t;var i=new THREE.Geometry;i.vertices.push(t[0],t[1],t[1],t[2],t[2],t[3],t[3],t[0],t[4],t[5],t[5],t[6],t[6],t[7],t[7],t[4],t[0],t[4],t[1],t[5],t[2],t[6],t[3],t[7]),THREE.Line.call(this,i,new THREE.LineBasicMaterial({color:16776960}),THREE.LinePieces),void 0!==e&&this.update(e)},THREE.BoxHelper.prototype=Object.create(THREE.Line.prototype),THREE.BoxHelper.prototype.update=function(e){var t=e.geometry;null===t.boundingBox&&t.computeBoundingBox();var i=t.boundingBox.min,r=t.boundingBox.max,n=this.vertices;n[0].set(r.x,r.y,r.z),n[1].set(i.x,r.y,r.z),n[2].set(i.x,i.y,r.z),n[3].set(r.x,i.y,r.z),n[4].set(r.x,r.y,i.z),n[5].set(i.x,r.y,i.z),n[6].set(i.x,i.y,i.z),n[7].set(r.x,i.y,i.z),this.geometry.computeBoundingSphere(),this.geometry.verticesNeedUpdate=!0,this.matrixAutoUpdate=!1,this.matrixWorld=e.matrixWorld},THREE.BoundingBoxHelper=function(e,t){var i=void 0!==t?t:8947848;this.object=e,this.box=new THREE.Box3,THREE.Mesh.call(this,new THREE.BoxGeometry(1,1,1),new THREE.MeshBasicMaterial({color:i,wireframe:!0}))},THREE.BoundingBoxHelper.prototype=Object.create(THREE.Mesh.prototype),THREE.BoundingBoxHelper.prototype.update=function(){this.box.setFromObject(this.object),this.box.size(this.scale),this.box.center(this.position)},THREE.CameraHelper=function(e){function t(e,t,r){i(e,r),i(t,r)}function i(e,t){r.vertices.push(new THREE.Vector3),r.colors.push(new THREE.Color(t)),void 0===o[e]&&(o[e]=[]),o[e].push(r.vertices.length-1)}var r=new THREE.Geometry,n=new THREE.LineBasicMaterial({color:16777215,vertexColors:THREE.FaceColors}),o={},s=16755200,a=16711680,l=43775,h=16777215,c=3355443;t("n1","n2",s),t("n2","n4",s),t("n4","n3",s),t("n3","n1",s),t("f1","f2",s),t("f2","f4",s),t("f4","f3",s),t("f3","f1",s),t("n1","f1",s),t("n2","f2",s),t("n3","f3",s),t("n4","f4",s),t("p","n1",a),t("p","n2",a),t("p","n3",a),t("p","n4",a),t("u1","u2",l),t("u2","u3",l),t("u3","u1",l),t("c","t",h),t("p","c",c),t("cn1","cn2",c),t("cn3","cn4",c),t("cf1","cf2",c),t("cf3","cf4",c),THREE.Line.call(this,r,n,THREE.LinePieces),this.camera=e,this.matrixWorld=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update()},THREE.CameraHelper.prototype=Object.create(THREE.Line.prototype),THREE.CameraHelper.prototype.update=function(){var e=new THREE.Vector3,t=new THREE.Camera,i=new THREE.Projector;return function(){function r(r,o,s,a){e.set(o,s,a),i.unprojectVector(e,t);var l=n.pointMap[r];if(void 0!==l)for(var h=0,c=l.length;c>h;h++)n.geometry.vertices[l[h]].copy(e)}var n=this,o=1,s=1;t.projectionMatrix.copy(this.camera.projectionMatrix),r("c",0,0,-1),r("t",0,0,1),r("n1",-o,-s,-1),r("n2",o,-s,-1),r("n3",-o,s,-1),r("n4",o,s,-1),r("f1",-o,-s,1),r("f2",o,-s,1),r("f3",-o,s,1),r("f4",o,s,1),r("u1",.7*o,1.1*s,-1),r("u2",.7*-o,1.1*s,-1),r("u3",0,2*s,-1),r("cf1",-o,0,1),r("cf2",o,0,1),r("cf3",0,-s,1),r("cf4",0,s,1),r("cn1",-o,0,-1),r("cn2",o,0,-1),r("cn3",0,-s,-1),r("cn4",0,s,-1),this.geometry.verticesNeedUpdate=!0}}(),THREE.DirectionalLightHelper=function(e,t){THREE.Object3D.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrixWorld=e.matrixWorld,this.matrixAutoUpdate=!1,t=t||1;var i=new THREE.PlaneGeometry(t,t),r=new THREE.MeshBasicMaterial({wireframe:!0,fog:!1});r.color.copy(this.light.color).multiplyScalar(this.light.intensity),this.lightPlane=new THREE.Mesh(i,r),this.add(this.lightPlane),i=new THREE.Geometry,i.vertices.push(new THREE.Vector3),i.vertices.push(new THREE.Vector3),r=new THREE.LineBasicMaterial({fog:!1}),r.color.copy(this.light.color).multiplyScalar(this.light.intensity),this.targetLine=new THREE.Line(i,r),this.add(this.targetLine),this.update()},THREE.DirectionalLightHelper.prototype=Object.create(THREE.Object3D.prototype),THREE.DirectionalLightHelper.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},THREE.DirectionalLightHelper.prototype.update=function(){var e=new THREE.Vector3,t=new THREE.Vector3,i=new THREE.Vector3;return function(){e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),i.subVectors(t,e),this.lightPlane.lookAt(i),this.lightPlane.material.color.copy(this.light.color).multiplyScalar(this.light.intensity),this.targetLine.geometry.vertices[1].copy(i),this.targetLine.geometry.verticesNeedUpdate=!0,this.targetLine.material.color.copy(this.lightPlane.material.color)}}(),THREE.EdgesHelper=function(e,t){var i=void 0!==t?t:16777215,r=[0,0],n={},o=function(e,t){return e-t},s=["a","b","c"],a=new THREE.BufferGeometry,l=e.geometry.clone();l.mergeVertices(),l.computeFaceNormals();for(var h=l.vertices,c=l.faces,u=0,d=0,f=c.length;f>d;d++)for(var m=c[d],p=0;3>p;p++){r[0]=m[s[p]],r[1]=m[s[(p+1)%3]],r.sort(o);var g=r.toString();void 0===n[g]?(n[g]={vert1:r[0],vert2:r[1],face1:d,face2:void 0},u++):n[g].face2=d}a.addAttribute("position",Float32Array,2*u,3);var E=a.attributes.position.array,v=0;for(var g in n){var y=n[g];if(void 0===y.face2||c[y.face1].normal.dot(c[y.face2].normal)<.9999){var x=h[y.vert1];E[v++]=x.x,E[v++]=x.y,E[v++]=x.z,x=h[y.vert2],E[v++]=x.x,E[v++]=x.y,E[v++]=x.z}}THREE.Line.call(this,a,new THREE.LineBasicMaterial({color:i}),THREE.LinePieces),this.matrixAutoUpdate=!1,this.matrixWorld=e.matrixWorld},THREE.EdgesHelper.prototype=Object.create(THREE.Line.prototype),THREE.FaceNormalsHelper=function(e,t,i,r){this.object=e,this.size=void 0!==t?t:1;for(var n=void 0!==i?i:16776960,o=void 0!==r?r:1,s=new THREE.Geometry,a=this.object.geometry.faces,l=0,h=a.length;h>l;l++)s.vertices.push(new THREE.Vector3),s.vertices.push(new THREE.Vector3);THREE.Line.call(this,s,new THREE.LineBasicMaterial({color:n,linewidth:o}),THREE.LinePieces),this.matrixAutoUpdate=!1,this.normalMatrix=new THREE.Matrix3,this.update()},THREE.FaceNormalsHelper.prototype=Object.create(THREE.Line.prototype),THREE.FaceNormalsHelper.prototype.update=function(){var e=new THREE.Vector3;return function(){this.object.updateMatrixWorld(!0),this.normalMatrix.getNormalMatrix(this.object.matrixWorld);for(var t=this.geometry.vertices,i=this.object.geometry.faces,r=this.object.matrixWorld,n=0,o=i.length;o>n;n++){var s=i[n];e.copy(s.normal).applyMatrix3(this.normalMatrix).normalize().multiplyScalar(this.size);var a=2*n;t[a].copy(s.centroid).applyMatrix4(r),t[a+1].addVectors(t[a],e)}return this.geometry.verticesNeedUpdate=!0,this}}(),THREE.GridHelper=function(e,t){var i=new THREE.Geometry,r=new THREE.LineBasicMaterial({vertexColors:THREE.VertexColors});this.color1=new THREE.Color(4473924),this.color2=new THREE.Color(8947848);for(var n=-e;e>=n;n+=t){i.vertices.push(new THREE.Vector3(-e,0,n),new THREE.Vector3(e,0,n),new THREE.Vector3(n,0,-e),new THREE.Vector3(n,0,e));var o=0===n?this.color1:this.color2;i.colors.push(o,o,o,o)}THREE.Line.call(this,i,r,THREE.LinePieces)},THREE.GridHelper.prototype=Object.create(THREE.Line.prototype),THREE.GridHelper.prototype.setColors=function(e,t){this.color1.set(e),this.color2.set(t),this.geometry.colorsNeedUpdate=!0},THREE.HemisphereLightHelper=function(e,t){THREE.Object3D.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrixWorld=e.matrixWorld,this.matrixAutoUpdate=!1,this.colors=[new THREE.Color,new THREE.Color];var i=new THREE.SphereGeometry(t,4,2);i.applyMatrix((new THREE.Matrix4).makeRotationX(-Math.PI/2));for(var r=0,n=8;n>r;r++)i.faces[r].color=this.colors[4>r?0:1];var o=new THREE.MeshBasicMaterial({vertexColors:THREE.FaceColors,wireframe:!0});this.lightSphere=new THREE.Mesh(i,o),this.add(this.lightSphere),this.update()},THREE.HemisphereLightHelper.prototype=Object.create(THREE.Object3D.prototype),THREE.HemisphereLightHelper.prototype.dispose=function(){this.lightSphere.geometry.dispose(),this.lightSphere.material.dispose()},THREE.HemisphereLightHelper.prototype.update=function(){var e=new THREE.Vector3;return function(){this.colors[0].copy(this.light.color).multiplyScalar(this.light.intensity),this.colors[1].copy(this.light.groundColor).multiplyScalar(this.light.intensity),this.lightSphere.lookAt(e.setFromMatrixPosition(this.light.matrixWorld).negate()),this.lightSphere.geometry.colorsNeedUpdate=!0}}(),THREE.PointLightHelper=function(e,t){this.light=e,this.light.updateMatrixWorld();var i=new THREE.SphereGeometry(t,4,2),r=new THREE.MeshBasicMaterial({wireframe:!0,fog:!1});r.color.copy(this.light.color).multiplyScalar(this.light.intensity),THREE.Mesh.call(this,i,r),this.matrixWorld=this.light.matrixWorld,this.matrixAutoUpdate=!1},THREE.PointLightHelper.prototype=Object.create(THREE.Mesh.prototype),THREE.PointLightHelper.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},THREE.PointLightHelper.prototype.update=function(){this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)},THREE.SpotLightHelper=function(e){THREE.Object3D.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrixWorld=e.matrixWorld,this.matrixAutoUpdate=!1;var t=new THREE.CylinderGeometry(0,1,1,8,1,!0);t.applyMatrix((new THREE.Matrix4).makeTranslation(0,-.5,0)),t.applyMatrix((new THREE.Matrix4).makeRotationX(-Math.PI/2));var i=new THREE.MeshBasicMaterial({wireframe:!0,fog:!1});this.cone=new THREE.Mesh(t,i),this.add(this.cone),this.update()},THREE.SpotLightHelper.prototype=Object.create(THREE.Object3D.prototype),THREE.SpotLightHelper.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},THREE.SpotLightHelper.prototype.update=function(){var e=new THREE.Vector3,t=new THREE.Vector3;return function(){var i=this.light.distance?this.light.distance:1e4,r=i*Math.tan(this.light.angle);this.cone.scale.set(r,r,i),e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(t.sub(e)),this.cone.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)}}(),THREE.VertexNormalsHelper=function(e,t,i,r){this.object=e,this.size=void 0!==t?t:1;for(var n=void 0!==i?i:16711680,o=void 0!==r?r:1,s=new THREE.Geometry,a=(e.geometry.vertices,e.geometry.faces),l=0,h=a.length;h>l;l++)for(var c=a[l],u=0,d=c.vertexNormals.length;d>u;u++)s.vertices.push(new THREE.Vector3),s.vertices.push(new THREE.Vector3);THREE.Line.call(this,s,new THREE.LineBasicMaterial({color:n,linewidth:o}),THREE.LinePieces),this.matrixAutoUpdate=!1,this.normalMatrix=new THREE.Matrix3,this.update()},THREE.VertexNormalsHelper.prototype=Object.create(THREE.Line.prototype),THREE.VertexNormalsHelper.prototype.update=function(){var e=new THREE.Vector3;return function(){var t=["a","b","c","d"];this.object.updateMatrixWorld(!0),this.normalMatrix.getNormalMatrix(this.object.matrixWorld);for(var i=this.geometry.vertices,r=this.object.geometry.vertices,n=this.object.geometry.faces,o=this.object.matrixWorld,s=0,a=0,l=n.length;l>a;a++)for(var h=n[a],c=0,u=h.vertexNormals.length;u>c;c++){var d=h[t[c]],f=r[d],m=h.vertexNormals[c];i[s].copy(f).applyMatrix4(o),e.copy(m).applyMatrix3(this.normalMatrix).normalize().multiplyScalar(this.size),e.add(i[s]),s+=1,i[s].copy(e),s+=1}return this.geometry.verticesNeedUpdate=!0,this}}(),THREE.VertexTangentsHelper=function(e,t,i,r){this.object=e,this.size=void 0!==t?t:1;for(var n=void 0!==i?i:255,o=void 0!==r?r:1,s=new THREE.Geometry,a=(e.geometry.vertices,e.geometry.faces),l=0,h=a.length;h>l;l++)for(var c=a[l],u=0,d=c.vertexTangents.length;d>u;u++)s.vertices.push(new THREE.Vector3),s.vertices.push(new THREE.Vector3);THREE.Line.call(this,s,new THREE.LineBasicMaterial({color:n,linewidth:o}),THREE.LinePieces),this.matrixAutoUpdate=!1,this.update()},THREE.VertexTangentsHelper.prototype=Object.create(THREE.Line.prototype),THREE.VertexTangentsHelper.prototype.update=function(){var e=new THREE.Vector3;return function(){var t=["a","b","c","d"];this.object.updateMatrixWorld(!0);for(var i=this.geometry.vertices,r=this.object.geometry.vertices,n=this.object.geometry.faces,o=this.object.matrixWorld,s=0,a=0,l=n.length;l>a;a++)for(var h=n[a],c=0,u=h.vertexTangents.length;u>c;c++){var d=h[t[c]],f=r[d],m=h.vertexTangents[c];i[s].copy(f).applyMatrix4(o),e.copy(m).transformDirection(o).multiplyScalar(this.size),e.add(i[s]),s+=1,i[s].copy(e),s+=1}return this.geometry.verticesNeedUpdate=!0,this}}(),THREE.WireframeHelper=function(e,t){var i=void 0!==t?t:16777215,r=[0,0],n={},o=function(e,t){return e-t},s=["a","b","c"],a=new THREE.BufferGeometry;if(e.geometry instanceof THREE.Geometry){for(var l=e.geometry.vertices,h=e.geometry.faces,c=0,u=new Uint32Array(6*h.length),d=0,f=h.length;f>d;d++)for(var m=h[d],p=0;3>p;p++){r[0]=m[s[p]],r[1]=m[s[(p+1)%3]],r.sort(o);var g=r.toString();void 0===n[g]&&(u[2*c]=r[0],u[2*c+1]=r[1],n[g]=!0,c++)}a.addAttribute("position",Float32Array,2*c,3);for(var E=a.attributes.position.array,d=0,f=c;f>d;d++)for(var p=0;2>p;p++){var v=l[u[2*d+p]],y=6*d+3*p;E[y+0]=v.x,E[y+1]=v.y,E[y+2]=v.z}}else if(e.geometry instanceof THREE.BufferGeometry&&void 0!==e.geometry.attributes.index){for(var l=e.geometry.attributes.position.array,x=e.geometry.attributes.index.array,T=e.geometry.offsets,c=0,u=new Uint32Array(2*x.length),w=0,A=T.length;A>w;++w)for(var R=T[w].start,_=T[w].count,y=T[w].index,d=R,C=R+_;C>d;d+=3)for(var p=0;3>p;p++){r[0]=y+x[d+p],r[1]=y+x[d+(p+1)%3],r.sort(o);var g=r.toString();void 0===n[g]&&(u[2*c]=r[0],u[2*c+1]=r[1],n[g]=!0,c++)}a.addAttribute("position",Float32Array,2*c,3);for(var E=a.attributes.position.array,d=0,f=c;f>d;d++)for(var p=0;2>p;p++){var y=6*d+3*p,b=3*u[2*d+p];E[y+0]=l[b],E[y+1]=l[b+1],E[y+2]=l[b+2]}}else if(e.geometry instanceof THREE.BufferGeometry){var l=e.geometry.attributes.position.array,c=l.length/3,F=c/3;a.addAttribute("position",Float32Array,2*c,3);for(var E=a.attributes.position.array,d=0,f=F;f>d;d++)for(var p=0;3>p;p++){var y=18*d+6*p,S=9*d+3*p;E[y+0]=l[S],E[y+1]=l[S+1],E[y+2]=l[S+2];var b=9*d+3*((p+1)%3);E[y+3]=l[b],E[y+4]=l[b+1],E[y+5]=l[b+2]}}THREE.Line.call(this,a,new THREE.LineBasicMaterial({color:i}),THREE.LinePieces),this.matrixAutoUpdate=!1,this.matrixWorld=e.matrixWorld},THREE.WireframeHelper.prototype=Object.create(THREE.Line.prototype),THREE.ImmediateRenderObject=function(){THREE.Object3D.call(this),this.render=function(){}},THREE.ImmediateRenderObject.prototype=Object.create(THREE.Object3D.prototype),THREE.LensFlare=function(e,t,i,r,n){THREE.Object3D.call(this),this.lensFlares=[],this.positionScreen=new THREE.Vector3,this.customUpdateCallback=void 0,void 0!==e&&this.add(e,t,i,r,n)},THREE.LensFlare.prototype=Object.create(THREE.Object3D.prototype),THREE.LensFlare.prototype.add=function(e,t,i,r,n,o){void 0===t&&(t=-1),void 0===i&&(i=0),void 0===o&&(o=1),void 0===n&&(n=new THREE.Color(16777215)),void 0===r&&(r=THREE.NormalBlending),i=Math.min(i,Math.max(0,i)),this.lensFlares.push({texture:e,size:t,distance:i,x:0,y:0,z:0,scale:1,rotation:1,opacity:o,color:n,blending:r})},THREE.LensFlare.prototype.updateLensFlares=function(){var e,t,i=this.lensFlares.length,r=2*-this.positionScreen.x,n=2*-this.positionScreen.y;for(e=0;i>e;e++)t=this.lensFlares[e],t.x=this.positionScreen.x+r*t.distance,t.y=this.positionScreen.y+n*t.distance,t.wantedRotation=t.x*Math.PI*.25,t.rotation+=.25*(t.wantedRotation-t.rotation)},THREE.MorphBlendMesh=function(e,t){THREE.Mesh.call(this,e,t),this.animationsMap={},this.animationsList=[];var i=this.geometry.morphTargets.length,r="__default",n=0,o=i-1,s=i/1;this.createAnimation(r,n,o,s),this.setAnimationWeight(r,1)},THREE.MorphBlendMesh.prototype=Object.create(THREE.Mesh.prototype),THREE.MorphBlendMesh.prototype.createAnimation=function(e,t,i,r){var n={startFrame:t,endFrame:i,length:i-t+1,fps:r,duration:(i-t)/r,lastFrame:0,currentFrame:0,active:!1,time:0,direction:1,weight:1,directionBackwards:!1,mirroredLoop:!1};this.animationsMap[e]=n,this.animationsList.push(n)},THREE.MorphBlendMesh.prototype.autoCreateAnimations=function(e){for(var t,i=/([a-z]+)(\d+)/,r={},n=this.geometry,o=0,s=n.morphTargets.length;s>o;o++){var a=n.morphTargets[o],l=a.name.match(i);if(l&&l.length>1){{var h=l[1];l[2]}r[h]||(r[h]={start:1/0,end:-1/0});var c=r[h];o<c.start&&(c.start=o),o>c.end&&(c.end=o),t||(t=h)}}for(var h in r){var c=r[h];this.createAnimation(h,c.start,c.end,e)}this.firstAnimation=t},THREE.MorphBlendMesh.prototype.setAnimationDirectionForward=function(e){var t=this.animationsMap[e];t&&(t.direction=1,t.directionBackwards=!1)},THREE.MorphBlendMesh.prototype.setAnimationDirectionBackward=function(e){var t=this.animationsMap[e];t&&(t.direction=-1,t.directionBackwards=!0)},THREE.MorphBlendMesh.prototype.setAnimationFPS=function(e,t){var i=this.animationsMap[e];i&&(i.fps=t,i.duration=(i.end-i.start)/i.fps)},THREE.MorphBlendMesh.prototype.setAnimationDuration=function(e,t){var i=this.animationsMap[e];i&&(i.duration=t,i.fps=(i.end-i.start)/i.duration)},THREE.MorphBlendMesh.prototype.setAnimationWeight=function(e,t){var i=this.animationsMap[e];i&&(i.weight=t)},THREE.MorphBlendMesh.prototype.setAnimationTime=function(e,t){var i=this.animationsMap[e];i&&(i.time=t)},THREE.MorphBlendMesh.prototype.getAnimationTime=function(e){var t=0,i=this.animationsMap[e];return i&&(t=i.time),t},THREE.MorphBlendMesh.prototype.getAnimationDuration=function(e){var t=-1,i=this.animationsMap[e];return i&&(t=i.duration),t},THREE.MorphBlendMesh.prototype.playAnimation=function(e){var t=this.animationsMap[e];t?(t.time=0,t.active=!0):console.warn("animation["+e+"] undefined")},THREE.MorphBlendMesh.prototype.stopAnimation=function(e){var t=this.animationsMap[e];t&&(t.active=!1)},THREE.MorphBlendMesh.prototype.update=function(e){for(var t=0,i=this.animationsList.length;i>t;t++){var r=this.animationsList[t];if(r.active){var n=r.duration/r.length;r.time+=r.direction*e,r.mirroredLoop?(r.time>r.duration||r.time<0)&&(r.direction*=-1,r.time>r.duration&&(r.time=r.duration,r.directionBackwards=!0),r.time<0&&(r.time=0,r.directionBackwards=!1)):(r.time=r.time%r.duration,r.time<0&&(r.time+=r.duration));var o=r.startFrame+THREE.Math.clamp(Math.floor(r.time/n),0,r.length-1),s=r.weight;o!==r.currentFrame&&(this.morphTargetInfluences[r.lastFrame]=0,this.morphTargetInfluences[r.currentFrame]=1*s,this.morphTargetInfluences[o]=0,r.lastFrame=r.currentFrame,r.currentFrame=o);var a=r.time%n/n;r.directionBackwards&&(a=1-a),this.morphTargetInfluences[r.currentFrame]=a*s,this.morphTargetInfluences[r.lastFrame]=(1-a)*s}}},THREE.LensFlarePlugin=function(){function e(e,i){var r=t.createProgram(),n=t.createShader(t.FRAGMENT_SHADER),o=t.createShader(t.VERTEX_SHADER),s="precision "+i+" float;\n";return t.shaderSource(n,s+e.fragmentShader),t.shaderSource(o,s+e.vertexShader),t.compileShader(n),t.compileShader(o),t.attachShader(r,n),t.attachShader(r,o),t.linkProgram(r),r}var t,i,r,n={};this.init=function(o){t=o.context,i=o,r=o.getPrecision(),n.vertices=new Float32Array(16),n.faces=new Uint16Array(6);var s=0;n.vertices[s++]=-1,n.vertices[s++]=-1,n.vertices[s++]=0,n.vertices[s++]=0,n.vertices[s++]=1,n.vertices[s++]=-1,n.vertices[s++]=1,n.vertices[s++]=0,n.vertices[s++]=1,n.vertices[s++]=1,n.vertices[s++]=1,n.vertices[s++]=1,n.vertices[s++]=-1,n.vertices[s++]=1,n.vertices[s++]=0,n.vertices[s++]=1,s=0,n.faces[s++]=0,n.faces[s++]=1,n.faces[s++]=2,n.faces[s++]=0,n.faces[s++]=2,n.faces[s++]=3,n.vertexBuffer=t.createBuffer(),n.elementBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,n.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,n.vertices,t.STATIC_DRAW),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n.elementBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,n.faces,t.STATIC_DRAW),n.tempTexture=t.createTexture(),n.occlusionTexture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,n.tempTexture),t.texImage2D(t.TEXTURE_2D,0,t.RGB,16,16,0,t.RGB,t.UNSIGNED_BYTE,null),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.bindTexture(t.TEXTURE_2D,n.occlusionTexture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,16,16,0,t.RGBA,t.UNSIGNED_BYTE,null),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS)<=0?(n.hasVertexTexture=!1,n.program=e(THREE.ShaderFlares.lensFlare,r)):(n.hasVertexTexture=!0,n.program=e(THREE.ShaderFlares.lensFlareVertexTexture,r)),n.attributes={},n.uniforms={},n.attributes.vertex=t.getAttribLocation(n.program,"position"),n.attributes.uv=t.getAttribLocation(n.program,"uv"),n.uniforms.renderType=t.getUniformLocation(n.program,"renderType"),n.uniforms.map=t.getUniformLocation(n.program,"map"),n.uniforms.occlusionMap=t.getUniformLocation(n.program,"occlusionMap"),n.uniforms.opacity=t.getUniformLocation(n.program,"opacity"),n.uniforms.color=t.getUniformLocation(n.program,"color"),n.uniforms.scale=t.getUniformLocation(n.program,"scale"),n.uniforms.rotation=t.getUniformLocation(n.program,"rotation"),n.uniforms.screenPosition=t.getUniformLocation(n.program,"screenPosition")},this.render=function(e,r,o,s){var a=e.__webglFlares,l=a.length;if(l){var h=new THREE.Vector3,c=s/o,u=.5*o,d=.5*s,f=16/s,m=new THREE.Vector2(f*c,f),p=new THREE.Vector3(1,1,0),g=new THREE.Vector2(1,1),E=n.uniforms,v=n.attributes;t.useProgram(n.program),t.enableVertexAttribArray(n.attributes.vertex),t.enableVertexAttribArray(n.attributes.uv),t.uniform1i(E.occlusionMap,0),t.uniform1i(E.map,1),t.bindBuffer(t.ARRAY_BUFFER,n.vertexBuffer),t.vertexAttribPointer(v.vertex,2,t.FLOAT,!1,16,0),t.vertexAttribPointer(v.uv,2,t.FLOAT,!1,16,8),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n.elementBuffer),t.disable(t.CULL_FACE),t.depthMask(!1);
var y,x,T,w,A;for(y=0;l>y;y++)if(f=16/s,m.set(f*c,f),w=a[y],h.set(w.matrixWorld.elements[12],w.matrixWorld.elements[13],w.matrixWorld.elements[14]),h.applyMatrix4(r.matrixWorldInverse),h.applyProjection(r.projectionMatrix),p.copy(h),g.x=p.x*u+u,g.y=p.y*d+d,n.hasVertexTexture||g.x>0&&g.x<o&&g.y>0&&g.y<s)for(t.activeTexture(t.TEXTURE1),t.bindTexture(t.TEXTURE_2D,n.tempTexture),t.copyTexImage2D(t.TEXTURE_2D,0,t.RGB,g.x-8,g.y-8,16,16,0),t.uniform1i(E.renderType,0),t.uniform2f(E.scale,m.x,m.y),t.uniform3f(E.screenPosition,p.x,p.y,p.z),t.disable(t.BLEND),t.enable(t.DEPTH_TEST),t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,n.occlusionTexture),t.copyTexImage2D(t.TEXTURE_2D,0,t.RGBA,g.x-8,g.y-8,16,16,0),t.uniform1i(E.renderType,1),t.disable(t.DEPTH_TEST),t.activeTexture(t.TEXTURE1),t.bindTexture(t.TEXTURE_2D,n.tempTexture),t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0),w.positionScreen.copy(p),w.customUpdateCallback?w.customUpdateCallback(w):w.updateLensFlares(),t.uniform1i(E.renderType,2),t.enable(t.BLEND),x=0,T=w.lensFlares.length;T>x;x++)A=w.lensFlares[x],A.opacity>.001&&A.scale>.001&&(p.x=A.x,p.y=A.y,p.z=A.z,f=A.size*A.scale/s,m.x=f*c,m.y=f,t.uniform3f(E.screenPosition,p.x,p.y,p.z),t.uniform2f(E.scale,m.x,m.y),t.uniform1f(E.rotation,A.rotation),t.uniform1f(E.opacity,A.opacity),t.uniform3f(E.color,A.color.r,A.color.g,A.color.b),i.setBlending(A.blending,A.blendEquation,A.blendSrc,A.blendDst),i.setTexture(A.texture,1),t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0));t.enable(t.CULL_FACE),t.enable(t.DEPTH_TEST),t.depthMask(!0)}}},THREE.ShadowMapPlugin=function(){function e(e,t){var i=new THREE.DirectionalLight;i.isVirtual=!0,i.onlyShadow=!0,i.castShadow=!0,i.shadowCameraNear=e.shadowCameraNear,i.shadowCameraFar=e.shadowCameraFar,i.shadowCameraLeft=e.shadowCameraLeft,i.shadowCameraRight=e.shadowCameraRight,i.shadowCameraBottom=e.shadowCameraBottom,i.shadowCameraTop=e.shadowCameraTop,i.shadowCameraVisible=e.shadowCameraVisible,i.shadowDarkness=e.shadowDarkness,i.shadowBias=e.shadowCascadeBias[t],i.shadowMapWidth=e.shadowCascadeWidth[t],i.shadowMapHeight=e.shadowCascadeHeight[t],i.pointsWorld=[],i.pointsFrustum=[];for(var r=i.pointsWorld,n=i.pointsFrustum,o=0;8>o;o++)r[o]=new THREE.Vector3,n[o]=new THREE.Vector3;var s=e.shadowCascadeNearZ[t],a=e.shadowCascadeFarZ[t];return n[0].set(-1,-1,s),n[1].set(1,-1,s),n[2].set(-1,1,s),n[3].set(1,1,s),n[4].set(-1,-1,a),n[5].set(1,-1,a),n[6].set(-1,1,a),n[7].set(1,1,a),i}function t(e,t){var i=e.shadowCascadeArray[t];i.position.copy(e.position),i.target.position.copy(e.target.position),i.lookAt(i.target),i.shadowCameraVisible=e.shadowCameraVisible,i.shadowDarkness=e.shadowDarkness,i.shadowBias=e.shadowCascadeBias[t];var r=e.shadowCascadeNearZ[t],n=e.shadowCascadeFarZ[t],o=i.pointsFrustum;o[0].z=r,o[1].z=r,o[2].z=r,o[3].z=r,o[4].z=n,o[5].z=n,o[6].z=n,o[7].z=n}function i(e,t){var i=t.shadowCamera,r=t.pointsFrustum,n=t.pointsWorld;d.set(1/0,1/0,1/0),f.set(-1/0,-1/0,-1/0);for(var o=0;8>o;o++){var s=n[o];s.copy(r[o]),THREE.ShadowMapPlugin.__projector.unprojectVector(s,e),s.applyMatrix4(i.matrixWorldInverse),s.x<d.x&&(d.x=s.x),s.x>f.x&&(f.x=s.x),s.y<d.y&&(d.y=s.y),s.y>f.y&&(f.y=s.y),s.z<d.z&&(d.z=s.z),s.z>f.z&&(f.z=s.z)}i.left=d.x,i.right=f.x,i.top=f.y,i.bottom=d.y,i.updateProjectionMatrix()}function r(e){return e.material instanceof THREE.MeshFaceMaterial?e.material.materials[0]:e.material}var n,o,s,a,l,h,c=new THREE.Frustum,u=new THREE.Matrix4,d=new THREE.Vector3,f=new THREE.Vector3,m=new THREE.Vector3;this.init=function(e){n=e.context,o=e;var t=THREE.ShaderLib.depthRGBA,i=THREE.UniformsUtils.clone(t.uniforms);s=new THREE.ShaderMaterial({fragmentShader:t.fragmentShader,vertexShader:t.vertexShader,uniforms:i}),a=new THREE.ShaderMaterial({fragmentShader:t.fragmentShader,vertexShader:t.vertexShader,uniforms:i,morphTargets:!0}),l=new THREE.ShaderMaterial({fragmentShader:t.fragmentShader,vertexShader:t.vertexShader,uniforms:i,skinning:!0}),h=new THREE.ShaderMaterial({fragmentShader:t.fragmentShader,vertexShader:t.vertexShader,uniforms:i,morphTargets:!0,skinning:!0}),s._shadowPass=!0,a._shadowPass=!0,l._shadowPass=!0,h._shadowPass=!0},this.render=function(e,t){o.shadowMapEnabled&&o.shadowMapAutoUpdate&&this.update(e,t)},this.update=function(d,f){var p,g,E,v,y,x,T,w,A,R,_,C,b,F,S=[],H=0,D=null;for(n.clearColor(1,1,1,1),n.disable(n.BLEND),n.enable(n.CULL_FACE),n.frontFace(n.CCW),o.shadowMapCullFace===THREE.CullFaceFront?n.cullFace(n.FRONT):n.cullFace(n.BACK),o.setDepthTest(!0),p=0,g=d.__lights.length;g>p;p++)if(b=d.__lights[p],b.castShadow)if(b instanceof THREE.DirectionalLight&&b.shadowCascade)for(y=0;y<b.shadowCascadeCount;y++){var M;if(b.shadowCascadeArray[y])M=b.shadowCascadeArray[y];else{M=e(b,y),M.originalCamera=f;var B=new THREE.Gyroscope;B.position=b.shadowCascadeOffset,B.add(M),B.add(M.target),f.add(B),b.shadowCascadeArray[y]=M,console.log("Created virtualLight",M)}t(b,y),S[H]=M,H++}else S[H]=b,H++;for(p=0,g=S.length;g>p;p++){if(b=S[p],!b.shadowMap){var L=THREE.LinearFilter;o.shadowMapType===THREE.PCFSoftShadowMap&&(L=THREE.NearestFilter);var k={minFilter:L,magFilter:L,format:THREE.RGBAFormat};b.shadowMap=new THREE.WebGLRenderTarget(b.shadowMapWidth,b.shadowMapHeight,k),b.shadowMapSize=new THREE.Vector2(b.shadowMapWidth,b.shadowMapHeight),b.shadowMatrix=new THREE.Matrix4}if(!b.shadowCamera){if(b instanceof THREE.SpotLight)b.shadowCamera=new THREE.PerspectiveCamera(b.shadowCameraFov,b.shadowMapWidth/b.shadowMapHeight,b.shadowCameraNear,b.shadowCameraFar);else{if(!(b instanceof THREE.DirectionalLight)){console.error("Unsupported light type for shadow");continue}b.shadowCamera=new THREE.OrthographicCamera(b.shadowCameraLeft,b.shadowCameraRight,b.shadowCameraTop,b.shadowCameraBottom,b.shadowCameraNear,b.shadowCameraFar)}d.add(b.shadowCamera),d.autoUpdate===!0&&d.updateMatrixWorld()}for(b.shadowCameraVisible&&!b.cameraHelper&&(b.cameraHelper=new THREE.CameraHelper(b.shadowCamera),b.shadowCamera.add(b.cameraHelper)),b.isVirtual&&M.originalCamera==f&&i(f,b),x=b.shadowMap,T=b.shadowMatrix,w=b.shadowCamera,w.position.setFromMatrixPosition(b.matrixWorld),m.setFromMatrixPosition(b.target.matrixWorld),w.lookAt(m),w.updateMatrixWorld(),w.matrixWorldInverse.getInverse(w.matrixWorld),b.cameraHelper&&(b.cameraHelper.visible=b.shadowCameraVisible),b.shadowCameraVisible&&b.cameraHelper.update(),T.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),T.multiply(w.projectionMatrix),T.multiply(w.matrixWorldInverse),u.multiplyMatrices(w.projectionMatrix,w.matrixWorldInverse),c.setFromMatrix(u),o.setRenderTarget(x),o.clear(),F=d.__webglObjects,E=0,v=F.length;v>E;E++)_=F[E],C=_.object,_.render=!1,C.visible&&C.castShadow&&((C instanceof THREE.Mesh||C instanceof THREE.ParticleSystem)&&C.frustumCulled&&!c.intersectsObject(C)||(C._modelViewMatrix.multiplyMatrices(w.matrixWorldInverse,C.matrixWorld),_.render=!0));var q,P,$;for(E=0,v=F.length;v>E;E++)_=F[E],_.render&&(C=_.object,A=_.buffer,q=r(C),P=void 0!==C.geometry.morphTargets&&C.geometry.morphTargets.length>0&&q.morphTargets,$=C instanceof THREE.SkinnedMesh&&q.skinning,R=C.customDepthMaterial?C.customDepthMaterial:$?P?h:l:P?a:s,A instanceof THREE.BufferGeometry?o.renderBufferDirect(w,d.__lights,D,R,A,C):o.renderBuffer(w,d.__lights,D,R,A,C));for(F=d.__webglObjectsImmediate,E=0,v=F.length;v>E;E++)_=F[E],C=_.object,C.visible&&C.castShadow&&(C._modelViewMatrix.multiplyMatrices(w.matrixWorldInverse,C.matrixWorld),o.renderImmediateObject(w,d.__lights,D,s,C))}var O=o.getClearColor(),I=o.getClearAlpha();n.clearColor(O.r,O.g,O.b,I),n.enable(n.BLEND),o.shadowMapCullFace===THREE.CullFaceFront&&n.cullFace(n.BACK)}},THREE.ShadowMapPlugin.__projector=new THREE.Projector,THREE.SpritePlugin=function(){function e(){var e=i.createProgram(),t=i.createShader(i.VERTEX_SHADER),n=i.createShader(i.FRAGMENT_SHADER);return i.shaderSource(t,["precision "+r.getPrecision()+" float;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform float rotation;","uniform vec2 scale;","uniform vec2 uvOffset;","uniform vec2 uvScale;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","void main() {","vUV = uvOffset + uv * uvScale;","vec2 alignedPosition = position * scale;","vec2 rotatedPosition;","rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;","rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;","vec4 finalPosition;","finalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );","finalPosition.xy += rotatedPosition;","finalPosition = projectionMatrix * finalPosition;","gl_Position = finalPosition;","}"].join("\n")),i.shaderSource(n,["precision "+r.getPrecision()+" float;","uniform vec3 color;","uniform sampler2D map;","uniform float opacity;","uniform int fogType;","uniform vec3 fogColor;","uniform float fogDensity;","uniform float fogNear;","uniform float fogFar;","uniform float alphaTest;","varying vec2 vUV;","void main() {","vec4 texture = texture2D( map, vUV );","if ( texture.a < alphaTest ) discard;","gl_FragColor = vec4( color * texture.xyz, texture.a * opacity );","if ( fogType > 0 ) {","float depth = gl_FragCoord.z / gl_FragCoord.w;","float fogFactor = 0.0;","if ( fogType == 1 ) {","fogFactor = smoothstep( fogNear, fogFar, depth );","} else {","const float LOG2 = 1.442695;","float fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );","fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );","}","gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );","}","}"].join("\n")),i.compileShader(t),i.compileShader(n),i.attachShader(e,t),i.attachShader(e,n),i.linkProgram(e),e}function t(e,t){return e.z!==t.z?t.z-e.z:t.id-e.id}var i,r,n,o,s,a,l,h,c,u;this.init=function(t){i=t.context,r=t,o=new Float32Array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]),s=new Uint16Array([0,1,2,0,2,3]),a=i.createBuffer(),l=i.createBuffer(),i.bindBuffer(i.ARRAY_BUFFER,a),i.bufferData(i.ARRAY_BUFFER,o,i.STATIC_DRAW),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,l),i.bufferData(i.ELEMENT_ARRAY_BUFFER,s,i.STATIC_DRAW),h=e(),c={position:i.getAttribLocation(h,"position"),uv:i.getAttribLocation(h,"uv")},u={uvOffset:i.getUniformLocation(h,"uvOffset"),uvScale:i.getUniformLocation(h,"uvScale"),rotation:i.getUniformLocation(h,"rotation"),scale:i.getUniformLocation(h,"scale"),color:i.getUniformLocation(h,"color"),map:i.getUniformLocation(h,"map"),opacity:i.getUniformLocation(h,"opacity"),modelViewMatrix:i.getUniformLocation(h,"modelViewMatrix"),projectionMatrix:i.getUniformLocation(h,"projectionMatrix"),fogType:i.getUniformLocation(h,"fogType"),fogDensity:i.getUniformLocation(h,"fogDensity"),fogNear:i.getUniformLocation(h,"fogNear"),fogFar:i.getUniformLocation(h,"fogFar"),fogColor:i.getUniformLocation(h,"fogColor"),alphaTest:i.getUniformLocation(h,"alphaTest")};var d=document.createElement("canvas");d.width=8,d.height=8;var f=d.getContext("2d");f.fillStyle="#ffffff",f.fillRect(0,0,d.width,d.height),n=new THREE.Texture(d),n.needsUpdate=!0},this.render=function(e,o){var s=e.__webglSprites,d=s.length;if(d){i.useProgram(h),i.enableVertexAttribArray(c.position),i.enableVertexAttribArray(c.uv),i.disable(i.CULL_FACE),i.enable(i.BLEND),i.bindBuffer(i.ARRAY_BUFFER,a),i.vertexAttribPointer(c.position,2,i.FLOAT,!1,16,0),i.vertexAttribPointer(c.uv,2,i.FLOAT,!1,16,8),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,l),i.uniformMatrix4fv(u.projectionMatrix,!1,o.projectionMatrix.elements),i.activeTexture(i.TEXTURE0),i.uniform1i(u.map,0);var f=0,m=0,p=e.fog;p?(i.uniform3f(u.fogColor,p.color.r,p.color.g,p.color.b),p instanceof THREE.Fog?(i.uniform1f(u.fogNear,p.near),i.uniform1f(u.fogFar,p.far),i.uniform1i(u.fogType,1),f=1,m=1):p instanceof THREE.FogExp2&&(i.uniform1f(u.fogDensity,p.density),i.uniform1i(u.fogType,2),f=2,m=2)):(i.uniform1i(u.fogType,0),f=0,m=0);var g,E,v,y,x=[];for(g=0;d>g;g++)E=s[g],v=E.material,E.visible!==!1&&(E._modelViewMatrix.multiplyMatrices(o.matrixWorldInverse,E.matrixWorld),E.z=-E._modelViewMatrix.elements[14]);for(s.sort(t),g=0;d>g;g++)E=s[g],E.visible!==!1&&(v=E.material,i.uniform1f(u.alphaTest,v.alphaTest),i.uniformMatrix4fv(u.modelViewMatrix,!1,E._modelViewMatrix.elements),x[0]=E.scale.x,x[1]=E.scale.y,y=e.fog&&v.fog?m:0,f!==y&&(i.uniform1i(u.fogType,y),f=y),null!==v.map?(i.uniform2f(u.uvOffset,v.map.offset.x,v.map.offset.y),i.uniform2f(u.uvScale,v.map.repeat.x,v.map.repeat.y)):(i.uniform2f(u.uvOffset,0,0),i.uniform2f(u.uvScale,1,1)),i.uniform1f(u.opacity,v.opacity),i.uniform3f(u.color,v.color.r,v.color.g,v.color.b),i.uniform1f(u.rotation,v.rotation),i.uniform2fv(u.scale,x),r.setBlending(v.blending,v.blendEquation,v.blendSrc,v.blendDst),r.setDepthTest(v.depthTest),r.setDepthWrite(v.depthWrite),v.map&&v.map.image&&v.map.image.width?r.setTexture(v.map,0):r.setTexture(n,0),i.drawElements(i.TRIANGLES,6,i.UNSIGNED_SHORT,0));i.enable(i.CULL_FACE)}}},THREE.DepthPassPlugin=function(){function e(e){return e.material instanceof THREE.MeshFaceMaterial?e.material.materials[0]:e.material}this.enabled=!1,this.renderTarget=null;var t,i,r,n,o,s,a=new THREE.Frustum,l=new THREE.Matrix4;this.init=function(e){t=e.context,i=e;var a=THREE.ShaderLib.depthRGBA,l=THREE.UniformsUtils.clone(a.uniforms);r=new THREE.ShaderMaterial({fragmentShader:a.fragmentShader,vertexShader:a.vertexShader,uniforms:l}),n=new THREE.ShaderMaterial({fragmentShader:a.fragmentShader,vertexShader:a.vertexShader,uniforms:l,morphTargets:!0}),o=new THREE.ShaderMaterial({fragmentShader:a.fragmentShader,vertexShader:a.vertexShader,uniforms:l,skinning:!0}),s=new THREE.ShaderMaterial({fragmentShader:a.fragmentShader,vertexShader:a.vertexShader,uniforms:l,morphTargets:!0,skinning:!0}),r._shadowPass=!0,n._shadowPass=!0,o._shadowPass=!0,s._shadowPass=!0},this.render=function(e,t){this.enabled&&this.update(e,t)},this.update=function(h,c){var u,d,f,m,p,g,E,v=null;for(t.clearColor(1,1,1,1),t.disable(t.BLEND),i.setDepthTest(!0),h.autoUpdate===!0&&h.updateMatrixWorld(),c.matrixWorldInverse.getInverse(c.matrixWorld),l.multiplyMatrices(c.projectionMatrix,c.matrixWorldInverse),a.setFromMatrix(l),i.setRenderTarget(this.renderTarget),i.clear(),E=h.__webglObjects,u=0,d=E.length;d>u;u++)p=E[u],g=p.object,p.render=!1,g.visible&&((g instanceof THREE.Mesh||g instanceof THREE.ParticleSystem)&&g.frustumCulled&&!a.intersectsObject(g)||(g._modelViewMatrix.multiplyMatrices(c.matrixWorldInverse,g.matrixWorld),p.render=!0));var y,x,T;for(u=0,d=E.length;d>u;u++)if(p=E[u],p.render){if(g=p.object,f=p.buffer,g instanceof THREE.ParticleSystem&&!g.customDepthMaterial)continue;y=e(g),y&&i.setMaterialFaces(g.material),x=g.geometry.morphTargets.length>0&&y.morphTargets,T=g instanceof THREE.SkinnedMesh&&y.skinning,m=g.customDepthMaterial?g.customDepthMaterial:T?x?s:o:x?n:r,f instanceof THREE.BufferGeometry?i.renderBufferDirect(c,h.__lights,v,m,f,g):i.renderBuffer(c,h.__lights,v,m,f,g)}for(E=h.__webglObjectsImmediate,u=0,d=E.length;d>u;u++)p=E[u],g=p.object,g.visible&&(g._modelViewMatrix.multiplyMatrices(c.matrixWorldInverse,g.matrixWorld),i.renderImmediateObject(c,h.__lights,v,r,g));var w=i.getClearColor(),A=i.getClearAlpha();t.clearColor(w.r,w.g,w.b,A),t.enable(t.BLEND)}},THREE.ShaderFlares={lensFlareVertexTexture:{vertexShader:["uniform lowp int renderType;","uniform vec3 screenPosition;","uniform vec2 scale;","uniform float rotation;","uniform sampler2D occlusionMap;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","varying float vVisibility;","void main() {","vUV = uv;","vec2 pos = position;","if( renderType == 2 ) {","vec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );","vVisibility =        visibility.r / 9.0;","vVisibility *= 1.0 - visibility.g / 9.0;","vVisibility *=       visibility.b / 9.0;","vVisibility *= 1.0 - visibility.a / 9.0;","pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;","pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;","}","gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );","}"].join("\n"),fragmentShader:["uniform lowp int renderType;","uniform sampler2D map;","uniform float opacity;","uniform vec3 color;","varying vec2 vUV;","varying float vVisibility;","void main() {","if( renderType == 0 ) {","gl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );","} else if( renderType == 1 ) {","gl_FragColor = texture2D( map, vUV );","} else {","vec4 texture = texture2D( map, vUV );","texture.a *= opacity * vVisibility;","gl_FragColor = texture;","gl_FragColor.rgb *= color;","}","}"].join("\n")},lensFlare:{vertexShader:["uniform lowp int renderType;","uniform vec3 screenPosition;","uniform vec2 scale;","uniform float rotation;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","void main() {","vUV = uv;","vec2 pos = position;","if( renderType == 2 ) {","pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;","pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;","}","gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );","}"].join("\n"),fragmentShader:["precision mediump float;","uniform lowp int renderType;","uniform sampler2D map;","uniform sampler2D occlusionMap;","uniform float opacity;","uniform vec3 color;","varying vec2 vUV;","void main() {","if( renderType == 0 ) {","gl_FragColor = vec4( texture2D( map, vUV ).rgb, 0.0 );","} else if( renderType == 1 ) {","gl_FragColor = texture2D( map, vUV );","} else {","float visibility = texture2D( occlusionMap, vec2( 0.5, 0.1 ) ).a;","visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) ).a;","visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) ).a;","visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) ).a;","visibility = ( 1.0 - visibility / 4.0 );","vec4 texture = texture2D( map, vUV );","texture.a *= opacity * visibility;","gl_FragColor = texture;","gl_FragColor.rgb *= color;","}","}"].join("\n")}};var Stats=function(){var e=Date.now(),t=e,i=0,r=1/0,n=0,o=0,s=1/0,a=0,l=0,h=0,c=document.createElement("div");c.id="stats",c.addEventListener("mousedown",function(e){e.preventDefault(),v(++h%2)},!1),c.style.cssText="width:80px;opacity:0.9;cursor:pointer";var u=document.createElement("div");u.id="fps",u.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#002",c.appendChild(u);var d=document.createElement("div");d.id="fpsText",d.style.cssText="color:#0ff;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px",d.innerHTML="FPS",u.appendChild(d);var f=document.createElement("div");for(f.id="fpsGraph",f.style.cssText="position:relative;width:74px;height:30px;background-color:#0ff",u.appendChild(f);74>f.children.length;){var m=document.createElement("span");m.style.cssText="width:1px;height:30px;float:left;background-color:#113",f.appendChild(m)}var p=document.createElement("div");p.id="ms",p.style.cssText="padding:0 0 3px 3px;text-align:left;background-color:#020;display:none",c.appendChild(p);var g=document.createElement("div");g.id="msText",g.style.cssText="color:#0f0;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px",g.innerHTML="MS",p.appendChild(g);var E=document.createElement("div");for(E.id="msGraph",E.style.cssText="position:relative;width:74px;height:30px;background-color:#0f0",p.appendChild(E);74>E.children.length;)m=document.createElement("span"),m.style.cssText="width:1px;height:30px;float:left;background-color:#131",E.appendChild(m);var v=function(e){switch(h=e){case 0:u.style.display="block",p.style.display="none";break;case 1:u.style.display="none",p.style.display="block"}};return{REVISION:11,domElement:c,setMode:v,begin:function(){e=Date.now()},end:function(){var h=Date.now();i=h-e,r=Math.min(r,i),n=Math.max(n,i),g.textContent=i+" MS ("+r+"-"+n+")";var c=Math.min(30,30-30*(i/200));return E.appendChild(E.firstChild).style.height=c+"px",l++,h>t+1e3&&(o=Math.round(1e3*l/(h-t)),s=Math.min(s,o),a=Math.max(a,o),d.textContent=o+" FPS ("+s+"-"+a+")",c=Math.min(30,30-30*(o/100)),f.appendChild(f.firstChild).style.height=c+"px",t=h,l=0),h},update:function(){e=this.end()}}};THREE.OrbitControls=function(e,t){function i(){return 2*Math.PI/60/60*d.autoRotateSpeed}function r(){return Math.pow(.95,d.zoomSpeed)}function n(e){if(d.enabled!==!1){if(e.preventDefault(),0===e.button){if(d.noRotate===!0)return;S=F.ROTATE,m.set(e.clientX,e.clientY)}else if(1===e.button){if(d.noZoom===!0)return;S=F.DOLLY,x.set(e.clientX,e.clientY)}else if(2===e.button){if(d.noPan===!0)return;S=F.PAN,E.set(e.clientX,e.clientY)}d.domElement.addEventListener("mousemove",o,!1),d.domElement.addEventListener("mouseup",s,!1)}}function o(e){if(d.enabled!==!1){e.preventDefault();var t=d.domElement===document?d.domElement.body:d.domElement;if(S===F.ROTATE){if(d.noRotate===!0)return;p.set(e.clientX,e.clientY),g.subVectors(p,m),d.rotateLeft(2*Math.PI*g.x/t.clientWidth*d.rotateSpeed),d.rotateUp(2*Math.PI*g.y/t.clientHeight*d.rotateSpeed),m.copy(p)}else if(S===F.DOLLY){if(d.noZoom===!0)return;T.set(e.clientX,e.clientY),w.subVectors(T,x),w.y>0?d.dollyIn():d.dollyOut(),x.copy(T)}else if(S===F.PAN){if(d.noPan===!0)return;v.set(e.clientX,e.clientY),y.subVectors(v,E),d.pan(y),E.copy(v)}d.update()}}function s(){d.enabled!==!1&&(d.domElement.removeEventListener("mousemove",o,!1),d.domElement.removeEventListener("mouseup",s,!1),S=F.NONE)}function a(e){if(d.enabled!==!1&&d.noZoom!==!0){var t=0;e.wheelDelta?t=e.wheelDelta:e.detail&&(t=-e.detail),t>0?d.dollyOut():d.dollyIn()}}function l(e){if(d.enabled!==!1&&d.noKeys!==!0&&d.noPan!==!0){var t=!1;switch(e.keyCode){case d.keys.UP:d.pan(new THREE.Vector2(0,d.keyPanSpeed)),t=!0;break;case d.keys.BOTTOM:d.pan(new THREE.Vector2(0,-d.keyPanSpeed)),t=!0;break;case d.keys.LEFT:d.pan(new THREE.Vector2(d.keyPanSpeed,0)),t=!0;break;case d.keys.RIGHT:d.pan(new THREE.Vector2(-d.keyPanSpeed,0)),t=!0}t&&d.update()}}function h(e){if(d.enabled!==!1)switch(e.touches.length){case 1:if(d.noRotate===!0)return;S=F.TOUCH_ROTATE,m.set(e.touches[0].pageX,e.touches[0].pageY);break;case 2:if(d.noZoom===!0)return;S=F.TOUCH_DOLLY;var t=e.touches[0].pageX-e.touches[1].pageX,i=e.touches[0].pageY-e.touches[1].pageY,r=Math.sqrt(t*t+i*i);x.set(0,r);break;case 3:if(d.noPan===!0)return;S=F.TOUCH_PAN,E.set(e.touches[0].pageX,e.touches[0].pageY);break;default:S=F.NONE}}function c(e){if(d.enabled!==!1){e.preventDefault(),e.stopPropagation();var t=d.domElement===document?d.domElement.body:d.domElement;switch(e.touches.length){case 1:if(d.noRotate===!0)return;if(S!==F.TOUCH_ROTATE)return;p.set(e.touches[0].pageX,e.touches[0].pageY),g.subVectors(p,m),d.rotateLeft(2*Math.PI*g.x/t.clientWidth*d.rotateSpeed),d.rotateUp(2*Math.PI*g.y/t.clientHeight*d.rotateSpeed),m.copy(p);break;case 2:if(d.noZoom===!0)return;if(S!==F.TOUCH_DOLLY)return;var i=e.touches[0].pageX-e.touches[1].pageX,r=e.touches[0].pageY-e.touches[1].pageY,n=Math.sqrt(i*i+r*r);T.set(0,n),w.subVectors(T,x),w.y>0?d.dollyOut():d.dollyIn(),x.copy(T);break;case 3:if(d.noPan===!0)return;if(S!==F.TOUCH_PAN)return;v.set(e.touches[0].pageX,e.touches[0].pageY),y.subVectors(v,E),d.pan(y),E.copy(v);break;default:S=F.NONE}}}function u(){d.enabled!==!1&&(S=F.NONE)}this.object=e,this.domElement=void 0!==t?t:document,this.enabled=!0,this.target=new THREE.Vector3,this.center=this.target,this.noZoom=!1,this.zoomSpeed=1,this.minDistance=0,this.maxDistance=1/0,this.noRotate=!1,this.rotateSpeed=1,this.noPan=!1,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.noKeys=!1,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40};var d=this,f=1e-6,m=new THREE.Vector2,p=new THREE.Vector2,g=new THREE.Vector2,E=new THREE.Vector2,v=new THREE.Vector2,y=new THREE.Vector2,x=new THREE.Vector2,T=new THREE.Vector2,w=new THREE.Vector2,A=0,R=0,_=1,C=new THREE.Vector3,b=new THREE.Vector3,F={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY:4,TOUCH_PAN:5},S=F.NONE,H={type:"change"};this.rotateLeft=function(e){void 0===e&&(e=i()),R-=e},this.rotateUp=function(e){void 0===e&&(e=i()),A-=e},this.panLeft=function(e){var t=new THREE.Vector3,i=this.object.matrix.elements;t.set(i[0],i[1],i[2]),t.multiplyScalar(-e),C.add(t)},this.panUp=function(e){var t=new THREE.Vector3,i=this.object.matrix.elements;t.set(i[4],i[5],i[6]),t.multiplyScalar(e),C.add(t)},this.pan=function(e){var t=d.domElement===document?d.domElement.body:d.domElement;if(void 0!==d.object.fov){var i=d.object.position,r=i.clone().sub(d.target),n=r.length();n*=Math.tan(d.object.fov/2*Math.PI/180),d.panLeft(2*e.x*n/t.clientHeight),d.panUp(2*e.y*n/t.clientHeight)}else void 0!==d.object.top?(d.panLeft(e.x*(d.object.right-d.object.left)/t.clientWidth),d.panUp(e.y*(d.object.top-d.object.bottom)/t.clientHeight)):console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.")},this.dollyIn=function(e){void 0===e&&(e=r()),_/=e},this.dollyOut=function(e){void 0===e&&(e=r()),_*=e},this.update=function(){var e=this.object.position,t=e.clone().sub(this.target),r=Math.atan2(t.x,t.z),n=Math.atan2(Math.sqrt(t.x*t.x+t.z*t.z),t.y);this.autoRotate&&this.rotateLeft(i()),r+=R,n+=A,n=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,n)),n=Math.max(f,Math.min(Math.PI-f,n));var o=t.length()*_;o=Math.max(this.minDistance,Math.min(this.maxDistance,o)),this.target.add(C),t.x=o*Math.sin(n)*Math.sin(r),t.y=o*Math.cos(n),t.z=o*Math.sin(n)*Math.cos(r),e.copy(this.target).add(t),this.object.lookAt(this.target),R=0,A=0,_=1,C.set(0,0,0),b.distanceTo(this.object.position)>0&&(this.dispatchEvent(H),b.copy(this.object.position))},this.domElement.addEventListener("contextmenu",function(e){e.preventDefault()},!1),this.domElement.addEventListener("mousedown",n,!1),this.domElement.addEventListener("mousewheel",a,!1),this.domElement.addEventListener("DOMMouseScroll",a,!1),this.domElement.addEventListener("keydown",l,!1),this.domElement.addEventListener("touchstart",h,!1),this.domElement.addEventListener("touchend",u,!1),this.domElement.addEventListener("touchmove",c,!1)},THREE.OrbitControls.prototype=Object.create(THREE.EventDispatcher.prototype),_typeface_js&&_typeface_js.loadFace&&_typeface_js.loadFace({glyphs:{ο:{x_min:0,x_max:712,ha:815,o:"m 356 -25 q 96 88 192 -25 q 0 368 0 201 q 92 642 0 533 q 356 761 192 761 q 617 644 517 761 q 712 368 712 533 q 619 91 712 201 q 356 -25 520 -25 m 356 85 q 527 175 465 85 q 583 369 583 255 q 528 562 583 484 q 356 651 466 651 q 189 560 250 651 q 135 369 135 481 q 187 177 135 257 q 356 85 250 85 "},S:{x_min:0,x_max:788,ha:890,o:"m 788 291 q 662 54 788 144 q 397 -26 550 -26 q 116 68 226 -26 q 0 337 0 168 l 131 337 q 200 152 131 220 q 384 85 269 85 q 557 129 479 85 q 650 270 650 183 q 490 429 650 379 q 194 513 341 470 q 33 739 33 584 q 142 964 33 881 q 388 1041 242 1041 q 644 957 543 1041 q 756 716 756 867 l 625 716 q 561 874 625 816 q 395 933 497 933 q 243 891 309 933 q 164 759 164 841 q 325 609 164 656 q 625 526 475 568 q 788 291 788 454 "},"¦":{x_min:343,x_max:449,ha:792,o:"m 449 462 l 343 462 l 343 986 l 449 986 l 449 462 m 449 -242 l 343 -242 l 343 280 l 449 280 l 449 -242 "},"/":{x_min:183.25,x_max:608.328125,ha:792,o:"m 608 1041 l 266 -129 l 183 -129 l 520 1041 l 608 1041 "},Τ:{x_min:-.4375,x_max:777.453125,ha:839,o:"m 777 893 l 458 893 l 458 0 l 319 0 l 319 892 l 0 892 l 0 1013 l 777 1013 l 777 893 "},y:{x_min:0,x_max:684.78125,ha:771,o:"m 684 738 l 388 -83 q 311 -216 356 -167 q 173 -279 252 -279 q 97 -266 133 -279 l 97 -149 q 132 -155 109 -151 q 168 -160 155 -160 q 240 -114 213 -160 q 274 -26 248 -98 l 0 738 l 137 737 l 341 139 l 548 737 l 684 738 "},Π:{x_min:0,x_max:803,ha:917,o:"m 803 0 l 667 0 l 667 886 l 140 886 l 140 0 l 0 0 l 0 1012 l 803 1012 l 803 0 "},ΐ:{x_min:-111,x_max:339,ha:361,o:"m 339 800 l 229 800 l 229 925 l 339 925 l 339 800 m -1 800 l -111 800 l -111 925 l -1 925 l -1 800 m 284 3 q 233 -10 258 -5 q 182 -15 207 -15 q 85 26 119 -15 q 42 200 42 79 l 42 737 l 167 737 l 168 215 q 172 141 168 157 q 226 101 183 101 q 248 103 239 101 q 284 112 257 104 l 284 3 m 302 1040 l 113 819 l 30 819 l 165 1040 l 302 1040 "},g:{x_min:0,x_max:686,ha:838,o:"m 686 34 q 586 -213 686 -121 q 331 -306 487 -306 q 131 -252 216 -306 q 31 -84 31 -190 l 155 -84 q 228 -174 166 -138 q 345 -207 284 -207 q 514 -109 454 -207 q 564 89 564 -27 q 461 6 521 36 q 335 -23 401 -23 q 88 100 184 -23 q 0 370 0 215 q 87 634 0 522 q 330 758 183 758 q 457 728 398 758 q 564 644 515 699 l 564 737 l 686 737 l 686 34 m 582 367 q 529 560 582 481 q 358 652 468 652 q 189 561 250 652 q 135 369 135 482 q 189 176 135 255 q 361 85 251 85 q 529 176 468 85 q 582 367 582 255 "},"²":{x_min:0,x_max:442,ha:539,o:"m 442 383 l 0 383 q 91 566 0 492 q 260 668 176 617 q 354 798 354 727 q 315 875 354 845 q 227 905 277 905 q 136 869 173 905 q 99 761 99 833 l 14 761 q 82 922 14 864 q 232 974 141 974 q 379 926 316 974 q 442 797 442 878 q 351 635 442 704 q 183 539 321 611 q 92 455 92 491 l 442 455 l 442 383 "},"–":{x_min:0,x_max:705.5625,ha:803,o:"m 705 334 l 0 334 l 0 410 l 705 410 l 705 334 "},Κ:{x_min:0,x_max:819.5625,ha:893,o:"m 819 0 l 650 0 l 294 509 l 139 356 l 139 0 l 0 0 l 0 1013 l 139 1013 l 139 526 l 626 1013 l 809 1013 l 395 600 l 819 0 "},ƒ:{x_min:-46.265625,x_max:392,ha:513,o:"m 392 651 l 259 651 l 79 -279 l -46 -278 l 134 651 l 14 651 l 14 751 l 135 751 q 151 948 135 900 q 304 1041 185 1041 q 334 1040 319 1041 q 392 1034 348 1039 l 392 922 q 337 931 360 931 q 271 883 287 931 q 260 793 260 853 l 260 751 l 392 751 l 392 651 "},e:{x_min:0,x_max:714,ha:813,o:"m 714 326 l 140 326 q 200 157 140 227 q 359 87 260 87 q 488 130 431 87 q 561 245 545 174 l 697 245 q 577 48 670 123 q 358 -26 484 -26 q 97 85 195 -26 q 0 363 0 197 q 94 642 0 529 q 358 765 195 765 q 626 627 529 765 q 714 326 714 503 m 576 429 q 507 583 564 522 q 355 650 445 650 q 206 583 266 650 q 140 429 152 522 l 576 429 "},ό:{x_min:0,x_max:712,ha:815,o:"m 356 -25 q 94 91 194 -25 q 0 368 0 202 q 92 642 0 533 q 356 761 192 761 q 617 644 517 761 q 712 368 712 533 q 619 91 712 201 q 356 -25 520 -25 m 356 85 q 527 175 465 85 q 583 369 583 255 q 528 562 583 484 q 356 651 466 651 q 189 560 250 651 q 135 369 135 481 q 187 177 135 257 q 356 85 250 85 m 576 1040 l 387 819 l 303 819 l 438 1040 l 576 1040 "},J:{x_min:0,x_max:588,ha:699,o:"m 588 279 q 287 -26 588 -26 q 58 73 126 -26 q 0 327 0 158 l 133 327 q 160 172 133 227 q 288 96 198 96 q 426 171 391 96 q 449 336 449 219 l 449 1013 l 588 1013 l 588 279 "},"»":{x_min:-1,x_max:503,ha:601,o:"m 503 302 l 280 136 l 281 256 l 429 373 l 281 486 l 280 608 l 503 440 l 503 302 m 221 302 l 0 136 l 0 255 l 145 372 l 0 486 l -1 608 l 221 440 l 221 302 "},"©":{x_min:-3,x_max:1008,ha:1106,o:"m 502 -7 q 123 151 263 -7 q -3 501 -3 294 q 123 851 -3 706 q 502 1011 263 1011 q 881 851 739 1011 q 1008 501 1008 708 q 883 151 1008 292 q 502 -7 744 -7 m 502 60 q 830 197 709 60 q 940 501 940 322 q 831 805 940 681 q 502 944 709 944 q 174 805 296 944 q 65 501 65 680 q 173 197 65 320 q 502 60 294 60 m 741 394 q 661 246 731 302 q 496 190 591 190 q 294 285 369 190 q 228 497 228 370 q 295 714 228 625 q 499 813 370 813 q 656 762 588 813 q 733 625 724 711 l 634 625 q 589 704 629 673 q 498 735 550 735 q 377 666 421 735 q 334 504 334 597 q 374 340 334 408 q 490 272 415 272 q 589 304 549 272 q 638 394 628 337 l 741 394 "},ώ:{x_min:0,x_max:922,ha:1030,o:"m 687 1040 l 498 819 l 415 819 l 549 1040 l 687 1040 m 922 339 q 856 97 922 203 q 650 -26 780 -26 q 538 9 587 -26 q 461 103 489 44 q 387 12 436 46 q 277 -22 339 -22 q 69 97 147 -22 q 0 338 0 202 q 45 551 0 444 q 161 737 84 643 l 302 737 q 175 552 219 647 q 124 336 124 446 q 155 179 124 248 q 275 88 197 88 q 375 163 341 88 q 400 294 400 219 l 400 572 l 524 572 l 524 294 q 561 135 524 192 q 643 88 591 88 q 762 182 719 88 q 797 341 797 257 q 745 555 797 450 q 619 737 705 637 l 760 737 q 874 551 835 640 q 922 339 922 444 "},"^":{x_min:193.0625,x_max:598.609375,ha:792,o:"m 598 772 l 515 772 l 395 931 l 277 772 l 193 772 l 326 1013 l 462 1013 l 598 772 "},"«":{x_min:0,x_max:507.203125,ha:604,o:"m 506 136 l 284 302 l 284 440 l 506 608 l 507 485 l 360 371 l 506 255 l 506 136 m 222 136 l 0 302 l 0 440 l 222 608 l 221 486 l 73 373 l 222 256 l 222 136 "},D:{x_min:0,x_max:828,ha:935,o:"m 389 1013 q 714 867 593 1013 q 828 521 828 729 q 712 161 828 309 q 382 0 587 0 l 0 0 l 0 1013 l 389 1013 m 376 124 q 607 247 523 124 q 681 510 681 355 q 607 771 681 662 q 376 896 522 896 l 139 896 l 139 124 l 376 124 "},"∙":{x_min:0,x_max:142,ha:239,o:"m 142 585 l 0 585 l 0 738 l 142 738 l 142 585 "},ÿ:{x_min:0,x_max:47,ha:125,o:"m 47 3 q 37 -7 47 -7 q 28 0 30 -7 q 39 -4 32 -4 q 45 3 45 -1 l 37 0 q 28 9 28 0 q 39 19 28 19 l 47 16 l 47 19 l 47 3 m 37 1 q 44 8 44 1 q 37 16 44 16 q 30 8 30 16 q 37 1 30 1 m 26 1 l 23 22 l 14 0 l 3 22 l 3 3 l 0 25 l 13 1 l 22 25 l 26 1 "},w:{x_min:0,x_max:1009.71875,ha:1100,o:"m 1009 738 l 783 0 l 658 0 l 501 567 l 345 0 l 222 0 l 0 738 l 130 738 l 284 174 l 432 737 l 576 738 l 721 173 l 881 737 l 1009 738 "},$:{x_min:0,x_max:700,ha:793,o:"m 664 717 l 542 717 q 490 825 531 785 q 381 872 450 865 l 381 551 q 620 446 540 522 q 700 241 700 370 q 618 45 700 116 q 381 -25 536 -25 l 381 -152 l 307 -152 l 307 -25 q 81 62 162 -25 q 0 297 0 149 l 124 297 q 169 146 124 204 q 307 81 215 89 l 307 441 q 80 536 148 469 q 13 725 13 603 q 96 910 13 839 q 307 982 180 982 l 307 1077 l 381 1077 l 381 982 q 574 917 494 982 q 664 717 664 845 m 307 565 l 307 872 q 187 831 233 872 q 142 724 142 791 q 180 618 142 656 q 307 565 218 580 m 381 76 q 562 237 562 96 q 517 361 562 313 q 381 423 472 409 l 381 76 "},"\\":{x_min:-.015625,x_max:425.0625,ha:522,o:"m 425 -129 l 337 -129 l 0 1041 l 83 1041 l 425 -129 "},µ:{x_min:0,x_max:697.21875,ha:747,o:"m 697 -4 q 629 -14 658 -14 q 498 97 513 -14 q 422 9 470 41 q 313 -23 374 -23 q 207 4 258 -23 q 119 81 156 32 l 119 -278 l 0 -278 l 0 738 l 124 738 l 124 343 q 165 173 124 246 q 308 83 216 83 q 452 178 402 83 q 493 359 493 255 l 493 738 l 617 738 l 617 214 q 623 136 617 160 q 673 92 637 92 q 697 96 684 92 l 697 -4 "},Ι:{x_min:42,x_max:181,ha:297,o:"m 181 0 l 42 0 l 42 1013 l 181 1013 l 181 0 "},Ύ:{x_min:0,x_max:1144.5,ha:1214,o:"m 1144 1012 l 807 416 l 807 0 l 667 0 l 667 416 l 325 1012 l 465 1012 l 736 533 l 1004 1012 l 1144 1012 m 277 1040 l 83 799 l 0 799 l 140 1040 l 277 1040 "},"’":{x_min:0,x_max:139,ha:236,o:"m 139 851 q 102 737 139 784 q 0 669 65 690 l 0 734 q 59 787 42 741 q 72 873 72 821 l 0 873 l 0 1013 l 139 1013 l 139 851 "},Ν:{x_min:0,x_max:801,ha:915,o:"m 801 0 l 651 0 l 131 822 l 131 0 l 0 0 l 0 1013 l 151 1013 l 670 191 l 670 1013 l 801 1013 l 801 0 "},"-":{x_min:8.71875,x_max:350.390625,ha:478,o:"m 350 317 l 8 317 l 8 428 l 350 428 l 350 317 "},Q:{x_min:0,x_max:968,ha:1072,o:"m 954 5 l 887 -79 l 744 35 q 622 -11 687 2 q 483 -26 556 -26 q 127 130 262 -26 q 0 504 0 279 q 127 880 0 728 q 484 1041 262 1041 q 841 884 708 1041 q 968 507 968 735 q 933 293 968 398 q 832 104 899 188 l 954 5 m 723 191 q 802 330 777 248 q 828 499 828 412 q 744 790 828 673 q 483 922 650 922 q 228 791 322 922 q 142 505 142 673 q 227 221 142 337 q 487 91 323 91 q 632 123 566 91 l 520 215 l 587 301 l 723 191 "},ς:{x_min:1,x_max:676.28125,ha:740,o:"m 676 460 l 551 460 q 498 595 542 546 q 365 651 448 651 q 199 578 263 651 q 136 401 136 505 q 266 178 136 241 q 508 106 387 142 q 640 -50 640 62 q 625 -158 640 -105 q 583 -278 611 -211 l 465 -278 q 498 -182 490 -211 q 515 -80 515 -126 q 381 12 515 -15 q 134 91 197 51 q 1 388 1 179 q 100 651 1 542 q 354 761 199 761 q 587 680 498 761 q 676 460 676 599 "},M:{x_min:0,x_max:954,ha:1067,o:"m 954 0 l 819 0 l 819 869 l 537 0 l 405 0 l 128 866 l 128 0 l 0 0 l 0 1013 l 200 1013 l 472 160 l 757 1013 l 954 1013 l 954 0 "},Ψ:{x_min:0,x_max:1006,ha:1094,o:"m 1006 678 q 914 319 1006 429 q 571 200 814 200 l 571 0 l 433 0 l 433 200 q 92 319 194 200 q 0 678 0 429 l 0 1013 l 139 1013 l 139 679 q 191 417 139 492 q 433 326 255 326 l 433 1013 l 571 1013 l 571 326 l 580 326 q 813 423 747 326 q 868 679 868 502 l 868 1013 l 1006 1013 l 1006 678 "},C:{x_min:0,x_max:886,ha:944,o:"m 886 379 q 760 87 886 201 q 455 -26 634 -26 q 112 136 236 -26 q 0 509 0 283 q 118 882 0 737 q 469 1041 245 1041 q 748 955 630 1041 q 879 708 879 859 l 745 708 q 649 862 724 805 q 473 920 573 920 q 219 791 312 920 q 136 509 136 675 q 217 229 136 344 q 470 99 311 99 q 672 179 591 99 q 753 379 753 259 l 886 379 "},"!":{x_min:0,x_max:138,ha:236,o:"m 138 684 q 116 409 138 629 q 105 244 105 299 l 33 244 q 16 465 33 313 q 0 684 0 616 l 0 1013 l 138 1013 l 138 684 m 138 0 l 0 0 l 0 151 l 138 151 l 138 0 "},"{":{x_min:0,x_max:480.5625,ha:578,o:"m 480 -286 q 237 -213 303 -286 q 187 -45 187 -159 q 194 48 187 -15 q 201 141 201 112 q 164 264 201 225 q 0 314 118 314 l 0 417 q 164 471 119 417 q 201 605 201 514 q 199 665 201 644 q 193 772 193 769 q 241 941 193 887 q 480 1015 308 1015 l 480 915 q 336 866 375 915 q 306 742 306 828 q 310 662 306 717 q 314 577 314 606 q 288 452 314 500 q 176 365 256 391 q 289 275 257 337 q 314 143 314 226 q 313 84 314 107 q 310 -11 310 -5 q 339 -131 310 -94 q 480 -182 377 -182 l 480 -286 "},X:{x_min:-.015625,x_max:854.15625,ha:940,o:"m 854 0 l 683 0 l 423 409 l 166 0 l 0 0 l 347 519 l 18 1013 l 186 1013 l 428 637 l 675 1013 l 836 1013 l 504 520 l 854 0 "},"#":{x_min:0,x_max:963.890625,ha:1061,o:"m 963 690 l 927 590 l 719 590 l 655 410 l 876 410 l 840 310 l 618 310 l 508 -3 l 393 -2 l 506 309 l 329 310 l 215 -2 l 102 -3 l 212 310 l 0 310 l 36 410 l 248 409 l 312 590 l 86 590 l 120 690 l 347 690 l 459 1006 l 573 1006 l 462 690 l 640 690 l 751 1006 l 865 1006 l 754 690 l 963 690 m 606 590 l 425 590 l 362 410 l 543 410 l 606 590 "},ι:{x_min:42,x_max:284,ha:361,o:"m 284 3 q 233 -10 258 -5 q 182 -15 207 -15 q 85 26 119 -15 q 42 200 42 79 l 42 738 l 167 738 l 168 215 q 172 141 168 157 q 226 101 183 101 q 248 103 239 101 q 284 112 257 104 l 284 3 "},Ά:{x_min:0,x_max:906.953125,ha:982,o:"m 283 1040 l 88 799 l 5 799 l 145 1040 l 283 1040 m 906 0 l 756 0 l 650 303 l 251 303 l 143 0 l 0 0 l 376 1012 l 529 1012 l 906 0 m 609 421 l 452 866 l 293 421 l 609 421 "},")":{x_min:0,x_max:318,ha:415,o:"m 318 365 q 257 25 318 191 q 87 -290 197 -141 l 0 -290 q 140 21 93 -128 q 193 360 193 189 q 141 704 193 537 q 0 1024 97 850 l 87 1024 q 257 706 197 871 q 318 365 318 542 "},ε:{x_min:0,x_max:634.71875,ha:714,o:"m 634 234 q 527 38 634 110 q 300 -25 433 -25 q 98 29 183 -25 q 0 204 0 93 q 37 314 0 265 q 128 390 67 353 q 56 460 82 419 q 26 555 26 505 q 114 712 26 654 q 295 763 191 763 q 499 700 416 763 q 589 515 589 631 l 478 515 q 419 618 464 580 q 307 657 374 657 q 207 630 253 657 q 151 547 151 598 q 238 445 151 469 q 389 434 280 434 l 389 331 l 349 331 q 206 315 255 331 q 125 210 125 287 q 183 107 125 145 q 302 76 233 76 q 436 117 379 76 q 509 234 493 159 l 634 234 "},Δ:{x_min:0,x_max:952.78125,ha:1028,o:"m 952 0 l 0 0 l 400 1013 l 551 1013 l 952 0 m 762 124 l 476 867 l 187 124 l 762 124 "},"}":{x_min:0,x_max:481,ha:578,o:"m 481 314 q 318 262 364 314 q 282 136 282 222 q 284 65 282 97 q 293 -58 293 -48 q 241 -217 293 -166 q 0 -286 174 -286 l 0 -182 q 143 -130 105 -182 q 171 -2 171 -93 q 168 81 171 22 q 165 144 165 140 q 188 275 165 229 q 306 365 220 339 q 191 455 224 391 q 165 588 165 505 q 168 681 165 624 q 171 742 171 737 q 141 865 171 827 q 0 915 102 915 l 0 1015 q 243 942 176 1015 q 293 773 293 888 q 287 675 293 741 q 282 590 282 608 q 318 466 282 505 q 481 417 364 417 l 481 314 "},"‰":{x_min:-3,x_max:1672,ha:1821,o:"m 846 0 q 664 76 732 0 q 603 244 603 145 q 662 412 603 344 q 846 489 729 489 q 1027 412 959 489 q 1089 244 1089 343 q 1029 76 1089 144 q 846 0 962 0 m 845 103 q 945 143 910 103 q 981 243 981 184 q 947 340 981 301 q 845 385 910 385 q 745 342 782 385 q 709 243 709 300 q 742 147 709 186 q 845 103 781 103 m 888 986 l 284 -25 l 199 -25 l 803 986 l 888 986 m 241 468 q 58 545 126 468 q -3 715 -3 615 q 56 881 -3 813 q 238 958 124 958 q 421 881 353 958 q 483 712 483 813 q 423 544 483 612 q 241 468 356 468 m 241 855 q 137 811 175 855 q 100 710 100 768 q 136 612 100 653 q 240 572 172 572 q 344 614 306 572 q 382 713 382 656 q 347 810 382 771 q 241 855 308 855 m 1428 0 q 1246 76 1314 0 q 1185 244 1185 145 q 1244 412 1185 344 q 1428 489 1311 489 q 1610 412 1542 489 q 1672 244 1672 343 q 1612 76 1672 144 q 1428 0 1545 0 m 1427 103 q 1528 143 1492 103 q 1564 243 1564 184 q 1530 340 1564 301 q 1427 385 1492 385 q 1327 342 1364 385 q 1291 243 1291 300 q 1324 147 1291 186 q 1427 103 1363 103 "},a:{x_min:0,x_max:698.609375,ha:794,o:"m 698 0 q 661 -12 679 -7 q 615 -17 643 -17 q 536 12 564 -17 q 500 96 508 41 q 384 6 456 37 q 236 -25 312 -25 q 65 31 130 -25 q 0 194 0 88 q 118 390 0 334 q 328 435 180 420 q 488 483 476 451 q 495 523 495 504 q 442 619 495 584 q 325 654 389 654 q 209 617 257 654 q 152 513 161 580 l 33 513 q 123 705 33 633 q 332 772 207 772 q 528 712 448 772 q 617 531 617 645 l 617 163 q 624 108 617 126 q 664 90 632 90 l 698 94 l 698 0 m 491 262 l 491 372 q 272 329 350 347 q 128 201 128 294 q 166 113 128 144 q 264 83 205 83 q 414 130 346 83 q 491 262 491 183 "},"—":{x_min:0,x_max:941.671875,ha:1039,o:"m 941 334 l 0 334 l 0 410 l 941 410 l 941 334 "},"=":{x_min:8.71875,x_max:780.953125,ha:792,o:"m 780 510 l 8 510 l 8 606 l 780 606 l 780 510 m 780 235 l 8 235 l 8 332 l 780 332 l 780 235 "},N:{x_min:0,x_max:801,ha:914,o:"m 801 0 l 651 0 l 131 823 l 131 0 l 0 0 l 0 1013 l 151 1013 l 670 193 l 670 1013 l 801 1013 l 801 0 "},ρ:{x_min:0,x_max:712,ha:797,o:"m 712 369 q 620 94 712 207 q 362 -26 521 -26 q 230 2 292 -26 q 119 83 167 30 l 119 -278 l 0 -278 l 0 362 q 91 643 0 531 q 355 764 190 764 q 617 647 517 764 q 712 369 712 536 m 583 366 q 530 559 583 480 q 359 651 469 651 q 190 562 252 651 q 135 370 135 483 q 189 176 135 257 q 359 85 250 85 q 528 175 466 85 q 583 366 583 254 "},2:{x_min:59,x_max:731,ha:792,o:"m 731 0 l 59 0 q 197 314 59 188 q 457 487 199 315 q 598 691 598 580 q 543 819 598 772 q 411 867 488 867 q 272 811 328 867 q 209 630 209 747 l 81 630 q 182 901 81 805 q 408 986 271 986 q 629 909 536 986 q 731 694 731 826 q 613 449 731 541 q 378 316 495 383 q 201 122 235 234 l 731 122 l 731 0 "},"¯":{x_min:0,x_max:941.671875,ha:938,o:"m 941 1033 l 0 1033 l 0 1109 l 941 1109 l 941 1033 "},Z:{x_min:0,x_max:779,ha:849,o:"m 779 0 l 0 0 l 0 113 l 621 896 l 40 896 l 40 1013 l 779 1013 l 778 887 l 171 124 l 779 124 l 779 0 "},u:{x_min:0,x_max:617,ha:729,o:"m 617 0 l 499 0 l 499 110 q 391 10 460 45 q 246 -25 322 -25 q 61 58 127 -25 q 0 258 0 136 l 0 738 l 125 738 l 125 284 q 156 148 125 202 q 273 82 197 82 q 433 165 369 82 q 493 340 493 243 l 493 738 l 617 738 l 617 0 "},k:{x_min:0,x_max:612.484375,ha:697,o:"m 612 738 l 338 465 l 608 0 l 469 0 l 251 382 l 121 251 l 121 0 l 0 0 l 0 1013 l 121 1013 l 121 402 l 456 738 l 612 738 "},Η:{x_min:0,x_max:803,ha:917,o:"m 803 0 l 667 0 l 667 475 l 140 475 l 140 0 l 0 0 l 0 1013 l 140 1013 l 140 599 l 667 599 l 667 1013 l 803 1013 l 803 0 "},Α:{x_min:0,x_max:906.953125,ha:985,o:"m 906 0 l 756 0 l 650 303 l 251 303 l 143 0 l 0 0 l 376 1013 l 529 1013 l 906 0 m 609 421 l 452 866 l 293 421 l 609 421 "},s:{x_min:0,x_max:604,ha:697,o:"m 604 217 q 501 36 604 104 q 292 -23 411 -23 q 86 43 166 -23 q 0 238 0 114 l 121 237 q 175 122 121 164 q 300 85 223 85 q 415 112 363 85 q 479 207 479 147 q 361 309 479 276 q 140 372 141 370 q 21 544 21 426 q 111 708 21 647 q 298 761 190 761 q 492 705 413 761 q 583 531 583 643 l 462 531 q 412 625 462 594 q 298 657 363 657 q 199 636 242 657 q 143 558 143 608 q 262 454 143 486 q 484 394 479 397 q 604 217 604 341 "},B:{x_min:0,x_max:778,ha:876,o:"m 580 546 q 724 469 670 535 q 778 311 778 403 q 673 83 778 171 q 432 0 575 0 l 0 0 l 0 1013 l 411 1013 q 629 957 541 1013 q 732 768 732 892 q 691 633 732 693 q 580 546 650 572 m 393 899 l 139 899 l 139 588 l 379 588 q 521 624 462 588 q 592 744 592 667 q 531 859 592 819 q 393 899 471 899 m 419 124 q 566 169 504 124 q 635 303 635 219 q 559 436 635 389 q 402 477 494 477 l 139 477 l 139 124 l 419 124 "},"…":{x_min:0,x_max:614,ha:708,o:"m 142 0 l 0 0 l 0 151 l 142 151 l 142 0 m 378 0 l 236 0 l 236 151 l 378 151 l 378 0 m 614 0 l 472 0 l 472 151 l 614 151 l 614 0 "},"?":{x_min:0,x_max:607,ha:704,o:"m 607 777 q 543 599 607 674 q 422 474 482 537 q 357 272 357 391 l 236 272 q 297 487 236 395 q 411 619 298 490 q 474 762 474 691 q 422 885 474 838 q 301 933 371 933 q 179 880 228 933 q 124 706 124 819 l 0 706 q 94 963 0 872 q 302 1044 177 1044 q 511 973 423 1044 q 607 777 607 895 m 370 0 l 230 0 l 230 151 l 370 151 l 370 0 "},H:{x_min:0,x_max:803,ha:915,o:"m 803 0 l 667 0 l 667 475 l 140 475 l 140 0 l 0 0 l 0 1013 l 140 1013 l 140 599 l 667 599 l 667 1013 l 803 1013 l 803 0 "},ν:{x_min:0,x_max:675,ha:761,o:"m 675 738 l 404 0 l 272 0 l 0 738 l 133 738 l 340 147 l 541 738 l 675 738 "},c:{x_min:1,x_max:701.390625,ha:775,o:"m 701 264 q 584 53 681 133 q 353 -26 487 -26 q 91 91 188 -26 q 1 370 1 201 q 92 645 1 537 q 353 761 190 761 q 572 688 479 761 q 690 493 666 615 l 556 493 q 487 606 545 562 q 356 650 428 650 q 186 563 246 650 q 134 372 134 487 q 188 179 134 258 q 359 88 250 88 q 492 136 437 88 q 566 264 548 185 l 701 264 "},"¶":{x_min:0,x_max:566.671875,ha:678,o:"m 21 892 l 52 892 l 98 761 l 145 892 l 176 892 l 178 741 l 157 741 l 157 867 l 108 741 l 88 741 l 40 871 l 40 741 l 21 741 l 21 892 m 308 854 l 308 731 q 252 691 308 691 q 227 691 240 691 q 207 696 213 695 l 207 712 l 253 706 q 288 733 288 706 l 288 763 q 244 741 279 741 q 193 797 193 741 q 261 860 193 860 q 287 860 273 860 q 308 854 302 855 m 288 842 l 263 843 q 213 796 213 843 q 248 756 213 756 q 288 796 288 756 l 288 842 m 566 988 l 502 988 l 502 -1 l 439 -1 l 439 988 l 317 988 l 317 -1 l 252 -1 l 252 602 q 81 653 155 602 q 0 805 0 711 q 101 989 0 918 q 309 1053 194 1053 l 566 1053 l 566 988 "},β:{x_min:0,x_max:660,ha:745,o:"m 471 550 q 610 450 561 522 q 660 280 660 378 q 578 64 660 151 q 367 -22 497 -22 q 239 5 299 -22 q 126 82 178 32 l 126 -278 l 0 -278 l 0 593 q 54 903 0 801 q 318 1042 127 1042 q 519 964 436 1042 q 603 771 603 887 q 567 644 603 701 q 471 550 532 586 m 337 79 q 476 138 418 79 q 535 279 535 198 q 427 437 535 386 q 226 477 344 477 l 226 583 q 398 620 329 583 q 486 762 486 668 q 435 884 486 833 q 312 935 384 935 q 169 861 219 935 q 126 698 126 797 l 126 362 q 170 169 126 242 q 337 79 224 79 "},Μ:{x_min:0,x_max:954,ha:1068,o:"m 954 0 l 819 0 l 819 868 l 537 0 l 405 0 l 128 865 l 128 0 l 0 0 l 0 1013 l 199 1013 l 472 158 l 758 1013 l 954 1013 l 954 0 "},Ό:{x_min:.109375,x_max:1120,ha:1217,o:"m 1120 505 q 994 132 1120 282 q 642 -29 861 -29 q 290 130 422 -29 q 167 505 167 280 q 294 883 167 730 q 650 1046 430 1046 q 999 882 868 1046 q 1120 505 1120 730 m 977 504 q 896 784 977 669 q 644 915 804 915 q 391 785 484 915 q 307 504 307 669 q 391 224 307 339 q 644 95 486 95 q 894 224 803 95 q 977 504 977 339 m 277 1040 l 83 799 l 0 799 l 140 1040 l 277 1040 "},Ή:{x_min:0,x_max:1158,ha:1275,o:"m 1158 0 l 1022 0 l 1022 475 l 496 475 l 496 0 l 356 0 l 356 1012 l 496 1012 l 496 599 l 1022 599 l 1022 1012 l 1158 1012 l 1158 0 m 277 1040 l 83 799 l 0 799 l 140 1040 l 277 1040 "},"•":{x_min:0,x_max:663.890625,ha:775,o:"m 663 529 q 566 293 663 391 q 331 196 469 196 q 97 294 194 196 q 0 529 0 393 q 96 763 0 665 q 331 861 193 861 q 566 763 469 861 q 663 529 663 665 "},"¥":{x_min:.1875,x_max:819.546875,ha:886,o:"m 563 561 l 697 561 l 696 487 l 520 487 l 482 416 l 482 380 l 697 380 l 695 308 l 482 308 l 482 0 l 342 0 l 342 308 l 125 308 l 125 380 l 342 380 l 342 417 l 303 487 l 125 487 l 125 561 l 258 561 l 0 1013 l 140 1013 l 411 533 l 679 1013 l 819 1013 l 563 561 "},"(":{x_min:0,x_max:318.0625,ha:415,o:"m 318 -290 l 230 -290 q 61 23 122 -142 q 0 365 0 190 q 62 712 0 540 q 230 1024 119 869 l 318 1024 q 175 705 219 853 q 125 360 125 542 q 176 22 125 187 q 318 -290 223 -127 "},U:{x_min:0,x_max:796,ha:904,o:"m 796 393 q 681 93 796 212 q 386 -25 566 -25 q 101 95 208 -25 q 0 393 0 211 l 0 1013 l 138 1013 l 138 391 q 204 191 138 270 q 394 107 276 107 q 586 191 512 107 q 656 391 656 270 l 656 1013 l 796 1013 l 796 393 "},γ:{x_min:.5,x_max:744.953125,ha:822,o:"m 744 737 l 463 54 l 463 -278 l 338 -278 l 338 54 l 154 495 q 104 597 124 569 q 13 651 67 651 l 0 651 l 0 751 l 39 753 q 168 711 121 753 q 242 594 207 676 l 403 208 l 617 737 l 744 737 "},α:{x_min:0,x_max:765.5625,ha:809,o:"m 765 -4 q 698 -14 726 -14 q 564 97 586 -14 q 466 7 525 40 q 337 -26 407 -26 q 88 98 186 -26 q 0 369 0 212 q 88 637 0 525 q 337 760 184 760 q 465 728 407 760 q 563 637 524 696 l 563 739 l 685 739 l 685 222 q 693 141 685 168 q 748 94 708 94 q 765 96 760 94 l 765 -4 m 584 371 q 531 562 584 485 q 360 653 470 653 q 192 566 254 653 q 135 379 135 489 q 186 181 135 261 q 358 84 247 84 q 528 176 465 84 q 584 371 584 260 "},F:{x_min:0,x_max:683.328125,ha:717,o:"m 683 888 l 140 888 l 140 583 l 613 583 l 613 458 l 140 458 l 140 0 l 0 0 l 0 1013 l 683 1013 l 683 888 "},"­":{x_min:0,x_max:705.5625,ha:803,o:"m 705 334 l 0 334 l 0 410 l 705 410 l 705 334 "},":":{x_min:0,x_max:142,ha:239,o:"m 142 585 l 0 585 l 0 738 l 142 738 l 142 585 m 142 0 l 0 0 l 0 151 l 142 151 l 142 0 "},Χ:{x_min:0,x_max:854.171875,ha:935,o:"m 854 0 l 683 0 l 423 409 l 166 0 l 0 0 l 347 519 l 18 1013 l 186 1013 l 427 637 l 675 1013 l 836 1013 l 504 521 l 854 0 "},"*":{x_min:116,x_max:674,ha:792,o:"m 674 768 l 475 713 l 610 544 l 517 477 l 394 652 l 272 478 l 178 544 l 314 713 l 116 766 l 153 876 l 341 812 l 342 1013 l 446 1013 l 446 811 l 635 874 l 674 768 "},"†":{x_min:0,x_max:777,ha:835,o:"m 458 804 l 777 804 l 777 683 l 458 683 l 458 0 l 319 0 l 319 681 l 0 683 l 0 804 l 319 804 l 319 1015 l 458 1013 l 458 804 "},"°":{x_min:0,x_max:347,ha:444,o:"m 173 802 q 43 856 91 802 q 0 977 0 905 q 45 1101 0 1049 q 173 1153 90 1153 q 303 1098 255 1153 q 347 977 347 1049 q 303 856 347 905 q 173 802 256 802 m 173 884 q 238 910 214 884 q 262 973 262 937 q 239 1038 262 1012 q 173 1064 217 1064 q 108 1037 132 1064 q 85 973 85 1010 q 108 910 85 937 q 173 884 132 884 "},V:{x_min:0,x_max:862.71875,ha:940,o:"m 862 1013 l 505 0 l 361 0 l 0 1013 l 143 1013 l 434 165 l 718 1012 l 862 1013 "},Ξ:{x_min:0,x_max:734.71875,ha:763,o:"m 723 889 l 9 889 l 9 1013 l 723 1013 l 723 889 m 673 463 l 61 463 l 61 589 l 673 589 l 673 463 m 734 0 l 0 0 l 0 124 l 734 124 l 734 0 "}," ":{x_min:0,x_max:0,ha:853},Ϋ:{x_min:.328125,x_max:819.515625,ha:889,o:"m 588 1046 l 460 1046 l 460 1189 l 588 1189 l 588 1046 m 360 1046 l 232 1046 l 232 1189 l 360 1189 l 360 1046 m 819 1012 l 482 416 l 482 0 l 342 0 l 342 416 l 0 1012 l 140 1012 l 411 533 l 679 1012 l 819 1012 "},0:{x_min:73,x_max:715,ha:792,o:"m 394 -29 q 153 129 242 -29 q 73 479 73 272 q 152 829 73 687 q 394 989 241 989 q 634 829 545 989 q 715 479 715 684 q 635 129 715 270 q 394 -29 546 -29 m 394 89 q 546 211 489 89 q 598 479 598 322 q 548 748 598 640 q 394 871 491 871 q 241 748 298 871 q 190 479 190 637 q 239 211 190 319 q 394 89 296 89 "},"”":{x_min:0,x_max:347,ha:454,o:"m 139 851 q 102 737 139 784 q 0 669 65 690 l 0 734 q 59 787 42 741 q 72 873 72 821 l 0 873 l 0 1013 l 139 1013 l 139 851 m 347 851 q 310 737 347 784 q 208 669 273 690 l 208 734 q 267 787 250 741 q 280 873 280 821 l 208 873 l 208 1013 l 347 1013 l 347 851 "},"@":{x_min:0,x_max:1260,ha:1357,o:"m 1098 -45 q 877 -160 1001 -117 q 633 -203 752 -203 q 155 -29 327 -203 q 0 360 0 127 q 176 802 0 616 q 687 1008 372 1008 q 1123 854 969 1008 q 1260 517 1260 718 q 1155 216 1260 341 q 868 82 1044 82 q 772 106 801 82 q 737 202 737 135 q 647 113 700 144 q 527 82 594 82 q 367 147 420 82 q 314 312 314 212 q 401 565 314 452 q 639 690 498 690 q 810 588 760 690 l 849 668 l 938 668 q 877 441 900 532 q 833 226 833 268 q 853 182 833 198 q 902 167 873 167 q 1088 272 1012 167 q 1159 512 1159 372 q 1051 793 1159 681 q 687 925 925 925 q 248 747 415 925 q 97 361 97 586 q 226 26 97 159 q 627 -122 370 -122 q 856 -87 737 -122 q 1061 8 976 -53 l 1098 -45 m 786 488 q 738 580 777 545 q 643 615 700 615 q 483 517 548 615 q 425 322 425 430 q 457 203 425 250 q 552 156 490 156 q 722 273 665 156 q 786 488 738 309 "},Ί:{x_min:0,x_max:499,ha:613,o:"m 277 1040 l 83 799 l 0 799 l 140 1040 l 277 1040 m 499 0 l 360 0 l 360 1012 l 499 1012 l 499 0 "},i:{x_min:14,x_max:136,ha:275,o:"m 136 873 l 14 873 l 14 1013 l 136 1013 l 136 873 m 136 0 l 14 0 l 14 737 l 136 737 l 136 0 "},Β:{x_min:0,x_max:778,ha:877,o:"m 580 545 q 724 468 671 534 q 778 310 778 402 q 673 83 778 170 q 432 0 575 0 l 0 0 l 0 1013 l 411 1013 q 629 957 541 1013 q 732 768 732 891 q 691 632 732 692 q 580 545 650 571 m 393 899 l 139 899 l 139 587 l 379 587 q 521 623 462 587 q 592 744 592 666 q 531 859 592 819 q 393 899 471 899 m 419 124 q 566 169 504 124 q 635 302 635 219 q 559 435 635 388 q 402 476 494 476 l 139 476 l 139 124 l 419 124 "},υ:{x_min:0,x_max:617,ha:725,o:"m 617 352 q 540 94 617 199 q 308 -24 455 -24 q 76 94 161 -24 q 0 352 0 199 l 0 739 l 126 739 l 126 355 q 169 185 126 257 q 312 98 220 98 q 451 185 402 98 q 492 355 492 257 l 492 739 l 617 739 l 617 352 "},"]":{x_min:0,x_max:275,ha:372,o:"m 275 -281 l 0 -281 l 0 -187 l 151 -187 l 151 920 l 0 920 l 0 1013 l 275 1013 l 275 -281 "},m:{x_min:0,x_max:1019,ha:1128,o:"m 1019 0 l 897 0 l 897 454 q 860 591 897 536 q 739 660 816 660 q 613 586 659 660 q 573 436 573 522 l 573 0 l 447 0 l 447 455 q 412 591 447 535 q 294 657 372 657 q 165 586 213 657 q 122 437 122 521 l 122 0 l 0 0 l 0 738 l 117 738 l 117 640 q 202 730 150 697 q 316 763 254 763 q 437 730 381 763 q 525 642 494 697 q 621 731 559 700 q 753 763 682 763 q 943 694 867 763 q 1019 512 1019 625 l 1019 0 "},χ:{x_min:8.328125,x_max:780.5625,ha:815,o:"m 780 -278 q 715 -294 747 -294 q 616 -257 663 -294 q 548 -175 576 -227 l 379 133 l 143 -277 l 9 -277 l 313 254 l 163 522 q 127 586 131 580 q 36 640 91 640 q 8 637 27 640 l 8 752 l 52 757 q 162 719 113 757 q 236 627 200 690 l 383 372 l 594 737 l 726 737 l 448 250 l 625 -69 q 670 -153 647 -110 q 743 -188 695 -188 q 780 -184 759 -188 l 780 -278 "},8:{x_min:55,x_max:736,ha:792,o:"m 571 527 q 694 424 652 491 q 736 280 736 358 q 648 71 736 158 q 395 -26 551 -26 q 142 69 238 -26 q 55 279 55 157 q 96 425 55 359 q 220 527 138 491 q 120 615 153 562 q 88 726 88 668 q 171 904 88 827 q 395 986 261 986 q 618 905 529 986 q 702 727 702 830 q 670 616 702 667 q 571 527 638 565 m 394 565 q 519 610 475 565 q 563 717 563 655 q 521 823 563 781 q 392 872 474 872 q 265 824 312 872 q 224 720 224 783 q 265 613 224 656 q 394 565 312 565 m 395 91 q 545 150 488 91 q 597 280 597 204 q 546 408 597 355 q 395 465 492 465 q 244 408 299 465 q 194 280 194 356 q 244 150 194 203 q 395 91 299 91 "},ί:{x_min:42,x_max:326.71875,ha:361,o:"m 284 3 q 233 -10 258 -5 q 182 -15 207 -15 q 85 26 119 -15 q 42 200 42 79 l 42 737 l 167 737 l 168 215 q 172 141 168 157 q 226 101 183 101 q 248 102 239 101 q 284 112 257 104 l 284 3 m 326 1040 l 137 819 l 54 819 l 189 1040 l 326 1040 "},Ζ:{x_min:0,x_max:779.171875,ha:850,o:"m 779 0 l 0 0 l 0 113 l 620 896 l 40 896 l 40 1013 l 779 1013 l 779 887 l 170 124 l 779 124 l 779 0 "},R:{x_min:0,x_max:781.953125,ha:907,o:"m 781 0 l 623 0 q 587 242 590 52 q 407 433 585 433 l 138 433 l 138 0 l 0 0 l 0 1013 l 396 1013 q 636 946 539 1013 q 749 731 749 868 q 711 597 749 659 q 608 502 674 534 q 718 370 696 474 q 729 207 722 352 q 781 26 736 62 l 781 0 m 373 551 q 533 594 465 551 q 614 731 614 645 q 532 859 614 815 q 373 896 465 896 l 138 896 l 138 551 l 373 551 "},o:{x_min:0,x_max:713,ha:821,o:"m 357 -25 q 94 91 194 -25 q 0 368 0 202 q 93 642 0 533 q 357 761 193 761 q 618 644 518 761 q 713 368 713 533 q 619 91 713 201 q 357 -25 521 -25 m 357 85 q 528 175 465 85 q 584 369 584 255 q 529 562 584 484 q 357 651 467 651 q 189 560 250 651 q 135 369 135 481 q 187 177 135 257 q 357 85 250 85 "},5:{x_min:54.171875,x_max:738,ha:792,o:"m 738 314 q 626 60 738 153 q 382 -23 526 -23 q 155 47 248 -23 q 54 256 54 125 l 183 256 q 259 132 204 174 q 382 91 314 91 q 533 149 471 91 q 602 314 602 213 q 538 469 602 411 q 386 528 475 528 q 284 506 332 528 q 197 439 237 484 l 81 439 l 159 958 l 684 958 l 684 840 l 254 840 l 214 579 q 306 627 258 612 q 407 643 354 643 q 636 552 540 643 q 738 314 738 457 "},7:{x_min:58.71875,x_max:730.953125,ha:792,o:"m 730 839 q 469 448 560 641 q 335 0 378 255 l 192 0 q 328 441 235 252 q 593 830 421 630 l 58 830 l 58 958 l 730 958 l 730 839 "},K:{x_min:0,x_max:819.46875,ha:906,o:"m 819 0 l 649 0 l 294 509 l 139 355 l 139 0 l 0 0 l 0 1013 l 139 1013 l 139 526 l 626 1013 l 809 1013 l 395 600 l 819 0 "},",":{x_min:0,x_max:142,ha:239,o:"m 142 -12 q 105 -132 142 -82 q 0 -205 68 -182 l 0 -138 q 57 -82 40 -124 q 70 0 70 -51 l 0 0 l 0 151 l 142 151 l 142 -12 "},d:{x_min:0,x_max:683,ha:796,o:"m 683 0 l 564 0 l 564 93 q 456 6 516 38 q 327 -25 395 -25 q 87 100 181 -25 q 0 365 0 215 q 90 639 0 525 q 343 763 187 763 q 564 647 486 763 l 564 1013 l 683 1013 l 683 0 m 582 373 q 529 562 582 484 q 361 653 468 653 q 190 561 253 653 q 135 365 135 479 q 189 175 135 254 q 358 85 251 85 q 529 178 468 85 q 582 373 582 258 "},"¨":{x_min:-109,x_max:247,ha:232,o:"m 247 1046 l 119 1046 l 119 1189 l 247 1189 l 247 1046 m 19 1046 l -109 1046 l -109 1189 l 19 1189 l 19 1046 "},E:{x_min:0,x_max:736.109375,ha:789,o:"m 736 0 l 0 0 l 0 1013 l 725 1013 l 725 889 l 139 889 l 139 585 l 677 585 l 677 467 l 139 467 l 139 125 l 736 125 l 736 0 "},Y:{x_min:0,x_max:820,ha:886,o:"m 820 1013 l 482 416 l 482 0 l 342 0 l 342 416 l 0 1013 l 140 1013 l 411 534 l 679 1012 l 820 1013 "},'"':{x_min:0,x_max:299,ha:396,o:"m 299 606 l 203 606 l 203 988 l 299 988 l 299 606 m 96 606 l 0 606 l 0 988 l 96 988 l 96 606 "},"‹":{x_min:17.984375,x_max:773.609375,ha:792,o:"m 773 40 l 18 376 l 17 465 l 773 799 l 773 692 l 159 420 l 773 149 l 773 40 "},"„":{x_min:0,x_max:364,ha:467,o:"m 141 -12 q 104 -132 141 -82 q 0 -205 67 -182 l 0 -138 q 56 -82 40 -124 q 69 0 69 -51 l 0 0 l 0 151 l 141 151 l 141 -12 m 364 -12 q 327 -132 364 -82 q 222 -205 290 -182 l 222 -138 q 279 -82 262 -124 q 292 0 292 -51 l 222 0 l 222 151 l 364 151 l 364 -12 "},δ:{x_min:1,x_max:710,ha:810,o:"m 710 360 q 616 87 710 196 q 356 -28 518 -28 q 99 82 197 -28 q 1 356 1 192 q 100 606 1 509 q 355 703 199 703 q 180 829 288 754 q 70 903 124 866 l 70 1012 l 643 1012 l 643 901 l 258 901 q 462 763 422 794 q 636 592 577 677 q 710 360 710 485 m 584 365 q 552 501 584 447 q 451 602 521 555 q 372 611 411 611 q 197 541 258 611 q 136 355 136 472 q 190 171 136 245 q 358 85 252 85 q 528 173 465 85 q 584 365 584 252 "},έ:{x_min:0,x_max:634.71875,ha:714,o:"m 634 234 q 527 38 634 110 q 300 -25 433 -25 q 98 29 183 -25 q 0 204 0 93 q 37 313 0 265 q 128 390 67 352 q 56 459 82 419 q 26 555 26 505 q 114 712 26 654 q 295 763 191 763 q 499 700 416 763 q 589 515 589 631 l 478 515 q 419 618 464 580 q 307 657 374 657 q 207 630 253 657 q 151 547 151 598 q 238 445 151 469 q 389 434 280 434 l 389 331 l 349 331 q 206 315 255 331 q 125 210 125 287 q 183 107 125 145 q 302 76 233 76 q 436 117 379 76 q 509 234 493 159 l 634 234 m 520 1040 l 331 819 l 248 819 l 383 1040 l 520 1040 "},ω:{x_min:0,x_max:922,ha:1031,o:"m 922 339 q 856 97 922 203 q 650 -26 780 -26 q 538 9 587 -26 q 461 103 489 44 q 387 12 436 46 q 277 -22 339 -22 q 69 97 147 -22 q 0 339 0 203 q 45 551 0 444 q 161 738 84 643 l 302 738 q 175 553 219 647 q 124 336 124 446 q 155 179 124 249 q 275 88 197 88 q 375 163 341 88 q 400 294 400 219 l 400 572 l 524 572 l 524 294 q 561 135 524 192 q 643 88 591 88 q 762 182 719 88 q 797 342 797 257 q 745 556 797 450 q 619 738 705 638 l 760 738 q 874 551 835 640 q 922 339 922 444 "},"´":{x_min:0,x_max:96,ha:251,o:"m 96 606 l 0 606 l 0 988 l 96 988 l 96 606 "},"±":{x_min:11,x_max:781,ha:792,o:"m 781 490 l 446 490 l 446 255 l 349 255 l 349 490 l 11 490 l 11 586 l 349 586 l 349 819 l 446 819 l 446 586 l 781 586 l 781 490 m 781 21 l 11 21 l 11 115 l 781 115 l 781 21 "},"|":{x_min:343,x_max:449,ha:792,o:"m 449 462 l 343 462 l 343 986 l 449 986 l 449 462 m 449 -242 l 343 -242 l 343 280 l 449 280 l 449 -242 "},ϋ:{x_min:0,x_max:617,ha:725,o:"m 482 800 l 372 800 l 372 925 l 482 925 l 482 800 m 239 800 l 129 800 l 129 925 l 239 925 l 239 800 m 617 352 q 540 93 617 199 q 308 -24 455 -24 q 76 93 161 -24 q 0 352 0 199 l 0 738 l 126 738 l 126 354 q 169 185 126 257 q 312 98 220 98 q 451 185 402 98 q 492 354 492 257 l 492 738 l 617 738 l 617 352 "},"§":{x_min:0,x_max:593,ha:690,o:"m 593 425 q 554 312 593 369 q 467 233 516 254 q 537 83 537 172 q 459 -74 537 -12 q 288 -133 387 -133 q 115 -69 184 -133 q 47 96 47 -6 l 166 96 q 199 7 166 40 q 288 -26 232 -26 q 371 -5 332 -26 q 420 60 420 21 q 311 201 420 139 q 108 309 210 255 q 0 490 0 383 q 33 602 0 551 q 124 687 66 654 q 75 743 93 712 q 58 812 58 773 q 133 984 58 920 q 300 1043 201 1043 q 458 987 394 1043 q 529 814 529 925 l 411 814 q 370 908 404 877 q 289 939 336 939 q 213 911 246 939 q 180 841 180 883 q 286 720 180 779 q 484 612 480 615 q 593 425 593 534 m 467 409 q 355 544 467 473 q 196 630 228 612 q 146 587 162 609 q 124 525 124 558 q 239 387 124 462 q 398 298 369 315 q 448 345 429 316 q 467 409 467 375 "},b:{x_min:0,x_max:685,ha:783,o:"m 685 372 q 597 99 685 213 q 347 -25 501 -25 q 219 5 277 -25 q 121 93 161 36 l 121 0 l 0 0 l 0 1013 l 121 1013 l 121 634 q 214 723 157 692 q 341 754 272 754 q 591 637 493 754 q 685 372 685 526 m 554 356 q 499 550 554 470 q 328 644 437 644 q 162 556 223 644 q 108 369 108 478 q 160 176 108 256 q 330 83 221 83 q 498 169 435 83 q 554 356 554 245 "},q:{x_min:0,x_max:683,ha:876,o:"m 683 -278 l 564 -278 l 564 97 q 474 8 533 39 q 345 -23 415 -23 q 91 93 188 -23 q 0 364 0 203 q 87 635 0 522 q 337 760 184 760 q 466 727 408 760 q 564 637 523 695 l 564 737 l 683 737 l 683 -278 m 582 375 q 527 564 582 488 q 358 652 466 652 q 190 565 253 652 q 135 377 135 488 q 189 179 135 261 q 361 84 251 84 q 530 179 469 84 q 582 375 582 260 "},Ω:{x_min:-.171875,x_max:969.5625,ha:1068,o:"m 969 0 l 555 0 l 555 123 q 744 308 675 194 q 814 558 814 423 q 726 812 814 709 q 484 922 633 922 q 244 820 334 922 q 154 567 154 719 q 223 316 154 433 q 412 123 292 199 l 412 0 l 0 0 l 0 124 l 217 124 q 68 327 122 210 q 15 572 15 444 q 144 911 15 781 q 484 1041 274 1041 q 822 909 691 1041 q 953 569 953 777 q 899 326 953 443 q 750 124 846 210 l 969 124 l 969 0 "},ύ:{x_min:0,x_max:617,ha:725,o:"m 617 352 q 540 93 617 199 q 308 -24 455 -24 q 76 93 161 -24 q 0 352 0 199 l 0 738 l 126 738 l 126 354 q 169 185 126 257 q 312 98 220 98 q 451 185 402 98 q 492 354 492 257 l 492 738 l 617 738 l 617 352 m 535 1040 l 346 819 l 262 819 l 397 1040 l 535 1040 "},z:{x_min:-.015625,x_max:613.890625,ha:697,o:"m 613 0 l 0 0 l 0 100 l 433 630 l 20 630 l 20 738 l 594 738 l 593 636 l 163 110 l 613 110 l 613 0 "},"™":{x_min:0,x_max:894,ha:1e3,o:"m 389 951 l 229 951 l 229 503 l 160 503 l 160 951 l 0 951 l 0 1011 l 389 1011 l 389 951 m 894 503 l 827 503 l 827 939 l 685 503 l 620 503 l 481 937 l 481 503 l 417 503 l 417 1011 l 517 1011 l 653 580 l 796 1010 l 894 1011 l 894 503 "},ή:{x_min:.78125,x_max:697,ha:810,o:"m 697 -278 l 572 -278 l 572 454 q 540 587 572 536 q 425 650 501 650 q 271 579 337 650 q 206 420 206 509 l 206 0 l 81 0 l 81 489 q 73 588 81 562 q 0 644 56 644 l 0 741 q 68 755 38 755 q 158 721 124 755 q 200 630 193 687 q 297 726 234 692 q 434 761 359 761 q 620 692 544 761 q 697 516 697 624 l 697 -278 m 479 1040 l 290 819 l 207 819 l 341 1040 l 479 1040 "},Θ:{x_min:0,x_max:960,ha:1056,o:"m 960 507 q 833 129 960 280 q 476 -32 698 -32 q 123 129 255 -32 q 0 507 0 280 q 123 883 0 732 q 476 1045 255 1045 q 832 883 696 1045 q 960 507 960 732 m 817 500 q 733 789 817 669 q 476 924 639 924 q 223 792 317 924 q 142 507 142 675 q 222 222 142 339 q 476 89 315 89 q 730 218 636 89 q 817 500 817 334 m 716 449 l 243 449 l 243 571 l 716 571 l 716 449 "},"®":{x_min:-3,x_max:1008,ha:1106,o:"m 503 532 q 614 562 566 532 q 672 658 672 598 q 614 747 672 716 q 503 772 569 772 l 338 772 l 338 532 l 503 532 m 502 -7 q 123 151 263 -7 q -3 501 -3 294 q 123 851 -3 706 q 502 1011 263 1011 q 881 851 739 1011 q 1008 501 1008 708 q 883 151 1008 292 q 502 -7 744 -7 m 502 60 q 830 197 709 60 q 940 501 940 322 q 831 805 940 681 q 502 944 709 944 q 174 805 296 944 q 65 501 65 680 q 173 197 65 320 q 502 60 294 60 m 788 146 l 678 146 q 653 316 655 183 q 527 449 652 449 l 338 449 l 338 146 l 241 146 l 241 854 l 518 854 q 688 808 621 854 q 766 658 766 755 q 739 563 766 607 q 668 497 713 519 q 751 331 747 472 q 788 164 756 190 l 788 146 "},"~":{x_min:0,x_max:833,ha:931,o:"m 833 958 q 778 753 833 831 q 594 665 716 665 q 402 761 502 665 q 240 857 302 857 q 131 795 166 857 q 104 665 104 745 l 0 665 q 54 867 0 789 q 237 958 116 958 q 429 861 331 958 q 594 765 527 765 q 704 827 670 765 q 729 958 729 874 l 833 958 "},Ε:{x_min:0,x_max:736.21875,ha:778,o:"m 736 0 l 0 0 l 0 1013 l 725 1013 l 725 889 l 139 889 l 139 585 l 677 585 l 677 467 l 139 467 l 139 125 l 736 125 l 736 0 "},"³":{x_min:0,x_max:450,ha:547,o:"m 450 552 q 379 413 450 464 q 220 366 313 366 q 69 414 130 366 q 0 567 0 470 l 85 567 q 126 470 85 504 q 225 437 168 437 q 320 467 280 437 q 360 552 360 498 q 318 632 360 608 q 213 657 276 657 q 195 657 203 657 q 176 657 181 657 l 176 722 q 279 733 249 722 q 334 815 334 752 q 300 881 334 856 q 220 907 267 907 q 133 875 169 907 q 97 781 97 844 l 15 781 q 78 926 15 875 q 220 972 135 972 q 364 930 303 972 q 426 817 426 888 q 344 697 426 733 q 421 642 392 681 q 450 552 450 603 "},"[":{x_min:0,x_max:273.609375,ha:371,o:"m 273 -281 l 0 -281 l 0 1013 l 273 1013 l 273 920 l 124 920 l 124 -187 l 273 -187 l 273 -281 "},L:{x_min:0,x_max:645.828125,ha:696,o:"m 645 0 l 0 0 l 0 1013 l 140 1013 l 140 126 l 645 126 l 645 0 "},σ:{x_min:0,x_max:803.390625,ha:894,o:"m 803 628 l 633 628 q 713 368 713 512 q 618 93 713 204 q 357 -25 518 -25 q 94 91 194 -25 q 0 368 0 201 q 94 644 0 533 q 356 761 194 761 q 481 750 398 761 q 608 739 564 739 l 803 739 l 803 628 m 360 85 q 529 180 467 85 q 584 374 584 262 q 527 566 584 490 q 352 651 463 651 q 187 559 247 651 q 135 368 135 478 q 189 175 135 254 q 360 85 251 85 "},ζ:{x_min:0,x_max:573,ha:642,o:"m 573 -40 q 553 -162 573 -97 q 510 -278 543 -193 l 400 -278 q 441 -187 428 -219 q 462 -90 462 -132 q 378 -14 462 -14 q 108 45 197 -14 q 0 290 0 117 q 108 631 0 462 q 353 901 194 767 l 55 901 l 55 1012 l 561 1012 l 561 924 q 261 669 382 831 q 128 301 128 489 q 243 117 128 149 q 458 98 350 108 q 573 -40 573 80 "},θ:{x_min:0,x_max:674,ha:778,o:"m 674 496 q 601 160 674 304 q 336 -26 508 -26 q 73 153 165 -26 q 0 485 0 296 q 72 840 0 683 q 343 1045 166 1045 q 605 844 516 1045 q 674 496 674 692 m 546 579 q 498 798 546 691 q 336 935 437 935 q 178 798 237 935 q 126 579 137 701 l 546 579 m 546 475 l 126 475 q 170 233 126 348 q 338 80 230 80 q 504 233 447 80 q 546 475 546 346 "},Ο:{x_min:0,x_max:958,ha:1054,o:"m 485 1042 q 834 883 703 1042 q 958 511 958 735 q 834 136 958 287 q 481 -26 701 -26 q 126 130 261 -26 q 0 504 0 279 q 127 880 0 729 q 485 1042 263 1042 m 480 98 q 731 225 638 98 q 815 504 815 340 q 733 783 815 670 q 480 913 640 913 q 226 785 321 913 q 142 504 142 671 q 226 224 142 339 q 480 98 319 98 "},Γ:{x_min:0,x_max:705.28125,ha:749,o:"m 705 886 l 140 886 l 140 0 l 0 0 l 0 1012 l 705 1012 l 705 886 "}," ":{x_min:0,x_max:0,ha:375},"%":{x_min:-3,x_max:1089,ha:1186,o:"m 845 0 q 663 76 731 0 q 602 244 602 145 q 661 412 602 344 q 845 489 728 489 q 1027 412 959 489 q 1089 244 1089 343 q 1029 76 1089 144 q 845 0 962 0 m 844 103 q 945 143 909 103 q 981 243 981 184 q 947 340 981 301 q 844 385 909 385 q 744 342 781 385 q 708 243 708 300 q 741 147 708 186 q 844 103 780 103 m 888 986 l 284 -25 l 199 -25 l 803 986 l 888 986 m 241 468 q 58 545 126 468 q -3 715 -3 615 q 56 881 -3 813 q 238 958 124 958 q 421 881 353 958 q 483 712 483 813 q 423 544 483 612 q 241 468 356 468 m 241 855 q 137 811 175 855 q 100 710 100 768 q 136 612 100 653 q 240 572 172 572 q 344 614 306 572 q 382 713 382 656 q 347 810 382 771 q 241 855 308 855 "},P:{x_min:0,x_max:726,ha:806,o:"m 424 1013 q 640 931 555 1013 q 726 719 726 850 q 637 506 726 587 q 413 426 548 426 l 140 426 l 140 0 l 0 0 l 0 1013 l 424 1013 m 379 889 l 140 889 l 140 548 l 372 548 q 522 589 459 548 q 593 720 593 637 q 528 845 593 801 q 379 889 463 889 "},Έ:{x_min:0,x_max:1078.21875,ha:1118,o:"m 1078 0 l 342 0 l 342 1013 l 1067 1013 l 1067 889 l 481 889 l 481 585 l 1019 585 l 1019 467 l 481 467 l 481 125 l 1078 125 l 1078 0 m 277 1040 l 83 799 l 0 799 l 140 1040 l 277 1040 "},Ώ:{x_min:.125,x_max:1136.546875,ha:1235,o:"m 1136 0 l 722 0 l 722 123 q 911 309 842 194 q 981 558 981 423 q 893 813 981 710 q 651 923 800 923 q 411 821 501 923 q 321 568 321 720 q 390 316 321 433 q 579 123 459 200 l 579 0 l 166 0 l 166 124 l 384 124 q 235 327 289 210 q 182 572 182 444 q 311 912 182 782 q 651 1042 441 1042 q 989 910 858 1042 q 1120 569 1120 778 q 1066 326 1120 443 q 917 124 1013 210 l 1136 124 l 1136 0 m 277 1040 l 83 800 l 0 800 l 140 1041 l 277 1040 "},_:{x_min:0,x_max:705.5625,ha:803,o:"m 705 -334 l 0 -334 l 0 -234 l 705 -234 l 705 -334 "},Ϊ:{x_min:-110,x_max:246,ha:275,o:"m 246 1046 l 118 1046 l 118 1189 l 246 1189 l 246 1046 m 18 1046 l -110 1046 l -110 1189 l 18 1189 l 18 1046 m 136 0 l 0 0 l 0 1012 l 136 1012 l 136 0 "},"+":{x_min:23,x_max:768,ha:792,o:"m 768 372 l 444 372 l 444 0 l 347 0 l 347 372 l 23 372 l 23 468 l 347 468 l 347 840 l 444 840 l 444 468 l 768 468 l 768 372 "},"½":{x_min:0,x_max:1050,ha:1149,o:"m 1050 0 l 625 0 q 712 178 625 108 q 878 277 722 187 q 967 385 967 328 q 932 456 967 429 q 850 484 897 484 q 759 450 798 484 q 721 352 721 416 l 640 352 q 706 502 640 448 q 851 551 766 551 q 987 509 931 551 q 1050 385 1050 462 q 976 251 1050 301 q 829 179 902 215 q 717 68 740 133 l 1050 68 l 1050 0 m 834 985 l 215 -28 l 130 -28 l 750 984 l 834 985 m 224 422 l 142 422 l 142 811 l 0 811 l 0 867 q 104 889 62 867 q 164 973 157 916 l 224 973 l 224 422 "},Ρ:{x_min:0,x_max:720,ha:783,o:"m 424 1013 q 637 933 554 1013 q 720 723 720 853 q 633 508 720 591 q 413 426 546 426 l 140 426 l 140 0 l 0 0 l 0 1013 l 424 1013 m 378 889 l 140 889 l 140 548 l 371 548 q 521 589 458 548 q 592 720 592 637 q 527 845 592 801 q 378 889 463 889 "},"'":{x_min:0,x_max:139,ha:236,o:"m 139 851 q 102 737 139 784 q 0 669 65 690 l 0 734 q 59 787 42 741 q 72 873 72 821 l 0 873 l 0 1013 l 139 1013 l 139 851 "},ª:{x_min:0,x_max:350,ha:397,o:"m 350 625 q 307 616 328 616 q 266 631 281 616 q 247 673 251 645 q 190 628 225 644 q 116 613 156 613 q 32 641 64 613 q 0 722 0 669 q 72 826 0 800 q 247 866 159 846 l 247 887 q 220 934 247 916 q 162 953 194 953 q 104 934 129 953 q 76 882 80 915 l 16 882 q 60 976 16 941 q 166 1011 104 1011 q 266 979 224 1011 q 308 891 308 948 l 308 706 q 311 679 308 688 q 331 670 315 670 l 350 672 l 350 625 m 247 757 l 247 811 q 136 790 175 798 q 64 726 64 773 q 83 682 64 697 q 132 667 103 667 q 207 690 174 667 q 247 757 247 718 "},"΅":{x_min:0,x_max:450,ha:553,o:"m 450 800 l 340 800 l 340 925 l 450 925 l 450 800 m 406 1040 l 212 800 l 129 800 l 269 1040 l 406 1040 m 110 800 l 0 800 l 0 925 l 110 925 l 110 800 "},T:{x_min:0,x_max:777,ha:835,o:"m 777 894 l 458 894 l 458 0 l 319 0 l 319 894 l 0 894 l 0 1013 l 777 1013 l 777 894 "},Φ:{x_min:0,x_max:915,ha:997,o:"m 527 0 l 389 0 l 389 122 q 110 231 220 122 q 0 509 0 340 q 110 785 0 677 q 389 893 220 893 l 389 1013 l 527 1013 l 527 893 q 804 786 693 893 q 915 509 915 679 q 805 231 915 341 q 527 122 696 122 l 527 0 m 527 226 q 712 310 641 226 q 779 507 779 389 q 712 705 779 627 q 527 787 641 787 l 527 226 m 389 226 l 389 787 q 205 698 275 775 q 136 505 136 620 q 206 308 136 391 q 389 226 276 226 "},"⁋":{x_min:0,x_max:0,ha:694},j:{x_min:-77.78125,x_max:167,ha:349,o:"m 167 871 l 42 871 l 42 1013 l 167 1013 l 167 871 m 167 -80 q 121 -231 167 -184 q -26 -278 76 -278 l -77 -278 l -77 -164 l -41 -164 q 26 -143 11 -164 q 42 -65 42 -122 l 42 737 l 167 737 l 167 -80 "},Σ:{x_min:0,x_max:756.953125,ha:819,o:"m 756 0 l 0 0 l 0 107 l 395 523 l 22 904 l 22 1013 l 745 1013 l 745 889 l 209 889 l 566 523 l 187 125 l 756 125 l 756 0 "},1:{x_min:215.671875,x_max:574,ha:792,o:"m 574 0 l 442 0 l 442 697 l 215 697 l 215 796 q 386 833 330 796 q 475 986 447 875 l 574 986 l 574 0 "},"›":{x_min:18.0625,x_max:774,ha:792,o:"m 774 376 l 18 40 l 18 149 l 631 421 l 18 692 l 18 799 l 774 465 l 774 376 "},"<":{x_min:17.984375,x_max:773.609375,ha:792,o:"m 773 40 l 18 376 l 17 465 l 773 799 l 773 692 l 159 420 l 773 149 l 773 40 "},"£":{x_min:0,x_max:704.484375,ha:801,o:"m 704 41 q 623 -10 664 5 q 543 -26 583 -26 q 359 15 501 -26 q 243 36 288 36 q 158 23 197 36 q 73 -21 119 10 l 6 76 q 125 195 90 150 q 175 331 175 262 q 147 443 175 383 l 0 443 l 0 512 l 108 512 q 43 734 43 623 q 120 929 43 854 q 358 1010 204 1010 q 579 936 487 1010 q 678 729 678 857 l 678 684 l 552 684 q 504 838 552 780 q 362 896 457 896 q 216 852 263 896 q 176 747 176 815 q 199 627 176 697 q 248 512 217 574 l 468 512 l 468 443 l 279 443 q 297 356 297 398 q 230 194 297 279 q 153 107 211 170 q 227 133 190 125 q 293 142 264 142 q 410 119 339 142 q 516 96 482 96 q 579 105 550 96 q 648 142 608 115 l 704 41 "},t:{x_min:0,x_max:367,ha:458,o:"m 367 0 q 312 -5 339 -2 q 262 -8 284 -8 q 145 28 183 -8 q 108 143 108 64 l 108 638 l 0 638 l 0 738 l 108 738 l 108 944 l 232 944 l 232 738 l 367 738 l 367 638 l 232 638 l 232 185 q 248 121 232 140 q 307 102 264 102 q 345 104 330 102 q 367 107 360 107 l 367 0 "},"¬":{x_min:0,x_max:706,ha:803,o:"m 706 411 l 706 158 l 630 158 l 630 335 l 0 335 l 0 411 l 706 411 "},λ:{x_min:0,x_max:750,ha:803,o:"m 750 -7 q 679 -15 716 -15 q 538 59 591 -15 q 466 214 512 97 l 336 551 l 126 0 l 0 0 l 270 705 q 223 837 247 770 q 116 899 190 899 q 90 898 100 899 l 90 1004 q 152 1011 125 1011 q 298 938 244 1011 q 373 783 326 901 l 605 192 q 649 115 629 136 q 716 95 669 95 l 736 95 q 750 97 745 97 l 750 -7 "},W:{x_min:0,x_max:1263.890625,ha:1351,o:"m 1263 1013 l 995 0 l 859 0 l 627 837 l 405 0 l 265 0 l 0 1013 l 136 1013 l 342 202 l 556 1013 l 701 1013 l 921 207 l 1133 1012 l 1263 1013 "},">":{x_min:18.0625,x_max:774,ha:792,o:"m 774 376 l 18 40 l 18 149 l 631 421 l 18 692 l 18 799 l 774 465 l 774 376 "},v:{x_min:0,x_max:675.15625,ha:761,o:"m 675 738 l 404 0 l 272 0 l 0 738 l 133 737 l 340 147 l 541 737 l 675 738 "},τ:{x_min:.28125,x_max:644.5,ha:703,o:"m 644 628 l 382 628 l 382 179 q 388 120 382 137 q 436 91 401 91 q 474 94 447 91 q 504 97 501 97 l 504 0 q 454 -9 482 -5 q 401 -14 426 -14 q 278 67 308 -14 q 260 233 260 118 l 260 628 l 0 628 l 0 739 l 644 739 l 644 628 "},ξ:{x_min:0,x_max:624.9375,ha:699,o:"m 624 -37 q 608 -153 624 -96 q 563 -278 593 -211 l 454 -278 q 491 -183 486 -200 q 511 -83 511 -126 q 484 -23 511 -44 q 370 1 452 1 q 323 0 354 1 q 283 -1 293 -1 q 84 76 169 -1 q 0 266 0 154 q 56 431 0 358 q 197 538 108 498 q 94 613 134 562 q 54 730 54 665 q 77 823 54 780 q 143 901 101 867 l 27 901 l 27 1012 l 576 1012 l 576 901 l 380 901 q 244 863 303 901 q 178 745 178 820 q 312 600 178 636 q 532 582 380 582 l 532 479 q 276 455 361 479 q 118 281 118 410 q 165 173 118 217 q 274 120 208 133 q 494 101 384 110 q 624 -37 624 76 "},"&":{x_min:-3,x_max:894.25,ha:992,o:"m 894 0 l 725 0 l 624 123 q 471 0 553 40 q 306 -41 390 -41 q 168 -7 231 -41 q 62 92 105 26 q 14 187 31 139 q -3 276 -3 235 q 55 433 -3 358 q 248 581 114 508 q 170 689 196 640 q 137 817 137 751 q 214 985 137 922 q 384 1041 284 1041 q 548 988 483 1041 q 622 824 622 928 q 563 666 622 739 q 431 556 516 608 l 621 326 q 649 407 639 361 q 663 493 653 426 l 781 493 q 703 229 781 352 l 894 0 m 504 818 q 468 908 504 877 q 384 940 433 940 q 293 907 331 940 q 255 818 255 875 q 289 714 255 767 q 363 628 313 678 q 477 729 446 682 q 504 818 504 771 m 556 209 l 314 499 q 179 395 223 449 q 135 283 135 341 q 146 222 135 253 q 183 158 158 192 q 333 80 241 80 q 556 209 448 80 "},Λ:{x_min:0,x_max:862.5,ha:942,o:"m 862 0 l 719 0 l 426 847 l 143 0 l 0 0 l 356 1013 l 501 1013 l 862 0 "},I:{x_min:41,x_max:180,ha:293,o:"m 180 0 l 41 0 l 41 1013 l 180 1013 l 180 0 "},G:{x_min:0,x_max:921,ha:1011,o:"m 921 0 l 832 0 l 801 136 q 655 15 741 58 q 470 -28 568 -28 q 126 133 259 -28 q 0 499 0 284 q 125 881 0 731 q 486 1043 259 1043 q 763 957 647 1043 q 905 709 890 864 l 772 709 q 668 866 747 807 q 486 926 589 926 q 228 795 322 926 q 142 507 142 677 q 228 224 142 342 q 483 94 323 94 q 712 195 625 94 q 796 435 796 291 l 477 435 l 477 549 l 921 549 l 921 0 "},ΰ:{x_min:0,x_max:617,ha:725,o:"m 524 800 l 414 800 l 414 925 l 524 925 l 524 800 m 183 800 l 73 800 l 73 925 l 183 925 l 183 800 m 617 352 q 540 93 617 199 q 308 -24 455 -24 q 76 93 161 -24 q 0 352 0 199 l 0 738 l 126 738 l 126 354 q 169 185 126 257 q 312 98 220 98 q 451 185 402 98 q 492 354 492 257 l 492 738 l 617 738 l 617 352 m 489 1040 l 300 819 l 216 819 l 351 1040 l 489 1040 "},"`":{x_min:0,x_max:138.890625,ha:236,o:"m 138 699 l 0 699 l 0 861 q 36 974 0 929 q 138 1041 72 1020 l 138 977 q 82 931 95 969 q 69 839 69 893 l 138 839 l 138 699 "},"·":{x_min:0,x_max:142,ha:239,o:"m 142 585 l 0 585 l 0 738 l 142 738 l 142 585 "},Υ:{x_min:.328125,x_max:819.515625,ha:889,o:"m 819 1013 l 482 416 l 482 0 l 342 0 l 342 416 l 0 1013 l 140 1013 l 411 533 l 679 1013 l 819 1013 "},r:{x_min:0,x_max:355.5625,ha:432,o:"m 355 621 l 343 621 q 179 569 236 621 q 122 411 122 518 l 122 0 l 0 0 l 0 737 l 117 737 l 117 604 q 204 719 146 686 q 355 753 262 753 l 355 621 "},x:{x_min:0,x_max:675,ha:764,o:"m 675 0 l 525 0 l 331 286 l 144 0 l 0 0 l 256 379 l 12 738 l 157 737 l 336 473 l 516 738 l 661 738 l 412 380 l 675 0 "},μ:{x_min:0,x_max:696.609375,ha:747,o:"m 696 -4 q 628 -14 657 -14 q 498 97 513 -14 q 422 8 470 41 q 313 -24 374 -24 q 207 3 258 -24 q 120 80 157 31 l 120 -278 l 0 -278 l 0 738 l 124 738 l 124 343 q 165 172 124 246 q 308 82 216 82 q 451 177 402 82 q 492 358 492 254 l 492 738 l 616 738 l 616 214 q 623 136 616 160 q 673 92 636 92 q 696 95 684 92 l 696 -4 "},h:{x_min:0,x_max:615,ha:724,o:"m 615 472 l 615 0 l 490 0 l 490 454 q 456 590 490 535 q 338 654 416 654 q 186 588 251 654 q 122 436 122 522 l 122 0 l 0 0 l 0 1013 l 122 1013 l 122 633 q 218 727 149 694 q 362 760 287 760 q 552 676 484 760 q 615 472 615 600 "},".":{x_min:0,x_max:142,ha:239,o:"m 142 0 l 0 0 l 0 151 l 142 151 l 142 0 "},φ:{x_min:-2,x_max:878,ha:974,o:"m 496 -279 l 378 -279 l 378 -17 q 101 88 204 -17 q -2 367 -2 194 q 68 626 -2 510 q 283 758 151 758 l 283 646 q 167 537 209 626 q 133 373 133 462 q 192 177 133 254 q 378 93 259 93 l 378 758 q 445 764 426 763 q 476 765 464 765 q 765 659 653 765 q 878 377 878 553 q 771 96 878 209 q 496 -17 665 -17 l 496 -279 m 496 93 l 514 93 q 687 183 623 93 q 746 380 746 265 q 691 569 746 491 q 522 658 629 658 l 496 656 l 496 93 "},";":{x_min:0,x_max:142,ha:239,o:"m 142 585 l 0 585 l 0 738 l 142 738 l 142 585 m 142 -12 q 105 -132 142 -82 q 0 -206 68 -182 l 0 -138 q 58 -82 43 -123 q 68 0 68 -56 l 0 0 l 0 151 l 142 151 l 142 -12 "},f:{x_min:0,x_max:378,ha:472,o:"m 378 638 l 246 638 l 246 0 l 121 0 l 121 638 l 0 638 l 0 738 l 121 738 q 137 935 121 887 q 290 1028 171 1028 q 320 1027 305 1028 q 378 1021 334 1026 l 378 908 q 323 918 346 918 q 257 870 273 918 q 246 780 246 840 l 246 738 l 378 738 l 378 638 "},"“":{x_min:1,x_max:348.21875,ha:454,o:"m 140 670 l 1 670 l 1 830 q 37 943 1 897 q 140 1011 74 990 l 140 947 q 82 900 97 940 q 68 810 68 861 l 140 810 l 140 670 m 348 670 l 209 670 l 209 830 q 245 943 209 897 q 348 1011 282 990 l 348 947 q 290 900 305 940 q 276 810 276 861 l 348 810 l 348 670 "},A:{x_min:.03125,x_max:906.953125,ha:1008,o:"m 906 0 l 756 0 l 648 303 l 251 303 l 142 0 l 0 0 l 376 1013 l 529 1013 l 906 0 m 610 421 l 452 867 l 293 421 l 610 421 "},6:{x_min:53,x_max:739,ha:792,o:"m 739 312 q 633 62 739 162 q 400 -31 534 -31 q 162 78 257 -31 q 53 439 53 206 q 178 859 53 712 q 441 986 284 986 q 643 912 559 986 q 732 713 732 833 l 601 713 q 544 830 594 786 q 426 875 494 875 q 268 793 331 875 q 193 517 193 697 q 301 597 240 570 q 427 624 362 624 q 643 540 552 624 q 739 312 739 451 m 603 298 q 540 461 603 400 q 404 516 484 516 q 268 461 323 516 q 207 300 207 401 q 269 137 207 198 q 405 83 325 83 q 541 137 486 83 q 603 298 603 197 "},"‘":{x_min:1,x_max:139.890625,ha:236,o:"m 139 670 l 1 670 l 1 830 q 37 943 1 897 q 139 1011 74 990 l 139 947 q 82 900 97 940 q 68 810 68 861 l 139 810 l 139 670 "},ϊ:{x_min:-70,x_max:283,ha:361,o:"m 283 800 l 173 800 l 173 925 l 283 925 l 283 800 m 40 800 l -70 800 l -70 925 l 40 925 l 40 800 m 283 3 q 232 -10 257 -5 q 181 -15 206 -15 q 84 26 118 -15 q 41 200 41 79 l 41 737 l 166 737 l 167 215 q 171 141 167 157 q 225 101 182 101 q 247 103 238 101 q 283 112 256 104 l 283 3 "},π:{x_min:-.21875,x_max:773.21875,ha:857,o:"m 773 -7 l 707 -11 q 575 40 607 -11 q 552 174 552 77 l 552 226 l 552 626 l 222 626 l 222 0 l 97 0 l 97 626 l 0 626 l 0 737 l 773 737 l 773 626 l 676 626 l 676 171 q 695 103 676 117 q 773 90 714 90 l 773 -7 "},ά:{x_min:0,x_max:765.5625,ha:809,o:"m 765 -4 q 698 -14 726 -14 q 564 97 586 -14 q 466 7 525 40 q 337 -26 407 -26 q 88 98 186 -26 q 0 369 0 212 q 88 637 0 525 q 337 760 184 760 q 465 727 407 760 q 563 637 524 695 l 563 738 l 685 738 l 685 222 q 693 141 685 168 q 748 94 708 94 q 765 95 760 94 l 765 -4 m 584 371 q 531 562 584 485 q 360 653 470 653 q 192 566 254 653 q 135 379 135 489 q 186 181 135 261 q 358 84 247 84 q 528 176 465 84 q 584 371 584 260 m 604 1040 l 415 819 l 332 819 l 466 1040 l 604 1040 "},O:{x_min:0,x_max:958,ha:1057,o:"m 485 1041 q 834 882 702 1041 q 958 512 958 734 q 834 136 958 287 q 481 -26 702 -26 q 126 130 261 -26 q 0 504 0 279 q 127 880 0 728 q 485 1041 263 1041 m 480 98 q 731 225 638 98 q 815 504 815 340 q 733 783 815 669 q 480 912 640 912 q 226 784 321 912 q 142 504 142 670 q 226 224 142 339 q 480 98 319 98 "},n:{x_min:0,x_max:615,ha:724,o:"m 615 463 l 615 0 l 490 0 l 490 454 q 453 592 490 537 q 331 656 410 656 q 178 585 240 656 q 117 421 117 514 l 117 0 l 0 0 l 0 738 l 117 738 l 117 630 q 218 728 150 693 q 359 764 286 764 q 552 675 484 764 q 615 463 615 593 "},3:{x_min:54,x_max:737,ha:792,o:"m 737 284 q 635 55 737 141 q 399 -25 541 -25 q 156 52 248 -25 q 54 308 54 140 l 185 308 q 245 147 185 202 q 395 96 302 96 q 539 140 484 96 q 602 280 602 190 q 510 429 602 390 q 324 454 451 454 l 324 565 q 487 584 441 565 q 565 719 565 617 q 515 835 565 791 q 395 879 466 879 q 255 824 307 879 q 203 661 203 769 l 78 661 q 166 909 78 822 q 387 992 250 992 q 603 921 513 992 q 701 723 701 844 q 669 607 701 656 q 578 524 637 558 q 696 434 655 499 q 737 284 737 369 "},9:{x_min:53,x_max:739,ha:792,o:"m 739 524 q 619 94 739 241 q 362 -32 516 -32 q 150 47 242 -32 q 59 244 59 126 l 191 244 q 246 129 191 176 q 373 82 301 82 q 526 161 466 82 q 597 440 597 255 q 363 334 501 334 q 130 432 216 334 q 53 650 53 521 q 134 880 53 786 q 383 986 226 986 q 659 841 566 986 q 739 524 739 719 m 388 449 q 535 514 480 449 q 585 658 585 573 q 535 805 585 744 q 388 873 480 873 q 242 809 294 873 q 191 658 191 745 q 239 514 191 572 q 388 449 292 449 "},l:{x_min:41,x_max:166,ha:279,o:"m 166 0 l 41 0 l 41 1013 l 166 1013 l 166 0 "},"¤":{x_min:40.09375,x_max:728.796875,ha:825,o:"m 728 304 l 649 224 l 512 363 q 383 331 458 331 q 256 363 310 331 l 119 224 l 40 304 l 177 441 q 150 553 150 493 q 184 673 150 621 l 40 818 l 119 898 l 267 749 q 321 766 291 759 q 384 773 351 773 q 447 766 417 773 q 501 749 477 759 l 649 898 l 728 818 l 585 675 q 612 618 604 648 q 621 553 621 587 q 591 441 621 491 l 728 304 m 384 682 q 280 643 318 682 q 243 551 243 604 q 279 461 243 499 q 383 423 316 423 q 487 461 449 423 q 525 553 525 500 q 490 641 525 605 q 384 682 451 682 "},κ:{x_min:0,x_max:632.328125,ha:679,o:"m 632 0 l 482 0 l 225 384 l 124 288 l 124 0 l 0 0 l 0 738 l 124 738 l 124 446 l 433 738 l 596 738 l 312 466 l 632 0 "},4:{x_min:48,x_max:742.453125,ha:792,o:"m 742 243 l 602 243 l 602 0 l 476 0 l 476 243 l 48 243 l 48 368 l 476 958 l 602 958 l 602 354 l 742 354 l 742 243 m 476 354 l 476 792 l 162 354 l 476 354 "},p:{x_min:0,x_max:685,ha:786,o:"m 685 364 q 598 96 685 205 q 350 -23 504 -23 q 121 89 205 -23 l 121 -278 l 0 -278 l 0 738 l 121 738 l 121 633 q 220 726 159 691 q 351 761 280 761 q 598 636 504 761 q 685 364 685 522 m 557 371 q 501 560 557 481 q 330 651 437 651 q 162 559 223 651 q 108 366 108 479 q 162 177 108 254 q 333 87 224 87 q 502 178 441 87 q 557 371 557 258 "},"‡":{x_min:0,x_max:777,ha:835,o:"m 458 238 l 458 0 l 319 0 l 319 238 l 0 238 l 0 360 l 319 360 l 319 681 l 0 683 l 0 804 l 319 804 l 319 1015 l 458 1013 l 458 804 l 777 804 l 777 683 l 458 683 l 458 360 l 777 360 l 777 238 l 458 238 "},ψ:{x_min:0,x_max:808,ha:907,o:"m 465 -278 l 341 -278 l 341 -15 q 87 102 180 -15 q 0 378 0 210 l 0 739 l 133 739 l 133 379 q 182 195 133 275 q 341 98 242 98 l 341 922 l 465 922 l 465 98 q 623 195 563 98 q 675 382 675 278 l 675 742 l 808 742 l 808 381 q 720 104 808 213 q 466 -13 627 -13 l 465 -278 "},η:{x_min:.78125,x_max:697,ha:810,o:"m 697 -278 l 572 -278 l 572 454 q 540 587 572 536 q 425 650 501 650 q 271 579 337 650 q 206 420 206 509 l 206 0 l 81 0 l 81 489 q 73 588 81 562 q 0 644 56 644 l 0 741 q 68 755 38 755 q 158 720 124 755 q 200 630 193 686 q 297 726 234 692 q 434 761 359 761 q 620 692 544 761 q 697 516 697 624 l 697 -278 "}},cssFontWeight:"normal",ascender:1189,underlinePosition:-100,cssFontStyle:"normal",boundingBox:{yMin:-334,xMin:-111,yMax:1189,xMax:1672},resolution:1e3,original_font_information:{postscript_name:"Helvetiker-Regular",version_string:"Version 1.00 2004 initial release",vendor_url:"http://www.magenta.gr/",full_font_name:"Helvetiker",font_family_name:"Helvetiker",copyright:"Copyright (c) Μagenta ltd, 2004",description:"",trademark:"",designer:"",designer_url:"",unique_font_identifier:"Μagenta ltd:Helvetiker:22-10-104",license_url:"http://www.ellak.gr/fonts/MgOpen/license.html",license_description:'Copyright (c) 2004 by MAGENTA Ltd. All Rights Reserved.\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a copy of the fonts accompanying this license ("Fonts") and associated documentation files (the "Font Software"), to reproduce and distribute the Font Software, including without limitation the rights to use, copy, merge, publish, distribute, and/or sell copies of the Font Software, and to permit persons to whom the Font Software is furnished to do so, subject to the following conditions: \r\n\r\nThe above copyright and this permission notice shall be included in all copies of one or more of the Font Software typefaces.\r\n\r\nThe Font Software may be modified, altered, or added to, and in particular the designs of glyphs or characters in the Fonts may be modified and additional glyphs or characters may be added to the Fonts, only if the fonts are renamed to names not containing the word "MgOpen", or if the modifications are accepted for inclusion in the Font Software itself by the each appointed Administrator.\r\n\r\nThis License becomes null and void to the extent applicable to Fonts or Font Software that has been modified and is distributed under the "MgOpen" name.\r\n\r\nThe Font Software may be sold as part of a larger software package but no copy of one or more of the Font Software typefaces may be sold by itself. \r\n\r\nTHE FONT SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT OF COPYRIGHT, PATENT, TRADEMARK, OR OTHER RIGHT. IN NO EVENT SHALL MAGENTA OR PERSONS OR BODIES IN CHARGE OF ADMINISTRATION AND MAINTENANCE OF THE FONT SOFTWARE BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, INCLUDING ANY GENERAL, SPECIAL, INDIRECT, INCIDENTAL, OR CONSEQUENTIAL DAMAGES, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF THE USE OR INABILITY TO USE THE FONT SOFTWARE OR FROM OTHER DEALINGS IN THE FONT SOFTWARE.',manufacturer_name:"Μagenta ltd",font_sub_family_name:"Regular"},descender:-334,familyName:"Helvetiker",lineHeight:1522,underlineThickness:50}),function(){var e;
e=namespace("shoogl.scene.validator"),e.GLSLValidator=function(){function e(e){if(null==e)throw new Error("GLSLValidator must be created with a valid WebGL context");this.gl=e}return e.prototype.validate_vertex=function(e,t){return null==t&&(t=0),this._validate_source(e,this.gl.VERTEX_SHADER,t)},e.prototype.validate_fragment=function(e,t){return null==t&&(t=0),this._validate_source(e,this.gl.FRAGMENT_SHADER,t)},e.prototype._validate_source=function(e,t,i){var r,n,o,s;return null==i&&(i=0),s=this.gl.createShader(t),this.gl.shaderSource(s,e),this.gl.compileShader(s),r=this.gl.getShaderParameter(s,this.gl.COMPILE_STATUS),n=[],r||(o=this.gl.getShaderInfoLog(s),n=this._parse_errors(o,i)),this.gl.deleteShader(s),[r,n]},e.prototype._parse_errors=function(e,t){var i,r,n,o,s,a,l,h,c,u,d,f,m,p;if(n=[],null!=e)for(a=new RegExp("^([^:]*):([^:]*):([^:]*):(.*)"),s=e.split("\n"),f=0,m=s.length;m>f;f++)o=s[f],r=a.exec(o),null!=r&&5===r.length&&(p=a.exec(o),c=p[0],d=p[1],l=p[2],h=p[3],u=p[4],i={type:d.trim().toLowerCase(),row:new Number(h.trim())+t,column:new Number(l.trim()),text:u},n.push(i));else i={type:"error",row:1+t,column:1,text:"Something went so wrong WebGL won't even tell me. It's in a huff."},n.push(i);return n},e}()}.call(this),function(){var e;e=namespace("shoogl.scene.default_shaders"),e.vertex={_default:"basic_projection",basic_projection:{description:"Basic vertex projection with varying normal",code:"varying vec3 vNormal;\nvarying vec3 vViewPosition;\n\nvoid main() {\n  vec3 transformedNormal = normalMatrix * normal;\n  vNormal = normalize(transformedNormal);\n\n  vec4 modelViewPosition;\n  modelViewPosition = modelViewMatrix * vec4( position, 1.0 );\n  vViewPosition = -modelViewPosition.xyz;\n\n  gl_Position = projectionMatrix * modelViewPosition;\n}\n"}},e.fragment={_default:"basic_lighting",basic_lighting:{description:"Simple shader which uses the position of 1 directional light to roughly shade the model",code:"uniform vec3 uSceneMainLightPosition;\nvarying vec3 vNormal;\nvarying vec3 vViewPosition;\n\nvoid main() {\n  gl_FragColor = vec4(vec3(0.9), 1.0);\n\n  // Simplistic lighting, based around the phong code\n  // in three.js, but without the fancy bits\n  vec4 lightPosition = viewMatrix * vec4( uSceneMainLightPosition, 1.0 );\n  vec3 lightVector = lightPosition.xyz + vViewPosition;\n  lightVector = normalize( lightVector );\n\n  float lightIntensity = max(dot( normalize(vNormal), lightVector ), 0.2);\n\n  gl_FragColor.xyz = gl_FragColor.xyz * lightIntensity;\n}\n"},basic_cartoon:{description:"Basic cartoon style shader",code:"uniform vec3 uSceneMainLightPosition;\nvarying vec3 vNormal;\nvarying vec3 vViewPosition;\n\n// If enabled performs a rubbish cell shade effect\n#define TOONIFY 1\n\n// If enabled retains maximum intensity highlights\n// reducing the rest to 2 tone\n#define TOONIFY_2TONE_WITH_HIGHLIGHTS 1\n\n#if TOONIFY_2TONE_WITH_HIGHLIGHTS\n// If retaining highlights, we want to have\n// more shades to pick the highlight from. The\n// larger the number, the finer the highlights.\n#define TOONIFIY_SHADES 32.0\n#else\n// If not showing highlights, sets the\n// number of levels the colour bands used. The\n// larger the number, the more detail is retained\n#define TOONIFIY_SHADES 3.0\n#endif // TOONIFY_2TONE_WITH_HIGHLIGHTS\n\nvoid main() {\n  // Simplistic lighting, based around the phong code\n  // in three.js, but without the fancy bits\n  vec4 lightPosition = viewMatrix * vec4( uSceneMainLightPosition, 1.0 );\n  vec3 lightVector = lightPosition.xyz + vViewPosition;\n  lightVector = normalize( lightVector );\n\n  float lightIntensity = dot( normalize(vNormal), lightVector );\n\n#if TOONIFY\n  // Quantize\n  float levels = TOONIFIY_SHADES;\n  lightIntensity *= levels;\n  lightIntensity = floor(lightIntensity);\n\n#if TOONIFY_2TONE_WITH_HIGHLIGHTS\n  if ( lightIntensity < levels / 2.0 ) {\n    lightIntensity = levels / 6.0;\n  } else if ( lightIntensity < levels - 1.0 ) {\n    lightIntensity = levels / 2.0 +  levels / 8.0;\n  }\n#endif // TOONIFY_2TONE_WITH_HIGHLIGHTS\n\n  lightIntensity /= levels - 0.5;\n#endif // TOONIFY\n\n  vec3 color =  vec3(0.0, 1.0, 0.1);\n  gl_FragColor = vec4(lightIntensity * color, 1.0);\n}\n"},normal_shader:{description:"Shader which colors the fragment based on the normal.",code:"varying vec3 vNormal;\n\nvoid main() {\n  gl_FragColor = vec4(vec3(normalize(vNormal)), 1.0);\n}\n"}}}.call(this),function(){namespace("shoogl.scene").SceneItems=function(){function e(e,t,i,r){this.threejs_container=e,this.scene=t,this.camera=i,this.main_light=r}return e}()}.call(this),function(){var e,t=[].slice;e=namespace("shoogl.scene.generators.faux"),e.Connection=function(){function e(){var e,i,r,n,o;n=arguments[0],i=arguments[1],e=3<=arguments.length?t.call(arguments,2):[],this.output=n,this.input=i,this.name="Connection",o="<null>",null!=this.output&&(o=this.output.name),r="<null>",null!=this.input&&(r=this.input.name),this.description="Connecting "+o+" to "+r,this["in"]={},this.out={},null!=this.output&&null!=this.input?(this["in"]=this.output["in"],this.out=this.input.out,0===e.length?this._automatch_connection():this._create_connections(e)):this.output_to_input_map={}}return e.prototype.update=function(){var e,t,i,r;null!=this.output&&this.output.update(),r=this.output_to_input_map;for(t in r)e=r[t],i=shoogl.scene.generators.TypeTools.type_string(t),"v2"===i||"v3"===i||"v4"===i?this.input["in"][e].copy(this.output.out[t]):this.input["in"][e]=this.output.out[t];return null!=this.input?this.input.update():void 0},e.prototype._create_connections=function(e){var t,i,r,n,o,s,a,l,h,c;for(this.output_to_input_map={},t=shoogl.scene.generators.TypeTools,o=t.first_generator_output(this.output,"timestamp"),o&&e.push("timestamp:"),c=[],l=0,h=e.length;h>l;l++)s=e[l],i=s.split(":"),2===i.length?(n=i[0],r=i[1],n&&!r?(a=t.type_string(n),r=t.first_generator_input(this.input,a)):!n&&r?(a=t.type_string(r),n=t.first_generator_output(this.output,a)):n||r||(n=t.first_generator_output(this.output),a=t.type_string(n),r=t.first_generator_input(this.input,a)),null!=this.output.out[n]&&null!=this.input["in"][r]?c.push(this.output_to_input_map[n]=r):c.push(void 0)):c.push(void 0);return c},e.prototype._automatch_connection=function(){var e,t,i,r,n,o,s;this.output_to_input_map={},e=shoogl.scene.generators.TypeTools,o=this.output.out,s=[];for(i in o)n=o[i],r=e.type_string(i),t=e.first_generator_input(this.input,r),t?s.push(this.output_to_input_map[i]=t):s.push(void 0);return s},e}()}.call(this),function(){var e;e=namespace("shoogl.scene.generators"),e.TypeTools=function(){function e(){}return e.type_string=function(e){var t,i;return i="",null!=e&&(t=e.split("_"),t.length>0&&(i=t.pop())),i},e.is_array=Array.isArray||function(e){return"[object Array]"==={}.toString.call(e)},e.types_equal=function(e,t){var i,r;return i=this.type_string(e),r=this.type_string(t),null!=i&&i===r},e.first_generator_output=function(e,t){return null==t&&(t=null),null==e?"":this.first_slot(e.out,t)},e.first_generator_input=function(e,t){return null==t&&(t=null),null==e?"":this.first_slot(e["in"],t)},e.first_slot=function(e,t){var i,r,n,o,s,a;if(null==t&&(t=null),null==e)return"";r=[];for(i in e)o=e[i],r.push(i);for(r.sort(),n=null,n=null===t?new RegExp(".*"):new RegExp(".*_"+t+"$"),s=0,a=r.length;a>s;s++)if(i=r[s],n.test(i))return i;return""},e}()}.call(this),function(){var e;e=namespace("shoogl.scene.generators.standard"),e.CopyGenerator=function(){function e(){this["in"]={value_f:0},this.out={value_f:0},this.name="Copy generator",this.description="Copies a value"}return e.prototype.update=function(){return this.out.value_f=this["in"].value_f},e}()}.call(this),function(){var e;e=namespace("shoogl.scene.generators.standard"),e.CosineGenerator=function(){function e(){this["in"]={value_f:0,hertz_f:1},this.out={result_f:0},this.name="Cosine generator",this.description="Uses the input value and hertz frequency to generate a cosine output value."}return e.prototype.update=function(){return this.out.result_f=Math.cos(this["in"].value_f*this["in"].hertz_f)},e}()}.call(this),function(){var e;e=namespace("shoogl.scene.generators.standard"),e.FibonacciGenerator=function(){function e(){this["in"]={index_i:0,maximum_index_i:46},this.out={value_i:0},this.name="Fibonacci generator",this.description="Calculates the n-th Fibonacci number, where f(0) = 0 and f(1) = 1"}return e.prototype.update=function(){var e;return e=Math.floor(this["in"].index_i)%Math.floor(this["in"].maximum_index_i+1),this.out.value_i=this.fib(e)},e.prototype.fib=function(e){var t,i,r,n,o;for(i=-1,r=1,t=o=0;e>=0?e>=o:o>=e;t=e>=0?++o:--o)n=r+i,i=r,r=n;return r},e}()}.call(this),function(){var e;e=namespace("shoogl.scene.generators.standard"),e.FloatArrayDomOutputGenerator=function(){function e(){var e,t=this;this["in"]={value_f:[],last_update_timestamp:0},e=$('<span class="array"></span>'),this._summary=$("<span></span>"),this._elements=$("<div></div>"),$(e).append(this._summary),$(e).append(this._elements),$(this._summary).removeClass("hidden"),$(this._elements).addClass("hidden"),$(e).on("mousedown",function(){return $(t._summary).hasClass("hidden")?($(t._summary).removeClass("hidden"),$(t._elements).addClass("hidden")):($(t._summary).addClass("hidden"),$(t._elements).removeClass("hidden"))}),this.out={output_dom:e},this.element_doms=[],this.name="Float array DOM element",this.description="DOM element which displays an array of float values"}return e.prototype.update=function(){var e,t,i,r,n,o,s,a,l,h;if(null!=(n=this["in"])?n.value_f:void 0){if(this.element_doms.length<this["in"].value_f.length)for(this.element_doms.length=this["in"].value_f.length,e=t=0,o=this.element_doms.length;o>=0?o>t:t>o;e=o>=0?++t:--t)null==this.element_doms[e]&&(this.element_doms[e]={index_dom:$('<span class="index"></span>'),value_dom:$('<span class="number"></span>')},$(this._elements).append(this.element_doms[e].index_dom,this.element_doms[e].value_dom));else if(this.element_doms.length>this["in"].value_f.length){for(e=i=s=this["in"].value_f.length,a=this.element_doms.length;a>=s?a>i:i>a;e=a>=s?++i:--i)null!=this.element_doms[e]&&($(this.element_doms[e].index_dom).remove(),$(this.element_doms[e].value_dom).remove());this.element_doms.length=this["in"].value_f.length}if(this["in"].last_update_timestamp!==this._last_update_timestamp){for(this._last_update_timestamp=this["in"].last_update_timestamp,$(this._summary).text("Number of vertices: "+this["in"].value_f.length),h=[],e=r=0,l=this["in"].value_f.length;l>=0?l>r:r>l;e=l>=0?++r:--r)$(this.element_doms[e].index_dom).text(""+e),h.push($(this.element_doms[e].value_dom).text(""+this["in"].value_f[e].toFixed(4)+" "));return h}}},e}()}.call(this),function(){var e;e=namespace("shoogl.scene.generators.standard"),e.FloatDomOutputGenerator=function(){function e(){var e;this["in"]={value_f:0},e=$('<span class="number"></span>'),$(e).on("mouseover",function(){return $(e).addClass("mouseover")}),$(e).on("mouseout",function(){return $(e).removeClass("mouseover")}),this.out={output_dom:e},this.name="Float DOM element",this.description="DOM element which displays a float value"}return e.prototype.update=function(){var e,t;if(null!=(null!=(t=this["in"])?t.value_f:void 0))return e=$(this.out.output_dom).hasClass("mouseover")?""+this["in"].value_f:this["in"].value_f.toFixed(4),$(this.out.output_dom).text(e)},e}()}.call(this),function(){var e;e=namespace("shoogl.scene.generators.standard"),e.Object3DPositionGenerator=function(){function e(){this["in"]={source_object3d:null},this.out={result_v3:new THREE.Vector3(0,0,0)},this.name="Object3D position",this.description="Generates a Vector3 corresponding to the source object's world position"}return e.prototype.update=function(){return null!=this["in"].source_object3d?this.out.result_v3.setFromMatrixPosition(this["in"].source_object3d.matrixWorld):void 0},e}()}.call(this),function(){var e;e=namespace("shoogl.scene.generators.standard"),e.RandomGenerator=function(){function e(){this["in"]={},this.out={result_f:0},this.name="Random generator",this.description="Generates a random number between 0 (inclusive) and 1 (exclusive)"}return e.prototype.update=function(){return this.out.result_f=Math.random()},e}()}.call(this),function(){var e;e=namespace("shoogl.scene.generators.standard"),e.SineGenerator=function(){function e(){this["in"]={value_f:0,hertz_f:1},this.out={result_f:0},this.name="Sine generator",this.description="Uses the input value and hertz frequency to generate a sine output value."}return e.prototype.update=function(){return this.out.result_f=Math.sin(this["in"].value_f*this["in"].hertz_f)},e}()}.call(this),function(){var e;e=namespace("shoogl.scene.generators.standard"),e.TextVector2Generator=function(){function e(){this["in"]={value_string:"0 0"},this.out={result_v2:new THREE.Vector2(0,0)},this.name="Vector2 generator",this.description="Generates a Vector3 "}return e.prototype.update=function(){var e,t,i;if(null!=this["in"].value_string&&(e=this["in"].value_string.split(" "),2===e.length))return t=Number(e[0])||0,i=Number(e[1])||0,this.out.result_v2.set(t,i)},e}()}.call(this),function(){var e;e=namespace("shoogl.scene.generators.standard"),e.TextVector3Generator=function(){function e(){this["in"]={value_string:"0 0 0"},this.out={result_v3:new THREE.Vector3(0,0,0)},this.name="Vector3 generator",this.description="Generates a Vector3 "}return e.prototype.update=function(){var e,t,i,r;if(null!=this["in"].value_string&&(e=this["in"].value_string.split(" "),3===e.length))return t=Number(e[0])||0,i=Number(e[1])||0,r=Number(e[2])||0,this.out.result_v3.set(t,i,r)},e}()}.call(this),function(){var e;e=namespace("shoogl.scene.generators.standard"),e.TimeGenerator=function(){function e(){this["in"]={},this.out={seconds_f:0},this.name="Time generator",this.description="Seconds since 1 January 1970 00:00:00 UTC."}return e.prototype.update=function(){return this.out.seconds_f=Date.now()/1e3},e}()}.call(this),function(){var e,t=[].slice;e=namespace("shoogl.scene.generators.standard"),e.Vector3DomOutputGenerator=function(){function e(){var e;this["in"]={value_v3:new THREE.Vector3(0,0,0)},e=$("<span></span>"),$(e).addClass("threetype-v threetype-v3"),this._x_span=this._make_component_dom("x","r","number"),this._y_span=this._make_component_dom("y","g","number"),this._z_span=this._make_component_dom("z","b","number"),$(e).append(this._x_span,this._y_span,this._z_span),this.out={output_dom:e},this.name="Float DOM element",this.description="DOM element which displays a float value"}return e.prototype.update=function(){var e;if(null!=(null!=(e=this["in"])?e.value_v3:void 0))return this._format_value(this["in"].value_v3.x,this._x_span),this._format_value(this["in"].value_v3.y,this._y_span),this._format_value(this["in"].value_v3.z,this._z_span)},e.prototype._format_value=function(e,t){var i;return i=$(t).hasClass("mouseover")?""+e:e.toFixed(4),$(t).text(""+i+" ")},e.prototype._make_component_dom=function(){var e,i;return e=1<=arguments.length?t.call(arguments,0):[],i=$("<span></span>"),$(i).addClass(e.join(" ")),$(i).on("mouseover",function(){return $(i).addClass("mouseover")}),$(i).on("mouseout",function(){return $(i).removeClass("mouseover")}),i},e}()}.call(this),function(){var e;e=namespace("shoogl.scene.generators.faux"),e.VertexIndexMap=function(){function e(e,t,i){var r,n,o;this.generator=e,this.generator_input=null!=t?t:null,this.generator_output=null!=i?i:null,this.name="VertexIndexMap",this.description=null!=this.generator?"Creates a map from vertex index to value generated by "+this.generator.name:"Creates a map from vertex index to value",(null==this.generator_input||null==(null!=(n=this.generator)?n["in"][this.generator_input]:void 0))&&(this.generator_input=shoogl.scene.generators.TypeTools.first_generator_input(this.generator,"i")),null==(null!=(o=this.generator)?o["in"][this.generator_input]:void 0)&&(this.generator_input=shoogl.scene.generators.TypeTools.first_generator_input(this.generator,"f")),null!=this.generator_output&&this.generator.out[this.generator_output]||(this.generator_output=shoogl.scene.generators.TypeTools.first_generator_output(this.generator)),this["in"]={source_geometry:null,updates_per_second:0},r=shoogl.scene.generators.TypeTools.type_string(this.generator_output),this._output_name="index_map_"+r,this.out={last_update_timestamp:Date.now()},this.out[this._output_name]=[],this._next_update=0}return e.prototype.update=function(){var e,t,i,r,n,o,s,a,l;if(null!=this["in"].source_geometry&&null!=(null!=(l=this.generator)?l.out[this.generator_output]:void 0)&&(r=this["in"].source_geometry.vertices.length,n=this.out[this._output_name],t=r!==n.length,this["in"].updates_per_second>0?(this._next_update!==this._next_update&&(this._next_update=0),i=Date.now(),i>=this._next_update&&(t=!0,o=1e3*this["in"].updates_per_second,s=o-(i-this._next_update),0>s&&(s=0),s>o&&(s=o),this._next_update=i+s)):this._last_update=0,t)){for(n.length=r,e=a=0;r>=0?r>a:a>r;e=r>=0?++a:--a)this.generator_input&&(this.generator["in"][this.generator_input]=e),this.generator.update(),n[e]=this.generator.out[this.generator_output];return this.out.last_update_timestamp=Date.now()}},e}()}.call(this),function(){var e,t=[].slice;e=namespace("shoogl.scene.generators"),e.GeneratorList=function(){function e(){var e,i;i=arguments[0],e=2<=arguments.length?t.call(arguments,1):[],this.title=i,this.title||(this.title=""),this.dom=$("<div class='generator-list'><h1>"+this.title+"</h1></div>"),(null!=e?e.length:void 0)>0&&this.dom.addClass(e.join(" ")),this._dom_list=$("<ul></ul>"),$(this.dom).append(this._dom_list),this._items=[]}return e.prototype.add=function(){var e,i,r,n,o,s,a,l,h,c,u,d,f,m,p;if(f=arguments[0],h=2<=arguments.length?t.call(arguments,1):[],f&&h.length>=1){if(n=[],e=shoogl.scene.generators.faux.Connection,s=[],a=h[h.length-1],l=null,h.length>=2)for(d=m=0,p=h.length-1;p>=0?p>m:m>p;d=p>=0?++m:--m)"string"!=typeof h[d]&&(a=h[d]),"string"==typeof h[d+1]?s.push(h[d+1]):(l=h[d+1],r=function(e,t,i){i.prototype=e.prototype;var r=new i,n=e.apply(r,t);return Object(n)===n?n:r}(e,[a,l].concat(t.call(s)),function(){}),n.push(r),s.length=0);return"string"==typeof h[h.length-1]?s.push(h[h.length-1]):a=h[h.length-1],l=null,i=shoogl.scene.generators.TypeTools,c=i.first_generator_output(a,"f"),u=i.first_generator_output(a,"v3"),c?l=i.is_array(a.out[c])?new shoogl.scene.generators.standard.FloatArrayDomOutputGenerator:new shoogl.scene.generators.standard.FloatDomOutputGenerator:u?l=new shoogl.scene.generators.standard.Vector3DomOutputGenerator:(console.error("Cannot show output for "+a.name,a),console.log("Cannot show output for "+a.name,a)),o=$("<li><h2>"+f+"</h2></li>"),null!=l&&(r=function(e,t,i){i.prototype=e.prototype;var r=new i,n=e.apply(r,t);return Object(n)===n?n:r}(e,[a,l].concat(t.call(s)),function(){}),n.push(r),$(o).append(l.out.output_dom)),$(this._dom_list).append(o),this._items.push({name:f,connectors:n,generator:a,generator_output:c||u,generator_type:i.type_string(c||u)})}},e.prototype.find=function(e){var t,i,r,n;for(n=this._items,i=0,r=n.length;r>i;i++)if(t=n[i],t.name===e&&t.connectors.length>0)return t.connectors[0];return null},e.prototype.to_three_type_object=function(){var e,t,i,r;for(this._three_typed_object||(this._three_typed_object={}),r=this._items,t=0,i=r.length;i>t;t++)e=r[t],this._three_typed_object[e.name]={type:e.generator_type,value:e.generator.out[e.generator_output]};return this._three_typed_object},e.prototype.update=function(){var e,t,i,r,n,o;for(n=this._items,o=[],i=0,r=n.length;r>i;i++)t=n[i],o.push(function(){var i,r,n,o;for(n=t.connectors,o=[],i=0,r=n.length;r>i;i++)e=n[i],o.push(e.update());return o}());return o},e}()}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};namespace("shoogl.util").EventDebounce=function(){function t(t,i,r,n){this.handle_event=e(this.handle_event,this),this.observe_event=e(this.observe_event,this),this.debounce_time=n,this.callback=r,t.on(i,this.observe_event)}return t.prototype.observe_event=function(e){return null!=this.observe_event_timer&&clearTimeout(this.observe_event_timer),this.observe_event_timer=window.setTimeout(this.handle_event,this.debounce_time,e)},t.prototype.handle_event=function(e){return clearTimeout(this.observe_event_timer),this.observe_event_timer=null,this.callback(e)},t}()}.call(this),function(){var e,t,i,r,n,o=function(e,t){return function(){return e.apply(t,arguments)}};t=shoogl.util.EventDebounce,i=shoogl.scene.validator.GLSLValidator,e=shoogl.scene.default_shaders,n=shoogl.scene.SceneItems,r=namespace("shoogl.scene"),r.ThreejsScene=function(){function r(e,t,r,s,a){this.elem_root=e,this.animate_camera=null!=t?t:!1,this.light_linked_to_camera=null!=r?r:!0,this.use_phong=null!=s?s:!1,this.clear_color=null!=a?a:0,this._default_success_handler=o(this._default_success_handler,this),this._default_error_handler=o(this._default_error_handler,this),this._handle_resize=o(this._handle_resize,this),this.render=o(this.render,this),this._cached_clear_color=~this.clear_color,this._model_cache={},this._active_model=null,this._showing_loading_indicator=!1,this._loading_indicator=null,this._stats=new Stats,this._init_root(),this.validator=new i(this.renderer.getContext()),this._create_basic_scene(),$(this.elem_root).append(this._stats.domElement),this._scene_items=new n(this.elem_root,this.scene,this.camera,this.main_light),this.create_standard_generator_list(),this.create_standard_attribute_list(),this.on_validation_error=this._default_error_handler,this.on_validation_success=this._default_success_handler}return r.prototype.get_vertex_source=function(){return this.shader_material.vertexShader},r.prototype.get_fragment_source=function(){return this.shader_material.fragmentShader},r.prototype.update_shader=function(e){var t;return this._validate_shader_parameters(e)?(t=new THREE.ShaderMaterial(e),this.shader_material=t):void 0},r.prototype.render=function(e){var t;return this._stats.begin(),requestAnimationFrame(this.render),t=null!=this.last_timestamp?(e-this.last_timestamp)/1e3:1/60,this.last_timestamp=e,this._update(t),this.controls.update(),this.renderer.render(this.scene,this.camera),this._stats.end()},r.prototype.load_model=function(e){var t,i;return t=this._model_cache[this._active_model],null!=t&&this.scene.remove(t.container),this._active_model=e,i=this._model_cache[this._active_model],null==i&&(i=this._fetch_model(e)),this.scene.add(i.container)},r.prototype.warm_model_cache=function(e){var t,i,r,n;for(n=[],i=0,r=e.length;r>i;i++)t=e[i],console.log("Prefetching model: ",t),n.push(this._fetch_model(t));return n},r.prototype.create_standard_generator_list=function(){var e,t;return e=shoogl.scene.generators.standard,this.uniform_generators=new shoogl.scene.generators.GeneratorList("Uniforms"),this.uniform_generators.add("uTime",new e.TimeGenerator),this.uniform_generators.add("uTimeSine",new e.TimeGenerator,":value_f",new e.SineGenerator),t=new e.Object3DPositionGenerator,t["in"].source_object3d=this.main_light,this.uniform_generators.add("uSceneMainLightPosition",t)},r.prototype.create_standard_attribute_list=function(){var e,t,i;return t=shoogl.scene.generators.standard,e=shoogl.scene.generators.faux,this.attribute_generators=new shoogl.scene.generators.GeneratorList("Attributes"),i=new e.VertexIndexMap(new t.RandomGenerator),this.attribute_generators.add("aRandom",i),i=new e.VertexIndexMap(new t.CopyGenerator),this.attribute_generators.add("aVertexIndex",i)},r.prototype._fetch_model=function(e){var t,i,r=this;return i={container:new THREE.Object3D,mesh:null},this._model_cache[this._active_model]=i,t=new THREE.JSONLoader,t.load(e,function(e){return i.mesh=new THREE.Mesh(e,r.shader_material),i.mesh.position.set(0,0,0),i.container.add(i.mesh)}),i},r.prototype._update=function(){var e,t,i;return this.clear_color!==this._cached_clear_color&&(this._cached_clear_color=this.clear_color,this.renderer.setClearColor(this.clear_color,1)),this.light_linked_to_camera&&this.main_light.position.copy(this.camera.position),this.controls.autoRotate=this.animate_camera,this.use_phong?t=this.phong_material:(this.uniform_generators.update(),this.shader_material.uniforms=this.uniform_generators.to_three_type_object(),this.attribute_generators.update(),e=this.attribute_generators.find("aRandom"),this.attribute_generators.find("aRandom")["in"].source_geometry=this._geometry,this.attribute_generators.find("aVertexIndex")["in"].source_geometry=this._geometry,this.shader_material.attributes=this.attribute_generators.to_three_type_object(),t=this.shader_material,t.needsUpdate=!0),i=this._loading_indicator,null!=this._model_cache[this._active_model]&&null!=this._model_cache[this._active_model].mesh?(this._showing_loading_indicator&&(this._showing_loading_indicator=!1,this.scene.remove(this._loading_indicator)),i=this._model_cache[this._active_model].mesh,this._geometry=i.geometry):this._showing_loading_indicator||(this._showing_loading_indicator=!0,this._geometry=this._loading_indicator.geometry,this.scene.add(this._loading_indicator)),i.material!==t?i.material=t:void 0},r.prototype._init_root=function(){var e,i;return i=$(this.elem_root).width(),e=$(this.elem_root).height(),this.scene=new THREE.Scene,this.camera=new THREE.PerspectiveCamera(75,i/e,.1,1e3),this.renderer=new THREE.WebGLRenderer,this.renderer.setSize(i,e),$(this.elem_root).append(this.renderer.domElement),this.resize_debounce=new t($(window),"resize",this._handle_resize,250)},r.prototype._handle_resize=function(){var e,t;return t=$(this.elem_root).width(),e=$(this.elem_root).height(),this.camera.aspect=t/e,this.camera.updateProjectionMatrix(),this.renderer.setSize(t,e)},r.prototype._default_error_handler=function(e){return console.error("threejs_scene error",e)},r.prototype._default_success_handler=function(){},r.prototype._validate_shader_parameters=function(e){var t;return t=!0,t&&(t=this._validate_vertex_shader(e.vertexShader)),t&&(t=this._validate_fragment_shader(e.fragmentShader)),t&&this.on_validation_success({}),t},r.prototype._validate_vertex_shader=function(e){var t,i,r,n;return i=["precision "+this.renderer.getPrecision()+" float;","precision "+this.renderer.getPrecision()+" int;","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","attribute vec2 uv2;",""],e=i.join("\n")+e,n=this.validator.validate_vertex(e,-i.length),r=n[0],t=n[1],r||this.on_validation_error({type:"vertex",errors:t}),r},r.prototype._validate_fragment_shader=function(e){var t,i,r,n;return i=["precision "+this.renderer.getPrecision()+" float;","precision "+this.renderer.getPrecision()+" int;","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",""],e=i.join("\n")+e,n=this.validator.validate_fragment(e,-i.length),r=n[0],t=n[1],r||this.on_validation_error({type:"fragment",errors:t}),r},r.prototype._create_basic_scene=function(){return this.renderer.setClearColor(this.clear_color,1),this._create_basic_camera(),this._create_basic_lights(),this._create_basic_materials(),this._create_basic_meshes()},r.prototype._create_basic_camera=function(){var e;return e=threejs_config,this.camera.position.set(e.camera.position.x,e.camera.position.y,e.camera.position.z),this.controls=new THREE.OrbitControls(this.camera),this.controls.minDistance=e.camera.min_distance,this.controls.maxDistance=e.camera.max_distance,this.controls.autoRotateSpeed=e.camera.auto_rotate_speed,this.controls.noPan=e.camera.prevent_pan},r.prototype._create_basic_lights=function(){var e;return e=threejs_config,this.main_light=new THREE.DirectionalLight(e.light.color,e.light.intensity),this.main_light.position.copy(this.camera.position),this.scene.add(this.main_light)},r.prototype._create_basic_materials=function(){var t,i,r;return i=e.vertex[e.vertex._default],t=e.fragment[e.fragment._default],r={vertexShader:i.code,fragmentShader:t.code},this.shader_material=new THREE.ShaderMaterial(r),this.phong_material=new THREE.MeshPhongMaterial({color:5294335})},r.prototype._create_basic_meshes=function(){var e,t,i;return i={size:.25,height:.125,curveSegments:2,font:"helvetiker"},e=new THREE.TextGeometry("Loading...",i),e.computeBoundingBox(),t=e.boundingBox.max.sub(e.boundingBox.min).multiplyScalar(-.5),this._loading_indicator=new THREE.Mesh(e,this.shader_material),this._loading_indicator.position.copy(t)},r}()}.call(this),function(){var e,t,i=function(e,t){return function(){return e.apply(t,arguments)}};t=shoogl.scene.ThreejsScene,e=shoogl.util.EventDebounce,namespace("shoogl.app").ShaderLabApp=function(){function e(){this._clear_errors=i(this._clear_errors,this),this._show_errors=i(this._show_errors,this),this._handle_source_change=i(this._handle_source_change,this),this._on_pop_state=i(this._on_pop_state,this)}return e.prototype.start=function(){return this._bind_to_page(),this._create_scene(),this._create_editors(),this.editor_fragment.focus(),this.editor_fragment.gotoLine(this.editor_fragment.getSession().getLength()),this._load_from_url(),window.onpopstate=this._on_pop_state,this.threejs_scene.render()},e.prototype._on_pop_state=function(){return this._restore_state(history.state)},e.prototype._load_from_url=function(){var e,t,i;if(null!=location.search&&location.search.length>1){i=location.search.substr(1),i=decodeURIComponent(i);try{return t=JSON.parse(i),this._restore_state(t)}catch(r){return e=r,console.error("Odd URL data. Could not decode.",e)}}},e.prototype._restore_state=function(e){var t,i,r,n;if(null!=e){if(null!=e.vs&&(this.editor_vertex.setValue(e.vs,-1),null!=e.vsp&&this.editor_vertex.moveCursorToPosition(e.vsp)),null!=e.fs&&(this.editor_fragment.setValue(e.fs,-1),null!=e.fsp&&this.editor_fragment.moveCursorToPosition(e.fsp)),null!=e.tv){n=e.tv;for(i in n){r=n[i];try{this.threejs_scene[i]=r}catch(o){t=o,null===r&&(r="null"),null===i&&(i="null"),console.error("Error restoring threejs scene setting '"+i+"' to '"+r+"'")}}}return this._sync_threejs_properties_to_ui()}},e.prototype._bind_to_page=function(){return this.elem_editor_vertex=$("#editor-vertex")[0],this.elem_editor_fragment=$("#editor-fragment")[0],this.elem_view_threejs=$("#view-threejs")[0],this.elem_view_variables=$("#view-variables")[0]},e.prototype._create_editors=function(){return this.editor_vertex=this._make_editor(this.elem_editor_vertex),this.editor_vertex.setValue(this.threejs_scene.get_vertex_source(),-1),this.vertex_source_debounce=new shoogl.util.EventDebounce(this.editor_vertex,"change",this._handle_source_change,500),this.editor_fragment=this._make_editor(this.elem_editor_fragment),this.editor_fragment.setValue(this.threejs_scene.get_fragment_source(),-1),this.fragment_source_debounce=new shoogl.util.EventDebounce(this.editor_fragment,"change",this._handle_source_change,500),$(this.elem_view_variables).append(this.threejs_scene.uniform_generators.dom),$(this.elem_view_variables).append(this.threejs_scene.attribute_generators.dom)},e.prototype._make_editor=function(e){var t,i,r;return t=ace.edit(e),t.setTheme("ace/theme/vibrant_ink"),r=t.getSession(),r.setMode("ace/mode/glsl"),r.setTabSize(2),r.setUseSoftTabs(!1),ace.require("ace/ext/language_tools"),i={enableBasicAutocompletion:!0,enableSnippets:!0},t.setOptions(i),t},e.prototype._handle_source_change=function(){var e;return e={vertexShader:this.editor_vertex.getValue(),fragmentShader:this.editor_fragment.getValue()},this.threejs_scene.update_shader(e)},e.prototype._show_errors=function(e){var t;switch(e.type){case"vertex":t=this.editor_vertex;break;case"fragment":t=this.editor_fragment;break;default:return console.error("Unrecognised errors source type",e),void 0}return t.getSession().setAnnotations(e.errors)},e.prototype._clear_errors=function(){return this.editor_vertex.getSession().clearAnnotations(),this.editor_fragment.getSession().clearAnnotations(),this._push_state()},e.prototype._sync_threejs_properties_to_ui=function(){var e=this;return $("#threejs-tile input[type=checkbox]").each(function(t,i){var r;return r=$(i).prop("id"),$(i).prop("checked",!!e.threejs_scene[r])})},e.prototype._connect_threejs_properties_to_ui=function(){var e,t=this;return $("#threejs-tile input[type=checkbox]").each(function(e,i){var r;return r=$(i).prop("id"),t.threejs_scene[r]=!!$(i).prop("checked"),$(i).on("change",function(){return t.threejs_scene[r]=$(i).prop("checked")})}),e=[],$("#threejs-tile #models-selector input[type=radio]").each(function(i,r){var n,o;return n=$(r).data("model-id"),o="models/"+n+".js",e.push(o),$(r).prop("checked")&&t.threejs_scene.load_model(o),$(r).on("change",function(){return t.threejs_scene.load_model(o)})}),app_config.prefetch_models?this.threejs_scene.warm_model_cache(e):void 0
},e.prototype._create_scene=function(){return this.threejs_scene=new t(this.elem_view_threejs),this._connect_threejs_properties_to_ui(),this._sync_threejs_properties_to_ui(),this.threejs_scene.on_validation_error=this._show_errors,this.threejs_scene.on_validation_success=this._clear_errors},e.prototype._push_state=function(){var e,t,i,r,n,o;return e={vs:this.editor_vertex.getValue(),vsp:this.editor_vertex.getCursorPosition(),fs:this.editor_fragment.getValue(),fsp:this.editor_fragment.getCursorPosition(),tv:{animate_light:this.threejs_scene.animate_light,animate_model:this.threejs_scene.animate_model,use_phong:this.threejs_scene.use_phong}},r=history.state,r&&r.vs===e.vs&&e.fs===r.fs?void 0:(i=new Date,n="ShaderLab - "+i.toLocaleString(),t=JSON.stringify(e),o="?"+encodeURIComponent(t),history.pushState(e,n,o))},e}()}.call(this);